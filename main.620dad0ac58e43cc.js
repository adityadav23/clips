(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{6217:(Wt,et,W)=>{"use strict";W.d(et,{nm:()=>Ai});var E=W(2122);W(4650),W(259);var Ve=W(5861),Xe=W(9681),gt=W(4859),kt=W(2090),xt=W(1877);const X=new Map,ve={activated:!1,tokenObservers:[]},ge={initialized:!1,enabled:!1};function Le(ot){return X.get(ot)||Object.assign({},ve)}function qe(){return ge}class Yt{constructor(lt,ft,Qt,pn,Kn){if(this.operation=lt,this.retryPolicy=ft,this.getWaitDuration=Qt,this.lowerBound=pn,this.upperBound=Kn,this.pending=null,this.nextErrorWaitInterval=pn,pn>Kn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(lt){var ft=this;return(0,Ve.Z)(function*(){ft.stop();try{ft.pending=new kt.BH,yield function $t(ot){return new Promise(lt=>{setTimeout(lt,ot)})}(ft.getNextRun(lt)),ft.pending.resolve(),yield ft.pending.promise,ft.pending=new kt.BH,yield ft.operation(),ft.pending.resolve(),yield ft.pending.promise,ft.process(!0).catch(()=>{})}catch(Qt){ft.retryPolicy(Qt)?ft.process(!1).catch(()=>{}):ft.stop()}})()}getNextRun(lt){if(lt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ft=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ft}}}const Zt=new kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Gt(ot){if(!Le(ot).activated)throw Zt.create("use-before-activation",{appName:ot.name})}function Er(ot,lt){return _r.apply(this,arguments)}function _r(){return(_r=(0,Ve.Z)(function*({url:ot,body:lt},ft){const Qt={"Content-Type":"application/json"},pn=ft.getImmediate({optional:!0});if(pn){const Bi=yield pn.getHeartbeatsHeader();Bi&&(Qt["X-Firebase-Client"]=Bi)}const Kn={method:"POST",body:JSON.stringify(lt),headers:Qt};let ir,Pr;try{ir=yield fetch(ot,Kn)}catch(Bi){throw Zt.create("fetch-network-error",{originalErrorMessage:Bi?.message})}if(200!==ir.status)throw Zt.create("fetch-status-error",{httpStatus:ir.status});try{Pr=yield ir.json()}catch(Bi){throw Zt.create("fetch-parse-error",{originalErrorMessage:Bi?.message})}const oi=Pr.ttl.match(/^([\d.]+)(s)$/);if(!oi||!oi[2]||isNaN(Number(oi[1])))throw Zt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Pr.ttl}`});const Ui=1e3*Number(oi[1]),gs=Date.now();return{token:Pr.token,expireTimeMillis:gs+Ui,issuedAtTimeMillis:gs}})).apply(this,arguments)}function Xn(ot,lt){const{projectId:ft,appId:Qt,apiKey:pn}=ot.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${ft}/apps/${Qt}:exchangeDebugToken?key=${pn}`,body:{debug_token:lt}}}const pr="firebase-app-check-store";let mr=null;function yn(){return mr||(mr=new Promise((ot,lt)=>{try{const ft=indexedDB.open("firebase-app-check-database",1);ft.onsuccess=Qt=>{ot(Qt.target.result)},ft.onerror=Qt=>{var pn;lt(Zt.create("storage-open",{originalErrorMessage:null===(pn=Qt.target.error)||void 0===pn?void 0:pn.message}))},ft.onupgradeneeded=Qt=>{0===Qt.oldVersion&&Qt.target.result.createObjectStore(pr,{keyPath:"compositeKey"})}}catch(ft){lt(Zt.create("storage-open",{originalErrorMessage:ft?.message}))}}),mr)}function ur(){return(ur=(0,Ve.Z)(function*(ot,lt){const Qt=(yield yn()).transaction(pr,"readwrite"),Kn=Qt.objectStore(pr).put({compositeKey:ot,value:lt});return new Promise((ir,Pr)=>{Kn.onsuccess=oi=>{ir()},Qt.onerror=oi=>{var Ui;Pr(Zt.create("storage-set",{originalErrorMessage:null===(Ui=oi.target.error)||void 0===Ui?void 0:Ui.message}))}})})).apply(this,arguments)}const qr=new xt.Yd("@firebase/app-check");function ki(ot,lt){return(0,kt.hl)()?function br(ot,lt){return function Ei(ot,lt){return ur.apply(this,arguments)}(function ui(ot){return`${ot.options.appId}-${ot.name}`}(ot),lt)}(ot,lt).catch(ft=>{qr.warn(`Failed to write token to IndexedDB. Error: ${ft}`)}):Promise.resolve()}function li(){return qe().enabled}function wr(){return si.apply(this,arguments)}function si(){return(si=(0,Ve.Z)(function*(){const ot=qe();if(ot.enabled&&ot.token)return ot.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dn={error:"UNKNOWN_ERROR"};function zt(ot){return kt.US.encodeString(JSON.stringify(ot),!1)}function Cn(ot){return er.apply(this,arguments)}function er(){return(er=(0,Ve.Z)(function*(ot,lt=!1){const ft=ot.app;Gt(ft);const Qt=Le(ft);let Kn,pn=Qt.token;if(pn&&!Vt(pn)&&(Qt.token=void 0,pn=void 0),!pn){const oi=yield Qt.cachedTokenPromise;oi&&(Vt(oi)?pn=oi:yield ki(ft,void 0))}if(!lt&&pn&&Vt(pn))return{token:pn.token};let Pr,ir=!1;if(li()){Qt.exchangeTokenPromise||(Qt.exchangeTokenPromise=Er(Xn(ft,yield wr()),ot.heartbeatServiceProvider).finally(()=>{Qt.exchangeTokenPromise=void 0}),ir=!0);const oi=yield Qt.exchangeTokenPromise;return yield ki(ft,oi),Qt.token=oi,{token:oi.token}}try{Qt.exchangeTokenPromise||(Qt.exchangeTokenPromise=Qt.provider.getToken().finally(()=>{Qt.exchangeTokenPromise=void 0}),ir=!0),pn=yield Le(ft).exchangeTokenPromise}catch(oi){"appCheck/throttled"===oi.code?qr.warn(oi.message):qr.error(oi),Kn=oi}return pn?Kn?Pr=Vt(pn)?{token:pn.token,internalError:Kn}:Dt(Kn):(Pr={token:pn.token},Qt.token=pn,yield ki(ft,pn)):Pr=Dt(Kn),ir&&at(ft,Pr),Pr})).apply(this,arguments)}function Vn(ot,lt){const ft=Le(ot),Qt=ft.tokenObservers.filter(pn=>pn.next!==lt);0===Qt.length&&ft.tokenRefresher&&ft.tokenRefresher.isRunning()&&ft.tokenRefresher.stop(),ft.tokenObservers=Qt}function Qe(ot){const{app:lt}=ot,ft=Le(lt);let Qt=ft.tokenRefresher;Qt||(Qt=function Ye(ot){const{app:lt}=ot;return new Yt((0,Ve.Z)(function*(){let Qt;if(Qt=Le(lt).token?yield Cn(ot,!0):yield Cn(ot),Qt.error)throw Qt.error;if(Qt.internalError)throw Qt.internalError}),()=>!0,()=>{const ft=Le(lt);if(ft.token){let Qt=ft.token.issuedAtTimeMillis+.5*(ft.token.expireTimeMillis-ft.token.issuedAtTimeMillis)+3e5;return Qt=Math.min(Qt,ft.token.expireTimeMillis-3e5),Math.max(0,Qt-Date.now())}return 0},3e4,96e4)}(ot),ft.tokenRefresher=Qt),!Qt.isRunning()&&ft.isTokenAutoRefreshEnabled&&Qt.start()}function at(ot,lt){const ft=Le(ot).tokenObservers;for(const Qt of ft)try{"EXTERNAL"===Qt.type&&null!=lt.error?Qt.error(lt.error):Qt.next(lt)}catch{}}function Vt(ot){return ot.expireTimeMillis-Date.now()>0}function Dt(ot){return{token:zt(dn),error:ot}}class Tn{constructor(lt,ft){this.app=lt,this.heartbeatServiceProvider=ft}_delete(){const{tokenObservers:lt}=Le(this.app);for(const ft of lt)Vn(this.app,ft.next);return Promise.resolve()}}const vr="app-check-internal";!function di(){(0,Xe._registerComponent)(new gt.wA("app-check",ot=>function cr(ot,lt){return new Tn(ot,lt)}(ot.getProvider("app").getImmediate(),ot.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ot,lt,ft)=>{ot.getProvider(vr).initialize()})),(0,Xe._registerComponent)(new gt.wA(vr,ot=>function Br(ot){return{getToken:lt=>Cn(ot,lt),addTokenListener:lt=>function $n(ot,lt,ft,Qt){const{app:pn}=ot,Kn=Le(pn);if(Kn.tokenObservers=[...Kn.tokenObservers,{next:ft,error:Qt,type:lt}],Kn.token&&Vt(Kn.token)){const Pr=Kn.token;Promise.resolve().then(()=>{ft({token:Pr.token}),Qe(ot)}).catch(()=>{})}Kn.cachedTokenPromise.then(()=>Qe(ot))}(ot,"INTERNAL",lt),removeTokenListener:lt=>Vn(ot.app,lt)}}(ot.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.6.1")}();class Ai{constructor(){return(0,E.vb)("app-check")}}typeof window<"u"&&window},1205:(Wt,et,W)=>{"use strict";W.d(et,{zQ:()=>dt,ww:()=>wt,rT:()=>ge,f7:()=>Oe,L6:()=>X,_Q:()=>ve,lh:()=>Le,Qv:()=>xt,nw:()=>qe});var E=W(4650),ie=W(7579),ne=W(9646),F=W(9751),Ne=W(8996),Be=W(6451),ae=W(5363),He=W(3900),Ae=W(4004),De=W(6063);class Ee extends ie.x{constructor(Mt=1/0,Rt=1/0,At=De.l){super(),this._bufferSize=Mt,this._windowTime=Rt,this._timestampProvider=At,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Rt===1/0,this._bufferSize=Math.max(1,Mt),this._windowTime=Math.max(1,Rt)}next(Mt){const{isStopped:Rt,_buffer:At,_infiniteTimeWindow:Yt,_timestampProvider:$t,_windowTime:ln}=this;Rt||(At.push(Mt),!Yt&&At.push($t.now()+ln)),this._trimBuffer(),super.next(Mt)}_subscribe(Mt){this._throwIfClosed(),this._trimBuffer();const Rt=this._innerSubscribe(Mt),{_infiniteTimeWindow:At,_buffer:Yt}=this,$t=Yt.slice();for(let ln=0;ln<$t.length&&!Mt.closed;ln+=At?1:2)Mt.next($t[ln]);return this._checkFinalizedStatuses(Mt),Rt}_trimBuffer(){const{_bufferSize:Mt,_timestampProvider:Rt,_buffer:At,_infiniteTimeWindow:Yt}=this,$t=(Yt?1:2)*Mt;if(Mt<1/0&&$t<At.length&&At.splice(0,At.length-$t),!Yt){const ln=Rt.now();let Zt=0;for(let hn=1;hn<At.length&&At[hn]<=ln;hn+=2)Zt=hn;Zt&&At.splice(0,Zt+1)}}}var Me=W(3099);function $e(vt,Mt,Rt){let At,Yt=!1;return vt&&"object"==typeof vt?({bufferSize:At=1/0,windowTime:Mt=1/0,refCount:Yt=!1,scheduler:Rt}=vt):At=vt??1/0,(0,Me.B)({connector:()=>new Ee(At,Mt,Rt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Yt})}var rt=W(590),_t=W(576);function St(vt,Mt){return(0,_t.m)(Mt)?(0,He.w)(()=>vt,Mt):(0,He.w)(()=>vt)}var Fe=W(9468),ut=W(9300),st=W(2122),Et=W(2011),Ve=W(6895),Xe=W(6217),gt=W(9260);const xt=new E.OlP("angularfire2.auth.use-emulator"),X=new E.OlP("angularfire2.auth.settings"),ve=new E.OlP("angularfire2.auth.tenant-id"),ge=new E.OlP("angularfire2.auth.langugage-code"),Le=new E.OlP("angularfire2.auth.use-device-language"),Oe=new E.OlP("angularfire.auth.persistence"),qe=(vt,Mt,Rt,At,Yt,$t,ln,Zt)=>(0,Et.cc)(`${vt.name}.auth`,"AngularFireAuth",vt.name,()=>{const hn=Mt.runOutsideAngular(()=>vt.auth());if(Rt&&hn.useEmulator(...Rt),At&&(hn.tenantId=At),hn.languageCode=Yt,$t&&hn.useDeviceLanguage(),ln)for(const[Gt,rr]of Object.entries(ln))hn.settings[Gt]=rr;return Zt&&hn.setPersistence(Zt),hn},[Rt,At,Yt,$t,ln,Zt]);let dt=(()=>{class vt{constructor(Rt,At,Yt,$t,ln,Zt,hn,Gt,rr,Wn,Er,_r){const yi=new ie.x,or=(0,ne.of)(void 0).pipe((0,ae.Q)(ln.outsideAngular),(0,He.w)(()=>$t.runOutsideAngular(()=>Promise.resolve().then(W.bind(W,750)))),(0,Ae.U)(()=>(0,Et.on)(Rt,$t,At)),(0,Ae.U)(Xn=>qe(Xn,$t,Zt,Gt,rr,Wn,hn,Er)),$e({bufferSize:1,refCount:!1}));if((0,Ve.PM)(Yt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ne.of)(null);else{or.pipe((0,rt.P)()).subscribe();const Hr=or.pipe((0,He.w)(xn=>xn.getRedirectResult().then(mr=>mr,()=>null)),st.iC,$e({bufferSize:1,refCount:!1})),zr=or.pipe((0,He.w)(xn=>new F.y(mr=>({unsubscribe:$t.runOutsideAngular(()=>xn.onAuthStateChanged(yn=>mr.next(yn),yn=>mr.error(yn),()=>mr.complete()))})))),pr=or.pipe((0,He.w)(xn=>new F.y(mr=>({unsubscribe:$t.runOutsideAngular(()=>xn.onIdTokenChanged(yn=>mr.next(yn),yn=>mr.error(yn),()=>mr.complete()))}))));this.authState=Hr.pipe(St(zr),(0,Fe.R)(ln.outsideAngular),(0,ae.Q)(ln.insideAngular)),this.user=Hr.pipe(St(pr),(0,Fe.R)(ln.outsideAngular),(0,ae.Q)(ln.insideAngular)),this.idToken=this.user.pipe((0,He.w)(xn=>xn?(0,Ne.D)(xn.getIdToken()):(0,ne.of)(null))),this.idTokenResult=this.user.pipe((0,He.w)(xn=>xn?(0,Ne.D)(xn.getIdTokenResult()):(0,ne.of)(null))),this.credential=(0,Be.T)(Hr,yi,this.authState.pipe((0,ut.h)(xn=>!xn))).pipe((0,Ae.U)(xn=>xn?.user?xn:null),(0,Fe.R)(ln.outsideAngular),(0,ae.Q)(ln.insideAngular))}return(0,Et.pX)(this,or,$t,{spy:{apply:(Xn,Hr,zr)=>{(Xn.startsWith("signIn")||Xn.startsWith("createUser"))&&zr.then(pr=>yi.next(pr))}}})}}return vt.\u0275fac=function(Rt){return new(Rt||vt)(E.LFG(Et.Dh),E.LFG(Et.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(st.HU),E.LFG(xt,8),E.LFG(X,8),E.LFG(ve,8),E.LFG(ge,8),E.LFG(Le,8),E.LFG(Oe,8),E.LFG(Xe.nm,8))},vt.\u0275prov=E.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"any"}),vt})(),wt=(()=>{class vt{constructor(){gt.Z.registerVersion("angularfire",st.q4.full,"auth-compat")}}return vt.\u0275fac=function(Rt){return new(Rt||vt)},vt.\u0275mod=E.oAB({type:vt}),vt.\u0275inj=E.cJS({providers:[dt]}),vt})()},2095:(Wt,et,W)=>{"use strict";W.d(et,{ST:()=>Jy,yb:()=>V0});var E=W(4650),ie=W(4986),ne=W(9751),F=W(8996),Ne=W(9646),Be=W(2122),ae=W(8675),He=W(4482),Ae=W(5403);function De(){return(0,He.e)((o,e)=>{let n,c=!1;o.subscribe((0,Ae.x)(e,p=>{const _=n;n=p,c&&e.next([_,p]),c=!0}))})}var Ee=W(4004),Me=W(5026),$e=W(4671);function _t(o,e){return o===e}var ge,St=W(9300),Fe=W(2011),ut=W(6895),Et=(W(750),W(3942)),Ve=W(5861),Xe=W(9681),gt=W(4859),kt=W(1877),xt=W(2090),X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ve={},Le=Le||{},Oe=X||self;function qe(){}function dt(o){var e=typeof o;return"array"==(e="object"!=e?e:o?Array.isArray(o)?"array":e:"null")||"object"==e&&"number"==typeof o.length}function wt(o){var e=typeof o;return"object"==e&&null!=o||"function"==e}var Mt="closure_uid_"+(1e9*Math.random()>>>0),Rt=0;function At(o,e,n){return o.call.apply(o.bind,arguments)}function Yt(o,e,n){if(!o)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,c),o.apply(e,p)}}return function(){return o.apply(e,arguments)}}function $t(o,e,n){return($t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?At:Yt).apply(null,arguments)}function ln(o,e){var n=Array.prototype.slice.call(arguments,1);return function(){var c=n.slice();return c.push.apply(c,arguments),o.apply(this,c)}}function Zt(o,e){function n(){}n.prototype=e.prototype,o.X=e.prototype,o.prototype=new n,o.prototype.constructor=o,o.Wb=function(c,p,_){for(var C=Array(arguments.length-2),N=2;N<arguments.length;N++)C[N-2]=arguments[N];return e.prototype[p].apply(c,C)}}function hn(){this.s=this.s,this.o=this.o}hn.prototype.s=!1,hn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function vt(o){Object.prototype.hasOwnProperty.call(o,Mt)&&o[Mt]||(o[Mt]=++Rt)}(this)},hn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rr=Array.prototype.indexOf?function(o,e){return Array.prototype.indexOf.call(o,e,void 0)}:function(o,e){if("string"==typeof o)return"string"!=typeof e||1!=e.length?-1:o.indexOf(e,0);for(let n=0;n<o.length;n++)if(n in o&&o[n]===e)return n;return-1};function Wn(o){const e=o.length;if(0<e){const n=Array(e);for(let c=0;c<e;c++)n[c]=o[c];return n}return[]}function Er(o,e){for(let n=1;n<arguments.length;n++){const c=arguments[n];if(dt(c)){const p=o.length||0,_=c.length||0;o.length=p+_;for(let C=0;C<_;C++)o[p+C]=c[C]}else o.push(c)}}function _r(o,e){this.type=o,this.g=this.target=e,this.defaultPrevented=!1}_r.prototype.h=function(){this.defaultPrevented=!0};var yi=function(){if(!Oe.addEventListener||!Object.defineProperty)return!1;var o=!1,e=Object.defineProperty({},"passive",{get:function(){o=!0}});try{Oe.addEventListener("test",qe,e),Oe.removeEventListener("test",qe,e)}catch{}return o}();function or(o){return/^[\s\xa0]*$/.test(o)}var Xn=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function Hr(o,e){return o<e?-1:o>e?1:0}function zr(){var o=Oe.navigator;return o&&(o=o.userAgent)?o:""}function pr(o){return-1!=zr().indexOf(o)}function xn(o){return xn[" "](o),o}xn[" "]=qe;var zn,o,yn=pr("Opera"),xi=pr("Trident")||pr("MSIE"),br=pr("Edge"),xr=br||xi,gi=pr("Gecko")&&!(-1!=zr().toLowerCase().indexOf("webkit")&&!pr("Edge"))&&!(pr("Trident")||pr("MSIE"))&&!pr("Edge"),Ei=-1!=zr().toLowerCase().indexOf("webkit")&&!pr("Edge");function ur(){var o=Oe.document;return o?o.documentMode:void 0}e:{var Jn="",ui=(o=zr(),gi?/rv:([^\);]+)(\)|;)/.exec(o):br?/Edge\/([\d\.]+)/.exec(o):xi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):Ei?/WebKit\/(\S+)/.exec(o):yn?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(ui&&(Jn=ui?ui[1]:""),xi){var qr=ur();if(null!=qr&&qr>parseFloat(Jn)){zn=String(qr);break e}}zn=Jn}var Mn={};var sr=Oe.document&&xi&&(ur()||parseInt(zn,10))||void 0;function li(o,e){if(_r.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var n=this.type=o.type,c=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=e,e=o.relatedTarget){if(gi){e:{try{xn(e.nodeName);var p=!0;break e}catch{}p=!1}p||(e=null)}}else"mouseover"==n?e=o.fromElement:"mouseout"==n&&(e=o.toElement);this.relatedTarget=e,c?(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:wr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&li.X.h.call(this)}}Zt(li,_r);var wr={2:"touch",3:"pen",4:"mouse"};li.prototype.h=function(){li.X.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var si="closure_listenable_"+(1e6*Math.random()|0),Hi=0;function dn(o,e,n,c,p){this.listener=o,this.proxy=null,this.src=e,this.type=n,this.capture=!!c,this.ha=p,this.key=++Hi,this.ba=this.ea=!1}function zt(o){o.ba=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Cn(o,e,n){for(const c in o)e.call(n,o[c],c,o)}function er(o){const e={};for(const n in o)e[n]=o[n];return e}const $n="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vn(o,e){let n,c;for(let p=1;p<arguments.length;p++){for(n in c=arguments[p],c)o[n]=c[n];for(let _=0;_<$n.length;_++)n=$n[_],Object.prototype.hasOwnProperty.call(c,n)&&(o[n]=c[n])}}function Qe(o){this.src=o,this.g={},this.h=0}function Ye(o,e){var n=e.type;if(n in o.g){var _,c=o.g[n],p=rr(c,e);(_=0<=p)&&Array.prototype.splice.call(c,p,1),_&&(zt(e),0==o.g[n].length&&(delete o.g[n],o.h--))}}function at(o,e,n,c){for(var p=0;p<o.length;++p){var _=o[p];if(!_.ba&&_.listener==e&&_.capture==!!n&&_.ha==c)return p}return-1}Qe.prototype.add=function(o,e,n,c,p){var _=o.toString();(o=this.g[_])||(o=this.g[_]=[],this.h++);var C=at(o,e,c,p);return-1<C?(e=o[C],n||(e.ea=!1)):((e=new dn(e,this.src,_,!!c,p)).ea=n,o.push(e)),e};var Vt="closure_lm_"+(1e6*Math.random()|0),Dt={};function Tn(o,e,n,c,p){if(c&&c.once)return mi(o,e,n,c,p);if(Array.isArray(e)){for(var _=0;_<e.length;_++)Tn(o,e[_],n,c,p);return null}return n=bn(n),o&&o[si]?o.N(e,n,wt(c)?!!c.capture:!!c,p):cr(o,e,n,!1,c,p)}function cr(o,e,n,c,p,_){if(!e)throw Error("Invalid event type");var C=wt(p)?!!p.capture:!!p,N=ze(o);if(N||(o[Vt]=N=new Qe(o)),(n=N.add(e,n,c,C,_)).proxy)return n;if(c=function Br(){const e=me;return function o(n){return e.call(o.src,o.listener,n)}}(),n.proxy=c,c.src=o,c.listener=n,o.addEventListener)yi||(p=C),void 0===p&&(p=!1),o.addEventListener(e.toString(),c,p);else if(o.attachEvent)o.attachEvent(de(e.toString()),c);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(c)}return n}function mi(o,e,n,c,p){if(Array.isArray(e)){for(var _=0;_<e.length;_++)mi(o,e[_],n,c,p);return null}return n=bn(n),o&&o[si]?o.O(e,n,wt(c)?!!c.capture:!!c,p):cr(o,e,n,!0,c,p)}function pe(o,e,n,c,p){if(Array.isArray(e))for(var _=0;_<e.length;_++)pe(o,e[_],n,c,p);else c=wt(c)?!!c.capture:!!c,n=bn(n),o&&o[si]?(o=o.i,(e=String(e).toString())in o.g&&-1<(n=at(_=o.g[e],n,c,p))&&(zt(_[n]),Array.prototype.splice.call(_,n,1),0==_.length&&(delete o.g[e],o.h--))):o&&(o=ze(o))&&(e=o.g[e.toString()],o=-1,e&&(o=at(e,n,c,p)),(n=-1<o?e[o]:null)&&re(n))}function re(o){if("number"!=typeof o&&o&&!o.ba){var e=o.src;if(e&&e[si])Ye(e.i,o);else{var n=o.type,c=o.proxy;e.removeEventListener?e.removeEventListener(n,c,o.capture):e.detachEvent?e.detachEvent(de(n),c):e.addListener&&e.removeListener&&e.removeListener(c),(n=ze(e))?(Ye(n,o),0==n.h&&(n.src=null,e[Vt]=null)):zt(o)}}}function de(o){return o in Dt?Dt[o]:Dt[o]="on"+o}function me(o,e){if(o.ba)o=!0;else{e=new li(e,this);var n=o.listener,c=o.ha||o.src;o.ea&&re(o),o=n.call(c,e)}return o}function ze(o){return(o=o[Vt])instanceof Qe?o:null}var bt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(o){return"function"==typeof o?o:(o[bt]||(o[bt]=function(e){return o.handleEvent(e)}),o[bt])}function On(){hn.call(this),this.i=new Qe(this),this.P=this,this.I=null}function dr(o,e){var n,c=o.I;if(c)for(n=[];c;c=c.I)n.push(c);if(o=o.P,c=e.type||e,"string"==typeof e)e=new _r(e,o);else if(e instanceof _r)e.target=e.target||o;else{var p=e;Vn(e=new _r(c,o),p)}if(p=!0,n)for(var _=n.length-1;0<=_;_--){var C=e.g=n[_];p=Nr(C,c,!0,e)&&p}if(p=Nr(C=e.g=o,c,!0,e)&&p,p=Nr(C,c,!1,e)&&p,n)for(_=0;_<n.length;_++)p=Nr(C=e.g=n[_],c,!1,e)&&p}function Nr(o,e,n,c){if(!(e=o.i.g[String(e)]))return!0;e=e.concat();for(var p=!0,_=0;_<e.length;++_){var C=e[_];if(C&&!C.ba&&C.capture==n){var N=C.listener,ee=C.ha||C.src;C.ea&&Ye(o.i,C),p=!1!==N.call(ee,c)&&p}}return p&&!c.defaultPrevented}Zt(On,hn),On.prototype[si]=!0,On.prototype.removeEventListener=function(o,e,n,c){pe(this,o,e,n,c)},On.prototype.M=function(){if(On.X.M.call(this),this.i){var e,o=this.i;for(e in o.g){for(var n=o.g[e],c=0;c<n.length;c++)zt(n[c]);delete o.g[e],o.h--}}this.I=null},On.prototype.N=function(o,e,n,c){return this.i.add(String(o),e,!1,n,c)},On.prototype.O=function(o,e,n,c){return this.i.add(String(o),e,!0,n,c)};var Ci=Oe.JSON.stringify;function Yi(){var o=Mi;let e=null;return o.g&&(e=o.g,o.g=o.g.next,o.g||(o.h=null),e.next=null),e}var tr,fs=new class{constructor(o,e){this.i=o,this.j=e,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new Lr,o=>o.reset());class Lr{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ns(o){Oe.setTimeout(()=>{throw o},0)}function rs(o,e){tr||function Gi(){var o=Oe.Promise.resolve(void 0);tr=function(){o.then(is)}}(),Rr||(tr(),Rr=!0),Mi.add(o,e)}var Rr=!1,Mi=new class Zr{constructor(){this.h=this.g=null}add(e,n){const c=fs.get();c.set(e,n),this.h?this.h.next=c:this.g=c,this.h=c}};function is(){for(var o;o=Yi();){try{o.h.call(o.g)}catch(n){ns(n)}var e=fs;e.j(o),100>e.h&&(e.h++,o.next=e.g,e.g=o)}Rr=!1}function ps(o,e){On.call(this),this.h=o||1,this.g=e||Oe,this.j=$t(this.lb,this),this.l=Date.now()}function Dn(o){o.ca=!1,o.R&&(o.g.clearTimeout(o.R),o.R=null)}function vr(o,e,n){if("function"==typeof o)n&&(o=$t(o,n));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=$t(o.handleEvent,o)}return 2147483647<Number(e)?-1:Oe.setTimeout(o,e||0)}function di(o){o.g=vr(()=>{o.g=null,o.i&&(o.i=!1,di(o))},o.j);const e=o.h;o.h=null,o.m.apply(null,e)}Zt(ps,On),(ge=ps.prototype).ca=!1,ge.R=null,ge.lb=function(){if(this.ca){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-o):(this.R&&(this.g.clearTimeout(this.R),this.R=null),dr(this,"tick"),this.ca&&(Dn(this),this.start()))}},ge.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.M=function(){ps.X.M.call(this),Dn(this),delete this.g};class Ds extends hn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:di(this)}M(){super.M(),this.g&&(Oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(o){hn.call(this),this.h=o,this.g={}}Zt(ss,hn);var Ai=[];function os(o,e,n,c){Array.isArray(n)||(n&&(Ai[0]=n.toString()),n=Ai);for(var p=0;p<n.length;p++){var _=Tn(e,n[p],c||o.handleEvent,!1,o.h||o);if(!_)break;o.g[_.key]=_}}function vi(o){Cn(o.g,function(e,n){this.g.hasOwnProperty(n)&&re(e)},o),o.g={}}function bs(){this.g=!0}function lo(o,e,n,c){o.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wu(o,e){if(!o.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(o=0;o<n.length;o++)if(Array.isArray(n[o])){var c=n[o];if(!(2>c.length)){var p=c[1];if(Array.isArray(p)&&!(1>p.length)){var _=p[0];if("noop"!=_&&"stop"!=_&&"close"!=_)for(var C=1;C<p.length;C++)p[C]=""}}}return Ci(n)}catch{return e}}(o,n)+(c?" "+c:"")})}ss.prototype.M=function(){ss.X.M.call(this),vi(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bs.prototype.Aa=function(){this.g=!1},bs.prototype.info=function(){};var js={},xs=null;function ls(){return xs=xs||new On}function Do(o){_r.call(this,js.Pa,o)}function Os(o){const e=ls();dr(e,new Do(e))}function xo(o,e){_r.call(this,js.STAT_EVENT,o),this.stat=e}function vn(o){const e=ls();dr(e,new xo(e,o))}function ot(o,e){_r.call(this,js.Qa,o),this.size=e}function lt(o,e){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return Oe.setTimeout(function(){o()},e)}js.Pa="serverreachability",Zt(Do,_r),js.STAT_EVENT="statevent",Zt(xo,_r),js.Qa="timingevent",Zt(ot,_r);var ft={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Qt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function pn(){}function ir(){}pn.prototype.h=null;var gs,Pr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function oi(){_r.call(this,"d")}function Ui(){_r.call(this,"c")}function Bi(){}function Vr(o,e,n,c){this.l=o,this.j=e,this.m=n,this.U=c||1,this.S=new ss(this),this.O=As,this.T=new ps(o=xr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}Zt(oi,_r),Zt(Ui,_r),Zt(Bi,pn),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},gs=new Bi;var As=45e3,Yo={},ra={};function Lo(o,e,n){o.K=1,o.v=fo(Qo(e)),o.s=n,o.P=!0,Xs(o,null)}function Xs(o,e){o.F=Date.now(),Oa(o),o.A=Qo(o.v);var n=o.A,c=o.U;Array.isArray(c)||(c=[String(c)]),Vo(n.i,"t",c),o.C=0,n=o.l.H,o.h=new gu,o.g=Ea(o.l,n?e:null,!o.s),0<o.N&&(o.L=new Ds($t(o.La,o,o.g),o.N)),os(o.S,o.g,"readystatechange",o.ib),e=o.H?er(o.H):{},o.s?(o.u||(o.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",o.g.da(o.A,o.u,o.s,e)):(o.u="GET",o.g.da(o.A,o.u,null,e)),Os(),function $i(o,e,n,c,p,_){o.info(function(){if(o.g)if(_)for(var C="",N=_.split("&"),ee=0;ee<N.length;ee++){var fe=N[ee].split("=");if(1<fe.length){var ke=fe[0];fe=fe[1];var nt=ke.split("_");C=2<=nt.length&&"type"==nt[1]?C+(ke+"=")+fe+"&":C+(ke+"=redacted&")}}else C=null;else C=_;return"XMLHTTP REQ ("+c+") [attempt "+p+"]: "+e+"\n"+n+"\n"+C})}(o.j,o.u,o.A,o.m,o.U,o.s)}function Fo(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Da}function Ma(o,e,n){let p,c=!0;for(;!o.I&&o.C<n.length;){if(p=ya(o,n),p==ra){4==e&&(o.o=4,vn(14),c=!1),lo(o.j,o.m,null,"[Incomplete Response]");break}if(p==Yo){o.o=4,vn(15),lo(o.j,o.m,n,"[Invalid Chunk]"),c=!1;break}lo(o.j,o.m,p,null),zs(o,p)}Fo(o)&&p!=ra&&p!=Yo&&(o.h.g="",o.C=0),4!=e||0!=n.length||o.h.h||(o.o=1,vn(16),c=!1),o.i=o.i&&c,c?0<n.length&&!o.$&&(o.$=!0,(e=o.l).g==o&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hu(e),e.K=!0,vn(11))):(lo(o.j,o.m,n,"[Invalid Chunked Response]"),no(o),ho(o))}function ya(o,e){var n=o.C,c=e.indexOf("\n",n);return-1==c?ra:(n=Number(e.substring(n,c)),isNaN(n)?Yo:(c+=1)+n>e.length?ra:(e=e.substr(c,n),o.C=c+n,e))}function Oa(o){o.V=Date.now()+o.O,qa(o,o.O)}function qa(o,e){if(null!=o.B)throw Error("WatchDog timer not null");o.B=lt($t(o.gb,o),e)}function jo(o){o.B&&(Oe.clearTimeout(o.B),o.B=null)}function ho(o){0==o.l.G||o.I||au(o.l,o)}function no(o){jo(o);var e=o.L;e&&"function"==typeof e.na&&e.na(),o.L=null,Dn(o.T),vi(o.S),o.g&&(e=o.g,o.g=null,e.abort(),e.na())}function zs(o,e){try{var n=o.l;if(0!=n.G&&(n.g==o||go(n.h,o)))if(!o.J&&go(n.h,o)&&3==n.G){try{var c=n.Fa.g.parse(e)}catch{c=null}if(Array.isArray(c)&&3==c.length){var p=c;if(0==p[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<o.F))break e;io(n),oa(n)}Ta(n),vn(18)}}else n.Ba=p[1],0<n.Ba-n.T&&37500>p[2]&&n.L&&0==n.A&&!n.v&&(n.v=lt($t(n.cb,n),6e3));if(1>=po(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Cu(n,11)}else if((o.J||n.g==o)&&io(n),!or(e))for(p=n.Fa.g.parse(e),e=0;e<p.length;e++){let fe=p[e];if(n.T=fe[0],fe=fe[1],2==n.G)if("c"==fe[0]){n.I=fe[1],n.ka=fe[2];const ke=fe[3];null!=ke&&(n.ma=ke,n.j.info("VER="+n.ma));const nt=fe[4];null!=nt&&(n.Ca=nt,n.j.info("SVER="+n.Ca));const Pt=fe[5];null!=Pt&&"number"==typeof Pt&&0<Pt&&(n.J=c=1.5*Pt,n.j.info("backChannelRequestTimeoutMs_="+c)),c=n;const rn=o.g;if(rn){const mn=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mn){var _=c.h;_.g||-1==mn.indexOf("spdy")&&-1==mn.indexOf("quic")&&-1==mn.indexOf("h2")||(_.j=_.l,_.g=new Set,_.h&&(mo(_,_.h),_.h=null))}if(c.D){const qn=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;qn&&(c.za=qn,hi(c.F,c.D,qn))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-o.F,n.j.info("Handshake RTT: "+n.P+"ms"));var C=o;if((c=n).sa=Go(c,c.H?c.ka:null,c.V),C.J){ro(c.h,C);var N=C,ee=c.J;ee&&N.setTimeout(ee),N.B&&(jo(N),Oa(N)),c.g=C}else Ol(c);0<n.i.length&&aa(n)}else"stop"!=fe[0]&&"close"!=fe[0]||Cu(n,7);else 3==n.G&&("stop"==fe[0]||"close"==fe[0]?"stop"==fe[0]?Cu(n,7):Ho(n):"noop"!=fe[0]&&n.l&&n.l.wa(fe),n.A=0)}Os()}catch{}}function Uo(o,e){if(o.forEach&&"function"==typeof o.forEach)o.forEach(e,void 0);else if(dt(o)||"string"==typeof o)Array.prototype.forEach.call(o,e,void 0);else for(var n=function ia(o){if(o.oa&&"function"==typeof o.oa)return o.oa();if(!o.W||"function"!=typeof o.W){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(dt(o)||"string"==typeof o){var e=[];o=o.length;for(var n=0;n<o;n++)e.push(n);return e}e=[],n=0;for(const c in o)e[n++]=c;return e}}}(o),c=function Us(o){if(o.W&&"function"==typeof o.W)return o.W();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if("string"==typeof o)return o.split("");if(dt(o)){for(var e=[],n=o.length,c=0;c<n;c++)e.push(o[c]);return e}for(c in e=[],n=0,o)e[n++]=o[c];return e}(o),p=c.length,_=0;_<p;_++)e.call(void 0,c[_],n&&n[_],o)}(ge=Vr.prototype).setTimeout=function(o){this.O=o},ge.ib=function(o){o=o.target;const e=this.L;e&&3==ar(o)?e.l():this.La(o)},ge.La=function(o){try{if(o==this.g)e:{const ke=ar(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ke)&&(3!=ke||xr||this.g&&(this.h.h||this.g.fa()||Vi(this.g)))){this.I||4!=ke||7==e||Os(),jo(this);var n=this.g.aa();this.Y=n;t:if(Fo(this)){var c=Vi(this.g);o="";var p=c.length,_=4==ar(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){no(this),ho(this);var C="";break t}this.h.i=new Oe.TextDecoder}for(e=0;e<p;e++)this.h.h=!0,o+=this.h.i.decode(c[e],{stream:_&&e==p-1});c.splice(0,p),this.h.g+=o,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==n,function Cr(o,e,n,c,p,_,C){o.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+p+"]: "+e+"\n"+n+"\n"+_+" "+C})}(this.j,this.u,this.A,this.m,this.U,ke,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,ee=this.g;if((N=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!or(N)){var fe=N;break t}}fe=null}if(!(n=fe)){this.i=!1,this.o=3,vn(12),no(this),ho(this);break e}lo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zs(this,n)}this.P?(Ma(this,ke,C),xr&&this.i&&3==ke&&(os(this.S,this.T,"tick",this.hb),this.T.start())):(lo(this.j,this.m,C,null),zs(this,C)),4==ke&&no(this),this.i&&!this.I&&(4==ke?au(this.l,this):(this.i=!1,Oa(this)))}else 400==n&&0<C.indexOf("Unknown SID")?(this.o=3,vn(12)):(this.o=0,vn(13)),no(this),ho(this)}}}catch{}},ge.hb=function(){if(this.g){var o=ar(this.g),e=this.g.fa();this.C<e.length&&(jo(this),Ma(this,o,e),this.i&&4!=o&&Oa(this))}},ge.cancel=function(){this.I=!0,no(this)},ge.gb=function(){this.B=null;const o=Date.now();0<=o-this.V?(function co(o,e){o.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Os(),vn(17)),no(this),this.o=2,ho(this)):qa(this,this.V-o)};var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(o,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,o instanceof sa){this.h=void 0!==e?e:o.h,Yr(this,o.j),this.s=o.s,this.g=o.g,Js(this,o.m),this.l=o.l,e=o.i;var n=new _i;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Xo(this,n),this.o=o.o}else o&&(n=String(o).match(ms))?(this.h=!!e,Yr(this,n[1]||"",!0),this.s=Ra(n[2]||""),this.g=Ra(n[3]||"",!0),Js(this,n[4]),this.l=Ra(n[5]||"",!0),Xo(this,n[6]||"",!0),this.o=Ra(n[7]||"")):(this.h=!!e,this.i=new _i(null,this.h))}function Qo(o){return new sa(o)}function Yr(o,e,n){o.j=n?Ra(e,!0):e,o.j&&(o.j=o.j.replace(/:$/,""))}function Js(o,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);o.m=e}else o.m=null}function Xo(o,e,n){e instanceof _i?(o.i=e,function Ws(o,e){e&&!o.j&&(eo(o),o.i=null,o.g.forEach(function(n,c){var p=c.toLowerCase();c!=p&&(cs(this,c),Vo(this,p,n))},o)),o.j=e}(o.i,o.h)):(n||(e=Jo(e,qs)),o.i=new _i(e,o.h))}function hi(o,e,n){o.i.set(e,n)}function fo(o){return hi(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ra(o,e){return o?e?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jo(o,e,n){return"string"==typeof o?(o=encodeURI(o).replace(e,fi),n&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function fi(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}sa.prototype.toString=function(){var o=[],e=this.j;e&&o.push(Jo(e,_a,!0),":");var n=this.g;return(n||"file"==e)&&(o.push("//"),(e=this.s)&&o.push(Jo(e,_a,!0),"@"),o.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&o.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&o.push("/"),o.push(Jo(n,"/"==n.charAt(0)?Bo:ba,!0))),(n=this.i.toString())&&o.push("?",n),(n=this.o)&&o.push("#",Jo(n,zi)),o.join("")};var _a=/[#\/\?@]/g,ba=/[#\?:]/g,Bo=/[#\?]/g,qs=/[#\?@]/g,zi=/#/g;function _i(o,e){this.h=this.g=null,this.i=o||null,this.j=!!e}function eo(o){o.g||(o.g=new Map,o.h=0,o.i&&function Wa(o,e){if(o){o=o.split("&");for(var n=0;n<o.length;n++){var c=o[n].indexOf("="),p=null;if(0<=c){var _=o[n].substring(0,c);p=o[n].substring(c+1)}else _=o[n];e(_,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}(o.i,function(e,n){o.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function cs(o,e){eo(o),e=vs(o,e),o.g.has(e)&&(o.i=null,o.h-=o.g.get(e).length,o.g.delete(e))}function Ao(o,e){return eo(o),e=vs(o,e),o.g.has(e)}function Vo(o,e,n){cs(o,e),0<n.length&&(o.i=null,o.g.set(vs(o,e),Wn(n)),o.h+=n.length)}function vs(o,e){return e=String(e),o.j&&(e=e.toLowerCase()),e}function Ks(o){this.l=o||Ns,o=Oe.PerformanceNavigationTiming?0<(o=Oe.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(Oe.g&&Oe.g.Ga&&Oe.g.Ga()&&Oe.g.Ga().$b),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=_i.prototype).add=function(o,e){eo(this),this.i=null,o=vs(this,o);var n=this.g.get(o);return n||this.g.set(o,n=[]),n.push(e),this.h+=1,this},ge.forEach=function(o,e){eo(this),this.g.forEach(function(n,c){n.forEach(function(p){o.call(e,p,c,this)},this)},this)},ge.oa=function(){eo(this);const o=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let c=0;c<e.length;c++){const p=o[c];for(let _=0;_<p.length;_++)n.push(e[c])}return n},ge.W=function(o){eo(this);let e=[];if("string"==typeof o)Ao(this,o)&&(e=e.concat(this.g.get(vs(this,o))));else{o=Array.from(this.g.values());for(let n=0;n<o.length;n++)e=e.concat(o[n])}return e},ge.set=function(o,e){return eo(this),this.i=null,Ao(this,o=vs(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[e]),this.h+=1,this},ge.get=function(o,e){return o&&0<(o=this.W(o)).length?String(o[0]):e},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var c=e[n];const _=encodeURIComponent(String(c)),C=this.W(c);for(c=0;c<C.length;c++){var p=_;""!==C[c]&&(p+="="+encodeURIComponent(String(C[c]))),o.push(p)}}return this.i=o.join("&")};var Ns=10;function ea(o){return!!o.h||!!o.g&&o.g.size>=o.j}function po(o){return o.h?1:o.g?o.g.size:0}function go(o,e){return o.h?o.h==e:!!o.g&&o.g.has(e)}function mo(o,e){o.g?o.g.add(e):o.h=e}function ro(o,e){o.h&&o.h==e?o.h=null:o.g&&o.g.has(e)&&o.g.delete(e)}function vo(o){if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){let e=o.i;for(const n of o.g.values())e=e.concat(n.D);return e}return Wn(o.i)}function Sr(){}function mu(){this.g=new Sr}function te(o,e,n){const c=n||"";try{Uo(o,function(p,_){let C=p;wt(p)&&(C=Ci(p)),e.push(c+_+"="+encodeURIComponent(C))})}catch(p){throw e.push(c+"type="+encodeURIComponent("_badmap")),p}}function w(o,e,n,c,p){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,p(c)}catch{}}function k(o){this.l=o.ac||null,this.j=o.jb||!1}function ce(o,e){On.call(this),this.D=o,this.u=e,this.m=void 0,this.readyState=Ie,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ks.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}},Sr.prototype.stringify=function(o){return Oe.JSON.stringify(o,void 0)},Sr.prototype.parse=function(o){return Oe.JSON.parse(o,void 0)},Zt(k,pn),k.prototype.g=function(){return new ce(this.l,this.j)},k.prototype.i=function(o){return function(){return o}}({}),Zt(ce,On);var Ie=0;function tt(o){o.j.read().then(o.Ta.bind(o)).catch(o.ga.bind(o))}function Ge(o){o.readyState=4,o.l=null,o.j=null,o.A=null,Ut(o)}function Ut(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(ge=ce.prototype).open=function(o,e){if(this.readyState!=Ie)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=e,this.readyState=1,Ut(this)},ge.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(e.body=o),(this.D||Oe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ge(this)),this.readyState=Ie},ge.Wa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Oe.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tt(this)}else o.text().then(this.Va.bind(this),this.ga.bind(this))},ge.Ta=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var e=o.value?o.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!o.done}))&&(this.response=this.responseText+=e)}o.done?Ge(this):Ut(this),3==this.readyState&&tt(this)}},ge.Va=function(o){this.g&&(this.response=this.responseText=o,Ge(this))},ge.Ua=function(o){this.g&&(this.response=o,Ge(this))},ge.ga=function(){this.g&&Ge(this)},ge.setRequestHeader=function(o,e){this.v.append(o,e)},ge.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],e=this.h.entries();for(var n=e.next();!n.done;)o.push((n=n.value)[0]+": "+n[1]),n=e.next();return o.join("\r\n")},Object.defineProperty(ce.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var Fn=Oe.JSON.parse;function qt(o){On.call(this),this.headers=new Map,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Un,this.K=this.L=!1}Zt(qt,On);var Un="",$r=/^https?$/i,Qi=["POST","PUT"];function Ni(o,e){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=e,o.m=5,Ar(o),Oi(o)}function Ar(o){o.D||(o.D=!0,dr(o,"complete"),dr(o,"error"))}function Xi(o){if(o.h&&typeof Le<"u"&&(!o.C[1]||4!=ar(o)||2!=o.aa()))if(o.v&&4==ar(o))vr(o.Ha,0,o);else if(dr(o,"readystatechange"),4==ar(o)){o.h=!1;try{const N=o.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var c;if(c=0===N){var p=String(o.H).match(ms)[1]||null;if(!p&&Oe.self&&Oe.self.location){var _=Oe.self.location.protocol;p=_.substr(0,_.length-1)}c=!$r.test(p?p.toLowerCase():"")}n=c}if(n)dr(o,"complete"),dr(o,"success");else{o.m=6;try{var C=2<ar(o)?o.g.statusText:""}catch{C=""}o.j=C+" ["+o.aa()+"]",Ar(o)}}finally{Oi(o)}}}function Oi(o,e){if(o.g){Ts(o);const n=o.g,c=o.C[0]?qe:null;o.g=null,o.C=null,e||dr(o,"ready");try{n.onreadystatechange=c}catch{}}}function Ts(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(Oe.clearTimeout(o.A),o.A=null)}function ar(o){return o.g?o.g.readyState:0}function Vi(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case Un:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Is(o){let e="";return Cn(o,function(n,c){e+=c,e+=":",e+=n,e+="\r\n"}),e}function Zs(o,e,n){e:{for(c in n){var c=!1;break e}c=!0}c||(n=Is(n),"string"==typeof o?null!=n&&encodeURIComponent(String(n)):hi(o,e,n))}function Es(o,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[o]||e}function yo(o){this.Ca=0,this.i=[],this.j=new bs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Es("failFast",!1,o),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Es("baseRetryDelayMs",5e3,o),this.bb=Es("retryDelaySeedMs",1e4,o),this.$a=Es("forwardChannelMaxRetries",2,o),this.ta=Es("forwardChannelRequestTimeoutMs",2e4,o),this.ra=o&&o.xmlHttpFactory||void 0,this.Da=o&&o.Zb||!1,this.J=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.I="",this.h=new Ks(o&&o.concurrentRequestLimit),this.Fa=new mu,this.O=o&&o.fastHandshake||!1,this.N=o&&o.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=o&&o.Xb||!1,o&&o.Aa&&this.j.Aa(),o&&o.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&o&&o.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ho(o){if(Na(o),3==o.G){var e=o.U++,n=Qo(o.F);hi(n,"SID",o.I),hi(n,"RID",e),hi(n,"TYPE","terminate"),ua(o,n),(e=new Vr(o,o.j,e,void 0)).K=2,e.v=fo(Qo(n)),n=!1,Oe.navigator&&Oe.navigator.sendBeacon&&(n=Oe.navigator.sendBeacon(e.v.toString(),"")),!n&&Oe.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ea(e.l,null),e.g.da(e.v)),e.F=Date.now(),Oa(e)}Gu(o)}function oa(o){o.g&&(Hu(o),o.g.cancel(),o.g=null)}function Na(o){oa(o),o.u&&(Oe.clearTimeout(o.u),o.u=null),io(o),o.h.cancel(),o.m&&("number"==typeof o.m&&Oe.clearTimeout(o.m),o.m=null)}function aa(o){ea(o.h)||o.m||(o.m=!0,rs(o.Ja,o),o.C=0)}function ou(o,e){var n;n=e?e.m:o.U++;const c=Qo(o.F);hi(c,"SID",o.I),hi(c,"RID",n),hi(c,"AID",o.T),ua(o,c),o.o&&o.s&&Zs(c,o.o,o.s),n=new Vr(o,o.j,n,o.C+1),null===o.o&&(n.H=o.s),e&&(o.i=e.D.concat(o.i)),e=Vu(o,n,1e3),n.setTimeout(Math.round(.5*o.ta)+Math.round(.5*o.ta*Math.random())),mo(o.h,n),Lo(n,c,e)}function ua(o,e){o.ia&&Cn(o.ia,function(n,c){hi(e,c,n)}),o.l&&Uo({},function(n,c){hi(e,c,n)})}function Vu(o,e,n){n=Math.min(o.i.length,n);var c=o.l?$t(o.l.Ra,o.l,o):null;e:{var p=o.i;let _=-1;for(;;){const C=["count="+n];-1==_?0<n?(_=p[0].h,C.push("ofs="+_)):_=0:C.push("ofs="+_);let N=!0;for(let ee=0;ee<n;ee++){let fe=p[ee].h;const ke=p[ee].g;if(fe-=_,0>fe)_=Math.max(0,p[ee].h-100),N=!1;else try{te(ke,C,"req"+fe+"_")}catch{c&&c(ke)}}if(N){c=C.join("&");break e}}}return o=o.i.splice(0,n),e.D=o,c}function Ol(o){o.g||o.u||(o.Z=1,rs(o.Ia,o),o.A=0)}function Ta(o){return!(o.g||o.u||3<=o.A||(o.Z++,o.u=lt($t(o.Ia,o),Ic(o,o.A)),o.A++,0))}function Hu(o){null!=o.B&&(Oe.clearTimeout(o.B),o.B=null)}function sc(o){o.g=new Vr(o,o.j,"rpc",o.Z),null===o.o&&(o.g.H=o.s),o.g.N=0;var e=Qo(o.sa);hi(e,"RID","rpc"),hi(e,"SID",o.I),hi(e,"CI",o.L?"0":"1"),hi(e,"AID",o.T),hi(e,"TYPE","xmlhttp"),ua(o,e),o.o&&o.s&&Zs(e,o.o,o.s),o.J&&o.g.setTimeout(o.J);var n=o.g;o=o.ka,n.K=1,n.v=fo(Qo(e)),n.s=null,n.P=!0,Xs(n,o)}function io(o){null!=o.v&&(Oe.clearTimeout(o.v),o.v=null)}function au(o,e){var n=null;if(o.g==e){io(o),Hu(o),o.g=null;var c=2}else{if(!go(o.h,e))return;n=e.D,ro(o.h,e),c=1}if(0!=o.G)if(o.pa=e.Y,e.i)if(1==c){n=e.s?e.s.length:0,e=Date.now()-e.F;var p=o.C;dr(c=ls(),new ot(c,n)),aa(o)}else Ol(o);else if(3==(p=e.o)||0==p&&0<o.pa||!(1==c&&function _o(o,e){return!(po(o.h)>=o.h.j-(o.m?1:0)||(o.m?(o.i=e.D.concat(o.i),0):1==o.G||2==o.G||o.C>=(o.Za?0:o.$a)||(o.m=lt($t(o.Ja,o,e),Ic(o,o.C)),o.C++,0)))}(o,e)||2==c&&Ta(o)))switch(n&&0<n.length&&(e=o.h,e.i=e.i.concat(n)),p){case 1:Cu(o,5);break;case 4:Cu(o,10);break;case 3:Cu(o,6);break;default:Cu(o,2)}}function Ic(o,e){let n=o.Xa+Math.floor(Math.random()*o.bb);return o.l||(n*=2),n*e}function Cu(o,e){if(o.j.info("Error code "+e),2==e){var n=null;o.l&&(n=null);var c=$t(o.kb,o);n||(n=new sa("//www.google.com/images/cleardot.gif"),Oe.location&&"http"==Oe.location.protocol||Yr(n,"https"),fo(n)),function K(o,e){const n=new bs;if(Oe.Image){const c=new Image;c.onload=ln(w,n,c,"TestLoadImage: loaded",!0,e),c.onerror=ln(w,n,c,"TestLoadImage: error",!1,e),c.onabort=ln(w,n,c,"TestLoadImage: abort",!1,e),c.ontimeout=ln(w,n,c,"TestLoadImage: timeout",!1,e),Oe.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=o}else e(!1)}(n.toString(),c)}else vn(2);o.G=0,o.l&&o.l.va(e),Gu(o),Na(o)}function Gu(o){if(o.G=0,o.la=[],o.l){const e=vo(o.h);(0!=e.length||0!=o.i.length)&&(Er(o.la,e),Er(o.la,o.i),o.h.i.length=0,Wn(o.i),o.i.length=0),o.l.ua()}}function Go(o,e,n){var c=n instanceof sa?Qo(n):new sa(n,void 0);if(""!=c.g)e&&(c.g=e+"."+c.g),Js(c,c.m);else{var p=Oe.location;c=p.protocol,e=e?e+"."+p.hostname:p.hostname,p=+p.port;var _=new sa(null,void 0);c&&Yr(_,c),e&&(_.g=e),p&&Js(_,p),n&&(_.l=n),c=_}return e=o.za,(n=o.D)&&e&&hi(c,n,e),hi(c,"VER",o.ma),ua(o,c),c}function Ea(o,e,n){if(e&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qt(n&&o.Da&&!o.ra?new k({jb:!0}):o.ra)).Ka(o.H),e}function Li(){}function la(){if(xi&&!(10<=Number(sr)))throw Error("Environmental error: no available transport.")}function bo(o,e){On.call(this),this.g=new yo(e),this.l=o,this.h=e&&e.messageUrlParams||null,o=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(o?o["X-WebChannel-Content-Type"]=e.messageContentType:o={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(o?o["X-WebChannel-Client-Profile"]=e.ya:o={"X-WebChannel-Client-Profile":e.ya}),this.g.S=o,(o=e&&e.Yb)&&!or(o)&&(this.g.o=o),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!or(e)&&(this.g.D=e,null!==(o=this.h)&&e in o&&e in(o=this.h)&&delete o[e]),this.j=new Su(this)}function Ir(o){oi.call(this);var e=o.__sm__;if(e){e:{for(const n in e){o=n;break e}o=void 0}(this.i=o)&&(o=this.i,e=null!==e&&o in e?e[o]:void 0),this.data=e}else this.data=o}function Ka(){Ui.call(this),this.status=1}function Su(o){this.g=o}(ge=qt.prototype).Ka=function(o){this.L=o},ge.da=function(o,e,n,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);e=e?e.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gs.g(),this.C=function Kn(o){return o.h||(o.h=o.i())}(this.u?this.u:gs),this.g.onreadystatechange=$t(this.Ha,this);try{this.F=!0,this.g.open(e,String(o),!0),this.F=!1}catch(_){return void Ni(this,_)}if(o=n||"",n=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var p in c)n.set(p,c[p]);else{if("function"!=typeof c.keys||"function"!=typeof c.get)throw Error("Unknown input type for opt_headers: "+String(c));for(const _ of c.keys())n.set(_,c.get(_))}c=Array.from(n.keys()).find(_=>"content-type"==_.toLowerCase()),p=Oe.FormData&&o instanceof Oe.FormData,!(0<=rr(Qi,e))||c||p||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,C]of n)this.g.setRequestHeader(_,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ts(this),0<this.B&&((this.K=function Qr(o){return xi&&function wi(){return function mr(o){var e=Mn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=o(9)}(function(){let o=0;const e=Xn(String(zn)).split("."),n=Xn("9").split("."),c=Math.max(e.length,n.length);for(let C=0;0==o&&C<c;C++){var p=e[C]||"",_=n[C]||"";do{if(p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],0==p[0].length&&0==_[0].length)break;o=Hr(0==p[1].length?0:parseInt(p[1],10),0==_[1].length?0:parseInt(_[1],10))||Hr(0==p[2].length,0==_[2].length)||Hr(p[2],_[2]),p=p[3],_=_[3]}while(0==o)}return 0<=o})}()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$t(this.qa,this)):this.A=vr(this.qa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(_){Ni(this,_)}},ge.qa=function(){typeof Le<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dr(this,"timeout"),this.abort(8))},ge.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,dr(this,"complete"),dr(this,"abort"),Oi(this))},ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Oi(this,!0)),qt.X.M.call(this)},ge.Ha=function(){this.s||(this.F||this.v||this.l?Xi(this):this.fb())},ge.fb=function(){Xi(this)},ge.aa=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},ge.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ge.Sa=function(o){if(this.g){var e=this.g.responseText;return o&&0==e.indexOf(o)&&(e=e.substring(o.length)),Fn(e)}},ge.Ea=function(){return this.m},ge.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=yo.prototype).ma=8,ge.G=1,ge.Ja=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const p=new Vr(this,this.j,o,void 0);let _=this.s;if(this.S&&(_?(_=er(_),Vn(_,this.S)):_=this.S),null!==this.o||this.N||(p.H=_,_=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var c=this.i[n];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(e+=c)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Vu(this,p,e),hi(n=Qo(this.F),"RID",o),hi(n,"CVER",22),this.D&&hi(n,"X-HTTP-Session-Id",this.D),ua(this,n),_&&(this.N?e="headers="+encodeURIComponent(String(Is(_)))+"&"+e:this.o&&Zs(n,this.o,_)),mo(this.h,p),this.Ya&&hi(n,"TYPE","init"),this.O?(hi(n,"$req",e),hi(n,"SID","null"),p.Z=!0,Lo(p,n,null)):Lo(p,n,e),this.G=2}}else 3==this.G&&(o?ou(this,o):0==this.i.length||ea(this.h)||ou(this))},ge.Ia=function(){if(this.u=null,sc(this),this.$&&!(this.K||null==this.g||0>=this.P)){var o=2*this.P;this.j.info("BP detection timer enabled: "+o),this.B=lt($t(this.eb,this),o)}},ge.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,vn(10),oa(this),sc(this))},ge.cb=function(){null!=this.v&&(this.v=null,oa(this),Ta(this),vn(19))},ge.kb=function(o){o?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))},(ge=Li.prototype).xa=function(){},ge.wa=function(){},ge.va=function(){},ge.ua=function(){},ge.Ra=function(){},la.prototype.g=function(o,e){return new bo(o,e)},Zt(bo,On),bo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var o=this.g,e=this.l,n=this.h||void 0;vn(0),o.V=e,o.ia=n||{},o.L=o.Y,o.F=Go(o,null,o.V),aa(o)},bo.prototype.close=function(){Ho(this.g)},bo.prototype.u=function(o){var e=this.g;if("string"==typeof o){var n={};n.__data__=o,o=n}else this.v&&((n={}).__data__=Ci(o),o=n);e.i.push(new class{constructor(o,e){this.h=o,this.g=e}}(e.ab++,o)),3==e.G&&aa(e)},bo.prototype.M=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,bo.X.M.call(this)},Zt(Ir,oi),Zt(Ka,Ui),Zt(Su,Li),Su.prototype.xa=function(){dr(this.g,"a")},Su.prototype.wa=function(o){dr(this.g,new Ir(o))},Su.prototype.va=function(o){dr(this.g,new Ka)},Su.prototype.ua=function(){dr(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,bo.prototype.send=bo.prototype.u,bo.prototype.open=bo.prototype.m,bo.prototype.close=bo.prototype.close,ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,Qt.COMPLETE="complete",ir.EventType=Pr,Pr.OPEN="a",Pr.CLOSE="b",Pr.ERROR="c",Pr.MESSAGE="d",On.prototype.listen=On.prototype.N,qt.prototype.listenOnce=qt.prototype.O,qt.prototype.getLastError=qt.prototype.Oa,qt.prototype.getLastErrorCode=qt.prototype.Ea,qt.prototype.getStatus=qt.prototype.aa,qt.prototype.getResponseJson=qt.prototype.Sa,qt.prototype.getResponseText=qt.prototype.fa,qt.prototype.send=qt.prototype.da,qt.prototype.setWithCredentials=qt.prototype.Ka;var V=ve.createWebChannelTransport=function(){return new la},ue=ve.getStatEventTarget=function(){return ls()},G=ve.ErrorCode=ft,Te=ve.EventType=Qt,Je=ve.Event=js,Nt=ve.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},en=ve.FetchXmlHttpFactory=k,Nn=ve.WebChannel=ir,ai=ve.XhrIo=qt;const Gr="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Fr="9.16.0";const Xr=new kt.Yd("@firebase/firestore");function bi(){return Xr.logLevel}function cn(o,...e){if(Xr.logLevel<=kt.in.DEBUG){const n=e.map(Io);Xr.debug(`Firestore (${Fr}): ${o}`,...n)}}function Si(o,...e){if(Xr.logLevel<=kt.in.ERROR){const n=e.map(Io);Xr.error(`Firestore (${Fr}): ${o}`,...n)}}function ci(o,...e){if(Xr.logLevel<=kt.in.WARN){const n=e.map(Io);Xr.warn(`Firestore (${Fr}): ${o}`,...n)}}function Io(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch{return o}}function In(o="Unexpected state"){const e=`FIRESTORE (${Fr}) INTERNAL ASSERTION FAILED: `+o;throw Si(e),new Error(e)}function Rn(o,e){o||In()}function kn(o,e){return o}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class an extends xt.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ws{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Za{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $u{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kr.UNAUTHENTICATED))}shutdown(){}}class xu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class al{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var c=this;let p=this.i;const _=fe=>this.i!==p?(p=this.i,n(fe)):Promise.resolve();let C=new ws;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new ws,e.enqueueRetryable(()=>_(this.currentUser))};const N=()=>{const fe=C;e.enqueueRetryable((0,Ve.Z)(function*(){yield fe.promise,yield _(c.currentUser)}))},ee=fe=>{cn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=fe,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(fe=>ee(fe)),setTimeout(()=>{if(!this.auth){const fe=this.t.getImmediate({optional:!0});fe?ee(fe):(cn("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new ws)}},0),N()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(c=>this.i!==e?(cn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):c?(Rn("string"==typeof c.accessToken),new Za(c.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rn(null===e||"string"==typeof e),new kr(e)}}class oc{constructor(e,n,c,p){this.h=e,this.l=n,this.m=c,this.g=p,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Pc{constructor(e,n,c,p){this.h=e,this.l=n,this.m=c,this.g=p}getToken(){return Promise.resolve(new oc(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ys{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Po{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const c=_=>{null!=_.error&&cn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${_.error.message}`);const C=_.token!==this.A;return this.A=_.token,cn("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?n(_.token):Promise.resolve()};this.o=_=>{e.enqueueRetryable(()=>c(_))};const p=_=>{cn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=_,this.appCheck.addTokenListener(this.o)};this.T.onInit(_=>p(_)),setTimeout(()=>{if(!this.appCheck){const _=this.T.getImmediate({optional:!0});_?p(_):cn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Rn("string"==typeof n.token),this.A=n.token,new Ys(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ya(o){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(o);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let c=0;c<o;c++)n[c]=Math.floor(256*Math.random());return n}class Au{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let c="";for(;c.length<20;){const p=Ya(40);for(let _=0;_<p.length;++_)c.length<20&&p[_]<n&&(c+=e.charAt(p[_]%e.length))}return c}}function Mr(o,e){return o<e?-1:o>e?1:0}function La(o,e,n){return o.length===e.length&&o.every((c,p)=>n(c,e[p]))}function sd(o){return o+"\0"}class Ji{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new an(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new an(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new an(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new an(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ji.fromMillis(Date.now())}static fromDate(e){return Ji.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),c=Math.floor(1e6*(e-1e3*n));return new Ji(n,c)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mr(this.nanoseconds,e.nanoseconds):Mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bn(e)}static min(){return new Bn(new Ji(0,0))}static max(){return new Bn(new Ji(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ls{constructor(e,n,c){void 0===n?n=0:n>e.length&&In(),void 0===c?c=e.length-n:c>e.length-n&&In(),this.segments=e,this.offset=n,this.len=c}get length(){return this.len}isEqual(e){return 0===Ls.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ls?e.forEach(c=>{n.push(c)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,c=this.limit();n<c;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const c=Math.min(e.length,n.length);for(let p=0;p<c;p++){const _=e.get(p),C=n.get(p);if(_<C)return-1;if(_>C)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class jr extends Ls{construct(e,n,c){return new jr(e,n,c)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const c of e){if(c.indexOf("//")>=0)throw new an(Ht.INVALID_ARGUMENT,`Invalid segment (${c}). Paths must not contain // in them.`);n.push(...c.split("/").filter(p=>p.length>0))}return new jr(n)}static emptyPath(){return new jr([])}}const Fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ys extends Ls{construct(e,n,c){return new ys(e,n,c)}static isValidIdentifier(e){return Fa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ys.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ys(["__name__"])}static fromServerFormat(e){const n=[];let c="",p=0;const _=()=>{if(0===c.length)throw new an(Ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(c),c=""};let C=!1;for(;p<e.length;){const N=e[p];if("\\"===N){if(p+1===e.length)throw new an(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const ee=e[p+1];if("\\"!==ee&&"."!==ee&&"`"!==ee)throw new an(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);c+=ee,p+=2}else"`"===N?(C=!C,p++):"."!==N||C?(c+=N,p++):(_(),p++)}if(_(),C)throw new an(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ys(n)}static emptyPath(){return new ys([])}}class En{constructor(e){this.path=e}static fromPath(e){return new En(jr.fromString(e))}static fromName(e){return new En(jr.fromString(e).popFirst(5))}static empty(){return new En(jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return jr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new En(new jr(e.slice()))}}class Qs{constructor(e,n,c,p){this.indexId=e,this.collectionGroup=n,this.fields=c,this.indexState=p}}function Fi(o){return o.fields.find(e=>2===e.kind)}function Ps(o){return o.fields.filter(e=>2!==e.kind)}Qs.UNKNOWN_ID=-1;class oo{constructor(e,n){this.fieldPath=e,this.kind=n}}class Qa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Qa(0,ko.min())}}function wa(o,e){const n=o.toTimestamp().seconds,c=o.toTimestamp().nanoseconds+1,p=Bn.fromTimestamp(1e9===c?new Ji(n+1,0):new Ji(n,c));return new ko(p,En.empty(),e)}function kc(o){return new ko(o.readTime,o.key,-1)}class ko{constructor(e,n,c){this.readTime=e,this.documentKey=n,this.largestBatchId=c}static min(){return new ko(Bn.min(),En.empty(),-1)}static max(){return new ko(Bn.max(),En.empty(),-1)}}function Ca(o,e){let n=o.readTime.compareTo(e.readTime);return 0!==n?n:(n=En.comparator(o.documentKey,e.documentKey),0!==n?n:Mr(o.largestBatchId,e.largestBatchId))}const Iu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function lu(o){return ca.apply(this,arguments)}function ca(){return ca=(0,Ve.Z)(function*(o){if(o.code!==Ht.FAILED_PRECONDITION||o.message!==Iu)throw o;cn("LocalStore","Unexpectedly lost primary lease")}),ca.apply(this,arguments)}class Ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&In(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ft((c,p)=>{this.nextCallback=_=>{this.wrapSuccess(e,_).next(c,p)},this.catchCallback=_=>{this.wrapFailure(n,_).next(c,p)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ft?n:Ft.resolve(n)}catch(n){return Ft.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ft.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ft.reject(n)}static resolve(e){return new Ft((n,c)=>{n(e)})}static reject(e){return new Ft((n,c)=>{c(e)})}static waitFor(e){return new Ft((n,c)=>{let p=0,_=0,C=!1;e.forEach(N=>{++p,N.next(()=>{++_,C&&_===p&&n()},ee=>c(ee))}),C=!0,_===p&&n()})}static or(e){let n=Ft.resolve(!1);for(const c of e)n=n.next(p=>p?Ft.resolve(p):c());return n}static forEach(e,n){const c=[];return e.forEach((p,_)=>{c.push(n.call(this,p,_))}),this.waitFor(c)}static mapArray(e,n){return new Ft((c,p)=>{const _=e.length,C=new Array(_);let N=0;for(let ee=0;ee<_;ee++){const fe=ee;n(e[fe]).next(ke=>{C[fe]=ke,++N,N===_&&c(C)},ke=>p(ke))}})}static doWhile(e,n){return new Ft((c,p)=>{const _=()=>{!0===e()?n().next(()=>{_()},p):c()};_()})}}class ul{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new ws,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new cu(e,n.error)):this.P.resolve()},this.transaction.onerror=c=>{const p=Rl(c.target.error);this.P.reject(new cu(e,p))}}static open(e,n,c,p){try{return new ul(n,e.transaction(p,c))}catch(_){throw new cu(n,_)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(cn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new od(n)}}class ja{constructor(e,n,c){this.name=e,this.version=n,this.S=c,12.2===ja.D((0,xt.z$)())&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return cn("SimpleDb","Removing database:",e),qi(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,xt.hl)())return!1;if(ja.N())return!0;const e=(0,xt.z$)(),n=ja.D(e),c=0<n&&n<10,p=ja.k(e),_=0<p&&p<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||c||_)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),c=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(c)}static k(e){const n=e.match(/Android ([\d.]+)/i),c=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(c)}F(e){var n=this;return(0,Ve.Z)(function*(){return n.db||(cn("SimpleDb","Opening database:",n.name),n.db=yield new Promise((c,p)=>{const _=indexedDB.open(n.name,n.version);_.onsuccess=C=>{c(C.target.result)},_.onblocked=()=>{p(new cu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=C=>{const N=C.target.error;p("VersionError"===N.name?new an(Ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new an(Ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new cu(e,N))},_.onupgradeneeded=C=>{cn("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',C.oldVersion),n.S.$(C.target.result,_.transaction,C.oldVersion,n.version).next(()=>{cn("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=c=>n.B(c)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,c,p){var _=this;return(0,Ve.Z)(function*(){const C="readonly"===n;let N=0;for(;;){++N;try{_.db=yield _.F(e);const ee=ul.open(_.db,e,C?"readonly":"readwrite",c),fe=p(ee).next(ke=>(ee.V(),ke)).catch(ke=>(ee.abort(ke),Ft.reject(ke))).toPromise();return fe.catch(()=>{}),yield ee.v,fe}catch(ee){const fe=ee,ke="FirebaseError"!==fe.name&&N<3;if(cn("SimpleDb","Transaction failed with error:",fe.message,"Retrying:",ke),_.close(),!ke)return Promise.reject(fe)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class as{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return qi(this.q.delete())}}class cu extends an{constructor(e,n){super(Ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ds(o){return"IndexedDbTransactionError"===o.name}class od{constructor(e){this.store=e}put(e,n){let c;return void 0!==n?(cn("SimpleDb","PUT",this.store.name,e,n),c=this.store.put(n,e)):(cn("SimpleDb","PUT",this.store.name,"<auto-key>",e),c=this.store.put(e)),qi(c)}add(e){return cn("SimpleDb","ADD",this.store.name,e,e),qi(this.store.add(e))}get(e){return qi(this.store.get(e)).next(n=>(void 0===n&&(n=null),cn("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return cn("SimpleDb","DELETE",this.store.name,e),qi(this.store.delete(e))}count(){return cn("SimpleDb","COUNT",this.store.name),qi(this.store.count())}W(e,n){const c=this.options(e,n);if(c.index||"function"!=typeof this.store.getAll){const p=this.cursor(c),_=[];return this.H(p,(C,N)=>{_.push(N)}).next(()=>_)}{const p=this.store.getAll(c.range);return new Ft((_,C)=>{p.onerror=N=>{C(N.target.error)},p.onsuccess=N=>{_(N.target.result)}})}}J(e,n){const c=this.store.getAll(e,null===n?void 0:n);return new Ft((p,_)=>{c.onerror=C=>{_(C.target.error)},c.onsuccess=C=>{p(C.target.result)}})}Y(e,n){cn("SimpleDb","DELETE ALL",this.store.name);const c=this.options(e,n);c.X=!1;const p=this.cursor(c);return this.H(p,(_,C,N)=>N.delete())}Z(e,n){let c;n?c=e:(c={},n=e);const p=this.cursor(c);return this.H(p,n)}tt(e){const n=this.cursor({});return new Ft((c,p)=>{n.onerror=_=>{const C=Rl(_.target.error);p(C)},n.onsuccess=_=>{const C=_.target.result;C?e(C.primaryKey,C.value).next(N=>{N?C.continue():c()}):c()}})}H(e,n){const c=[];return new Ft((p,_)=>{e.onerror=C=>{_(C.target.error)},e.onsuccess=C=>{const N=C.target.result;if(!N)return void p();const ee=new as(N),fe=n(N.primaryKey,N.value,ee);if(fe instanceof Ft){const ke=fe.catch(nt=>(ee.done(),Ft.reject(nt)));c.push(ke)}ee.isDone?p():null===ee.G?N.continue():N.continue(ee.G)}}).next(()=>Ft.waitFor(c))}options(e,n){let c;return void 0!==e&&("string"==typeof e?c=e:n=e),{index:c,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const c=this.store.index(e.index);return e.X?c.openKeyCursor(e.range,n):c.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function qi(o){return new Ft((e,n)=>{o.onsuccess=c=>{e(c.target.result)},o.onerror=c=>{const p=Rl(c.target.error);n(p)}})}let Mc=!1;function Rl(o){const e=ja.D((0,xt.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(n)>=0){const c=new an("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mc||(Mc=!0,setTimeout(()=>{throw c},0)),c}}return o}class Oc{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var n=this;cn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ve.Z)(function*(){n.task=null;try{cn("IndexBackiller",`Documents written: ${yield n.et.st()}`)}catch(c){ds(c)?cn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",c):yield lu(c)}yield n.nt(6e4)}))}}class ll{constructor(e,n){this.localStore=e,this.persistence=n}st(e=50){var n=this;return(0,Ve.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",c=>n.it(c,e))})()}it(e,n){const c=new Set;let p=n,_=!0;return Ft.doWhile(()=>!0===_&&p>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!c.has(C))return cn("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,p).next(N=>{p-=N,c.add(C)});_=!1})).next(()=>n-p)}rt(e,n,c){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(p=>this.localStore.localDocuments.getNextDocuments(e,n,p,c).next(_=>{const C=_.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(p,_)).next(N=>(cn("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,n,N))).next(()=>C.size)}))}ot(e,n){let c=e;return n.changes.forEach((p,_)=>{const C=kc(_);Ca(C,c)>0&&(c=C)}),new ko(c.readTime,c.documentKey,Math.max(n.batchId,e.largestBatchId))}}let nn=(()=>{class o{constructor(n,c){this.previousValue=n,c&&(c.sequenceNumberHandler=p=>this.ut(p),this.ct=p=>c.writeSequenceNumber(p))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}return o.at=-1,o})();class M{constructor(e,n,c,p,_,C,N,ee){this.databaseId=e,this.appId=n,this.persistenceKey=c,this.host=p,this.ssl=_,this.forceLongPolling=C,this.autoDetectLongPolling=N,this.useFetchStreams=ee}}class R{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new R("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof R&&e.projectId===this.projectId&&e.database===this.database}}function x(o){let e=0;for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&e++;return e}function B(o,e){for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&e(n,o[n])}function J(o){for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e))return!1;return!0}function ye(o){return null==o}function Se(o){return 0===o&&1/o==-1/0}function mt(o){return"number"==typeof o&&Number.isInteger(o)&&!Se(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new wn(n)}static fromUint8Array(e){const n=function(c){let p="";for(let _=0;_<c.length;++_)p+=String.fromCharCode(c[_]);return p}(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let c=0;c<e.length;c++)n[c]=e.charCodeAt(c);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const lr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(o){if(Rn(!!o),"string"==typeof o){let e=0;const n=lr.exec(o);if(Rn(!!n),n[1]){let p=n[1];p=(p+"000000000").substr(0,9),e=Number(p)}const c=new Date(o);return{seconds:Math.floor(c.getTime()/1e3),nanos:e}}return{seconds:Jr(o.seconds),nanos:Jr(o.nanos)}}function Jr(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function da(o){return"string"==typeof o?wn.fromBase64String(o):wn.fromUint8Array(o)}function Wi(o){var e,n;return"server_timestamp"===(null===(n=((null===(e=o?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mo(o){const e=o.mapValue.fields.__previous_value__;return Wi(e)?Mo(e):e}function Cs(o){const e=ni(o.mapValue.fields.__local_write_time__.timestampValue);return new Ji(e.seconds,e.nanos)}const ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wu={nullValue:"NULL_VALUE"};function vu(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Wi(o)?4:Tt(o)?9007199254740991:10:In()}function $o(o,e){if(o===e)return!0;const n=vu(o);if(n!==vu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===e.booleanValue;case 4:return Cs(o).isEqual(Cs(e));case 3:return function(c,p){if("string"==typeof c.timestampValue&&"string"==typeof p.timestampValue&&c.timestampValue.length===p.timestampValue.length)return c.timestampValue===p.timestampValue;const _=ni(c.timestampValue),C=ni(p.timestampValue);return _.seconds===C.seconds&&_.nanos===C.nanos}(o,e);case 5:return o.stringValue===e.stringValue;case 6:return p=e,da(o.bytesValue).isEqual(da(p.bytesValue));case 7:return o.referenceValue===e.referenceValue;case 8:return function(c,p){return Jr(c.geoPointValue.latitude)===Jr(p.geoPointValue.latitude)&&Jr(c.geoPointValue.longitude)===Jr(p.geoPointValue.longitude)}(o,e);case 2:return function(c,p){if("integerValue"in c&&"integerValue"in p)return Jr(c.integerValue)===Jr(p.integerValue);if("doubleValue"in c&&"doubleValue"in p){const _=Jr(c.doubleValue),C=Jr(p.doubleValue);return _===C?Se(_)===Se(C):isNaN(_)&&isNaN(C)}return!1}(o,e);case 9:return La(o.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:return function(c,p){const _=c.mapValue.fields||{},C=p.mapValue.fields||{};if(x(_)!==x(C))return!1;for(const N in _)if(_.hasOwnProperty(N)&&(void 0===C[N]||!$o(_[N],C[N])))return!1;return!0}(o,e);default:return In()}var p}function cl(o,e){return void 0!==(o.values||[]).find(n=>$o(n,e))}function ha(o,e){if(o===e)return 0;const n=vu(o),c=vu(e);if(n!==c)return Mr(n,c);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mr(o.booleanValue,e.booleanValue);case 2:return function(p,_){const C=Jr(p.integerValue||p.doubleValue),N=Jr(_.integerValue||_.doubleValue);return C<N?-1:C>N?1:C===N?0:isNaN(C)?isNaN(N)?0:-1:1}(o,e);case 3:return Qd(o.timestampValue,e.timestampValue);case 4:return Qd(Cs(o),Cs(e));case 5:return Mr(o.stringValue,e.stringValue);case 6:return function(p,_){const C=da(p),N=da(_);return C.compareTo(N)}(o.bytesValue,e.bytesValue);case 7:return function(p,_){const C=p.split("/"),N=_.split("/");for(let ee=0;ee<C.length&&ee<N.length;ee++){const fe=Mr(C[ee],N[ee]);if(0!==fe)return fe}return Mr(C.length,N.length)}(o.referenceValue,e.referenceValue);case 8:return function(p,_){const C=Mr(Jr(p.latitude),Jr(_.latitude));return 0!==C?C:Mr(Jr(p.longitude),Jr(_.longitude))}(o.geoPointValue,e.geoPointValue);case 9:return function(p,_){const C=p.values||[],N=_.values||[];for(let ee=0;ee<C.length&&ee<N.length;++ee){const fe=ha(C[ee],N[ee]);if(fe)return fe}return Mr(C.length,N.length)}(o.arrayValue,e.arrayValue);case 10:return function(p,_){if(p===ta.mapValue&&_===ta.mapValue)return 0;if(p===ta.mapValue)return 1;if(_===ta.mapValue)return-1;const C=p.fields||{},N=Object.keys(C),ee=_.fields||{},fe=Object.keys(ee);N.sort(),fe.sort();for(let ke=0;ke<N.length&&ke<fe.length;++ke){const nt=Mr(N[ke],fe[ke]);if(0!==nt)return nt;const Pt=ha(C[N[ke]],ee[fe[ke]]);if(0!==Pt)return Pt}return Mr(N.length,fe.length)}(o.mapValue,e.mapValue);default:throw In()}}function Qd(o,e){if("string"==typeof o&&"string"==typeof e&&o.length===e.length)return Mr(o,e);const n=ni(o),c=ni(e),p=Mr(n.seconds,c.seconds);return 0!==p?p:Mr(n.nanos,c.nanos)}function Nl(o){return Ll(o)}function Ll(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(c){const p=ni(c);return`time(${p.seconds},${p.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?da(o.bytesValue).toBase64():"referenceValue"in o?En.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(e=o.geoPointValue).latitude},${e.longitude})`:"arrayValue"in o?function(c){let p="[",_=!0;for(const C of c.values||[])_?_=!1:p+=",",p+=Ll(C);return p+"]"}(o.arrayValue):"mapValue"in o?function(c){const p=Object.keys(c.fields||{}).sort();let _="{",C=!0;for(const N of p)C?C=!1:_+=",",_+=`${N}:${Ll(c.fields[N])}`;return _+"}"}(o.mapValue):In();var e}function yu(o,e){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${e.path.canonicalString()}`}}function ac(o){return!!o&&"integerValue"in o}function Pu(o){return!!o&&"arrayValue"in o}function q(o){return!!o&&"nullValue"in o}function Q(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function be(o){return!!o&&"mapValue"in o}function Ke(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const e={mapValue:{fields:{}}};return B(o.mapValue.fields,(n,c)=>e.mapValue.fields[n]=Ke(c)),e}if(o.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(o.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ke(o.arrayValue.values[n]);return e}return Object.assign({},o)}function Tt(o){return"__max__"===(((o.mapValue||{}).fields||{}).__type__||{}).stringValue}function Lt(o){return"nullValue"in o?Wu:"booleanValue"in o?{booleanValue:!1}:"integerValue"in o||"doubleValue"in o?{doubleValue:NaN}:"timestampValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in o?{stringValue:""}:"bytesValue"in o?{bytesValue:""}:"referenceValue"in o?yu(R.empty(),En.empty()):"geoPointValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in o?{arrayValue:{}}:"mapValue"in o?{mapValue:{}}:In()}function fn(o){return"nullValue"in o?{booleanValue:!1}:"booleanValue"in o?{doubleValue:NaN}:"integerValue"in o||"doubleValue"in o?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in o?{stringValue:""}:"stringValue"in o?{bytesValue:""}:"bytesValue"in o?yu(R.empty(),En.empty()):"referenceValue"in o?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in o?{arrayValue:{}}:"arrayValue"in o?{mapValue:{}}:"mapValue"in o?ta:In()}function Zn(o,e){const n=ha(o.value,e.value);return 0!==n?n:o.inclusive&&!e.inclusive?-1:!o.inclusive&&e.inclusive?1:0}function fr(o,e){const n=ha(o.value,e.value);return 0!==n?n:o.inclusive&&!e.inclusive?1:!o.inclusive&&e.inclusive?-1:0}class nr{constructor(e,n){this.position=e,this.inclusive=n}}function ti(o,e,n){let c=0;for(let p=0;p<o.position.length;p++){const _=e[p],C=o.position[p];if(c=_.field.isKeyField()?En.comparator(En.fromName(C.referenceValue),n.key):ha(C,n.data.field(_.field)),"desc"===_.dir&&(c*=-1),0!==c)break}return c}function Wr(o,e){if(null===o)return null===e;if(null===e||o.inclusive!==e.inclusive||o.position.length!==e.position.length)return!1;for(let n=0;n<o.position.length;n++)if(!$o(o.position[n],e.position[n]))return!1;return!0}class Sa{}class Or extends Sa{constructor(e,n,c){super(),this.field=e,this.op=n,this.value=c}static create(e,n,c){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,c):new Yp(e,n,c):"array-contains"===n?new _m(e,c):"in"===n?new uc(e,c):"not-in"===n?new $v(e,c):"array-contains-any"===n?new zv(e,c):new Or(e,n,c)}static createKeyFieldInFilter(e,n,c){return"in"===n?new Qp(e,c):new Gv(e,c)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(ha(n,this.value)):null!==n&&vu(this.value)===vu(n)&&this.matchesComparison(ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return In()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ti extends Sa{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new Ti(e,n)}matches(e){return Oo(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return null!==e?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Oo(o){return"and"===o.op}function Xa(o){return"or"===o.op}function Ss(o){return ku(o)&&Oo(o)}function ku(o){for(const e of o.filters)if(e instanceof Ti)return!1;return!0}function ji(o){if(o instanceof Or)return o.field.canonicalString()+o.op.toString()+Nl(o.value);if(Ss(o))return o.filters.map(e=>ji(e)).join(",");{const e=o.filters.map(n=>ji(n)).join(",");return`${o.op}(${e})`}}function Fl(o,e){return o instanceof Or?(n=o,(c=e)instanceof Or&&n.op===c.op&&n.field.isEqual(c.field)&&$o(n.value,c.value)):o instanceof Ti?function(n,c){return c instanceof Ti&&n.op===c.op&&n.filters.length===c.filters.length&&n.filters.reduce((p,_,C)=>p&&Fl(_,c.filters[C]),!0)}(o,e):void In();var n,c}function Gh(o,e){const n=o.filters.concat(e);return Ti.create(n,o.op)}function ad(o){return o instanceof Or?`${(e=o).field.canonicalString()} ${e.op} ${Nl(e.value)}`:o instanceof Ti?function(e){return e.op.toString()+" {"+e.getFilters().map(ad).join(" ,")+"}"}(o):"Filter";var e}class Yp extends Or{constructor(e,n,c){super(e,n,c),this.key=En.fromName(c.referenceValue)}matches(e){const n=En.comparator(e.key,this.key);return this.matchesComparison(n)}}class Qp extends Or{constructor(e,n){super(e,"in",n),this.keys=Vf(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Gv extends Or{constructor(e,n){super(e,"not-in",n),this.keys=Vf(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vf(o,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(c=>En.fromName(c.referenceValue))}class _m extends Or{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pu(n)&&cl(n.arrayValue,this.value)}}class uc extends Or{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&cl(this.value.arrayValue,n)}}class $v extends Or{constructor(e,n){super(e,"not-in",n)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!cl(this.value.arrayValue,n)}}class zv extends Or{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(c=>cl(this.value.arrayValue,c))}}class jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Xp(o,e){return o.dir===e.dir&&o.field.isEqual(e.field)}class Ro{constructor(e,n){this.comparator=e,this.root=n||Ua.EMPTY}insert(e,n){return new Ro(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ua.BLACK,null,null))}remove(e){return new Ro(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ua.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const c=this.comparator(e,n.key);if(0===c)return n.value;c<0?n=n.left:c>0&&(n=n.right)}return null}indexOf(e){let n=0,c=this.root;for(;!c.isEmpty();){const p=this.comparator(e,c.key);if(0===p)return n+c.left.size;p<0?c=c.left:(n+=c.left.size+1,c=c.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,c)=>(e(n,c),!1))}toString(){const e=[];return this.inorderTraversal((n,c)=>(e.push(`${n}:${c}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,n,c,p){this.isReverse=p,this.nodeStack=[];let _=1;for(;!e.isEmpty();)if(_=n?c(e.key,n):1,n&&p&&(_*=-1),_<0)e=this.isReverse?e.left:e.right;else{if(0===_){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ua{constructor(e,n,c,p,_){this.key=e,this.value=n,this.color=c??Ua.RED,this.left=p??Ua.EMPTY,this.right=_??Ua.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,c,p,_){return new Ua(e??this.key,n??this.value,c??this.color,p??this.left,_??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,c){let p=this;const _=c(e,p.key);return p=_<0?p.copy(null,null,null,p.left.insert(e,n,c),null):0===_?p.copy(null,n,null,null,null):p.copy(null,null,null,null,p.right.insert(e,n,c)),p.fixUp()}removeMin(){if(this.left.isEmpty())return Ua.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let c,p=this;if(n(e,p.key)<0)p.left.isEmpty()||p.left.isRed()||p.left.left.isRed()||(p=p.moveRedLeft()),p=p.copy(null,null,null,p.left.remove(e,n),null);else{if(p.left.isRed()&&(p=p.rotateRight()),p.right.isEmpty()||p.right.isRed()||p.right.left.isRed()||(p=p.moveRedRight()),0===n(e,p.key)){if(p.right.isEmpty())return Ua.EMPTY;c=p.right.min(),p=p.copy(c.key,c.value,null,null,p.right.removeMin())}p=p.copy(null,null,null,null,p.right.remove(e,n))}return p.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ua.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ua.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw In();const e=this.left.check();if(e!==this.right.check())throw In();return e+(this.isRed()?0:1)}}Ua.EMPTY=null,Ua.RED=!0,Ua.BLACK=!1,Ua.EMPTY=new class{constructor(){this.size=0}get key(){throw In()}get value(){throw In()}get color(){throw In()}get left(){throw In()}get right(){throw In()}copy(o,e,n,c,p){return this}insert(o,e,n){return new Ua(o,e)}remove(o,e){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class es{constructor(e){this.comparator=e,this.data=new Ro(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,c)=>(e(n),!1))}forEachInRange(e,n){const c=this.data.getIteratorFrom(e[0]);for(;c.hasNext();){const p=c.getNext();if(this.comparator(p.key,e[1])>=0)return;n(p.key)}}forEachWhile(e,n){let c;for(c=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();c.hasNext();)if(!e(c.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $h(this.data.getIterator())}getIteratorFrom(e){return new $h(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(c=>{n=n.add(c)}),n}isEqual(e){if(!(e instanceof es)||this.size!==e.size)return!1;const n=this.data.getIterator(),c=e.data.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=c.getNext().key;if(0!==this.comparator(p,_))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new es(this.comparator);return n.data=e,n}}class $h{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dl(o){return o.hasNext()?o.getNext():void 0}class Ba{constructor(e){this.fields=e,e.sort(ys.comparator)}static empty(){return new Ba([])}unionWith(e){let n=new es(ys.comparator);for(const c of this.fields)n=n.add(c);for(const c of e)n=n.add(c);return new Ba(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(n,c)=>n.isEqual(c))}}class fa{constructor(e){this.value=e}static empty(){return new fa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let c=0;c<e.length-1;++c)if(n=(n.mapValue.fields||{})[e.get(c)],!be(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ke(n)}setAll(e){let n=ys.emptyPath(),c={},p=[];e.forEach((C,N)=>{if(!n.isImmediateParentOf(N)){const ee=this.getFieldsMap(n);this.applyChanges(ee,c,p),c={},p=[],n=N.popLast()}C?c[N.lastSegment()]=Ke(C):p.push(N.lastSegment())});const _=this.getFieldsMap(n);this.applyChanges(_,c,p)}delete(e){const n=this.field(e.popLast());be(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let c=0;c<e.length;++c){let p=n.mapValue.fields[e.get(c)];be(p)&&p.mapValue.fields||(p={mapValue:{fields:{}}},n.mapValue.fields[e.get(c)]=p),n=p}return n.mapValue.fields}applyChanges(e,n,c){B(n,(p,_)=>e[p]=_);for(const p of c)delete e[p]}clone(){return new fa(Ke(this.value))}}function zh(o){const e=[];return B(o.fields,(n,c)=>{const p=new ys([n]);if(be(c)){const _=zh(c.mapValue).fields;if(0===_.length)e.push(p);else for(const C of _)e.push(p.child(C))}else e.push(p)}),new Ba(e)}class Bs{constructor(e,n,c,p,_,C,N){this.key=e,this.documentType=n,this.version=c,this.readTime=p,this.createTime=_,this.data=C,this.documentState=N}static newInvalidDocument(e){return new Bs(e,0,Bn.min(),Bn.min(),Bn.min(),fa.empty(),0)}static newFoundDocument(e,n,c,p){return new Bs(e,1,n,Bn.min(),c,p,0)}static newNoDocument(e,n){return new Bs(e,2,n,Bn.min(),Bn.min(),fa.empty(),0)}static newUnknownDocument(e,n){return new Bs(e,3,n,Bn.min(),Bn.min(),fa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Bn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class du{constructor(e,n=null,c=[],p=[],_=null,C=null,N=null){this.path=e,this.collectionGroup=n,this.orderBy=c,this.filters=p,this.limit=_,this.startAt=C,this.endAt=N,this.ft=null}}function Gf(o,e=null,n=[],c=[],p=null,_=null,C=null){return new du(o,e,n,c,p,_,C)}function pa(o){const e=kn(o);if(null===e.ft){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(c=>ji(c)).join(","),n+="|ob:",n+=e.orderBy.map(c=>{return(p=c).field.canonicalString()+p.dir;var p}).join(","),ye(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(c=>Nl(c)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(c=>Nl(c)).join(",")),e.ft=n}return e.ft}function ud(o,e){if(o.limit!==e.limit||o.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<o.orderBy.length;n++)if(!Xp(o.orderBy[n],e.orderBy[n]))return!1;if(o.filters.length!==e.filters.length)return!1;for(let n=0;n<o.filters.length;n++)if(!Fl(o.filters[n],e.filters[n]))return!1;return o.collectionGroup===e.collectionGroup&&!!o.path.isEqual(e.path)&&!!Wr(o.startAt,e.startAt)&&Wr(o.endAt,e.endAt)}function Xd(o){return En.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}function hl(o,e){return o.filters.filter(n=>n instanceof Or&&n.field.isEqual(e))}function qh(o,e,n){let c=Wu,p=!0;for(const _ of hl(o,e)){let C=Wu,N=!0;switch(_.op){case"<":case"<=":C=Lt(_.value);break;case"==":case"in":case">=":C=_.value;break;case">":C=_.value,N=!1;break;case"!=":case"not-in":C=Wu}Zn({value:c,inclusive:p},{value:C,inclusive:N})<0&&(c=C,p=N)}if(null!==n)for(let _=0;_<o.orderBy.length;++_)if(o.orderBy[_].field.isEqual(e)){const C=n.position[_];Zn({value:c,inclusive:p},{value:C,inclusive:n.inclusive})<0&&(c=C,p=n.inclusive);break}return{value:c,inclusive:p}}function Wh(o,e,n){let c=ta,p=!0;for(const _ of hl(o,e)){let C=ta,N=!0;switch(_.op){case">=":case">":C=fn(_.value),N=!1;break;case"==":case"in":case"<=":C=_.value;break;case"<":C=_.value,N=!1;break;case"!=":case"not-in":C=ta}fr({value:c,inclusive:p},{value:C,inclusive:N})>0&&(c=C,p=N)}if(null!==n)for(let _=0;_<o.orderBy.length;++_)if(o.orderBy[_].field.isEqual(e)){const C=n.position[_];fr({value:c,inclusive:p},{value:C,inclusive:n.inclusive})>0&&(c=C,p=n.inclusive);break}return{value:c,inclusive:p}}class Ul{constructor(e,n=null,c=[],p=[],_=null,C="F",N=null,ee=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=c,this.filters=p,this.limit=_,this.limitType=C,this.startAt=N,this.endAt=ee,this.dt=null,this._t=null}}function hu(o,e,n,c,p,_,C,N){return new Ul(o,e,n,c,p,_,C,N)}function Rc(o){return new Ul(o)}function Kh(o){return 0===o.filters.length&&null===o.limit&&null==o.startAt&&null==o.endAt&&(0===o.explicitOrderBy.length||1===o.explicitOrderBy.length&&o.explicitOrderBy[0].field.isKeyField())}function Da(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function lc(o){for(const e of o.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function Nc(o){return null!==o.collectionGroup}function Bl(o){const e=kn(o);if(null===e.dt){e.dt=[];const n=lc(e),c=Da(e);if(null!==n&&null===c)n.isKeyField()||e.dt.push(new jl(n)),e.dt.push(new jl(ys.keyField(),"asc"));else{let p=!1;for(const _ of e.explicitOrderBy)e.dt.push(_),_.field.isKeyField()&&(p=!0);if(!p){const _=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new jl(ys.keyField(),_))}}}return e.dt}function _s(o){const e=kn(o);if(!e._t)if("F"===e.limitType)e._t=Gf(e.path,e.collectionGroup,Bl(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const _ of Bl(e))n.push(new jl(_.field,"desc"===_.dir?"asc":"desc"));const c=e.endAt?new nr(e.endAt.position,e.endAt.inclusive):null,p=e.startAt?new nr(e.startAt.position,e.startAt.inclusive):null;e._t=Gf(e.path,e.collectionGroup,n,e.filters,e.limit,c,p)}return e._t}function Mu(o,e){e.getFirstInequalityField(),lc(o);const n=o.filters.concat([e]);return new Ul(o.path,o.collectionGroup,o.explicitOrderBy.slice(),n,o.limit,o.limitType,o.startAt,o.endAt)}function fl(o,e,n){return new Ul(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),e,n,o.startAt,o.endAt)}function cc(o,e){return ud(_s(o),_s(e))&&o.limitType===e.limitType}function Jd(o){return`${pa(_s(o))}|lt:${o.limitType}`}function Zh(o){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(c=>ad(c)).join(", ")}]`),ye(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(c=>{return`${(p=c).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(c=>Nl(c)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(c=>Nl(c)).join(",")),`Target(${n})`}(_s(o))}; limitType=${o.limitType})`}function Yh(o,e){return e.isFoundDocument()&&function(n,c){const p=c.key.path;return null!==n.collectionGroup?c.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(p):En.isDocumentKey(n.path)?n.path.isEqual(p):n.path.isImmediateParentOf(p)}(o,e)&&function(n,c){for(const p of Bl(n))if(!p.field.isKeyField()&&null===c.data.field(p.field))return!1;return!0}(o,e)&&function(n,c){for(const p of n.filters)if(!p.matches(c))return!1;return!0}(o,e)&&(c=e,!((n=o).startAt&&!function(p,_,C){const N=ti(p,_,C);return p.inclusive?N<=0:N<0}(n.startAt,Bl(n),c)||n.endAt&&!function(p,_,C){const N=ti(p,_,C);return p.inclusive?N>=0:N>0}(n.endAt,Bl(n),c)));var n,c}function Vl(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function $f(o){return(e,n)=>{let c=!1;for(const p of Bl(o)){const _=eh(p,e,n);if(0!==_)return _;c=c||p.field.isKeyField()}return 0}}function eh(o,e,n){const c=o.field.isKeyField()?En.comparator(e.key,n.key):function(p,_,C){const N=_.data.field(p),ee=C.data.field(p);return null!==N&&null!==ee?ha(N,ee):In()}(o.field,e,n);switch(o.dir){case"asc":return c;case"desc":return-1*c;default:return In()}}function ld(o,e){if(o.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Se(e)?"-0":e}}function Qh(o){return{integerValue:""+o}}function cd(o,e){return mt(e)?Qh(e):ld(o,e)}class dd{constructor(){this._=void 0}}function zf(o,e,n){return o instanceof Lc?function(c,p){const _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return p&&(_.fields.__previous_value__=p),{mapValue:_}}(n,e):o instanceof _u?nh(o,e):o instanceof Hl?hc(o,e):function(c,p){const _=th(c,p),C=qf(_)+qf(c.gt);return ac(_)&&ac(c.gt)?Qh(C):ld(c.yt,C)}(o,e)}function dc(o,e,n){return o instanceof _u?nh(o,e):o instanceof Hl?hc(o,e):n}function th(o,e){return o instanceof fc?ac(n=e)||(c=n)&&"doubleValue"in c?e:{integerValue:0}:null;var c,n}class Lc extends dd{}class _u extends dd{constructor(e){super(),this.elements=e}}function nh(o,e){const n=Wf(e);for(const c of o.elements)n.some(p=>$o(p,c))||n.push(c);return{arrayValue:{values:n}}}class Hl extends dd{constructor(e){super(),this.elements=e}}function hc(o,e){let n=Wf(e);for(const c of o.elements)n=n.filter(p=>!$o(p,c));return{arrayValue:{values:n}}}class fc extends dd{constructor(e,n){super(),this.yt=e,this.gt=n}}function qf(o){return Jr(o.integerValue||o.doubleValue)}function Wf(o){return Pu(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class pl{constructor(e,n){this.field=e,this.transform=n}}class Jp{constructor(e,n){this.version=e,this.transformResults=n}}class Vs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fc(o,e){return void 0!==o.updateTime?e.isFoundDocument()&&e.version.isEqual(o.updateTime):void 0===o.exists||o.exists===e.isFoundDocument()}class rh{}function Kf(o,e){if(!o.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return o.isNoDocument()?new bu(o.key,Vs.none()):new Ku(o.key,o.data,Vs.none());{const n=o.data,c=fa.empty();let p=new es(ys.comparator);for(let _ of e.fields)if(!p.has(_)){let C=n.field(_);null===C&&_.length>1&&(_=_.popLast(),C=n.field(_)),null===C?c.delete(_):c.set(_,C),p=p.add(_)}return new gl(o.key,c,new Ba(p.toArray()),Vs.none())}}function jc(o,e,n){o instanceof Ku?function(c,p,_){const C=c.value.clone(),N=Jh(c.fieldTransforms,p,_.transformResults);C.setAll(N),p.convertToFoundDocument(_.version,C).setHasCommittedMutations()}(o,e,n):o instanceof gl?function(c,p,_){if(!Fc(c.precondition,p))return void p.convertToUnknownDocument(_.version);const C=Jh(c.fieldTransforms,p,_.transformResults),N=p.data;N.setAll(gc(c)),N.setAll(C),p.convertToFoundDocument(_.version,N).setHasCommittedMutations()}(o,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Gl(o,e,n,c){return o instanceof Ku?function(p,_,C,N){if(!Fc(p.precondition,_))return C;const ee=p.value.clone(),fe=ml(p.fieldTransforms,N,_);return ee.setAll(fe),_.convertToFoundDocument(_.version,ee).setHasLocalMutations(),null}(o,e,n,c):o instanceof gl?function(p,_,C,N){if(!Fc(p.precondition,_))return C;const ee=ml(p.fieldTransforms,N,_),fe=_.data;return fe.setAll(gc(p)),fe.setAll(ee),_.convertToFoundDocument(_.version,fe).setHasLocalMutations(),null===C?null:C.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(ke=>ke.field))}(o,e,n,c):(C=n,Fc(o.precondition,_=e)?(_.convertToNoDocument(_.version).setHasLocalMutations(),null):C);var _,C}function eg(o,e){let n=null;for(const c of o.fieldTransforms){const p=e.data.field(c.field),_=th(c.transform,p||null);null!=_&&(null===n&&(n=fa.empty()),n.set(c.field,_))}return n||null}function pc(o,e){return o.type===e.type&&!!o.key.isEqual(e.key)&&!!o.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(n=o.fieldTransforms)&&void 0===c||n&&c&&La(n,c,(p,_)=>function Xh(o,e){return o.field.isEqual(e.field)&&(c=e.transform,(n=o.transform)instanceof _u&&c instanceof _u||n instanceof Hl&&c instanceof Hl?La(n.elements,c.elements,$o):n instanceof fc&&c instanceof fc?$o(n.gt,c.gt):n instanceof Lc&&c instanceof Lc);var n,c}(p,_))))&&(0===o.type?o.value.isEqual(e.value):1!==o.type||o.data.isEqual(e.data)&&o.fieldMask.isEqual(e.fieldMask));var n,c}class Ku extends rh{constructor(e,n,c,p=[]){super(),this.key=e,this.value=n,this.precondition=c,this.fieldTransforms=p,this.type=0}getFieldMask(){return null}}class gl extends rh{constructor(e,n,c,p,_=[]){super(),this.key=e,this.data=n,this.fieldMask=c,this.precondition=p,this.fieldTransforms=_,this.type=1}getFieldMask(){return this.fieldMask}}function gc(o){const e=new Map;return o.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const c=o.data.field(n);e.set(n,c)}}),e}function Jh(o,e,n){const c=new Map;Rn(o.length===n.length);for(let p=0;p<n.length;p++){const _=o[p],C=_.transform,N=e.data.field(_.field);c.set(_.field,dc(C,N,n[p]))}return c}function ml(o,e,n){const c=new Map;for(const p of o){const _=p.transform,C=n.data.field(p.field);c.set(p.field,zf(_,C,e))}return c}class bu extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hd extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ef{constructor(e){this.count=e}}var No,Ii;function tf(o){switch(o){default:return In();case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0}}function nf(o){if(void 0===o)return Si("GRPC error has no .code"),Ht.UNKNOWN;switch(o){case No.OK:return Ht.OK;case No.CANCELLED:return Ht.CANCELLED;case No.UNKNOWN:return Ht.UNKNOWN;case No.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case No.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case No.INTERNAL:return Ht.INTERNAL;case No.UNAVAILABLE:return Ht.UNAVAILABLE;case No.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case No.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case No.NOT_FOUND:return Ht.NOT_FOUND;case No.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case No.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case No.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case No.ABORTED:return Ht.ABORTED;case No.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case No.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case No.DATA_LOSS:return Ht.DATA_LOSS;default:return In()}}(Ii=No||(No={}))[Ii.OK=0]="OK",Ii[Ii.CANCELLED=1]="CANCELLED",Ii[Ii.UNKNOWN=2]="UNKNOWN",Ii[Ii.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ii[Ii.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ii[Ii.NOT_FOUND=5]="NOT_FOUND",Ii[Ii.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ii[Ii.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ii[Ii.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ii[Ii.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ii[Ii.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ii[Ii.ABORTED=10]="ABORTED",Ii[Ii.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ii[Ii.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ii[Ii.INTERNAL=13]="INTERNAL",Ii[Ii.UNAVAILABLE=14]="UNAVAILABLE",Ii[Ii.DATA_LOSS=15]="DATA_LOSS";class Zu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),c=this.inner[n];if(void 0!==c)for(const[p,_]of c)if(this.equalsFn(p,e))return _}has(e){return void 0!==this.get(e)}set(e,n){const c=this.mapKeyFn(e),p=this.inner[c];if(void 0===p)return this.inner[c]=[[e,n]],void this.innerSize++;for(let _=0;_<p.length;_++)if(this.equalsFn(p[_][0],e))return void(p[_]=[e,n]);p.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),c=this.inner[n];if(void 0===c)return!1;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return 1===c.length?delete this.inner[n]:c.splice(p,1),this.innerSize--,!0;return!1}forEach(e){B(this.inner,(n,c)=>{for(const[p,_]of c)e(p,_)})}isEmpty(){return J(this.inner)}size(){return this.innerSize}}const fd=new Ro(En.comparator);function na(){return fd}const ih=new Ro(En.comparator);function mc(...o){let e=ih;for(const n of o)e=e.insert(n.key,n);return e}function vl(o){let e=ih;return o.forEach((n,c)=>e=e.insert(n,c.overlayedDocument)),e}function Ou(){return Ru()}function ga(){return Ru()}function Ru(){return new Zu(o=>o.toString(),(o,e)=>o.isEqual(e))}const sh=new Ro(En.comparator),pd=new es(En.comparator);function ri(...o){let e=pd;for(const n of o)e=e.add(n);return e}const oh=new es(Mr);function ah(){return oh}class Uc{constructor(e,n,c,p,_){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=c,this.documentUpdates=p,this.resolvedLimboDocuments=_}static createSynthesizedRemoteEventForCurrentChange(e,n,c){const p=new Map;return p.set(e,gd.createSynthesizedTargetChangeForCurrentChange(e,n,c)),new Uc(Bn.min(),p,ah(),na(),ri())}}class gd{constructor(e,n,c,p,_){this.resumeToken=e,this.current=n,this.addedDocuments=c,this.modifiedDocuments=p,this.removedDocuments=_}static createSynthesizedTargetChangeForCurrentChange(e,n,c){return new gd(c,n,ri(),ri(),ri())}}class fu{constructor(e,n,c,p){this.It=e,this.removedTargetIds=n,this.key=c,this.Tt=p}}class md{constructor(e,n){this.targetId=e,this.Et=n}}class vd{constructor(e,n,c=wn.EMPTY_BYTE_STRING,p=null){this.state=e,this.targetIds=n,this.resumeToken=c,this.cause=p}}class yl{constructor(){this.At=0,this.Rt=Ja(),this.bt=wn.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=ri(),n=ri(),c=ri();return this.Rt.forEach((p,_)=>{switch(_){case 0:e=e.add(p);break;case 2:n=n.add(p);break;case 1:c=c.add(p);break;default:In()}}),new gd(this.bt,this.Pt,e,n,c)}xt(){this.vt=!1,this.Rt=Ja()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class vc{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=na(),this.qt=Zf(),this.Ut=new es(Mr)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const c=this.Wt(n);switch(e.state){case 0:this.zt(n)&&c.Dt(e.resumeToken);break;case 1:c.Mt(),c.Vt||c.xt(),c.Dt(e.resumeToken);break;case 2:c.Mt(),c.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(c.Ft(),c.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),c.Dt(e.resumeToken));break;default:In()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((c,p)=>{this.zt(p)&&n(p)})}Jt(e){const n=e.targetId,c=e.Et.count,p=this.Yt(n);if(p){const _=p.target;if(Xd(_))if(0===c){const C=new En(_.path);this.Qt(n,C,Bs.newNoDocument(C,Bn.min()))}else Rn(1===c);else this.Xt(n)!==c&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((_,C)=>{const N=this.Yt(C);if(N){if(_.current&&Xd(N.target)){const ee=new En(N.target.path);null!==this.Lt.get(ee)||this.te(C,ee)||this.Qt(C,ee,Bs.newNoDocument(ee,e))}_.St&&(n.set(C,_.Ct()),_.xt())}});let c=ri();this.qt.forEach((_,C)=>{let N=!0;C.forEachWhile(ee=>{const fe=this.Yt(ee);return!fe||2===fe.purpose||(N=!1,!1)}),N&&(c=c.add(_))}),this.Lt.forEach((_,C)=>C.setReadTime(e));const p=new Uc(e,n,this.Ut,this.Lt,c);return this.Lt=na(),this.qt=Zf(),this.Ut=new es(Mr),p}Gt(e,n){if(!this.zt(e))return;const c=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,c),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,c){if(!this.zt(e))return;const p=this.Wt(e);this.te(e,n)?p.Nt(n,1):p.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),c&&(this.Lt=this.Lt.insert(n,c))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new yl,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new es(Mr),this.qt=this.qt.insert(e,n)),n}zt(e){const n=null!==this.Yt(e);return n||cn("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new yl),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function Zf(){return new Ro(En.comparator)}function Ja(){return new Ro(En.comparator)}const tg={asc:"ASCENDING",desc:"DESCENDING"},Yf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qf={and:"AND",or:"OR"};class $l{constructor(e,n){this.databaseId=e,this.wt=n}}function Tu(o,e){return o.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yd(o,e){return o.wt?e.toBase64():e.toUint8Array()}function uh(o,e){return Tu(o,e.toTimestamp())}function To(o){return Rn(!!o),Bn.fromTimestamp(function(e){const n=ni(e);return new Ji(n.seconds,n.nanos)}(o))}function Bc(o,e){return(n=o,new jr(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Xf(o){const e=jr.fromString(o);return Rn(Td(e)),e}function Yu(o,e){return Bc(o.databaseId,e.path)}function _l(o,e){const n=Xf(e);if(n.get(1)!==o.databaseId.projectId)throw new an(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+o.databaseId.projectId);if(n.get(3)!==o.databaseId.database)throw new an(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+o.databaseId.database);return new En(T(n))}function lh(o,e){return Bc(o.databaseId,e)}function D(o){const e=Xf(o);return 4===e.length?jr.emptyPath():T(e)}function y(o){return new jr(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function T(o){return Rn(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function O(o,e,n){return{name:Yu(o,e),fields:n.value.mapValue.fields}}function le(o,e,n){const c=_l(o,e.name),p=To(e.updateTime),_=e.createTime?To(e.createTime):Bn.min(),C=new fa({mapValue:{fields:e.fields}}),N=Bs.newFoundDocument(c,p,_,C);return n&&N.setHasCommittedMutations(),n?N.setHasCommittedMutations():N}function jt(o,e){let n;if(e instanceof Ku)n={update:O(o,e.key,e.value)};else if(e instanceof bu)n={delete:Yu(o,e.key)};else if(e instanceof gl)n={update:O(o,e.key,e.data),updateMask:Ct(e.fieldMask)};else{if(!(e instanceof hd))return In();n={verify:Yu(o,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(c=>function(p,_){const C=_.transform;if(C instanceof Lc)return{fieldPath:_.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof _u)return{fieldPath:_.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Hl)return{fieldPath:_.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof fc)return{fieldPath:_.field.canonicalString(),increment:C.gt};throw In()}(0,c))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:uh(o,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:In()),n;var p}function Sn(o,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?Vs.updateTime(To(p.updateTime)):void 0!==p.exists?Vs.exists(p.exists):Vs.none():Vs.none(),c=e.updateTransforms?e.updateTransforms.map(p=>function(_,C){let N=null;"setToServerValue"in C?(Rn("REQUEST_TIME"===C.setToServerValue),N=new Lc):"appendMissingElements"in C?N=new _u(C.appendMissingElements.values||[]):"removeAllFromArray"in C?N=new Hl(C.removeAllFromArray.values||[]):"increment"in C?N=new fc(_,C.increment):In();const ee=ys.fromServerFormat(C.fieldPath);return new pl(ee,N)}(o,p)):[];var p;if(e.update){const p=_l(o,e.update.name),_=new fa({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new Ba((e.updateMask.fieldPaths||[]).map(fe=>ys.fromServerFormat(fe)));return new gl(p,_,C,n,c)}return new Ku(p,_,n,c)}if(e.delete){const p=_l(o,e.delete);return new bu(p,n)}if(e.verify){const p=_l(o,e.verify);return new hd(p,n)}return In()}function Dr(o,e){return{documents:[lh(o,e.path)]}}function hr(o,e){const n={structuredQuery:{}},c=e.path;null!==e.collectionGroup?(n.parent=lh(o,c),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=lh(o,c.popLast()),n.structuredQuery.from=[{collectionId:c.lastSegment()}]);const p=function(ee){if(0!==ee.length)return dh(Ti.create(ee,"and"))}(e.filters);p&&(n.structuredQuery.where=p);const _=function(ee){if(0!==ee.length)return ee.map(fe=>{return{field:zo((ke=fe).field),direction:ch(ke.dir)};var ke})}(e.orderBy);_&&(n.structuredQuery.orderBy=_);const C=(fe=e.limit,o.wt||ye(fe)?fe:{value:fe});var fe,N,ee;return null!==C&&(n.structuredQuery.limit=C),e.startAt&&(n.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(n.structuredQuery.endAt={before:!(ee=e.endAt).inclusive,values:ee.position}),n}function ao(o){let e=D(o.parent);const n=o.structuredQuery,c=n.from?n.from.length:0;let p=null;if(c>0){Rn(1===c);const ke=n.from[0];ke.allDescendants?p=ke.collectionId:e=e.child(ke.collectionId)}let _=[];n.where&&(_=function(ke){const nt=_d(ke);return nt instanceof Ti&&Ss(nt)?nt.getFilters():[nt]}(n.where));let C=[];n.orderBy&&(C=n.orderBy.map(ke=>{return new jl(zl((nt=ke).field),function(Pt){switch(Pt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(nt.direction));var nt}));let N=null;n.limit&&(N=function(ke){let nt;return nt="object"==typeof ke?ke.value:ke,ye(nt)?null:nt}(n.limit));let ee=null;var ke;n.startAt&&(ee=new nr((ke=n.startAt).values||[],!!ke.before));let fe=null;return n.endAt&&(fe=function(ke){return new nr(ke.values||[],!ke.before)}(n.endAt)),hu(e,p,C,_,N,"F",ee,fe)}function _d(o){return void 0!==o.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=zl(e.unaryFilter.field);return Or.create(n,"==",{doubleValue:NaN});case"IS_NULL":const c=zl(e.unaryFilter.field);return Or.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=zl(e.unaryFilter.field);return Or.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const _=zl(e.unaryFilter.field);return Or.create(_,"!=",{nullValue:"NULL_VALUE"});default:return In()}}(o):void 0!==o.fieldFilter?Or.create(zl((e=o).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return In()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==o.compositeFilter?function(e){return Ti.create(e.compositeFilter.filters.map(n=>_d(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return In()}}(e.compositeFilter.op))}(o):In();var e}function ch(o){return tg[o]}function bd(o){return Yf[o]}function Qu(o){return Qf[o]}function zo(o){return{fieldPath:o.canonicalString()}}function zl(o){return ys.fromServerFormat(o.fieldPath)}function dh(o){return o instanceof Or?function(e){if("=="===e.op){if(Q(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NAN"}};if(q(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Q(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NOT_NAN"}};if(q(e.value))return{unaryFilter:{field:zo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(e.field),op:bd(e.op),value:e.value}}}(o):o instanceof Ti?function(e){const n=e.getFilters().map(c=>dh(c));return 1===n.length?n[0]:{compositeFilter:{op:Qu(e.op),filters:n}}}(o):In()}function Ct(o){const e=[];return o.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Td(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function xa(o){let e="";for(let n=0;n<o.length;n++)e.length>0&&(e=ql(e)),e=bl(o.get(n),e);return ql(e)}function bl(o,e){let n=e;const c=o.length;for(let p=0;p<c;p++){const _=o.charAt(p);switch(_){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=_}}return n}function ql(o){return o+"\x01\x01"}function Eo(o){const e=o.length;if(Rn(e>=2),2===e)return Rn("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),jr.emptyPath();const n=e-2,c=[];let p="";for(let _=0;_<e;){const C=o.indexOf("\x01",_);switch((C<0||C>n)&&In(),o.charAt(C+1)){case"\x01":const N=o.substring(_,C);let ee;0===p.length?ee=N:(p+=N,ee=p,p=""),c.push(ee);break;case"\x10":p+=o.substring(_,C),p+="\0";break;case"\x11":p+=o.substring(_,C+1);break;default:In()}_=C+2}return new jr(c)}const hh=["userId","batchId"];function Tl(o,e){return[o,xa(e)]}function ng(o,e,n){return[o,xa(e),n]}const Jf={},bm=["prefixPath","collectionGroup","readTime","documentId"],r0=["prefixPath","collectionGroup","documentId"],s0=["collectionGroup","readTime","prefixPath","documentId"],Tm=["canonicalId","targetId"],rg=["targetId","path"],Ed=["path","targetId"],Em=["collectionId","parent"],qv=["indexId","uid"],qo=["uid","sequenceNumber"],wm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wv=["indexId","uid","orderedDocumentKey"],ig=["userId","collectionPath","documentId"],Cm=["userId","collectionPath","largestBatchId"],o0=["userId","collectionGroup","largestBatchId"],Kv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zv=[...Kv,"documentOverlays"],Sm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fh=Sm,a0=[...fh,"indexConfiguration","indexState","indexEntries"];class Yv extends qu{constructor(e,n){super(),this.se=e,this.currentSequenceNumber=n}}function Wo(o,e){const n=kn(o);return ja.M(n.se,e)}class rf{constructor(e,n,c,p){this.batchId=e,this.localWriteTime=n,this.baseMutations=c,this.mutations=p}applyToRemoteDocument(e,n){const c=n.mutationResults;for(let p=0;p<this.mutations.length;p++){const _=this.mutations[p];_.key.isEqual(e.key)&&jc(_,e,c[p])}}applyToLocalView(e,n){for(const c of this.baseMutations)c.key.isEqual(e.key)&&(n=Gl(c,e,n,this.localWriteTime));for(const c of this.mutations)c.key.isEqual(e.key)&&(n=Gl(c,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const c=ga();return this.mutations.forEach(p=>{const _=e.get(p.key),C=_.overlayedDocument;let N=this.applyToLocalView(C,_.mutatedFields);N=n.has(p.key)?null:N;const ee=Kf(C,N);null!==ee&&c.set(p.key,ee),C.isValidDocument()||C.convertToNoDocument(Bn.min())}),c}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ri())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(n,c)=>pc(n,c))&&La(this.baseMutations,e.baseMutations,(n,c)=>pc(n,c))}}class sf{constructor(e,n,c,p){this.batch=e,this.commitVersion=n,this.mutationResults=c,this.docVersions=p}static from(e,n,c){Rn(e.mutations.length===c.length);let p=sh;const _=e.mutations;for(let C=0;C<_.length;C++)p=p.insert(_[C].key,c[C].version);return new sf(e,n,c,p)}}class ph{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vc{constructor(e,n,c,p,_=Bn.min(),C=Bn.min(),N=wn.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=c,this.sequenceNumber=p,this.snapshotVersion=_,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=N}withSequenceNumber(e){return new Vc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class u0{constructor(e){this.ie=e}}function Dm(o,e){const n=e.key,c={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())c.document={name:Yu(p=o.ie,(_=e).key),fields:_.data.value.mapValue.fields,updateTime:Tu(p,_.version.toTimestamp()),createTime:Tu(p,_.createTime.toTimestamp())};else if(e.isNoDocument())c.noDocument={path:n.path.toArray(),readTime:Wl(e.version)};else{if(!e.isUnknownDocument())return In();c.unknownDocument={path:n.path.toArray(),version:Wl(e.version)}}var p,_;return c}function gh(o){const e=o.toTimestamp();return[e.seconds,e.nanoseconds]}function Wl(o){const e=o.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mh(o){const e=new Ji(o.seconds,o.nanoseconds);return Bn.fromTimestamp(e)}function Xu(o,e){const n=(e.baseMutations||[]).map(_=>Sn(o.ie,_));for(let _=0;_<e.mutations.length-1;++_){const C=e.mutations[_];_+1<e.mutations.length&&void 0!==e.mutations[_+1].transform&&(C.updateTransforms=e.mutations[_+1].transform.fieldTransforms,e.mutations.splice(_+1,1),++_)}const c=e.mutations.map(_=>Sn(o.ie,_)),p=Ji.fromMillis(e.localWriteTimeMs);return new rf(e.batchId,p,n,c)}function Va(o){const e=mh(o.readTime),n=void 0!==o.lastLimboFreeSnapshotVersion?mh(o.lastLimboFreeSnapshotVersion):Bn.min();let c;var p;return void 0!==o.query.documents?(Rn(1===(p=o.query).documents.length),c=_s(Rc(D(p.documents[0])))):c=_s(ao(o.query)),new Vc(c,o.targetId,0,o.lastListenSequenceNumber,e,n,wn.fromBase64String(o.resumeToken))}function ep(o,e){const n=Wl(e.snapshotVersion),c=Wl(e.lastLimboFreeSnapshotVersion);let p;p=Xd(e.target)?Dr(o.ie,e.target):hr(o.ie,e.target);const _=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pa(e.target),readTime:n,resumeToken:_,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:c,query:p}}function af(o){const e=ao({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?fl(e,e.limit,"L"):e}function sg(o,e){return new ph(e.largestBatchId,Sn(o.ie,e.overlayMutation))}function El(o,e){const n=e.path.lastSegment();return[o,xa(e.path.popLast()),n]}function xm(o,e,n,c){return{indexId:o,uid:e.uid||"",sequenceNumber:n,readTime:Wl(c.readTime),documentKey:xa(c.documentKey.path),largestBatchId:c.largestBatchId}}class Am{getBundleMetadata(e,n){return tp(e).get(n).next(c=>{if(c)return{id:(p=c).bundleId,createTime:mh(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return tp(e).put({bundleId:(c=n).id,createTime:Wl(To(c.createTime)),version:c.version});var c}getNamedQuery(e,n){return Xv(e).get(n).next(c=>{if(c)return{name:(p=c).name,query:af(p.bundledQuery),readTime:mh(p.readTime)};var p})}saveNamedQuery(e,n){return Xv(e).put({name:(c=n).name,readTime:Wl(To(c.readTime)),bundledQuery:c.bundledQuery});var c}}function tp(o){return Wo(o,"bundles")}function Xv(o){return Wo(o,"namedQueries")}class vh{constructor(e,n){this.yt=e,this.userId=n}static re(e,n){return new vh(e,n.uid||"")}getOverlay(e,n){return Kl(e).get(El(this.userId,n)).next(c=>c?sg(this.yt,c):null)}getOverlays(e,n){const c=Ou();return Ft.forEach(n,p=>this.getOverlay(e,p).next(_=>{null!==_&&c.set(p,_)})).next(()=>c)}saveOverlays(e,n,c){const p=[];return c.forEach((_,C)=>{const N=new ph(n,C);p.push(this.oe(e,N))}),Ft.waitFor(p)}removeOverlaysForBatchId(e,n,c){const p=new Set;n.forEach(C=>p.add(xa(C.getCollectionPath())));const _=[];return p.forEach(C=>{const N=IDBKeyRange.bound([this.userId,C,c],[this.userId,C,c+1],!1,!0);_.push(Kl(e).Y("collectionPathOverlayIndex",N))}),Ft.waitFor(_)}getOverlaysForCollection(e,n,c){const p=Ou(),_=xa(n),C=IDBKeyRange.bound([this.userId,_,c],[this.userId,_,Number.POSITIVE_INFINITY],!0);return Kl(e).W("collectionPathOverlayIndex",C).next(N=>{for(const ee of N){const fe=sg(this.yt,ee);p.set(fe.getKey(),fe)}return p})}getOverlaysForCollectionGroup(e,n,c,p){const _=Ou();let C;const N=IDBKeyRange.bound([this.userId,n,c],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Kl(e).Z({index:"collectionGroupOverlayIndex",range:N},(ee,fe,ke)=>{const nt=sg(this.yt,fe);_.size()<p||nt.largestBatchId===C?(_.set(nt.getKey(),nt),C=nt.largestBatchId):ke.done()}).next(()=>_)}oe(e,n){return Kl(e).put(function(c,p,_){const[C,N,ee]=El(p,_.mutation.key);return{userId:p,collectionPath:N,documentId:ee,collectionGroup:_.mutation.key.getCollectionGroup(),largestBatchId:_.largestBatchId,overlayMutation:jt(c.ie,_.mutation)}}(this.yt,this.userId,n))}}function Kl(o){return Wo(o,"documentOverlays")}class Ju{constructor(){}ue(e,n){this.ce(e,n),n.ae()}ce(e,n){if("nullValue"in e)this.he(n,5);else if("booleanValue"in e)this.he(n,10),n.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(n,15),n.le(Jr(e.integerValue));else if("doubleValue"in e){const c=Jr(e.doubleValue);isNaN(c)?this.he(n,13):(this.he(n,15),Se(c)?n.le(0):n.le(c))}else if("timestampValue"in e){const c=e.timestampValue;this.he(n,20),"string"==typeof c?n.fe(c):(n.fe(`${c.seconds||""}`),n.le(c.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,n),this._e(n);else if("bytesValue"in e)this.he(n,30),n.we(da(e.bytesValue)),this._e(n);else if("referenceValue"in e)this.me(e.referenceValue,n);else if("geoPointValue"in e){const c=e.geoPointValue;this.he(n,45),n.le(c.latitude||0),n.le(c.longitude||0)}else"mapValue"in e?Tt(e)?this.he(n,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,n),this._e(n)):"arrayValue"in e?(this.ye(e.arrayValue,n),this._e(n)):In()}de(e,n){this.he(n,25),this.pe(e,n)}pe(e,n){n.fe(e)}ge(e,n){const c=e.fields||{};this.he(n,55);for(const p of Object.keys(c))this.de(p,n),this.ce(c[p],n)}ye(e,n){const c=e.values||[];this.he(n,50);for(const p of c)this.ce(p,n)}me(e,n){this.he(n,37),En.fromName(e).path.forEach(c=>{this.he(n,60),this.pe(c,n)})}he(e,n){e.le(n)}_e(e){e.le(2)}}function Jv(o){if(0===o)return 8;let e=0;return o>>4==0&&(e+=4,o<<=4),o>>6==0&&(e+=2,o<<=2),o>>7==0&&(e+=1),e}function og(o){const e=64-function(n){let c=0;for(let p=0;p<8;++p){const _=Jv(255&n[p]);if(c+=_,8!==_)break}return c}(o);return Math.ceil(e/8)}Ju.Ie=new Ju;class l0{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const n=e[Symbol.iterator]();let c=n.next();for(;!c.done;)this.Ee(c.value),c=n.next();this.Ae()}Re(e){const n=e[Symbol.iterator]();let c=n.next();for(;!c.done;)this.be(c.value),c=n.next();this.Pe()}ve(e){for(const n of e){const c=n.charCodeAt(0);if(c<128)this.Ee(c);else if(c<2048)this.Ee(960|c>>>6),this.Ee(128|63&c);else if(n<"\ud800"||"\udbff"<n)this.Ee(480|c>>>12),this.Ee(128|63&c>>>6),this.Ee(128|63&c);else{const p=n.codePointAt(0);this.Ee(240|p>>>18),this.Ee(128|63&p>>>12),this.Ee(128|63&p>>>6),this.Ee(128|63&p)}}this.Ae()}Ve(e){for(const n of e){const c=n.charCodeAt(0);if(c<128)this.be(c);else if(c<2048)this.be(960|c>>>6),this.be(128|63&c);else if(n<"\ud800"||"\udbff"<n)this.be(480|c>>>12),this.be(128|63&c>>>6),this.be(128|63&c);else{const p=n.codePointAt(0);this.be(240|p>>>18),this.be(128|63&p>>>12),this.be(128|63&p>>>6),this.be(128|63&p)}}this.Pe()}Se(e){const n=this.De(e),c=og(n);this.Ce(1+c),this.buffer[this.position++]=255&c;for(let p=n.length-c;p<n.length;++p)this.buffer[this.position++]=255&n[p]}xe(e){const n=this.De(e),c=og(n);this.Ce(1+c),this.buffer[this.position++]=~(255&c);for(let p=n.length-c;p<n.length;++p)this.buffer[this.position++]=~(255&n[p])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const n=function(p){const _=new DataView(new ArrayBuffer(8));return _.setFloat64(0,p,!1),new Uint8Array(_.buffer)}(e),c=0!=(128&n[0]);n[0]^=c?255:128;for(let p=1;p<n.length;++p)n[p]^=c?255:0;return n}Ee(e){const n=255&e;0===n?(this.ke(0),this.ke(255)):255===n?(this.ke(255),this.ke(0)):this.ke(n)}be(e){const n=255&e;0===n?(this.Me(0),this.Me(255)):255===n?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const n=e+this.position;if(n<=this.buffer.length)return;let c=2*this.buffer.length;c<n&&(c=n);const p=new Uint8Array(c);p.set(this.buffer),this.buffer=p}}class ey{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Im{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Zl{constructor(){this.$e=new l0,this.Be=new ey(this.$e),this.Le=new Im(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Hc{constructor(e,n,c,p){this.indexId=e,this.documentKey=n,this.arrayValue=c,this.directionalValue=p}Ue(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,c=new Uint8Array(n);return c.set(this.directionalValue,0),n!==e?c.set([0],this.directionalValue.length):++c[c.length-1],new Hc(this.indexId,this.documentKey,this.arrayValue,c)}}function yc(o,e){let n=o.indexId-e.indexId;return 0!==n?n:(n=yh(o.arrayValue,e.arrayValue),0!==n?n:(n=yh(o.directionalValue,e.directionalValue),0!==n?n:En.comparator(o.documentKey,e.documentKey)))}function yh(o,e){for(let n=0;n<o.length&&n<e.length;++n){const c=o[n]-e[n];if(0!==c)return c}return o.length-e.length}class Pm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const n of e.filters){const c=n;c.isInequality()?this.Qe=c:this.Ge.push(c)}}je(e){Rn(e.collectionGroup===this.collectionId);const n=Fi(e);if(void 0!==n&&!this.We(n))return!1;const c=Ps(e);let p=0,_=0;for(;p<c.length&&this.We(c[p]);++p);if(p===c.length)return!0;if(void 0!==this.Qe){const C=c[p];if(!this.ze(this.Qe,C)||!this.He(this.Ke[_++],C))return!1;++p}for(;p<c.length;++p){const C=c[p];if(_>=this.Ke.length||!this.He(this.Ke[_++],C))return!1}return!0}We(e){for(const n of this.Ge)if(this.ze(n,e))return!0;return!1}ze(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function ty(o){var e,n;if(Rn(o instanceof Or||o instanceof Ti),o instanceof Or){if(o instanceof uc){const p=(null===(n=null===(e=o.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(_=>Or.create(o.field,"==",_)))||[];return Ti.create(p,"or")}return o}const c=o.filters.map(p=>ty(p));return Ti.create(c,o.op)}function ag(o){if(0===o.getFilters().length)return[];const e=Mm(ty(o));return Rn(km(e)),ug(e)||lg(e)?[e]:e.getFilters()}function ug(o){return o instanceof Or}function lg(o){return o instanceof Ti&&Ss(o)}function km(o){return ug(o)||lg(o)||function(e){if(e instanceof Ti&&Xa(e)){for(const n of e.getFilters())if(!ug(n)&&!lg(n))return!1;return!0}return!1}(o)}function Mm(o){if(Rn(o instanceof Or||o instanceof Ti),o instanceof Or)return o;if(1===o.filters.length)return Mm(o.filters[0]);const e=o.filters.map(c=>Mm(c));let n=Ti.create(e,o.op);return n=_c(n),km(n)?n:(Rn(n instanceof Ti),Rn(Oo(n)),Rn(n.filters.length>1),n.filters.reduce((c,p)=>_h(c,p)))}function _h(o,e){let n;return Rn(o instanceof Or||o instanceof Ti),Rn(e instanceof Or||e instanceof Ti),n=o instanceof Or?e instanceof Or?Ti.create([o,e],"and"):ny(o,e):e instanceof Or?ny(e,o):function(c,p){if(Rn(c.filters.length>0&&p.filters.length>0),Oo(c)&&Oo(p))return Gh(c,p.getFilters());const _=Xa(c)?c:p,C=Xa(c)?p:c,N=_.filters.map(ee=>_h(ee,C));return Ti.create(N,"or")}(o,e),_c(n)}function ny(o,e){if(Oo(e))return Gh(e,o.getFilters());{const n=e.filters.map(c=>_h(o,c));return Ti.create(n,"or")}}function _c(o){if(Rn(o instanceof Or||o instanceof Ti),o instanceof Or)return o;const e=o.getFilters();if(1===e.length)return _c(e[0]);if(ku(o))return o;const n=e.map(p=>_c(p)),c=[];return n.forEach(p=>{p instanceof Or?c.push(p):p instanceof Ti&&(p.op===o.op?c.push(...p.filters):c.push(p))}),1===c.length?c[0]:Ti.create(c,o.op)}class wd{constructor(){this.Je=new cg}addToCollectionParentIndex(e,n){return this.Je.add(n),Ft.resolve()}getCollectionParents(e,n){return Ft.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return Ft.resolve()}deleteFieldIndex(e,n){return Ft.resolve()}getDocumentsMatchingTarget(e,n){return Ft.resolve(null)}getIndexType(e,n){return Ft.resolve(0)}getFieldIndexes(e,n){return Ft.resolve([])}getNextCollectionGroupToUpdate(e){return Ft.resolve(null)}getMinOffset(e,n){return Ft.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,n){return Ft.resolve(ko.min())}updateCollectionGroup(e,n,c){return Ft.resolve()}updateIndexEntries(e,n){return Ft.resolve()}}class cg{constructor(){this.index={}}add(e){const n=e.lastSegment(),c=e.popLast(),p=this.index[n]||new es(jr.comparator),_=!p.has(c);return this.index[n]=p.add(c),_}has(e){const n=e.lastSegment(),c=e.popLast(),p=this.index[n];return p&&p.has(c)}getEntries(e){return(this.index[e]||new es(jr.comparator)).toArray()}}const uf=new Uint8Array(0);class c0{constructor(e,n){this.user=e,this.databaseId=n,this.Ye=new cg,this.Xe=new Zu(c=>pa(c),(c,p)=>ud(c,p)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ye.has(n)){const c=n.lastSegment(),p=n.popLast();e.addOnCommittedListener(()=>{this.Ye.add(n)});const _={collectionId:c,parent:xa(p)};return ry(e).put(_)}return Ft.resolve()}getCollectionParents(e,n){const c=[],p=IDBKeyRange.bound([n,""],[sd(n),""],!1,!0);return ry(e).W(p).next(_=>{for(const C of _){if(C.collectionId!==n)break;c.push(Eo(C.parent))}return c})}addFieldIndex(e,n){const c=lf(e),p={indexId:(C=n).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var C;delete p.indexId;const _=c.add(p);if(n.indexState){const C=cf(e);return _.next(N=>{C.put(xm(N,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return _.next()}deleteFieldIndex(e,n){const c=lf(e),p=cf(e),_=np(e);return c.delete(n.indexId).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>_.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const c=np(e);let p=!0;const _=new Map;return Ft.forEach(this.Ze(n),C=>this.tn(e,C).next(N=>{p&&(p=!!N),_.set(C,N)})).next(()=>{if(p){let C=ri();const N=[];return Ft.forEach(_,(ee,fe)=>{var ke;cn("IndexedDbIndexManager",`Using index ${ke=ee,`id=${ke.indexId}|cg=${ke.collectionGroup}|f=${ke.fields.map(ts=>`${ts.fieldPath}:${ts.kind}`).join(",")}`} to execute ${pa(n)}`);const nt=function(ts,$s){const _e=Fi($s);if(void 0===_e)return null;for(const I of hl(ts,_e.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(fe,ee),Pt=function(ts,$s){const _e=new Map;for(const I of Ps($s))for(const j of hl(ts,I.fieldPath))switch(j.op){case"==":case"in":_e.set(I.fieldPath.canonicalString(),j.value);break;case"not-in":case"!=":return _e.set(I.fieldPath.canonicalString(),j.value),Array.from(_e.values())}return null}(fe,ee),rn=function(ts,$s){const _e=[];let I=!0;for(const j of Ps($s)){const U=0===j.kind?qh(ts,j.fieldPath,ts.startAt):Wh(ts,j.fieldPath,ts.startAt);_e.push(U.value),I&&(I=U.inclusive)}return new nr(_e,I)}(fe,ee),mn=function(ts,$s){const _e=[];let I=!0;for(const j of Ps($s)){const U=0===j.kind?Wh(ts,j.fieldPath,ts.endAt):qh(ts,j.fieldPath,ts.endAt);_e.push(U.value),I&&(I=U.inclusive)}return new nr(_e,I)}(fe,ee),qn=this.en(ee,fe,rn),Tr=this.en(ee,fe,mn),Ms=this.nn(ee,fe,Pt),So=this.sn(ee.indexId,nt,qn,rn.inclusive,Tr,mn.inclusive,Ms);return Ft.forEach(So,ts=>c.J(ts,n.limit).next($s=>{$s.forEach(_e=>{const I=En.fromSegments(_e.documentKey);C.has(I)||(C=C.add(I),N.push(I))})}))}).next(()=>N)}return Ft.resolve(null)})}Ze(e){let n=this.Xe.get(e);return n||(n=0===e.filters.length?[e]:ag(Ti.create(e.filters,"and")).map(c=>Gf(e.path,e.collectionGroup,e.orderBy,c.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,n),n)}sn(e,n,c,p,_,C,N){const ee=(null!=n?n.length:1)*Math.max(c.length,_.length),fe=ee/(null!=n?n.length:1),ke=[];for(let nt=0;nt<ee;++nt){const Pt=n?this.rn(n[nt/fe]):uf,rn=this.on(e,Pt,c[nt%fe],p),mn=this.un(e,Pt,_[nt%fe],C),qn=N.map(Tr=>this.on(e,Pt,Tr,!0));ke.push(...this.createRange(rn,mn,qn))}return ke}on(e,n,c,p){const _=new Hc(e,En.empty(),n,c);return p?_:_.Ue()}un(e,n,c,p){const _=new Hc(e,En.empty(),n,c);return p?_.Ue():_}tn(e,n){const c=new Pm(n),p=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,p).next(_=>{let C=null;for(const N of _)c.je(N)&&(!C||N.fields.length>C.fields.length)&&(C=N);return C})}getIndexType(e,n){let c=2;const p=this.Ze(n);return Ft.forEach(p,_=>this.tn(e,_).next(C=>{C?0!==c&&C.fields.length<function(N){let ee=new es(ys.comparator),fe=!1;for(const ke of N.filters)for(const nt of ke.getFlattenedFilters())nt.field.isKeyField()||("array-contains"===nt.op||"array-contains-any"===nt.op?fe=!0:ee=ee.add(nt.field));for(const ke of N.orderBy)ke.field.isKeyField()||(ee=ee.add(ke.field));return ee.size+(fe?1:0)}(_)&&(c=1):c=0})).next(()=>null!==n.limit&&p.length>1&&2===c?1:c)}cn(e,n){const c=new Zl;for(const p of Ps(e)){const _=n.data.field(p.fieldPath);if(null==_)return null;const C=c.qe(p.kind);Ju.Ie.ue(_,C)}return c.Fe()}rn(e){const n=new Zl;return Ju.Ie.ue(e,n.qe(0)),n.Fe()}an(e,n){const c=new Zl;return Ju.Ie.ue(yu(this.databaseId,n),c.qe(function(p){const _=Ps(p);return 0===_.length?0:_[_.length-1].kind}(e))),c.Fe()}nn(e,n,c){if(null===c)return[];let p=[];p.push(new Zl);let _=0;for(const C of Ps(e)){const N=c[_++];for(const ee of p)if(this.hn(n,C.fieldPath)&&Pu(N))p=this.ln(p,C,N);else{const fe=ee.qe(C.kind);Ju.Ie.ue(N,fe)}}return this.fn(p)}en(e,n,c){return this.nn(e,n,c.position)}fn(e){const n=[];for(let c=0;c<e.length;++c)n[c]=e[c].Fe();return n}ln(e,n,c){const p=[...e],_=[];for(const C of c.arrayValue.values||[])for(const N of p){const ee=new Zl;ee.seed(N.Fe()),Ju.Ie.ue(C,ee.qe(n.kind)),_.push(ee)}return _}hn(e,n){return!!e.filters.find(c=>c instanceof Or&&c.field.isEqual(n)&&("in"===c.op||"not-in"===c.op))}getFieldIndexes(e,n){const c=lf(e),p=cf(e);return(n?c.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):c.W()).next(_=>{const C=[];return Ft.forEach(_,N=>p.get([N.indexId,this.uid]).next(ee=>{C.push(function(fe,ke){const nt=ke?new Qa(ke.sequenceNumber,new ko(mh(ke.readTime),new En(Eo(ke.documentKey)),ke.largestBatchId)):Qa.empty(),Pt=fe.fields.map(([rn,mn])=>new oo(ys.fromServerFormat(rn),mn));return new Qs(fe.indexId,fe.collectionGroup,Pt,nt)}(N,ee))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((c,p)=>{const _=c.indexState.sequenceNumber-p.indexState.sequenceNumber;return 0!==_?_:Mr(c.collectionGroup,p.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,c){const p=lf(e),_=cf(e);return this.dn(e).next(C=>p.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(N=>Ft.forEach(N,ee=>_.put(xm(ee.indexId,this.user,C,c)))))}updateIndexEntries(e,n){const c=new Map;return Ft.forEach(n,(p,_)=>{const C=c.get(p.collectionGroup);return(C?Ft.resolve(C):this.getFieldIndexes(e,p.collectionGroup)).next(N=>(c.set(p.collectionGroup,N),Ft.forEach(N,ee=>this._n(e,p,ee).next(fe=>{const ke=this.wn(_,ee);return fe.isEqual(ke)?Ft.resolve():this.mn(e,_,ee,fe,ke)}))))})}gn(e,n,c,p){return np(e).put({indexId:p.indexId,uid:this.uid,arrayValue:p.arrayValue,directionalValue:p.directionalValue,orderedDocumentKey:this.an(c,n.key),documentKey:n.key.path.toArray()})}yn(e,n,c,p){return np(e).delete([p.indexId,this.uid,p.arrayValue,p.directionalValue,this.an(c,n.key),n.key.path.toArray()])}_n(e,n,c){const p=np(e);let _=new es(yc);return p.Z({index:"documentKeyIndex",range:IDBKeyRange.only([c.indexId,this.uid,this.an(c,n)])},(C,N)=>{_=_.add(new Hc(c.indexId,n,N.arrayValue,N.directionalValue))}).next(()=>_)}wn(e,n){let c=new es(yc);const p=this.cn(n,e);if(null==p)return c;const _=Fi(n);if(null!=_){const C=e.data.field(_.fieldPath);if(Pu(C))for(const N of C.arrayValue.values||[])c=c.add(new Hc(n.indexId,e.key,this.rn(N),p))}else c=c.add(new Hc(n.indexId,e.key,uf,p));return c}mn(e,n,c,p,_){cn("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const C=[];return function(N,ee,fe,ke,nt){const Pt=N.getIterator(),rn=ee.getIterator();let mn=dl(Pt),qn=dl(rn);for(;mn||qn;){let Tr=!1,Ms=!1;if(mn&&qn){const So=fe(mn,qn);So<0?Ms=!0:So>0&&(Tr=!0)}else null!=mn?Ms=!0:Tr=!0;Tr?(ke(qn),qn=dl(rn)):Ms?(nt(mn),mn=dl(Pt)):(mn=dl(Pt),qn=dl(rn))}}(p,_,yc,N=>{C.push(this.gn(e,n,c,N))},N=>{C.push(this.yn(e,n,c,N))}),Ft.waitFor(C)}dn(e){let n=1;return cf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(c,p,_)=>{_.done(),n=p.sequenceNumber+1}).next(()=>n)}createRange(e,n,c){c=c.sort((C,N)=>yc(C,N)).filter((C,N,ee)=>!N||0!==yc(C,ee[N-1]));const p=[];p.push(e);for(const C of c){const N=yc(C,e),ee=yc(C,n);if(0===N)p[0]=e.Ue();else if(N>0&&ee<0)p.push(C),p.push(C.Ue());else if(ee>0)break}p.push(n);const _=[];for(let C=0;C<p.length;C+=2){if(this.pn(p[C],p[C+1]))return[];_.push(IDBKeyRange.bound([p[C].indexId,this.uid,p[C].arrayValue,p[C].directionalValue,uf,[]],[p[C+1].indexId,this.uid,p[C+1].arrayValue,p[C+1].directionalValue,uf,[]]))}return _}pn(e,n){return yc(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(dg)}getMinOffset(e,n){return Ft.mapArray(this.Ze(n),c=>this.tn(e,c).next(p=>p||In())).next(dg)}}function ry(o){return Wo(o,"collectionParents")}function np(o){return Wo(o,"indexEntries")}function lf(o){return Wo(o,"indexConfiguration")}function cf(o){return Wo(o,"indexState")}function dg(o){Rn(0!==o.length);let e=o[0].indexState.offset,n=e.largestBatchId;for(let c=1;c<o.length;c++){const p=o[c].indexState.offset;Ca(p,e)<0&&(e=p),n<p.largestBatchId&&(n=p.largestBatchId)}return new ko(e.readTime,e.documentKey,n)}const hg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nu{constructor(e,n,c){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=c}static withCacheSize(e){return new Nu(e,Nu.DEFAULT_COLLECTION_PERCENTILE,Nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fg(o,e,n){const c=o.store("mutations"),p=o.store("documentMutations"),_=[],C=IDBKeyRange.only(n.batchId);let N=0;const ee=c.Z({range:C},(ke,nt,Pt)=>(N++,Pt.delete()));_.push(ee.next(()=>{Rn(1===N)}));const fe=[];for(const ke of n.mutations){const nt=ng(e,ke.key.path,n.batchId);_.push(p.delete(nt)),fe.push(ke.key)}return Ft.waitFor(_).next(()=>fe)}function Cd(o){if(!o)return 0;let e;if(o.document)e=o.document;else if(o.unknownDocument)e=o.unknownDocument;else{if(!o.noDocument)throw In();e=o.noDocument}return JSON.stringify(e).length}Nu.DEFAULT_COLLECTION_PERCENTILE=10,Nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nu.DEFAULT=new Nu(41943040,Nu.DEFAULT_COLLECTION_PERCENTILE,Nu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nu.DISABLED=new Nu(-1,0,0);class pg{constructor(e,n,c,p){this.userId=e,this.yt=n,this.indexManager=c,this.referenceDelegate=p,this.In={}}static re(e,n,c,p){Rn(""!==e.uid);const _=e.isAuthenticated()?e.uid:"";return new pg(_,n,c,p)}checkEmpty(e){let n=!0;const c=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).Z({index:"userMutationsIndex",range:c},(p,_,C)=>{n=!1,C.done()}).next(()=>n)}addMutationBatch(e,n,c,p){const _=df(e),C=bc(e);return C.add({}).next(N=>{Rn("number"==typeof N);const ee=new rf(N,n,c,p),fe=function(Pt,rn,mn){const qn=mn.baseMutations.map(Ms=>jt(Pt.ie,Ms)),Tr=mn.mutations.map(Ms=>jt(Pt.ie,Ms));return{userId:rn,batchId:mn.batchId,localWriteTimeMs:mn.localWriteTime.toMillis(),baseMutations:qn,mutations:Tr}}(this.yt,this.userId,ee),ke=[];let nt=new es((Pt,rn)=>Mr(Pt.canonicalString(),rn.canonicalString()));for(const Pt of p){const rn=ng(this.userId,Pt.key.path,N);nt=nt.add(Pt.key.path.popLast()),ke.push(C.put(fe)),ke.push(_.put(rn,Jf))}return nt.forEach(Pt=>{ke.push(this.indexManager.addToCollectionParentIndex(e,Pt))}),e.addOnCommittedListener(()=>{this.In[N]=ee.keys()}),Ft.waitFor(ke).next(()=>ee)})}lookupMutationBatch(e,n){return bc(e).get(n).next(c=>c?(Rn(c.userId===this.userId),Xu(this.yt,c)):null)}Tn(e,n){return this.In[n]?Ft.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(c=>{if(c){const p=c.keys();return this.In[n]=p,p}return null})}getNextMutationBatchAfterBatchId(e,n){const c=n+1,p=IDBKeyRange.lowerBound([this.userId,c]);let _=null;return bc(e).Z({index:"userMutationsIndex",range:p},(C,N,ee)=>{N.userId===this.userId&&(Rn(N.batchId>=c),_=Xu(this.yt,N)),ee.done()}).next(()=>_)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let c=-1;return bc(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(p,_,C)=>{c=_.batchId,C.done()}).next(()=>c)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bc(e).W("userMutationsIndex",n).next(c=>c.map(p=>Xu(this.yt,p)))}getAllMutationBatchesAffectingDocumentKey(e,n){const c=Tl(this.userId,n.path),p=IDBKeyRange.lowerBound(c),_=[];return df(e).Z({range:p},(C,N,ee)=>{const[fe,ke,nt]=C,Pt=Eo(ke);if(fe===this.userId&&n.path.isEqual(Pt))return bc(e).get(nt).next(rn=>{if(!rn)throw In();Rn(rn.userId===this.userId),_.push(Xu(this.yt,rn))});ee.done()}).next(()=>_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let c=new es(Mr);const p=[];return n.forEach(_=>{const C=Tl(this.userId,_.path),N=IDBKeyRange.lowerBound(C),ee=df(e).Z({range:N},(fe,ke,nt)=>{const[Pt,rn,mn]=fe,qn=Eo(rn);Pt===this.userId&&_.path.isEqual(qn)?c=c.add(mn):nt.done()});p.push(ee)}),Ft.waitFor(p).next(()=>this.En(e,c))}getAllMutationBatchesAffectingQuery(e,n){const c=n.path,p=c.length+1,_=Tl(this.userId,c),C=IDBKeyRange.lowerBound(_);let N=new es(Mr);return df(e).Z({range:C},(ee,fe,ke)=>{const[nt,Pt,rn]=ee,mn=Eo(Pt);nt===this.userId&&c.isPrefixOf(mn)?mn.length===p&&(N=N.add(rn)):ke.done()}).next(()=>this.En(e,N))}En(e,n){const c=[],p=[];return n.forEach(_=>{p.push(bc(e).get(_).next(C=>{if(null===C)throw In();Rn(C.userId===this.userId),c.push(Xu(this.yt,C))}))}),Ft.waitFor(p).next(()=>c)}removeMutationBatch(e,n){return fg(e.se,this.userId,n).next(c=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),Ft.forEach(c,p=>this.referenceDelegate.markPotentiallyOrphaned(e,p))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Ft.resolve();const c=IDBKeyRange.lowerBound([this.userId]),p=[];return df(e).Z({range:c},(_,C,N)=>{if(_[0]===this.userId){const ee=Eo(_[1]);p.push(ee)}else N.done()}).next(()=>{Rn(0===p.length)})})}containsKey(e,n){return iy(e,this.userId,n)}Rn(e){return sy(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iy(o,e,n){const c=Tl(e,n.path),p=c[1],_=IDBKeyRange.lowerBound(c);let C=!1;return df(o).Z({range:_,X:!0},(N,ee,fe)=>{const[ke,nt,Pt]=N;ke===e&&nt===p&&(C=!0),fe.done()}).next(()=>C)}function bc(o){return Wo(o,"mutations")}function df(o){return Wo(o,"documentMutations")}function sy(o){return Wo(o,"mutationQueues")}class Sd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Sd(0)}static vn(){return new Sd(-1)}}class oy{constructor(e,n){this.referenceDelegate=e,this.yt=n}allocateTargetId(e){return this.Vn(e).next(n=>{const c=new Sd(n.highestTargetId);return n.highestTargetId=c.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>Bn.fromTimestamp(new Ji(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,c){return this.Vn(e).next(p=>(p.highestListenSequenceNumber=n,c&&(p.lastRemoteSnapshotVersion=c.toTimestamp()),n>p.highestListenSequenceNumber&&(p.highestListenSequenceNumber=n),this.Sn(e,p)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(c=>(c.targetCount+=1,this.Cn(n,c),this.Sn(e,c))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Yl(e).delete(n.targetId)).next(()=>this.Vn(e)).next(c=>(Rn(c.targetCount>0),c.targetCount-=1,this.Sn(e,c)))}removeTargets(e,n,c){let p=0;const _=[];return Yl(e).Z((C,N)=>{const ee=Va(N);ee.sequenceNumber<=n&&null===c.get(ee.targetId)&&(p++,_.push(this.removeTargetData(e,ee)))}).next(()=>Ft.waitFor(_)).next(()=>p)}forEachTarget(e,n){return Yl(e).Z((c,p)=>{const _=Va(p);n(_)})}Vn(e){return Tc(e).get("targetGlobalKey").next(n=>(Rn(null!==n),n))}Sn(e,n){return Tc(e).put("targetGlobalKey",n)}Dn(e,n){return Yl(e).put(ep(this.yt,n))}Cn(e,n){let c=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,c=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,c=!0),c}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const c=pa(n),p=IDBKeyRange.bound([c,Number.NEGATIVE_INFINITY],[c,Number.POSITIVE_INFINITY]);let _=null;return Yl(e).Z({range:p,index:"queryTargetsIndex"},(C,N,ee)=>{const fe=Va(N);ud(n,fe.target)&&(_=fe,ee.done())}).next(()=>_)}addMatchingKeys(e,n,c){const p=[],_=Dd(e);return n.forEach(C=>{const N=xa(C.path);p.push(_.put({targetId:c,path:N})),p.push(this.referenceDelegate.addReference(e,c,C))}),Ft.waitFor(p)}removeMatchingKeys(e,n,c){const p=Dd(e);return Ft.forEach(n,_=>{const C=xa(_.path);return Ft.waitFor([p.delete([c,C]),this.referenceDelegate.removeReference(e,c,_)])})}removeMatchingKeysForTargetId(e,n){const c=Dd(e),p=IDBKeyRange.bound([n],[n+1],!1,!0);return c.delete(p)}getMatchingKeysForTargetId(e,n){const c=IDBKeyRange.bound([n],[n+1],!1,!0),p=Dd(e);let _=ri();return p.Z({range:c,X:!0},(C,N,ee)=>{const fe=Eo(C[1]),ke=new En(fe);_=_.add(ke)}).next(()=>_)}containsKey(e,n){const c=xa(n.path),p=IDBKeyRange.bound([c],[sd(c)],!1,!0);let _=0;return Dd(e).Z({index:"documentTargetsIndex",X:!0,range:p},([C,N],ee,fe)=>{0!==C&&(_++,fe.done())}).next(()=>_>0)}ne(e,n){return Yl(e).get(n).next(c=>c?Va(c):null)}}function Yl(o){return Wo(o,"targets")}function Tc(o){return Wo(o,"targetGlobal")}function Dd(o){return Wo(o,"targetDocuments")}function Om([o,e],[n,c]){const p=Mr(o,n);return 0===p?Mr(e,c):p}class K0{constructor(e){this.xn=e,this.buffer=new es(Om),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const c=this.buffer.last();Om(n,c)<0&&(this.buffer=this.buffer.delete(c).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ay{constructor(e,n,c){this.garbageCollector=e,this.asyncQueue=n,this.localStore=c,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var n=this;cn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ve.Z)(function*(){n.Mn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(c){ds(c)?cn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c):yield lu(c)}yield n.Fn(3e5)}))}}class Aa{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(c=>Math.floor(n/100*c))}nthSequenceNumber(e,n){if(0===n)return Ft.resolve(nn.at);const c=new K0(n);return this.$n.forEachTarget(e,p=>c.On(p.sequenceNumber)).next(()=>this.$n.Ln(e,p=>c.On(p))).next(()=>c.maxValue)}removeTargets(e,n,c){return this.$n.removeTargets(e,n,c)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(cn("LruGarbageCollector","Garbage collection skipped; disabled"),Ft.resolve(hg)):this.getCacheSize(e).next(c=>c<this.params.cacheSizeCollectionThreshold?(cn("LruGarbageCollector",`Garbage collection skipped; Cache size ${c} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hg):this.qn(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,n){let c,p,_,C,N,ee,fe;const ke=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(nt=>(nt>this.params.maximumSequenceNumbersToCollect?(cn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${nt}`),p=this.params.maximumSequenceNumbersToCollect):p=nt,C=Date.now(),this.nthSequenceNumber(e,p))).next(nt=>(c=nt,N=Date.now(),this.removeTargets(e,c,n))).next(nt=>(_=nt,ee=Date.now(),this.removeOrphanedDocuments(e,c))).next(nt=>(fe=Date.now(),bi()<=kt.in.DEBUG&&cn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ke}ms\n\tDetermined least recently used ${p} in `+(N-C)+`ms\n\tRemoved ${_} targets in `+(ee-N)+`ms\n\tRemoved ${nt} documents in `+(fe-ee)+`ms\nTotal Duration: ${fe-ke}ms`),Ft.resolve({didRun:!0,sequenceNumbersCollected:p,targetsRemoved:_,documentsRemoved:nt})))}}class Z0{constructor(e,n){this.db=e,this.garbageCollector=new Aa(this,n)}Bn(e){const n=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(c=>n.next(p=>c+p))}Un(e){let n=0;return this.Ln(e,c=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(c,p)=>n(p))}addReference(e,n,c){return hf(e,c)}removeReference(e,n,c){return hf(e,c)}removeTargets(e,n,c){return this.db.getTargetCache().removeTargets(e,n,c)}markPotentiallyOrphaned(e,n){return hf(e,n)}Gn(e,n){return function(c,p){let _=!1;return sy(c).tt(C=>iy(c,C,p).next(N=>(N&&(_=!0),Ft.resolve(!N)))).next(()=>_)}(e,n)}removeOrphanedDocuments(e,n){const c=this.db.getRemoteDocumentCache().newChangeBuffer(),p=[];let _=0;return this.Kn(e,(C,N)=>{if(N<=n){const ee=this.Gn(e,C).next(fe=>{if(!fe)return _++,c.getEntry(e,C).next(()=>(c.removeEntry(C,Bn.min()),Dd(e).delete([0,xa(C.path)])))});p.push(ee)}}).next(()=>Ft.waitFor(p)).next(()=>c.apply(e)).next(()=>_)}removeTarget(e,n){const c=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,c)}updateLimboDocument(e,n){return hf(e,n)}Kn(e,n){const c=Dd(e);let p,_=nn.at;return c.Z({index:"documentTargetsIndex"},([C,N],{path:ee,sequenceNumber:fe})=>{0===C?(_!==nn.at&&n(new En(Eo(p)),_),_=fe,p=ee):_=nn.at}).next(()=>{_!==nn.at&&n(new En(Eo(p)),_)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hf(o,e){return Dd(o).put((c=o.currentSequenceNumber,{targetId:0,path:xa(e.path),sequenceNumber:c}));var c}class Rm{constructor(){this.changes=new Zu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const c=this.changes.get(n);return void 0!==c?Ft.resolve(c):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uy{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,c){return eu(e).put(c)}removeEntry(e,n,c){return eu(e).delete(function(p,_){const C=p.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],gh(_),C[C.length-1]]}(n,c))}updateMetadata(e,n){return this.getMetadata(e).next(c=>(c.byteSize+=n,this.Qn(e,c)))}getEntry(e,n){let c=Bs.newInvalidDocument(n);return eu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rp(n))},(p,_)=>{c=this.jn(n,_)}).next(()=>c)}Wn(e,n){let c={size:0,document:Bs.newInvalidDocument(n)};return eu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(rp(n))},(p,_)=>{c={document:this.jn(n,_),size:Cd(_)}}).next(()=>c)}getEntries(e,n){let c=na();return this.zn(e,n,(p,_)=>{const C=this.jn(p,_);c=c.insert(p,C)}).next(()=>c)}Hn(e,n){let c=na(),p=new Ro(En.comparator);return this.zn(e,n,(_,C)=>{const N=this.jn(_,C);c=c.insert(_,N),p=p.insert(_,Cd(C))}).next(()=>({documents:c,Jn:p}))}zn(e,n,c){if(n.isEmpty())return Ft.resolve();let p=new es(dy);n.forEach(ee=>p=p.add(ee));const _=IDBKeyRange.bound(rp(p.first()),rp(p.last())),C=p.getIterator();let N=C.getNext();return eu(e).Z({index:"documentKeyIndex",range:_},(ee,fe,ke)=>{const nt=En.fromSegments([...fe.prefixPath,fe.collectionGroup,fe.documentId]);for(;N&&dy(N,nt)<0;)c(N,null),N=C.getNext();N&&N.isEqual(nt)&&(c(N,fe),N=C.hasNext()?C.getNext():null),N?ke.j(rp(N)):ke.done()}).next(()=>{for(;N;)c(N,null),N=C.hasNext()?C.getNext():null})}getAllFromCollection(e,n,c){const p=[n.popLast().toArray(),n.lastSegment(),gh(c.readTime),c.documentKey.path.isEmpty()?"":c.documentKey.path.lastSegment()],_=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return eu(e).W(IDBKeyRange.bound(p,_,!0)).next(C=>{let N=na();for(const ee of C){const fe=this.jn(En.fromSegments(ee.prefixPath.concat(ee.collectionGroup,ee.documentId)),ee);N=N.insert(fe.key,fe)}return N})}getAllFromCollectionGroup(e,n,c,p){let _=na();const C=Nm(n,c),N=Nm(n,ko.max());return eu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,N,!0)},(ee,fe,ke)=>{const nt=this.jn(En.fromSegments(fe.prefixPath.concat(fe.collectionGroup,fe.documentId)),fe);_=_.insert(nt.key,nt),_.size===p&&ke.done()}).next(()=>_)}newChangeBuffer(e){return new ly(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return cy(e).get("remoteDocumentGlobalKey").next(n=>(Rn(!!n),n))}Qn(e,n){return cy(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const c=function Qv(o,e){let n;if(e.document)n=le(o.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const c=En.fromSegments(e.noDocument.path),p=mh(e.noDocument.readTime);n=Bs.newNoDocument(c,p),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return In();{const c=En.fromSegments(e.unknownDocument.path),p=mh(e.unknownDocument.version);n=Bs.newUnknownDocument(c,p)}}return e.readTime&&n.setReadTime(function(c){const p=new Ji(c[0],c[1]);return Bn.fromTimestamp(p)}(e.readTime)),n}(this.yt,n);if(!c.isNoDocument()||!c.version.isEqual(Bn.min()))return c}return Bs.newInvalidDocument(e)}}function gg(o){return new uy(o)}class ly extends Rm{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Zu(c=>c.toString(),(c,p)=>c.isEqual(p))}applyChanges(e){const n=[];let c=0,p=new es((_,C)=>Mr(_.canonicalString(),C.canonicalString()));return this.changes.forEach((_,C)=>{const N=this.Xn.get(_);if(n.push(this.Yn.removeEntry(e,_,N.readTime)),C.isValidDocument()){const ee=Dm(this.Yn.yt,C);p=p.add(_.path.popLast());const fe=Cd(ee);c+=fe-N.size,n.push(this.Yn.addEntry(e,_,ee))}else if(c-=N.size,this.trackRemovals){const ee=Dm(this.Yn.yt,C.convertToNoDocument(Bn.min()));n.push(this.Yn.addEntry(e,_,ee))}}),p.forEach(_=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,_))}),n.push(this.Yn.updateMetadata(e,c)),Ft.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(c=>(this.Xn.set(n,{size:c.size,readTime:c.document.readTime}),c.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:c,Jn:p})=>(p.forEach((_,C)=>{this.Xn.set(_,{size:C,readTime:c.get(_).readTime})}),c))}}function cy(o){return Wo(o,"remoteDocumentGlobal")}function eu(o){return Wo(o,"remoteDocumentsV14")}function rp(o){const e=o.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nm(o,e){const n=e.documentKey.path.toArray();return[o,gh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function dy(o,e){const n=o.path.toArray(),c=e.path.toArray();let p=0;for(let _=0;_<n.length-2&&_<c.length-2;++_)if(p=Mr(n[_],c[_]),p)return p;return p=Mr(n.length,c.length),p||(p=Mr(n[n.length-2],c[c.length-2]),p||Mr(n[n.length-1],c[c.length-1]))}class hy{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Lm{constructor(e,n,c,p){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=c,this.indexManager=p}getDocument(e,n){let c=null;return this.documentOverlayCache.getOverlay(e,n).next(p=>(c=p,this.remoteDocumentCache.getEntry(e,n))).next(p=>(null!==c&&Gl(c.mutation,p,Ba.empty(),Ji.now()),p))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(c=>this.getLocalViewOfDocuments(e,c,ri()).next(()=>c))}getLocalViewOfDocuments(e,n,c=ri()){const p=Ou();return this.populateOverlays(e,p,n).next(()=>this.computeViews(e,n,p,c).next(_=>{let C=mc();return _.forEach((N,ee)=>{C=C.insert(N,ee.overlayedDocument)}),C}))}getOverlayedDocuments(e,n){const c=Ou();return this.populateOverlays(e,c,n).next(()=>this.computeViews(e,n,c,ri()))}populateOverlays(e,n,c){const p=[];return c.forEach(_=>{n.has(_)||p.push(_)}),this.documentOverlayCache.getOverlays(e,p).next(_=>{_.forEach((C,N)=>{n.set(C,N)})})}computeViews(e,n,c,p){let _=na();const C=Ru(),N=Ru();return n.forEach((ee,fe)=>{const ke=c.get(fe.key);p.has(fe.key)&&(void 0===ke||ke.mutation instanceof gl)?_=_.insert(fe.key,fe):void 0!==ke?(C.set(fe.key,ke.mutation.getFieldMask()),Gl(ke.mutation,fe,ke.mutation.getFieldMask(),Ji.now())):C.set(fe.key,Ba.empty())}),this.recalculateAndSaveOverlays(e,_).next(ee=>(ee.forEach((fe,ke)=>C.set(fe,ke)),n.forEach((fe,ke)=>{var nt;return N.set(fe,new hy(ke,null!==(nt=C.get(fe))&&void 0!==nt?nt:null))}),N))}recalculateAndSaveOverlays(e,n){const c=Ru();let p=new Ro((C,N)=>C-N),_=ri();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(C=>{for(const N of C)N.keys().forEach(ee=>{const fe=n.get(ee);if(null===fe)return;let ke=c.get(ee)||Ba.empty();ke=N.applyToLocalView(fe,ke),c.set(ee,ke);const nt=(p.get(N.batchId)||ri()).add(ee);p=p.insert(N.batchId,nt)})}).next(()=>{const C=[],N=p.getReverseIterator();for(;N.hasNext();){const ee=N.getNext(),fe=ee.key,ke=ee.value,nt=ga();ke.forEach(Pt=>{if(!_.has(Pt)){const rn=Kf(n.get(Pt),c.get(Pt));null!==rn&&nt.set(Pt,rn),_=_.add(Pt)}}),C.push(this.documentOverlayCache.saveOverlays(e,fe,nt))}return Ft.waitFor(C)}).next(()=>c)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(c=>this.recalculateAndSaveOverlays(e,c))}getDocumentsMatchingQuery(e,n,c){return En.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):Nc(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,c):this.getDocumentsMatchingCollectionQuery(e,n,c);var p}getNextDocuments(e,n,c,p){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,c,p).next(_=>{const C=p-_.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,c.largestBatchId,p-_.size):Ft.resolve(Ou());let N=-1,ee=_;return C.next(fe=>Ft.forEach(fe,(ke,nt)=>(N<nt.largestBatchId&&(N=nt.largestBatchId),_.get(ke)?Ft.resolve():this.remoteDocumentCache.getEntry(e,ke).next(Pt=>{ee=ee.insert(ke,Pt)}))).next(()=>this.populateOverlays(e,fe,_)).next(()=>this.computeViews(e,ee,fe,ri())).next(ke=>({batchId:N,changes:vl(ke)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new En(n)).next(c=>{let p=mc();return c.isFoundDocument()&&(p=p.insert(c.key,c)),p})}getDocumentsMatchingCollectionGroupQuery(e,n,c){const p=n.collectionGroup;let _=mc();return this.indexManager.getCollectionParents(e,p).next(C=>Ft.forEach(C,N=>{const ee=(fe=n,ke=N.child(p),new Ul(ke,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));var fe,ke;return this.getDocumentsMatchingCollectionQuery(e,ee,c).next(fe=>{fe.forEach((ke,nt)=>{_=_.insert(ke,nt)})})}).next(()=>_))}getDocumentsMatchingCollectionQuery(e,n,c){let p;return this.remoteDocumentCache.getAllFromCollection(e,n.path,c).next(_=>(p=_,this.documentOverlayCache.getOverlaysForCollection(e,n.path,c.largestBatchId))).next(_=>{_.forEach((N,ee)=>{const fe=ee.getKey();null===p.get(fe)&&(p=p.insert(fe,Bs.newInvalidDocument(fe)))});let C=mc();return p.forEach((N,ee)=>{const fe=_.get(N);void 0!==fe&&Gl(fe.mutation,ee,Ba.empty(),Ji.now()),Yh(n,ee)&&(C=C.insert(N,ee))}),C})}}class fy{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return Ft.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var c;return this.Zn.set(n.id,{id:(c=n).id,version:c.version,createTime:To(c.createTime)}),Ft.resolve()}getNamedQuery(e,n){return Ft.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(c=n).name,query:af(c.bundledQuery),readTime:To(c.readTime)}),Ft.resolve();var c}}class Fm{constructor(){this.overlays=new Ro(En.comparator),this.es=new Map}getOverlay(e,n){return Ft.resolve(this.overlays.get(n))}getOverlays(e,n){const c=Ou();return Ft.forEach(n,p=>this.getOverlay(e,p).next(_=>{null!==_&&c.set(p,_)})).next(()=>c)}saveOverlays(e,n,c){return c.forEach((p,_)=>{this.oe(e,n,_)}),Ft.resolve()}removeOverlaysForBatchId(e,n,c){const p=this.es.get(c);return void 0!==p&&(p.forEach(_=>this.overlays=this.overlays.remove(_)),this.es.delete(c)),Ft.resolve()}getOverlaysForCollection(e,n,c){const p=Ou(),_=n.length+1,C=new En(n.child("")),N=this.overlays.getIteratorFrom(C);for(;N.hasNext();){const ee=N.getNext().value,fe=ee.getKey();if(!n.isPrefixOf(fe.path))break;fe.path.length===_&&ee.largestBatchId>c&&p.set(ee.getKey(),ee)}return Ft.resolve(p)}getOverlaysForCollectionGroup(e,n,c,p){let _=new Ro((fe,ke)=>fe-ke);const C=this.overlays.getIterator();for(;C.hasNext();){const fe=C.getNext().value;if(fe.getKey().getCollectionGroup()===n&&fe.largestBatchId>c){let ke=_.get(fe.largestBatchId);null===ke&&(ke=Ou(),_=_.insert(fe.largestBatchId,ke)),ke.set(fe.getKey(),fe)}}const N=Ou(),ee=_.getIterator();for(;ee.hasNext()&&(ee.getNext().value.forEach((fe,ke)=>N.set(fe,ke)),!(N.size()>=p)););return Ft.resolve(N)}oe(e,n,c){const p=this.overlays.get(c.key);if(null!==p){const C=this.es.get(p.largestBatchId).delete(c.key);this.es.set(p.largestBatchId,C)}this.overlays=this.overlays.insert(c.key,new ph(n,c));let _=this.es.get(n);void 0===_&&(_=ri(),this.es.set(n,_)),this.es.set(n,_.add(c.key))}}class jm{constructor(){this.ns=new es(Ha.ss),this.rs=new es(Ha.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const c=new Ha(e,n);this.ns=this.ns.add(c),this.rs=this.rs.add(c)}us(e,n){e.forEach(c=>this.addReference(c,n))}removeReference(e,n){this.cs(new Ha(e,n))}hs(e,n){e.forEach(c=>this.removeReference(c,n))}ls(e){const n=new En(new jr([])),c=new Ha(n,e),p=new Ha(n,e+1),_=[];return this.rs.forEachInRange([c,p],C=>{this.cs(C),_.push(C.key)}),_}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new En(new jr([])),c=new Ha(n,e),p=new Ha(n,e+1);let _=ri();return this.rs.forEachInRange([c,p],C=>{_=_.add(C.key)}),_}containsKey(e){const n=new Ha(e,0),c=this.ns.firstAfterOrEqual(n);return null!==c&&e.isEqual(c.key)}}class Ha{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return En.comparator(e.key,n.key)||Mr(e._s,n._s)}static os(e,n){return Mr(e._s,n._s)||En.comparator(e.key,n.key)}}class py{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new es(Ha.ss)}checkEmpty(e){return Ft.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,c,p){const _=this.ws;this.ws++;const C=new rf(_,n,c,p);this.mutationQueue.push(C);for(const N of p)this.gs=this.gs.add(new Ha(N.key,_)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return Ft.resolve(C)}lookupMutationBatch(e,n){return Ft.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const p=this.ps(n+1),_=p<0?0:p;return Ft.resolve(this.mutationQueue.length>_?this.mutationQueue[_]:null)}getHighestUnacknowledgedBatchId(){return Ft.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const c=new Ha(n,0),p=new Ha(n,Number.POSITIVE_INFINITY),_=[];return this.gs.forEachInRange([c,p],C=>{const N=this.ys(C._s);_.push(N)}),Ft.resolve(_)}getAllMutationBatchesAffectingDocumentKeys(e,n){let c=new es(Mr);return n.forEach(p=>{const _=new Ha(p,0),C=new Ha(p,Number.POSITIVE_INFINITY);this.gs.forEachInRange([_,C],N=>{c=c.add(N._s)})}),Ft.resolve(this.Is(c))}getAllMutationBatchesAffectingQuery(e,n){const c=n.path,p=c.length+1;let _=c;En.isDocumentKey(_)||(_=_.child(""));const C=new Ha(new En(_),0);let N=new es(Mr);return this.gs.forEachWhile(ee=>{const fe=ee.key.path;return!!c.isPrefixOf(fe)&&(fe.length===p&&(N=N.add(ee._s)),!0)},C),Ft.resolve(this.Is(N))}Is(e){const n=[];return e.forEach(c=>{const p=this.ys(c);null!==p&&n.push(p)}),n}removeMutationBatch(e,n){Rn(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let c=this.gs;return Ft.forEach(n.mutations,p=>{const _=new Ha(p.key,n.batchId);return c=c.delete(_),this.referenceDelegate.markPotentiallyOrphaned(e,p.key)}).next(()=>{this.gs=c})}An(e){}containsKey(e,n){const c=new Ha(n,0),p=this.gs.firstAfterOrEqual(c);return Ft.resolve(n.isEqual(p&&p.key))}performConsistencyCheck(e){return Ft.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class pi{constructor(e){this.Es=e,this.docs=new Ro(En.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const c=n.key,p=this.docs.get(c),_=p?p.size:0,C=this.Es(n);return this.docs=this.docs.insert(c,{document:n.mutableCopy(),size:C}),this.size+=C-_,this.indexManager.addToCollectionParentIndex(e,c.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const c=this.docs.get(n);return Ft.resolve(c?c.document.mutableCopy():Bs.newInvalidDocument(n))}getEntries(e,n){let c=na();return n.forEach(p=>{const _=this.docs.get(p);c=c.insert(p,_?_.document.mutableCopy():Bs.newInvalidDocument(p))}),Ft.resolve(c)}getAllFromCollection(e,n,c){let p=na();const _=new En(n.child("")),C=this.docs.getIteratorFrom(_);for(;C.hasNext();){const{key:N,value:{document:ee}}=C.getNext();if(!n.isPrefixOf(N.path))break;N.path.length>n.length+1||Ca(kc(ee),c)<=0||(p=p.insert(ee.key,ee.mutableCopy()))}return Ft.resolve(p)}getAllFromCollectionGroup(e,n,c,p){In()}As(e,n){return Ft.forEach(this.docs,c=>n(c))}newChangeBuffer(e){return new mg(this)}getSize(e){return Ft.resolve(this.size)}}class mg extends Rm{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((c,p)=>{p.isValidDocument()?n.push(this.Yn.addEntry(e,p)):this.Yn.removeEntry(c)}),Ft.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class ip{constructor(e){this.persistence=e,this.Rs=new Zu(n=>pa(n),ud),this.lastRemoteSnapshotVersion=Bn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new jm,this.targetCount=0,this.vs=Sd.Pn()}forEachTarget(e,n){return this.Rs.forEach((c,p)=>n(p)),Ft.resolve()}getLastRemoteSnapshotVersion(e){return Ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ft.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ft.resolve(this.highestTargetId)}setTargetsMetadata(e,n,c){return c&&(this.lastRemoteSnapshotVersion=c),n>this.bs&&(this.bs=n),Ft.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Sd(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,Ft.resolve()}updateTargetData(e,n){return this.Dn(n),Ft.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,Ft.resolve()}removeTargets(e,n,c){let p=0;const _=[];return this.Rs.forEach((C,N)=>{N.sequenceNumber<=n&&null===c.get(N.targetId)&&(this.Rs.delete(C),_.push(this.removeMatchingKeysForTargetId(e,N.targetId)),p++)}),Ft.waitFor(_).next(()=>p)}getTargetCount(e){return Ft.resolve(this.targetCount)}getTargetData(e,n){const c=this.Rs.get(n)||null;return Ft.resolve(c)}addMatchingKeys(e,n,c){return this.Ps.us(n,c),Ft.resolve()}removeMatchingKeys(e,n,c){this.Ps.hs(n,c);const p=this.persistence.referenceDelegate,_=[];return p&&n.forEach(C=>{_.push(p.markPotentiallyOrphaned(e,C))}),Ft.waitFor(_)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),Ft.resolve()}getMatchingKeysForTargetId(e,n){const c=this.Ps.ds(n);return Ft.resolve(c)}containsKey(e,n){return Ft.resolve(this.Ps.containsKey(n))}}class wl{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new nn(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new ip(this),this.indexManager=new wd,this.remoteDocumentCache=new pi(c=>this.referenceDelegate.xs(c)),this.yt=new u0(n),this.Ns=new fy(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let c=this.Vs[e.toKey()];return c||(c=new py(n,this.referenceDelegate),this.Vs[e.toKey()]=c),c}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,c){cn("MemoryPersistence","Starting transaction:",e);const p=new Um(this.Ss.next());return this.referenceDelegate.ks(),c(p).next(_=>this.referenceDelegate.Os(p).next(()=>_)).toPromise().then(_=>(p.raiseOnCommittedEvent(),_))}Ms(e,n){return Ft.or(Object.values(this.Vs).map(c=>()=>c.containsKey(e,n)))}}class Um extends qu{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Fs=new jm,this.$s=null}static Bs(e){return new vg(e)}get Ls(){if(this.$s)return this.$s;throw In()}addReference(e,n,c){return this.Fs.addReference(c,n),this.Ls.delete(c.toString()),Ft.resolve()}removeReference(e,n,c){return this.Fs.removeReference(c,n),this.Ls.add(c.toString()),Ft.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),Ft.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(p=>this.Ls.add(p.toString()));const c=this.persistence.getTargetCache();return c.getMatchingKeysForTargetId(e,n.targetId).next(p=>{p.forEach(_=>this.Ls.add(_.toString()))}).next(()=>c.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ft.forEach(this.Ls,c=>{const p=En.fromPath(c);return this.qs(e,p).next(_=>{_||n.removeEntry(p,Bn.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(c=>{c?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return Ft.or([()=>Ft.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class gy{constructor(e){this.yt=e}$(e,n,c,p){const _=new ul("createOrUpgrade",n);var N;c<1&&p>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hh,{unique:!0}),N.createObjectStore("documentMutations"),yg(e),function(N){N.createObjectStore("remoteDocuments")}(e));let C=Ft.resolve();return c<3&&p>=3&&(0!==c&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),yg(e)),C=C.next(()=>function(N){const ee=N.store("targetGlobal"),fe={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bn.min().toTimestamp(),targetCount:0};return ee.put("targetGlobalKey",fe)}(_))),c<4&&p>=4&&(0!==c&&(C=C.next(()=>function(N,ee){return ee.store("mutations").W().next(fe=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hh,{unique:!0});const ke=ee.store("mutations"),nt=fe.map(Pt=>ke.put(Pt));return Ft.waitFor(nt)})}(e,_))),C=C.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),c<5&&p>=5&&(C=C.next(()=>this.Us(_))),c<6&&p>=6&&(C=C.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(_)))),c<7&&p>=7&&(C=C.next(()=>this.Gs(_))),c<8&&p>=8&&(C=C.next(()=>this.Qs(e,_))),c<9&&p>=9&&(C=C.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),c<10&&p>=10&&(C=C.next(()=>this.js(_))),c<11&&p>=11&&(C=C.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),c<12&&p>=12&&(C=C.next(()=>{!function(N){const ee=N.createObjectStore("documentOverlays",{keyPath:ig});ee.createIndex("collectionPathOverlayIndex",Cm,{unique:!1}),ee.createIndex("collectionGroupOverlayIndex",o0,{unique:!1})}(e)})),c<13&&p>=13&&(C=C.next(()=>function(N){const ee=N.createObjectStore("remoteDocumentsV14",{keyPath:bm});ee.createIndex("documentKeyIndex",r0),ee.createIndex("collectionGroupIndex",s0)}(e)).next(()=>this.Ws(e,_)).next(()=>e.deleteObjectStore("remoteDocuments"))),c<14&&p>=14&&(C=C.next(()=>this.zs(e,_))),c<15&&p>=15&&(C=C.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:qv}).createIndex("sequenceNumberIndex",qo,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:wm}).createIndex("documentKeyIndex",Wv,{unique:!1})}(e))),C}Ks(e){let n=0;return e.store("remoteDocuments").Z((c,p)=>{n+=Cd(p)}).next(()=>{const c={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",c)})}Us(e){const n=e.store("mutationQueues"),c=e.store("mutations");return n.W().next(p=>Ft.forEach(p,_=>{const C=IDBKeyRange.bound([_.userId,-1],[_.userId,_.lastAcknowledgedBatchId]);return c.W("userMutationsIndex",C).next(N=>Ft.forEach(N,ee=>{Rn(ee.userId===_.userId);const fe=Xu(this.yt,ee);return fg(e,_.userId,fe).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),c=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(p=>{const _=[];return c.Z((C,N)=>{const ee=new jr(C),fe=[0,xa(ee)];_.push(n.get(fe).next(ke=>ke?Ft.resolve():n.put({targetId:0,path:xa(ee),sequenceNumber:p.highestListenSequenceNumber})))}).next(()=>Ft.waitFor(_))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:Em});const c=n.store("collectionParents"),p=new cg,_=C=>{if(p.add(C)){const N=C.lastSegment(),ee=C.popLast();return c.put({collectionId:N,parent:xa(ee)})}};return n.store("remoteDocuments").Z({X:!0},(C,N)=>{const ee=new jr(C);return _(ee.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([C,N,ee],fe)=>{const ke=Eo(N);return _(ke.popLast())}))}js(e){const n=e.store("targets");return n.Z((c,p)=>{const _=Va(p),C=ep(this.yt,_);return n.put(C)})}Ws(e,n){const c=n.store("remoteDocuments"),p=[];return c.Z((_,C)=>{const N=n.store("remoteDocumentsV14"),ee=(fe=C,fe.document?new En(jr.fromString(fe.document.name).popFirst(5)):fe.noDocument?En.fromSegments(fe.noDocument.path):fe.unknownDocument?En.fromSegments(fe.unknownDocument.path):In()).path.toArray();var fe;const ke={prefixPath:ee.slice(0,ee.length-2),collectionGroup:ee[ee.length-2],documentId:ee[ee.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};p.push(N.put(ke))}).next(()=>Ft.waitFor(p))}zs(e,n){const c=n.store("mutations"),p=gg(this.yt),_=new wl(vg.Bs,this.yt.ie);return c.W().next(C=>{const N=new Map;return C.forEach(ee=>{var fe;let ke=null!==(fe=N.get(ee.userId))&&void 0!==fe?fe:ri();Xu(this.yt,ee).keys().forEach(nt=>ke=ke.add(nt)),N.set(ee.userId,ke)}),Ft.forEach(N,(ee,fe)=>{const ke=new kr(fe),nt=vh.re(this.yt,ke),Pt=_.getIndexManager(ke),rn=pg.re(ke,this.yt,Pt,_.referenceDelegate);return new Lm(p,rn,nt,Pt).recalculateAndSaveOverlaysForDocumentKeys(new Yv(n,nn.at),ee).next()})})}}function yg(o){o.createObjectStore("targetDocuments",{keyPath:rg}).createIndex("documentTargetsIndex",Ed,{unique:!0}),o.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tm,{unique:!0}),o.createObjectStore("targetGlobal")}const sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _g{constructor(e,n,c,p,_,C,N,ee,fe,ke,nt=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=c,this.Hs=_,this.window=C,this.document=N,this.Js=fe,this.Ys=ke,this.Xs=nt,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Pt=>Promise.resolve(),!_g.C())throw new an(Ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Z0(this,p),this.ii=n+"main",this.yt=new u0(ee),this.ri=new ja(this.ii,this.Xs,new gy(this.yt)),this.Cs=new oy(this.referenceDelegate,this.yt),this.remoteDocumentCache=gg(this.yt),this.Ns=new Am,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ke&&Si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new an(Ht.FAILED_PRECONDITION,sp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new nn(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var n=this;return this.si=function(){var c=(0,Ve.Z)(function*(p){if(n.started)return e(p)});return function(p){return c.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var n=(0,Ve.Z)(function*(c){null===c.newVersion&&(yield e())});return function(c){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ve.Z)(function*(){n.started&&(yield n.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ds(e))return cn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return cn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return op(e).get("owner").next(n=>Ft.resolve(this.mi(n)))}gi(e){return Bm(e).delete(this.clientId)}yi(){var e=this;return(0,Ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",c=>{const p=Wo(c,"clientMetadata");return p.W().next(_=>{const C=e.Ii(_,18e5),N=_.filter(ee=>-1===C.indexOf(ee));return Ft.forEach(N,ee=>p.delete(ee.clientId)).next(()=>N)})}).catch(()=>[]);if(e.oi)for(const c of n)e.oi.removeItem(e.Ti(c.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Ft.resolve(!0):op(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new an(Ht.FAILED_PRECONDITION,sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bm(e).W().next(c=>void 0===this.Ii(c,5e3).find(p=>{if(this.clientId!==p.clientId){const C=!this.inForeground&&p.inForeground,N=this.networkEnabled===p.networkEnabled;if(!this.networkEnabled&&p.networkEnabled||C&&N)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&cn("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const c=new Yv(n,nn.at);return e._i(c).next(()=>e.gi(c))}),e.ri.close(),e.Pi()})()}Ii(e,n){return e.filter(c=>this.pi(c.updateTimeMs,n)&&!this.Ei(c.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Bm(e).W().next(n=>this.Ii(n,18e5).map(c=>c.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return pg.re(e,this.yt,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new c0(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return vh.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,n,c){cn("IndexedDbPersistence","Starting transaction:",e);const p="readonly"===n?"readonly":"readwrite",_=15===(C=this.Xs)?a0:14===C?fh:13===C?Sm:12===C?Zv:11===C?Kv:void In();var C;let N;return this.ri.runTransaction(e,p,_,ee=>(N=new Yv(ee,this.Ss?this.Ss.next():nn.at),"readwrite-primary"===n?this.fi(N).next(fe=>!!fe||this.di(N)).next(fe=>{if(!fe)throw Si(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new an(Ht.FAILED_PRECONDITION,Iu);return c(N)}).next(fe=>this.wi(N).next(()=>fe)):this.Vi(N).next(()=>c(N)))).then(ee=>(N.raiseOnCommittedEvent(),ee))}Vi(e){return op(e).get("owner").next(n=>{if(null!==n&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new an(Ht.FAILED_PRECONDITION,sp)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return op(e).put("owner",n)}static C(){return ja.C()}_i(e){const n=op(e);return n.get("owner").next(c=>this.mi(c)?(cn("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ft.resolve())}pi(e,n){const c=Date.now();return!(e<c-n||e>c&&(Si(`Detected an update time that is in the future: ${e} > ${c}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const c=null!==(null===(n=this.oi)||void 0===n?void 0:n.getItem(this.Ti(e)));return cn("IndexedDbPersistence",`Client '${e}' ${c?"is":"is not"} zombied in LocalStorage`),c}catch(c){return Si("IndexedDbPersistence","Failed to get zombied client id.",c),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Si("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function op(o){return Wo(o,"owner")}function Bm(o){return Wo(o,"clientMetadata")}function bg(o,e){let n=o.projectId;return o.isDefaultDatabase||(n+="."+o.database),"firestore/"+e+"/"+n+"/"}class ap{constructor(e,n,c,p){this.targetId=e,this.fromCache=n,this.Si=c,this.Di=p}static Ci(e,n){let c=ri(),p=ri();for(const _ of n.docChanges)switch(_.type){case 0:c=c.add(_.doc.key);break;case 1:p=p.add(_.doc.key)}return new ap(e,n.fromCache,c,p)}}class Gc{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,c,p){return this.ki(e,n).next(_=>_||this.Oi(e,n,p,c)).next(_=>_||this.Mi(e,n))}ki(e,n){if(Kh(n))return Ft.resolve(null);let c=_s(n);return this.indexManager.getIndexType(e,c).next(p=>0===p?null:(null!==n.limit&&1===p&&(n=fl(n,null,"F"),c=_s(n)),this.indexManager.getDocumentsMatchingTarget(e,c).next(_=>{const C=ri(..._);return this.Ni.getDocuments(e,C).next(N=>this.indexManager.getMinOffset(e,c).next(ee=>{const fe=this.Fi(n,N);return this.$i(n,fe,C,ee.readTime)?this.ki(e,fl(n,null,"F")):this.Bi(e,fe,n,ee)}))})))}Oi(e,n,c,p){return Kh(n)||p.isEqual(Bn.min())?this.Mi(e,n):this.Ni.getDocuments(e,c).next(_=>{const C=this.Fi(n,_);return this.$i(n,C,c,p)?this.Mi(e,n):(bi()<=kt.in.DEBUG&&cn("QueryEngine","Re-using previous result from %s to execute query: %s",p.toString(),Zh(n)),this.Bi(e,C,n,wa(p,-1)))})}Fi(e,n){let c=new es($f(e));return n.forEach((p,_)=>{Yh(e,_)&&(c=c.add(_))}),c}$i(e,n,c,p){if(null===e.limit)return!1;if(c.size!==n.size)return!0;const _="F"===e.limitType?n.last():n.first();return!!_&&(_.hasPendingWrites||_.version.compareTo(p)>0)}Mi(e,n){return bi()<=kt.in.DEBUG&&cn("QueryEngine","Using full collection scan to execute query:",Zh(n)),this.Ni.getDocumentsMatchingQuery(e,n,ko.min())}Bi(e,n,c,p){return this.Ni.getDocumentsMatchingQuery(e,c,p).next(_=>(n.forEach(C=>{_=_.insert(C.key,C)}),_))}}class d0{constructor(e,n,c,p){this.persistence=e,this.Li=n,this.yt=p,this.qi=new Ro(Mr),this.Ui=new Zu(_=>pa(_),ud),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(c)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lm(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function Tg(o,e,n,c){return new d0(o,e,n,c)}function Eg(o,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,Ve.Z)(function*(o,e){const n=kn(o);return yield n.persistence.runTransaction("Handle user change","readonly",c=>{let p;return n.mutationQueue.getAllMutationBatches(c).next(_=>(p=_,n.Qi(e),n.mutationQueue.getAllMutationBatches(c))).next(_=>{const C=[],N=[];let ee=ri();for(const fe of p){C.push(fe.batchId);for(const ke of fe.mutations)ee=ee.add(ke.key)}for(const fe of _){N.push(fe.batchId);for(const ke of fe.mutations)ee=ee.add(ke.key)}return n.localDocuments.getDocuments(c,ee).next(fe=>({ji:fe,removedBatchIds:C,addedBatchIds:N}))})})}),Vm.apply(this,arguments)}function Y0(o,e){const n=kn(o);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",c=>{const p=e.batch.keys(),_=n.Gi.newChangeBuffer({trackRemovals:!0});return function(C,N,ee,fe){const ke=ee.batch,nt=ke.keys();let Pt=Ft.resolve();return nt.forEach(rn=>{Pt=Pt.next(()=>fe.getEntry(N,rn)).next(mn=>{const qn=ee.docVersions.get(rn);Rn(null!==qn),mn.version.compareTo(qn)<0&&(ke.applyToRemoteDocument(mn,ee),mn.isValidDocument()&&(mn.setReadTime(ee.commitVersion),fe.addEntry(mn)))})}),Pt.next(()=>C.mutationQueue.removeMutationBatch(N,ke))}(n,c,e,_).next(()=>_.apply(c)).next(()=>n.mutationQueue.performConsistencyCheck(c)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(c,p,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,function(C){let N=ri();for(let ee=0;ee<C.mutationResults.length;++ee)C.mutationResults[ee].transformResults.length>0&&(N=N.add(C.batch.mutations[ee].key));return N}(e))).next(()=>n.localDocuments.getDocuments(c,p))})}function h0(o){const e=kn(o);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Q0(o,e){const n=kn(o),c=e.snapshotVersion;let p=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",_=>{const C=n.Gi.newChangeBuffer({trackRemovals:!0});p=n.qi;const N=[];e.targetChanges.forEach((ke,nt)=>{const Pt=p.get(nt);if(!Pt)return;N.push(n.Cs.removeMatchingKeys(_,ke.removedDocuments,nt).next(()=>n.Cs.addMatchingKeys(_,ke.addedDocuments,nt)));let rn=Pt.withSequenceNumber(_.currentSequenceNumber);var mn,qn,Tr;e.targetMismatches.has(nt)?rn=rn.withResumeToken(wn.EMPTY_BYTE_STRING,Bn.min()).withLastLimboFreeSnapshotVersion(Bn.min()):ke.resumeToken.approximateByteSize()>0&&(rn=rn.withResumeToken(ke.resumeToken,c)),p=p.insert(nt,rn),qn=rn,Tr=ke,(0===(mn=Pt).resumeToken.approximateByteSize()||qn.snapshotVersion.toMicroseconds()-mn.snapshotVersion.toMicroseconds()>=3e8||Tr.addedDocuments.size+Tr.modifiedDocuments.size+Tr.removedDocuments.size>0)&&N.push(n.Cs.updateTargetData(_,rn))});let ee=na(),fe=ri();if(e.documentUpdates.forEach(ke=>{e.resolvedLimboDocuments.has(ke)&&N.push(n.persistence.referenceDelegate.updateLimboDocument(_,ke))}),N.push(Hm(_,C,e.documentUpdates).next(ke=>{ee=ke.Wi,fe=ke.zi})),!c.isEqual(Bn.min())){const ke=n.Cs.getLastRemoteSnapshotVersion(_).next(nt=>n.Cs.setTargetsMetadata(_,_.currentSequenceNumber,c));N.push(ke)}return Ft.waitFor(N).next(()=>C.apply(_)).next(()=>n.localDocuments.getLocalViewOfDocuments(_,ee,fe)).next(()=>ee)}).then(_=>(n.qi=p,_))}function Hm(o,e,n){let c=ri(),p=ri();return n.forEach(_=>c=c.add(_)),e.getEntries(o,c).next(_=>{let C=na();return n.forEach((N,ee)=>{const fe=_.get(N);ee.isFoundDocument()!==fe.isFoundDocument()&&(p=p.add(N)),ee.isNoDocument()&&ee.version.isEqual(Bn.min())?(e.removeEntry(N,ee.readTime),C=C.insert(N,ee)):!fe.isValidDocument()||ee.version.compareTo(fe.version)>0||0===ee.version.compareTo(fe.version)&&fe.hasPendingWrites?(e.addEntry(ee),C=C.insert(N,ee)):cn("LocalStore","Ignoring outdated watch update for ",N,". Current version:",fe.version," Watch version:",ee.version)}),{Wi:C,zi:p}})}function my(o,e){const n=kn(o);return n.persistence.runTransaction("Get next mutation batch","readonly",c=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(c,e)))}function xd(o,e){const n=kn(o);return n.persistence.runTransaction("Allocate target","readwrite",c=>{let p;return n.Cs.getTargetData(c,e).next(_=>_?(p=_,Ft.resolve(p)):n.Cs.allocateTargetId(c).next(C=>(p=new Vc(e,C,0,c.currentSequenceNumber),n.Cs.addTargetData(c,p).next(()=>p))))}).then(c=>{const p=n.qi.get(c.targetId);return(null===p||c.snapshotVersion.compareTo(p.snapshotVersion)>0)&&(n.qi=n.qi.insert(c.targetId,c),n.Ui.set(e,c.targetId)),c})}function bh(o,e,n){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,Ve.Z)(function*(o,e,n){const c=kn(o),p=c.qi.get(e),_=n?"readwrite":"readwrite-primary";try{n||(yield c.persistence.runTransaction("Release target",_,C=>c.persistence.referenceDelegate.removeTarget(C,p)))}catch(C){if(!ds(C))throw C;cn("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}c.qi=c.qi.remove(e),c.Ui.delete(p.target)}),Cl.apply(this,arguments)}function Th(o,e,n){const c=kn(o);let p=Bn.min(),_=ri();return c.persistence.runTransaction("Execute query","readonly",C=>function(N,ee,fe){const ke=kn(N),nt=ke.Ui.get(fe);return void 0!==nt?Ft.resolve(ke.qi.get(nt)):ke.Cs.getTargetData(ee,fe)}(c,C,_s(e)).next(N=>{if(N)return p=N.lastLimboFreeSnapshotVersion,c.Cs.getMatchingKeysForTargetId(C,N.targetId).next(ee=>{_=ee})}).next(()=>c.Li.getDocumentsMatchingQuery(C,e,n?p:Bn.min(),n?_:ri())).next(N=>(Eh(c,Vl(e),N),{documents:N,Hi:_})))}function wg(o,e){const n=kn(o),c=kn(n.Cs),p=n.qi.get(e);return p?Promise.resolve(p.target):n.persistence.runTransaction("Get target data","readonly",_=>c.ne(_,e).next(C=>C?C.target:null))}function Ad(o,e){const n=kn(o),c=n.Ki.get(e)||Bn.min();return n.persistence.runTransaction("Get new document changes","readonly",p=>n.Gi.getAllFromCollectionGroup(p,e,wa(c,-1),Number.MAX_SAFE_INTEGER)).then(p=>(Eh(n,e,p),p))}function Eh(o,e,n){let c=o.Ki.get(e)||Bn.min();n.forEach((p,_)=>{_.readTime.compareTo(c)>0&&(c=_.readTime)}),o.Ki.set(e,c)}function Gm(){return Gm=(0,Ve.Z)(function*(o,e,n,c){const p=kn(o);let _=ri(),C=na();for(const fe of n){const ke=e.Ji(fe.metadata.name);fe.document&&(_=_.add(ke));const nt=e.Yi(fe);nt.setReadTime(e.Xi(fe.metadata.readTime)),C=C.insert(ke,nt)}const N=p.Gi.newChangeBuffer({trackRemovals:!0}),ee=yield xd(p,(fe=c,_s(Rc(jr.fromString(`__bundle__/docs/${fe}`)))));var fe;return p.persistence.runTransaction("Apply bundle documents","readwrite",fe=>Hm(fe,N,C).next(ke=>(N.apply(fe),ke)).next(ke=>p.Cs.removeMatchingKeysForTargetId(fe,ee.targetId).next(()=>p.Cs.addMatchingKeys(fe,_,ee.targetId)).next(()=>p.localDocuments.getLocalViewOfDocuments(fe,ke.Wi,ke.zi)).next(()=>ke.Wi)))}),Gm.apply(this,arguments)}function vy(o,e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Ve.Z)(function*(o,e,n=ri()){const c=yield xd(o,_s(af(e.bundledQuery))),p=kn(o);return p.persistence.runTransaction("Save named query","readwrite",_=>{const C=To(e.readTime);if(c.snapshotVersion.compareTo(C)>=0)return p.Ns.saveNamedQuery(_,e);const N=c.withResumeToken(wn.EMPTY_BYTE_STRING,C);return p.qi=p.qi.insert(N.targetId,N),p.Cs.updateTargetData(_,N).next(()=>p.Cs.removeMatchingKeysForTargetId(_,c.targetId)).next(()=>p.Cs.addMatchingKeys(_,n,c.targetId)).next(()=>p.Ns.saveNamedQuery(_,e))})}),Sg.apply(this,arguments)}function yy(o,e){return`firestore_clients_${o}_${e}`}function _y(o,e,n){let c=`firestore_mutations_${o}_${n}`;return e.isAuthenticated()&&(c+=`_${e.uid}`),c}function Dg(o,e){return`firestore_targets_${o}_${e}`}class xg{constructor(e,n,c,p){this.user=e,this.batchId=n,this.state=c,this.error=p}static Zi(e,n,c){const p=JSON.parse(c);let _,C="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error);return C&&p.error&&(C="string"==typeof p.error.message&&"string"==typeof p.error.code,C&&(_=new an(p.error.code,p.error.message))),C?new xg(e,n,p.state,_):(Si("SharedClientState",`Failed to parse mutation state for ID '${n}': ${c}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ff{constructor(e,n,c){this.targetId=e,this.state=n,this.error=c}static Zi(e,n){const c=JSON.parse(n);let p,_="object"==typeof c&&-1!==["not-current","current","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return _&&c.error&&(_="string"==typeof c.error.message&&"string"==typeof c.error.code,_&&(p=new an(c.error.code,c.error.message))),_?new ff(e,c.state,p):(Si("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class up{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const c=JSON.parse(n);let p="object"==typeof c&&c.activeTargetIds instanceof Array,_=ah();for(let C=0;p&&C<c.activeTargetIds.length;++C)p=mt(c.activeTargetIds[C]),_=_.add(c.activeTargetIds[C]);return p?new up(e,_):(Si("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class lp{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new lp(n.clientId,n.onlineState):(Si("SharedClientState",`Failed to parse online state: ${e}`),null)}}class by{constructor(){this.activeTargetIds=ah()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cp{constructor(e,n,c,p,_){this.window=e,this.Hs=n,this.persistenceKey=c,this.sr=p,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ro(Mr),this.started=!1,this.cr=[];const C=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.ar=yy(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new by),this.lr=new RegExp(`^firestore_clients_${C}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${C}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${C}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.syncEngine.vi();for(const p of n){if(p===e.sr)continue;const _=e.getItem(yy(e.persistenceKey,p));if(_){const C=up.Zi(p,_);C&&(e.ur=e.ur.insert(C.clientId,C))}}e.gr();const c=e.storage.getItem(e.wr);if(c){const p=e.yr(c);p&&e.pr(p)}for(const p of e.cr)e.rr(p);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((c,p)=>{p.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,c){this.Tr(e,n,c),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const c=this.storage.getItem(Dg(this.persistenceKey,e));if(c){const p=ff.Zi(e,c);p&&(n=p.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dg(this.persistenceKey,e))}updateQueryState(e,n,c){this.Rr(e,n,c)}handleUserChange(e,n,c){n.forEach(p=>{this.Er(p)}),this.currentUser=e,c.forEach(p=>{this.addPendingMutation(p)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return cn("SharedClientState","READ",e,n),n}setItem(e,n){cn("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){cn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var n=this;const c=e;if(c.storageArea===this.storage){if(cn("SharedClientState","EVENT",c.key,c.newValue),c.key===this.ar)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ve.Z)(function*(){if(n.started){if(null!==c.key)if(n.lr.test(c.key)){if(null==c.newValue){const p=n.vr(c.key);return n.Vr(p,null)}{const p=n.Sr(c.key,c.newValue);if(p)return n.Vr(p.clientId,p)}}else if(n.dr.test(c.key)){if(null!==c.newValue){const p=n.Dr(c.key,c.newValue);if(p)return n.Cr(p)}}else if(n._r.test(c.key)){if(null!==c.newValue){const p=n.Nr(c.key,c.newValue);if(p)return n.kr(p)}}else if(c.key===n.wr){if(null!==c.newValue){const p=n.yr(c.newValue);if(p)return n.pr(p)}}else if(c.key===n.hr){const p=function(_){let C=nn.at;if(null!=_)try{const N=JSON.parse(_);Rn("number"==typeof N),C=N}catch(N){Si("SharedClientState","Failed to read sequence number from WebStorage",N)}return C}(c.newValue);p!==nn.at&&n.sequenceNumberHandler(p)}else if(c.key===n.mr){const p=n.Or(c.newValue);yield Promise.all(p.map(_=>n.syncEngine.Mr(_)))}}else n.cr.push(c)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,c){const p=new xg(this.currentUser,e,n,c),_=_y(this.persistenceKey,this.currentUser,e);this.setItem(_,p.tr())}Er(e){const n=_y(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,n,c){const p=Dg(this.persistenceKey,e),_=new ff(e,n,c);this.setItem(p,_.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const c=this.vr(e);return up.Zi(c,n)}Dr(e,n){const c=this.dr.exec(e),p=Number(c[1]);return xg.Zi(new kr(void 0!==c[2]?c[2]:null),p,n)}Nr(e,n){const c=this._r.exec(e),p=Number(c[1]);return ff.Zi(p,n)}yr(e){return lp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var n=this;return(0,Ve.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Fr(e.batchId,e.state,e.error);cn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const c=n?this.ur.insert(e,n):this.ur.remove(e),p=this.Ir(this.ur),_=this.Ir(c),C=[],N=[];return _.forEach(ee=>{p.has(ee)||C.push(ee)}),p.forEach(ee=>{_.has(ee)||N.push(ee)}),this.syncEngine.Br(C,N).then(()=>{this.ur=c})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=ah();return e.forEach((c,p)=>{n=n.unionWith(p.activeTargetIds)}),n}}class pf{constructor(){this.Lr=new by,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,c){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,c){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new by,Promise.resolve()}handleUserChange(e,n,c){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class X0{Ur(e){}shutdown(){}}class wh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){cn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){cn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ty={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f0{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Ey extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,c,p,_){const C=this.ho(e,n);cn("RestConnection","Sending: ",C,c);const N={};return this.lo(N,p,_),this.fo(e,C,N,c).then(ee=>(cn("RestConnection","Received: ",ee),ee),ee=>{throw ci("RestConnection",`${e} failed with error: `,ee,"url: ",C,"request:",c),ee})}_o(e,n,c,p,_,C){return this.ao(e,n,c,p,_)}lo(e,n,c){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((p,_)=>e[_]=p),c&&c.headers.forEach((p,_)=>e[_]=p)}ho(e,n){return`${this.oo}/v1/${n}:${Ty[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,c,p){return new Promise((_,C)=>{const N=new ai;N.setWithCredentials(!0),N.listenOnce(Te.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case G.NO_ERROR:const fe=N.getResponseJson();cn("Connection","XHR received:",JSON.stringify(fe)),_(fe);break;case G.TIMEOUT:cn("Connection",'RPC "'+e+'" timed out'),C(new an(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case G.HTTP_ERROR:const ke=N.getStatus();if(cn("Connection",'RPC "'+e+'" failed with status:',ke,"response text:",N.getResponseText()),ke>0){let nt=N.getResponseJson();Array.isArray(nt)&&(nt=nt[0]);const Pt=nt?.error;if(Pt&&Pt.status&&Pt.message){const rn=function(mn){const qn=mn.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(qn)>=0?qn:Ht.UNKNOWN}(Pt.status);C(new an(rn,Pt.message))}else C(new an(Ht.UNKNOWN,"Server responded with status "+N.getStatus()))}else C(new an(Ht.UNAVAILABLE,"Connection failed."));break;default:In()}}finally{cn("Connection",'RPC "'+e+'" completed.')}});const ee=JSON.stringify(p);N.send(n,"POST",ee,c,15)})}wo(e,n,c){const p=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],_=V(),C=ue(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new en({})),this.lo(N.initMessageHeaders,n,c),N.encodeInitMessageHeaders=!0;const ee=p.join("");cn("Connection","Creating WebChannel: "+ee,N);const fe=_.createWebChannel(ee,N);let ke=!1,nt=!1;const Pt=new f0({Hr:mn=>{nt?cn("Connection","Not sending because WebChannel is closed:",mn):(ke||(cn("Connection","Opening WebChannel transport."),fe.open(),ke=!0),cn("Connection","WebChannel sending:",mn),fe.send(mn))},Jr:()=>fe.close()}),rn=(mn,qn,Tr)=>{mn.listen(qn,Ms=>{try{Tr(Ms)}catch(So){setTimeout(()=>{throw So},0)}})};return rn(fe,Nn.EventType.OPEN,()=>{nt||cn("Connection","WebChannel transport opened.")}),rn(fe,Nn.EventType.CLOSE,()=>{nt||(nt=!0,cn("Connection","WebChannel transport closed"),Pt.io())}),rn(fe,Nn.EventType.ERROR,mn=>{nt||(nt=!0,ci("Connection","WebChannel transport errored:",mn),Pt.io(new an(Ht.UNAVAILABLE,"The operation could not be completed")))}),rn(fe,Nn.EventType.MESSAGE,mn=>{var qn;if(!nt){const Tr=mn.data[0];Rn(!!Tr);const Ms=Tr,So=Ms.error||(null===(qn=Ms[0])||void 0===qn?void 0:qn.error);if(So){cn("Connection","WebChannel received error:",So);const ts=So.status;let $s=function(I){const j=No[I];if(void 0!==j)return nf(j)}(ts),_e=So.message;void 0===$s&&($s=Ht.INTERNAL,_e="Unknown error status: "+ts+" with message "+So.message),nt=!0,Pt.io(new an($s,_e)),fe.close()}else cn("Connection","WebChannel received:",Tr),Pt.ro(Tr)}}),rn(C,Je.STAT_EVENT,mn=>{mn.stat===Nt.PROXY?cn("Connection","Detected buffering proxy"):mn.stat===Nt.NOPROXY&&cn("Connection","Detected no buffering proxy")}),setTimeout(()=>{Pt.so()},0),Pt}}function $m(){return typeof window<"u"?window:null}function Ag(){return typeof document<"u"?document:null}function Sl(o){return new $l(o,!0)}class Id{constructor(e,n,c=1e3,p=1.5,_=6e4){this.Hs=e,this.timerId=n,this.mo=c,this.yo=p,this.po=_,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),c=Math.max(0,Date.now()-this.Eo),p=Math.max(0,n-c);p>0&&cn("ExponentialBackoff",`Backing off for ${p} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${c} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,p,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class dp{constructor(e,n,c,p,_,C,N,ee){this.Hs=e,this.vo=c,this.Vo=p,this.connection=_,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=N,this.listener=ee,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Id(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var c=this;return(0,Ve.Z)(function*(){c.Lo(),c.qo(),c.xo.cancel(),c.So++,4!==e?c.xo.reset():n&&n.code===Ht.RESOURCE_EXHAUSTED?(Si(n.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),c.xo.Ao()):n&&n.code===Ht.UNAUTHENTICATED&&3!==c.state&&(c.authCredentialsProvider.invalidateToken(),c.appCheckCredentialsProvider.invalidateToken()),null!==c.stream&&(c.Uo(),c.stream.close(),c.stream=null),c.state=e,yield c.listener.Zr(n)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([c,p])=>{this.So===n&&this.Go(c,p)},c=>{e(()=>{const p=new an(Ht.UNKNOWN,"Fetching auth token failed: "+c.message);return this.Qo(p)})})}Go(e,n){const c=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{c(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(p=>{c(()=>this.Qo(p))}),this.stream.onMessage(p=>{c(()=>this.onMessage(p))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return cn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(cn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pd extends dp{constructor(e,n,c,p,_,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,c,p,C),this.yt=_}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=function ht(o,e){let n;if("targetChange"in e){const c="NO_CHANGE"===(ee=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===ee?1:"REMOVE"===ee?2:"CURRENT"===ee?3:"RESET"===ee?4:In(),p=e.targetChange.targetIds||[],_=function(ee,fe){return ee.wt?(Rn(void 0===fe||"string"==typeof fe),wn.fromBase64String(fe||"")):(Rn(void 0===fe||fe instanceof Uint8Array),wn.fromUint8Array(fe||new Uint8Array))}(o,e.targetChange.resumeToken),C=e.targetChange.cause,N=C&&function(ee){const fe=void 0===ee.code?Ht.UNKNOWN:nf(ee.code);return new an(fe,ee.message||"")}(C);n=new vd(c,p,_,N||null)}else if("documentChange"in e){const c=e.documentChange,p=_l(o,c.document.name),_=To(c.document.updateTime),C=c.document.createTime?To(c.document.createTime):Bn.min(),N=new fa({mapValue:{fields:c.document.fields}}),ee=Bs.newFoundDocument(p,_,C,N);n=new fu(c.targetIds||[],c.removedTargetIds||[],ee.key,ee)}else if("documentDelete"in e){const c=e.documentDelete,p=_l(o,c.document),_=c.readTime?To(c.readTime):Bn.min(),C=Bs.newNoDocument(p,_);n=new fu([],c.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const c=e.documentRemove,p=_l(o,c.document);n=new fu([],c.removedTargetIds||[],p,null)}else{if(!("filter"in e))return In();{const c=e.filter,_=new ef(c.count||0);n=new md(c.targetId,_)}}var ee;return n}(this.yt,e),c=function(p){if(!("targetChange"in p))return Bn.min();const _=p.targetChange;return _.targetIds&&_.targetIds.length?Bn.min():_.readTime?To(_.readTime):Bn.min()}(e);return this.listener.Wo(n,c)}zo(e){const n={};n.database=y(this.yt),n.addTarget=function(p,_){let C;const N=_.target;return C=Xd(N)?{documents:Dr(p,N)}:{query:hr(p,N)},C.targetId=_.targetId,_.resumeToken.approximateByteSize()>0?C.resumeToken=yd(p,_.resumeToken):_.snapshotVersion.compareTo(Bn.min())>0&&(C.readTime=Tu(p,_.snapshotVersion.toTimestamp())),C}(this.yt,e);const c=function pu(o,e){const n=function(c,p){switch(p){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return In()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);c&&(n.labels=c),this.Bo(n)}Ho(e){const n={};n.database=y(this.yt),n.removeTarget=e,this.Bo(n)}}class zm extends dp{constructor(e,n,c,p,_,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,c,p,C),this.yt=_,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(Rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function Yn(o,e){return o&&o.length>0?(Rn(void 0!==e),o.map(n=>function(c,p){let _=To(c.updateTime?c.updateTime:p);return _.isEqual(Bn.min())&&(_=To(p)),new Jp(_,c.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),c=To(e.commitTime);return this.listener.Zo(c,n)}return Rn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=y(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(c=>jt(this.yt,c))};this.Bo(n)}}class Ig extends class{}{constructor(e,n,c,p){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=c,this.yt=p,this.nu=!1}su(){if(this.nu)throw new an(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,c){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,_])=>this.connection.ao(e,n,c,p,_)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new an(Ht.UNKNOWN,p.toString())})}_o(e,n,c,p){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,C])=>this.connection._o(e,n,c,_,C,p)).catch(_=>{throw"FirebaseError"===_.name?(_.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new an(Ht.UNKNOWN,_.toString())})}terminate(){this.nu=!0}}class qm{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Si(n),this.ou=!1):cn("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Pg{constructor(e,n,c,p,_){var C=this;this.localStore=e,this.datastore=n,this.asyncQueue=c,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=_,this.mu.Ur(N=>{c.enqueueAndForget((0,Ve.Z)(function*(){var ee;Ko(C)&&(cn("RemoteStore","Restarting streams for network reachability change."),yield(ee=(0,Ve.Z)(function*(fe){const ke=kn(fe);ke._u.add(4),yield _f(ke),ke.gu.set("Unknown"),ke._u.delete(4),yield vf(ke)}),function(fe){return ee.apply(this,arguments)})(C))}))}),this.gu=new qm(c,p)}}function vf(o){return yf.apply(this,arguments)}function yf(){return yf=(0,Ve.Z)(function*(o){if(Ko(o))for(const e of o.wu)yield e(!0)}),yf.apply(this,arguments)}function _f(o){return hp.apply(this,arguments)}function hp(){return hp=(0,Ve.Z)(function*(o){for(const e of o.wu)yield e(!1)}),hp.apply(this,arguments)}function el(o,e){const n=kn(o);n.du.has(e.targetId)||(n.du.set(e.targetId,e),pp(n)?Wm(n):$c(n).ko()&&kg(n,e))}function bf(o,e){const n=kn(o),c=$c(n);n.du.delete(e),c.ko()&&fp(n,e),0===n.du.size&&(c.ko()?c.Fo():Ko(n)&&n.gu.set("Unknown"))}function kg(o,e){o.yu.Ot(e.targetId),$c(o).zo(e)}function fp(o,e){o.yu.Ot(e),$c(o).Ho(e)}function Wm(o){o.yu=new vc({getRemoteKeysForTarget:e=>o.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>o.du.get(e)||null}),$c(o).start(),o.gu.uu()}function pp(o){return Ko(o)&&!$c(o).No()&&o.du.size>0}function Ko(o){return 0===kn(o)._u.size}function Dl(o){o.yu=void 0}function tl(o){return Lu.apply(this,arguments)}function Lu(){return Lu=(0,Ve.Z)(function*(o){o.du.forEach((e,n)=>{kg(o,e)})}),Lu.apply(this,arguments)}function Mg(o,e){return gp.apply(this,arguments)}function gp(){return gp=(0,Ve.Z)(function*(o,e){Dl(o),pp(o)?(o.gu.hu(e),Wm(o)):o.gu.set("Unknown")}),gp.apply(this,arguments)}function wy(o,e,n){return Og.apply(this,arguments)}function Og(){return Og=(0,Ve.Z)(function*(o,e,n){if(o.gu.set("Online"),e instanceof vd&&2===e.state&&e.cause)try{yield(c=(0,Ve.Z)(function*(p,_){const C=_.cause;for(const N of _.targetIds)p.du.has(N)&&(yield p.remoteSyncer.rejectListen(N,C),p.du.delete(N),p.yu.removeTarget(N))}),function(p,_){return c.apply(this,arguments)})(o,e)}catch(c){cn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),c),yield Rg(o,c)}else if(e instanceof fu?o.yu.Kt(e):e instanceof md?o.yu.Jt(e):o.yu.jt(e),!n.isEqual(Bn.min()))try{const c=yield h0(o.localStore);n.compareTo(c)>=0&&(yield function(p,_){const C=p.yu.Zt(_);return C.targetChanges.forEach((N,ee)=>{if(N.resumeToken.approximateByteSize()>0){const fe=p.du.get(ee);fe&&p.du.set(ee,fe.withResumeToken(N.resumeToken,_))}}),C.targetMismatches.forEach(N=>{const ee=p.du.get(N);if(!ee)return;p.du.set(N,ee.withResumeToken(wn.EMPTY_BYTE_STRING,ee.snapshotVersion)),fp(p,N);const fe=new Vc(ee.target,N,1,ee.sequenceNumber);kg(p,fe)}),p.remoteSyncer.applyRemoteEvent(C)}(o,n))}catch(c){cn("RemoteStore","Failed to raise snapshot:",c),yield Rg(o,c)}var c}),Og.apply(this,arguments)}function Rg(o,e,n){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,Ve.Z)(function*(o,e,n){if(!ds(e))throw e;o._u.add(1),yield _f(o),o.gu.set("Offline"),n||(n=()=>h0(o.localStore)),o.asyncQueue.enqueueRetryable((0,Ve.Z)(function*(){cn("RemoteStore","Retrying IndexedDB access"),yield n(),o._u.delete(1),yield vf(o)}))}),Ng.apply(this,arguments)}function Cy(o,e){return e().catch(n=>Rg(o,n,e))}function Ch(o){return mp.apply(this,arguments)}function mp(){return mp=(0,Ve.Z)(function*(o){const e=kn(o),n=Ec(e);let c=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;p0(e);)try{const p=yield my(e.localStore,c);if(null===p){0===e.fu.length&&n.Fo();break}c=p.batchId,g0(e,p)}catch(p){yield Rg(e,p)}Sy(e)&&Dy(e)}),mp.apply(this,arguments)}function p0(o){return Ko(o)&&o.fu.length<10}function g0(o,e){o.fu.push(e);const n=Ec(o);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Sy(o){return Ko(o)&&!Ec(o).No()&&o.fu.length>0}function Dy(o){Ec(o).start()}function Lg(o){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,Ve.Z)(function*(o){Ec(o).eu()}),Fu.apply(this,arguments)}function Km(o){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Ve.Z)(function*(o){const e=Ec(o);for(const n of o.fu)e.Xo(n.mutations)}),Zm.apply(this,arguments)}function m0(o,e,n){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,Ve.Z)(function*(o,e,n){const c=o.fu.shift(),p=sf.from(c,e,n);yield Cy(o,()=>o.remoteSyncer.applySuccessfulWrite(p)),yield Ch(o)}),Sh.apply(this,arguments)}function xy(o,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ve.Z)(function*(o,e){var n;e&&Ec(o).Yo&&(yield(n=(0,Ve.Z)(function*(c,p){if(tf(_=p.code)&&_!==Ht.ABORTED){const C=c.fu.shift();Ec(c).Mo(),yield Cy(c,()=>c.remoteSyncer.rejectFailedWrite(C.batchId,p)),yield Ch(c)}var _}),function(c,p){return n.apply(this,arguments)})(o,e)),Sy(o)&&Dy(o)}),Ym.apply(this,arguments)}function Ay(o,e){return vp.apply(this,arguments)}function vp(){return vp=(0,Ve.Z)(function*(o,e){const n=kn(o);n.asyncQueue.verifyOperationInProgress(),cn("RemoteStore","RemoteStore received new credentials");const c=Ko(n);n._u.add(3),yield _f(n),c&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield vf(n)}),vp.apply(this,arguments)}function Qm(o,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ve.Z)(function*(o,e){const n=kn(o);e?(n._u.delete(2),yield vf(n)):e||(n._u.add(2),yield _f(n),n.gu.set("Unknown"))}),Xm.apply(this,arguments)}function $c(o){return o.pu||(o.pu=function(e,n,c){const p=kn(e);return p.su(),new Pd(n,p.connection,p.authCredentials,p.appCheckCredentials,p.yt,c)}(o.datastore,o.asyncQueue,{Yr:tl.bind(null,o),Zr:Mg.bind(null,o),Wo:wy.bind(null,o)}),o.wu.push(function(){var e=(0,Ve.Z)(function*(n){n?(o.pu.Mo(),pp(o)?Wm(o):o.gu.set("Unknown")):(yield o.pu.stop(),Dl(o))});return function(n){return e.apply(this,arguments)}}())),o.pu}function Ec(o){return o.Iu||(o.Iu=function(e,n,c){const p=kn(e);return p.su(),new zm(n,p.connection,p.authCredentials,p.appCheckCredentials,p.yt,c)}(o.datastore,o.asyncQueue,{Yr:Lg.bind(null,o),Zr:xy.bind(null,o),tu:Km.bind(null,o),Zo:m0.bind(null,o)}),o.wu.push(function(){var e=(0,Ve.Z)(function*(n){n?(o.Iu.Mo(),yield Ch(o)):(yield o.Iu.stop(),o.fu.length>0&&(cn("RemoteStore",`Stopping write stream with ${o.fu.length} pending writes`),o.fu=[]))});return function(n){return e.apply(this,arguments)}}())),o.Iu}class Tf{constructor(e,n,c,p,_){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=c,this.op=p,this.removalCallback=_,this.deferred=new ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,n,c,p,_){const C=Date.now()+c,N=new Tf(e,n,C,p,_);return N.start(c),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new an(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nl(o,e){if(Si("AsyncQueue",`${e}: ${o}`),ds(o))return new an(Ht.UNAVAILABLE,`${e}: ${o}`);throw o}class kd{constructor(e){this.comparator=e?(n,c)=>e(n,c)||En.comparator(n.key,c.key):(n,c)=>En.comparator(n.key,c.key),this.keyedMap=mc(),this.sortedSet=new Ro(this.comparator)}static emptySet(e){return new kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,c)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof kd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),c=e.sortedSet.getIterator();for(;n.hasNext();){const p=n.getNext().key,_=c.getNext().key;if(!p.isEqual(_))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const c=new kd;return c.comparator=this.comparator,c.keyedMap=e,c.sortedSet=n,c}}class v0{constructor(){this.Tu=new Ro(En.comparator)}track(e){const n=e.doc.key,c=this.Tu.get(n);c?0!==e.type&&3===c.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==c.type?this.Tu=this.Tu.insert(n,{type:c.type,doc:e.doc}):2===e.type&&2===c.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===c.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===c.type?this.Tu=this.Tu.remove(n):1===e.type&&2===c.type?this.Tu=this.Tu.insert(n,{type:1,doc:c.doc}):0===e.type&&1===c.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):In():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,c)=>{e.push(c)}),e}}class Dh{constructor(e,n,c,p,_,C,N,ee,fe){this.query=e,this.docs=n,this.oldDocs=c,this.docChanges=p,this.mutatedKeys=_,this.fromCache=C,this.syncStateChanged=N,this.excludesMetadataChanges=ee,this.hasCachedResults=fe}static fromInitialDocuments(e,n,c,p,_){const C=[];return n.forEach(N=>{C.push({type:0,doc:N})}),new Dh(e,n,kd.emptySet(n),C,c,p,!0,!1,_)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,c=e.docChanges;if(n.length!==c.length)return!1;for(let p=0;p<n.length;p++)if(n[p].type!==c[p].type||!n[p].doc.isEqual(c[p].doc))return!1;return!0}}class Iy{constructor(){this.Au=void 0,this.listeners=[]}}class Py{constructor(){this.queries=new Zu(e=>Jd(e),cc),this.onlineState="Unknown",this.Ru=new Set}}function Fg(o,e){return yp.apply(this,arguments)}function yp(){return yp=(0,Ve.Z)(function*(o,e){const n=kn(o),c=e.query;let p=!1,_=n.queries.get(c);if(_||(p=!0,_=new Iy),p)try{_.Au=yield n.onListen(c)}catch(C){const N=nl(C,`Initialization of query '${Zh(e.query)}' failed`);return void e.onError(N)}n.queries.set(c,_),_.listeners.push(e),e.bu(n.onlineState),_.Au&&e.Pu(_.Au)&&Jm(n)}),yp.apply(this,arguments)}function xl(o,e){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,Ve.Z)(function*(o,e){const n=kn(o),c=e.query;let p=!1;const _=n.queries.get(c);if(_){const C=_.listeners.indexOf(e);C>=0&&(_.listeners.splice(C,1),p=0===_.listeners.length)}if(p)return n.queries.delete(c),n.onUnlisten(c)}),Ef.apply(this,arguments)}function jg(o,e){const n=kn(o);let c=!1;for(const p of e){const C=n.queries.get(p.query);if(C){for(const N of C.listeners)N.Pu(p)&&(c=!0);C.Au=p}}c&&Jm(n)}function _p(o,e,n){const c=kn(o),p=c.queries.get(e);if(p)for(const _ of p.listeners)_.onError(n);c.queries.delete(e)}function Jm(o){o.Ru.forEach(e=>{e.next()})}class bp{constructor(e,n,c){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=c||{}}Pu(e){if(!this.options.includeMetadataChanges){const c=[];for(const p of e.docChanges)3!==p.type&&c.push(p);e=new Dh(e.query,e.docs,e.oldDocs,c,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||(!this.options.Nu||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Dh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class ev{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}class ky{constructor(e){this.yt=e}Ji(e){return _l(this.yt,e)}Yi(e){return e.metadata.exists?le(this.yt,e.document,!1):Bs.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return To(e)}}class y0{constructor(e,n,c){this.Mu=e,this.localStore=n,this.yt=c,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wf(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const c=jr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(c.get(c.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,c=new ky(this.yt);for(const p of e)if(p.metadata.queries){const _=c.Ji(p.metadata.name);for(const C of p.metadata.queries){const N=(n.get(C)||ri()).add(_);n.set(C,N)}}return n}complete(){var e=this;return(0,Ve.Z)(function*(){const n=yield function Cg(o,e,n,c){return Gm.apply(this,arguments)}(e.localStore,new ky(e.yt),e.documents,e.Mu.id),c=e.$u(e.documents);for(const p of e.queries)yield vy(e.localStore,p,c.get(p.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}})()}}function wf(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class My{constructor(e){this.key=e}}class tu{constructor(e){this.key=e}}class tv{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ri(),this.mutatedKeys=ri(),this.Gu=$f(e),this.Qu=new kd(this.Gu)}get ju(){return this.qu}Wu(e,n){const c=n?n.zu:new v0,p=n?n.Qu:this.Qu;let _=n?n.mutatedKeys:this.mutatedKeys,C=p,N=!1;const ee="F"===this.query.limitType&&p.size===this.query.limit?p.last():null,fe="L"===this.query.limitType&&p.size===this.query.limit?p.first():null;if(e.inorderTraversal((ke,nt)=>{const Pt=p.get(ke),rn=Yh(this.query,nt)?nt:null,mn=!!Pt&&this.mutatedKeys.has(Pt.key),qn=!!rn&&(rn.hasLocalMutations||this.mutatedKeys.has(rn.key)&&rn.hasCommittedMutations);let Tr=!1;Pt&&rn?Pt.data.isEqual(rn.data)?mn!==qn&&(c.track({type:3,doc:rn}),Tr=!0):this.Hu(Pt,rn)||(c.track({type:2,doc:rn}),Tr=!0,(ee&&this.Gu(rn,ee)>0||fe&&this.Gu(rn,fe)<0)&&(N=!0)):!Pt&&rn?(c.track({type:0,doc:rn}),Tr=!0):Pt&&!rn&&(c.track({type:1,doc:Pt}),Tr=!0,(ee||fe)&&(N=!0)),Tr&&(rn?(C=C.add(rn),_=qn?_.add(ke):_.delete(ke)):(C=C.delete(ke),_=_.delete(ke)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ke="F"===this.query.limitType?C.last():C.first();C=C.delete(ke.key),_=_.delete(ke.key),c.track({type:1,doc:ke})}return{Qu:C,zu:c,$i:N,mutatedKeys:_}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,c){const p=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const _=e.zu.Eu();_.sort((fe,ke)=>function(nt,Pt){const rn=mn=>{switch(mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return In()}};return rn(nt)-rn(Pt)}(fe.type,ke.type)||this.Gu(fe.doc,ke.doc)),this.Ju(c);const C=n?this.Yu():[],N=0===this.Ku.size&&this.current?1:0,ee=N!==this.Uu;return this.Uu=N,0!==_.length||ee?{snapshot:new Dh(this.query,e.Qu,p,_,e.mutatedKeys,0===N,ee,!1,!!c&&c.resumeToken.approximateByteSize()>0),Xu:C}:{Xu:C}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new v0,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ri(),this.Qu.forEach(c=>{this.Zu(c.key)&&(this.Ku=this.Ku.add(c.key))});const n=[];return e.forEach(c=>{this.Ku.has(c)||n.push(new tu(c))}),this.Ku.forEach(c=>{e.has(c)||n.push(new My(c))}),n}tc(e){this.qu=e.Hi,this.Ku=ri();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Dh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Oy{constructor(e,n,c){this.query=e,this.targetId=n,this.view=c}}class _0{constructor(e){this.key=e,this.nc=!1}}class b0{constructor(e,n,c,p,_,C){this.localStore=e,this.remoteStore=n,this.eventManager=c,this.sharedClientState=p,this.currentUser=_,this.maxConcurrentLimboResolutions=C,this.sc={},this.ic=new Zu(N=>Jd(N),cc),this.rc=new Map,this.oc=new Set,this.uc=new Ro(En.comparator),this.cc=new Map,this.ac=new jm,this.hc={},this.lc=new Map,this.fc=Sd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function T0(o,e){return nv.apply(this,arguments)}function nv(){return nv=(0,Ve.Z)(function*(o,e){const n=Vg(o);let c,p;const _=n.ic.get(e);if(_)c=_.targetId,n.sharedClientState.addLocalQueryTarget(c),p=_.view.ec();else{const C=yield xd(n.localStore,_s(e));n.isPrimaryClient&&el(n.remoteStore,C);const N=n.sharedClientState.addLocalQueryTarget(C.targetId);c=C.targetId,p=yield rv(n,e,c,"current"===N,C.resumeToken)}return p}),nv.apply(this,arguments)}function rv(o,e,n,c,p){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,Ve.Z)(function*(o,e,n,c,p){o._c=(nt,Pt,rn)=>{return(mn=(0,Ve.Z)(function*(qn,Tr,Ms,So){let ts=Tr.view.Wu(Ms);ts.$i&&(ts=yield Th(qn.localStore,Tr.query,!1).then(({documents:I})=>Tr.view.Wu(I,ts)));const $s=So&&So.targetChanges.get(Tr.targetId),_e=Tr.view.applyChanges(ts,qn.isPrimaryClient,$s);return cv(qn,Tr.targetId,_e.Xu),_e.snapshot}),function(qn,Tr,Ms,So){return mn.apply(this,arguments)})(o,nt,Pt,rn);var mn};const _=yield Th(o.localStore,e,!0),C=new tv(e,_.Hi),N=C.Wu(_.documents),ee=gd.createSynthesizedTargetChangeForCurrentChange(n,c&&"Offline"!==o.onlineState,p),fe=C.applyChanges(N,o.isPrimaryClient,ee);cv(o,n,fe.Xu);const ke=new Oy(e,n,C);return o.ic.set(e,ke),o.rc.has(n)?o.rc.get(n).push(e):o.rc.set(n,[e]),fe.snapshot}),Tp.apply(this,arguments)}function iv(o,e){return sv.apply(this,arguments)}function sv(){return sv=(0,Ve.Z)(function*(o,e){const n=kn(o),c=n.ic.get(e),p=n.rc.get(c.targetId);if(p.length>1)return n.rc.set(c.targetId,p.filter(_=>!cc(_,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(c.targetId),n.sharedClientState.isActiveQueryTarget(c.targetId)||(yield bh(n.localStore,c.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(c.targetId),bf(n.remoteStore,c.targetId),Cp(n,c.targetId)}).catch(lu))):(Cp(n,c.targetId),yield bh(n.localStore,c.targetId,!0))}),sv.apply(this,arguments)}function Ep(){return Ep=(0,Ve.Z)(function*(o,e,n){const c=Kc(o);try{const p=yield function(_,C){const N=kn(_),ee=Ji.now(),fe=C.reduce((Pt,rn)=>Pt.add(rn.key),ri());let ke,nt;return N.persistence.runTransaction("Locally write mutations","readwrite",Pt=>{let rn=na(),mn=ri();return N.Gi.getEntries(Pt,fe).next(qn=>{rn=qn,rn.forEach((Tr,Ms)=>{Ms.isValidDocument()||(mn=mn.add(Tr))})}).next(()=>N.localDocuments.getOverlayedDocuments(Pt,rn)).next(qn=>{ke=qn;const Tr=[];for(const Ms of C){const So=eg(Ms,ke.get(Ms.key).overlayedDocument);null!=So&&Tr.push(new gl(Ms.key,So,zh(So.value.mapValue),Vs.exists(!0)))}return N.mutationQueue.addMutationBatch(Pt,ee,Tr,C)}).next(qn=>{nt=qn;const Tr=qn.applyToLocalDocumentSet(ke,mn);return N.documentOverlayCache.saveOverlays(Pt,qn.batchId,Tr)})}).then(()=>({batchId:nt.batchId,changes:vl(ke)}))}(c.localStore,e);c.sharedClientState.addPendingMutation(p.batchId),function(_,C,N){let ee=_.hc[_.currentUser.toKey()];ee||(ee=new Ro(Mr)),ee=ee.insert(C,N),_.hc[_.currentUser.toKey()]=ee}(c,p.batchId,n),yield zc(c,p.changes),yield Ch(c.remoteStore)}catch(p){const _=nl(p,"Failed to persist write");n.reject(_)}}),Ep.apply(this,arguments)}function wp(o,e){return av.apply(this,arguments)}function av(){return av=(0,Ve.Z)(function*(o,e){const n=kn(o);try{const c=yield Q0(n.localStore,e);e.targetChanges.forEach((p,_)=>{const C=n.cc.get(_);C&&(Rn(p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size<=1),p.addedDocuments.size>0?C.nc=!0:p.modifiedDocuments.size>0?Rn(C.nc):p.removedDocuments.size>0&&(Rn(C.nc),C.nc=!1))}),yield zc(n,c,e)}catch(c){yield lu(c)}}),av.apply(this,arguments)}function Ry(o,e,n){const c=kn(o);if(c.isPrimaryClient&&0===n||!c.isPrimaryClient&&1===n){const p=[];c.ic.forEach((_,C)=>{const N=C.view.bu(e);N.snapshot&&p.push(N.snapshot)}),function(_,C){const N=kn(_);N.onlineState=C;let ee=!1;N.queries.forEach((fe,ke)=>{for(const nt of ke.listeners)nt.bu(C)&&(ee=!0)}),ee&&Jm(N)}(c.eventManager,e),p.length&&c.sc.Wo(p),c.onlineState=e,c.isPrimaryClient&&c.sharedClientState.setOnlineState(e)}}function rl(o,e,n){return Md.apply(this,arguments)}function Md(){return Md=(0,Ve.Z)(function*(o,e,n){const c=kn(o);c.sharedClientState.updateQueryState(e,"rejected",n);const p=c.cc.get(e),_=p&&p.key;if(_){let C=new Ro(En.comparator);C=C.insert(_,Bs.newNoDocument(_,Bn.min()));const N=ri().add(_),ee=new Uc(Bn.min(),new Map,new es(Mr),C,N);yield wp(c,ee),c.uc=c.uc.remove(_),c.cc.delete(e),Cf(c)}else yield bh(c.localStore,e,!1).then(()=>Cp(c,e,n)).catch(lu)}),Md.apply(this,arguments)}function E0(o,e){return Od.apply(this,arguments)}function Od(){return Od=(0,Ve.Z)(function*(o,e){const n=kn(o),c=e.batch.batchId;try{const p=yield Y0(n.localStore,e);il(n,c,null),wc(n,c),n.sharedClientState.updateMutationState(c,"acknowledged"),yield zc(n,p)}catch(p){yield lu(p)}}),Od.apply(this,arguments)}function uv(o,e,n){return lv.apply(this,arguments)}function lv(){return lv=(0,Ve.Z)(function*(o,e,n){const c=kn(o);try{const p=yield function(_,C){const N=kn(_);return N.persistence.runTransaction("Reject batch","readwrite-primary",ee=>{let fe;return N.mutationQueue.lookupMutationBatch(ee,C).next(ke=>(Rn(null!==ke),fe=ke.keys(),N.mutationQueue.removeMutationBatch(ee,ke))).next(()=>N.mutationQueue.performConsistencyCheck(ee)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(ee,fe,C)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ee,fe)).next(()=>N.localDocuments.getDocuments(ee,fe))})}(c.localStore,e);il(c,e,n),wc(c,e),c.sharedClientState.updateMutationState(e,"rejected",n),yield zc(c,p)}catch(p){yield lu(p)}}),lv.apply(this,arguments)}function Rd(){return Rd=(0,Ve.Z)(function*(o,e){const n=kn(o);Ko(n.remoteStore)||cn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const c=yield function(_){const C=kn(_);return C.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>C.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===c)return void e.resolve();const p=n.lc.get(c)||[];p.push(e),n.lc.set(c,p)}catch(c){const p=nl(c,"Initialization of waitForPendingWrites() operation failed");e.reject(p)}}),Rd.apply(this,arguments)}function wc(o,e){(o.lc.get(e)||[]).forEach(n=>{n.resolve()}),o.lc.delete(e)}function il(o,e,n){const c=kn(o);let p=c.hc[c.currentUser.toKey()];if(p){const _=p.get(e);_&&(n?_.reject(n):_.resolve(),p=p.remove(e)),c.hc[c.currentUser.toKey()]=p}}function Cp(o,e,n=null){o.sharedClientState.removeLocalQueryTarget(e);for(const c of o.rc.get(e))o.ic.delete(c),n&&o.sc.wc(c,n);o.rc.delete(e),o.isPrimaryClient&&o.ac.ls(e).forEach(c=>{o.ac.containsKey(c)||Ql(o,c)})}function Ql(o,e){o.oc.delete(e.path.canonicalString());const n=o.uc.get(e);null!==n&&(bf(o.remoteStore,n),o.uc=o.uc.remove(e),o.cc.delete(n),Cf(o))}function cv(o,e,n){for(const c of n)c instanceof My?(o.ac.addReference(c.key,e),Ny(o,c)):c instanceof tu?(cn("SyncEngine","Document no longer in limbo: "+c.key),o.ac.removeReference(c.key,e),o.ac.containsKey(c.key)||Ql(o,c.key)):In()}function Ny(o,e){const n=e.key,c=n.path.canonicalString();o.uc.get(n)||o.oc.has(c)||(cn("SyncEngine","New document in limbo: "+n),o.oc.add(c),Cf(o))}function Cf(o){for(;o.oc.size>0&&o.uc.size<o.maxConcurrentLimboResolutions;){const e=o.oc.values().next().value;o.oc.delete(e);const n=new En(jr.fromString(e)),c=o.fc.next();o.cc.set(c,new _0(n)),o.uc=o.uc.insert(n,c),el(o.remoteStore,new Vc(_s(Rc(n.path)),c,2,nn.at))}}function zc(o,e,n){return sl.apply(this,arguments)}function sl(){return sl=(0,Ve.Z)(function*(o,e,n){const c=kn(o),p=[],_=[],C=[];var N;c.ic.isEmpty()||(c.ic.forEach((N,ee)=>{C.push(c._c(ee,e,n).then(fe=>{if((fe||n)&&c.isPrimaryClient&&c.sharedClientState.updateQueryState(ee.targetId,fe?.fromCache?"not-current":"current"),fe){p.push(fe);const ke=ap.Ci(ee.targetId,fe);_.push(ke)}}))}),yield Promise.all(C),c.sc.Wo(p),yield(N=(0,Ve.Z)(function*(ee,fe){const ke=kn(ee);try{yield ke.persistence.runTransaction("notifyLocalViewChanges","readwrite",nt=>Ft.forEach(fe,Pt=>Ft.forEach(Pt.Si,rn=>ke.persistence.referenceDelegate.addReference(nt,Pt.targetId,rn)).next(()=>Ft.forEach(Pt.Di,rn=>ke.persistence.referenceDelegate.removeReference(nt,Pt.targetId,rn)))))}catch(nt){if(!ds(nt))throw nt;cn("LocalStore","Failed to update sequence numbers: "+nt)}for(const nt of fe){const Pt=nt.targetId;if(!nt.fromCache){const rn=ke.qi.get(Pt),qn=rn.withLastLimboFreeSnapshotVersion(rn.snapshotVersion);ke.qi=ke.qi.insert(Pt,qn)}}}),function(ee,fe){return N.apply(this,arguments)})(c.localStore,_))}),sl.apply(this,arguments)}function Sp(o,e){return Ga.apply(this,arguments)}function Ga(){return Ga=(0,Ve.Z)(function*(o,e){const n=kn(o);if(!n.currentUser.isEqual(e)){cn("SyncEngine","User change. New user:",e.toKey());const c=yield Eg(n.localStore,e);n.currentUser=e,(p=n).lc.forEach(C=>{C.forEach(N=>{N.reject(new an(Ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.lc.clear(),n.sharedClientState.handleUserChange(e,c.removedBatchIds,c.addedBatchIds),yield zc(n,c.ji)}var p}),Ga.apply(this,arguments)}function xh(o,e){const n=kn(o),c=n.cc.get(e);if(c&&c.nc)return ri().add(c.key);{let p=ri();const _=n.rc.get(e);if(!_)return p;for(const C of _){const N=n.ic.get(C);p=p.unionWith(N.view.ju)}return p}}function Ug(o,e){return ju.apply(this,arguments)}function ju(){return ju=(0,Ve.Z)(function*(o,e){const n=kn(o),c=yield Th(n.localStore,e.query,!0),p=e.view.tc(c);return n.isPrimaryClient&&cv(n,e.targetId,p.Xu),p}),ju.apply(this,arguments)}function dv(o,e){return qc.apply(this,arguments)}function qc(){return qc=(0,Ve.Z)(function*(o,e){const n=kn(o);return Ad(n.localStore,e).then(c=>zc(n,c))}),qc.apply(this,arguments)}function Sf(o,e,n,c){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,Ve.Z)(function*(o,e,n,c){const p=kn(o),_=yield function(C,N){const ee=kn(C),fe=kn(ee.mutationQueue);return ee.persistence.runTransaction("Lookup mutation documents","readonly",ke=>fe.Tn(ke,N).next(nt=>nt?ee.localDocuments.getDocuments(ke,nt):Ft.resolve(null)))}(p.localStore,e);var N;null!==_?("pending"===n?yield Ch(p.remoteStore):"acknowledged"===n||"rejected"===n?(il(p,e,c||null),wc(p,e),N=e,kn(kn(p.localStore).mutationQueue).An(N)):In(),yield zc(p,_)):cn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Nd.apply(this,arguments)}function Ld(){return Ld=(0,Ve.Z)(function*(o,e){const n=kn(o);if(Vg(n),Kc(n),!0===e&&!0!==n.dc){const c=n.sharedClientState.getAllActiveQueryTargets(),p=yield Ah(n,c.toArray());n.dc=!0,yield Qm(n.remoteStore,!0);for(const _ of p)el(n.remoteStore,_)}else if(!1===e&&!1!==n.dc){const c=[];let p=Promise.resolve();n.rc.forEach((_,C)=>{n.sharedClientState.isLocalQueryTarget(C)?c.push(C):p=p.then(()=>(Cp(n,C),bh(n.localStore,C,!0))),bf(n.remoteStore,C)}),yield p,yield Ah(n,c),function(_){const C=kn(_);C.cc.forEach((N,ee)=>{bf(C.remoteStore,ee)}),C.ac.fs(),C.cc=new Map,C.uc=new Ro(En.comparator)}(n),n.dc=!1,yield Qm(n.remoteStore,!1)}}),Ld.apply(this,arguments)}function Ah(o,e,n){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,Ve.Z)(function*(o,e,n){const c=kn(o),p=[],_=[];for(const C of e){let N;const ee=c.rc.get(C);if(ee&&0!==ee.length){N=yield xd(c.localStore,_s(ee[0]));for(const fe of ee){const ke=c.ic.get(fe),nt=yield Ug(c,ke);nt.snapshot&&_.push(nt.snapshot)}}else{const fe=yield wg(c.localStore,C);N=yield xd(c.localStore,fe),yield rv(c,Ih(fe),C,!1,N.resumeToken)}p.push(N)}return c.sc.Wo(_),p}),Fd.apply(this,arguments)}function Ih(o){return hu(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function Wc(o){const e=kn(o);return kn(kn(e.localStore).persistence).vi()}function hv(o,e,n,c){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,Ve.Z)(function*(o,e,n,c){const p=kn(o);if(p.dc)return void cn("SyncEngine","Ignoring unexpected query state notification.");const _=p.rc.get(e);if(_&&_.length>0)switch(n){case"current":case"not-current":{const C=yield Ad(p.localStore,Vl(_[0])),N=Uc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,wn.EMPTY_BYTE_STRING);yield zc(p,C,N);break}case"rejected":yield bh(p.localStore,e,!0),Cp(p,e,c);break;default:In()}}),Xl.apply(this,arguments)}function fv(o,e,n){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,Ve.Z)(function*(o,e,n){const c=Vg(o);if(c.dc){for(const p of e){if(c.rc.has(p)){cn("SyncEngine","Adding an already active target "+p);continue}const _=yield wg(c.localStore,p),C=yield xd(c.localStore,_);yield rv(c,Ih(_),C.targetId,!1,C.resumeToken),el(c.remoteStore,C)}for(const p of n)c.rc.has(p)&&(yield bh(c.localStore,p,!1).then(()=>{bf(c.remoteStore,p),Cp(c,p)}).catch(lu))}}),Bg.apply(this,arguments)}function Vg(o){const e=kn(o);return e.remoteStore.remoteSyncer.applyRemoteEvent=wp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rl.bind(null,e),e.sc.Wo=jg.bind(null,e.eventManager),e.sc.wc=_p.bind(null,e.eventManager),e}function Kc(o){const e=kn(o);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uv.bind(null,e),e}class pv{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Ve.Z)(function*(){n.yt=Sl(e.databaseInfo.databaseId),n.sharedClientState=n.gc(e),n.persistence=n.yc(e),yield n.persistence.start(),n.localStore=n.Ic(e),n.gcScheduler=n.Tc(e,n.localStore),n.indexBackfillerScheduler=n.Ec(e,n.localStore)})()}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return Tg(this.persistence,new Gc,e.initialUser,this.yt)}yc(e){return new wl(vg.Bs,this.yt)}gc(e){return new pf}terminate(){var e=this;return(0,Ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gv extends pv{constructor(e,n,c){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=c,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,c=this;return(0,Ve.Z)(function*(){yield n().call(c,e),yield c.Ac.initialize(c,e),yield Kc(c.Ac.syncEngine),yield Ch(c.Ac.remoteStore),yield c.persistence.li(()=>(c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(),c.indexBackfillerScheduler&&!c.indexBackfillerScheduler.started&&c.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Tg(this.persistence,new Gc,e.initialUser,this.yt)}Tc(e,n){return new ay(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}Ec(e,n){const c=new ll(n,this.persistence);return new Oc(e.asyncQueue,c)}yc(e){const n=bg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),c=void 0!==this.cacheSizeBytes?Nu.withCacheSize(this.cacheSizeBytes):Nu.DEFAULT;return new _g(this.synchronizeTabs,n,e.clientId,c,e.asyncQueue,$m(),Ag(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new pf}}class Dp extends gv{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,c=this;return(0,Ve.Z)(function*(){yield n().call(c,e);const p=c.Ac.syncEngine;c.sharedClientState instanceof cp&&(c.sharedClientState.syncEngine={Fr:Sf.bind(null,p),$r:hv.bind(null,p),Br:fv.bind(null,p),vi:Wc.bind(null,p),Mr:dv.bind(null,p)},yield c.sharedClientState.start()),yield c.persistence.li(function(){var _=(0,Ve.Z)(function*(C){yield function Df(o,e){return Ld.apply(this,arguments)}(c.Ac.syncEngine,C),c.gcScheduler&&(C&&!c.gcScheduler.started?c.gcScheduler.start():C||c.gcScheduler.stop()),c.indexBackfillerScheduler&&(C&&!c.indexBackfillerScheduler.started?c.indexBackfillerScheduler.start():C||c.indexBackfillerScheduler.stop())});return function(C){return _.apply(this,arguments)}}())})()}gc(e){const n=$m();if(!cp.C(n))throw new an(Ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const c=bg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cp(n,e.asyncQueue,c,e.clientId,e.initialUser)}}class Hg{initialize(e,n){var c=this;return(0,Ve.Z)(function*(){c.localStore||(c.localStore=e.localStore,c.sharedClientState=e.sharedClientState,c.datastore=c.createDatastore(n),c.remoteStore=c.createRemoteStore(n),c.eventManager=c.createEventManager(n),c.syncEngine=c.createSyncEngine(n,!e.synchronizeTabs),c.sharedClientState.onlineStateHandler=p=>Ry(c.syncEngine,p,1),c.remoteStore.remoteSyncer.handleCredentialChange=Sp.bind(null,c.syncEngine),yield Qm(c.remoteStore,c.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Py}createDatastore(e){const n=Sl(e.databaseInfo.databaseId),c=new Ey(e.databaseInfo);return new Ig(e.authCredentials,e.appCheckCredentials,c,n)}createRemoteStore(e){return n=this.localStore,c=this.datastore,p=e.asyncQueue,_=N=>Ry(this.syncEngine,N,0),C=wh.C()?new wh:new X0,new Pg(n,c,p,_,C);var n,c,p,_,C}createSyncEngine(e,n){return function(c,p,_,C,N,ee,fe){const ke=new b0(c,p,_,C,N,ee);return fe&&(ke.dc=!0),ke}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Ve.Z)(function*(n){const c=kn(n);cn("RemoteStore","RemoteStore shutting down."),c._u.add(5),yield _f(c),c.mu.shutdown(),c.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ki(o,e,n){if(!n)throw new an(Ht.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${e}.`)}function Fy(o,e,n,c){if(!0===e&&!0===c)throw new an(Ht.INVALID_ARGUMENT,`${o} and ${n} cannot be used together.`)}function mv(o){if(!En.isDocumentKey(o))throw new an(Ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function Gg(o){if(En.isDocumentKey(o))throw new an(Ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function Cc(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const e=(n=o).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof o?"a function":In()}function Zi(o,e){if("_delegate"in o&&(o=o._delegate),!(o instanceof e)){if(e.name===o.constructor.name)throw new an(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cc(o);throw new an(Ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return o}function Sc(o,e){if(e<=0)throw new an(Ht.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${e}.`)}const xp=new Map;class $g{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new an(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new an(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Fy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zc{constructor(e,n,c,p){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=c,this._app=p,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $g({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new an(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new an(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $g(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new $u;switch(n.type){case"gapi":return new Pc(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new an(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=xp.get(e);n&&(cn("ComponentProvider","Removing Datastore"),xp.delete(e),n.terminate())}(this),Promise.resolve()}}class Hs{constructor(e,n,c){this.converter=n,this._key=c,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hs(this.firestore,e,this._key)}}class Ia{constructor(e,n,c){this.converter=n,this._query=c,this.type="query",this.firestore=e}withConverter(e){return new Ia(this.firestore,e,this._query)}}class Jl extends Ia{constructor(e,n,c){super(e,n,Rc(c)),this._path=c,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hs(this.firestore,null,new En(e))}withConverter(e){return new Jl(this.firestore,e,this._path)}}function zg(o,e,...n){if(o=(0,xt.m9)(o),Ki("collection","path",e),o instanceof Zc){const c=jr.fromString(e,...n);return Gg(c),new Jl(o,null,c)}{if(!(o instanceof Hs||o instanceof Jl))throw new an(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=o._path.child(jr.fromString(e,...n));return Gg(c),new Jl(o.firestore,null,c)}}function Ap(o,e,...n){if(o=(0,xt.m9)(o),1===arguments.length&&(e=Au.R()),Ki("doc","path",e),o instanceof Zc){const c=jr.fromString(e,...n);return mv(c),new Hs(o,null,new En(c))}{if(!(o instanceof Hs||o instanceof Jl))throw new an(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const c=o._path.child(jr.fromString(e,...n));return mv(c),new Hs(o.firestore,o instanceof Jl?o.converter:null,new En(c))}}function jd(o,e){return o=(0,xt.m9)(o),e=(0,xt.m9)(e),(o instanceof Hs||o instanceof Jl)&&(e instanceof Hs||e instanceof Jl)&&o.firestore===e.firestore&&o.path===e.path&&o.converter===e.converter}function qg(o,e){return o=(0,xt.m9)(o),e=(0,xt.m9)(e),o instanceof Ia&&e instanceof Ia&&o.firestore===e.firestore&&cc(o._query,e._query)&&o.converter===e.converter}function Ph(o,e=10240){let n=0;return{read:()=>(0,Ve.Z)(function*(){if(n<o.byteLength){const c={value:o.slice(n,n+e),done:!1};return n+=e,c}return{done:!0}})(),cancel:()=>(0,Ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ip{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Si("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class vv{constructor(e,n){this.Pc=e,this.yt=n,this.metadata=new ws,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(c=>{c&&c.Ou()?this.metadata.resolve(c.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(c?.ku)}`))},c=>this.metadata.reject(c))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ve.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ve.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.Sc();if(null===n)return null;const c=e.vc.decode(n),p=Number(c);isNaN(p)&&e.Dc(`length string (${c}) is not valid number`);const _=yield e.Cc(p);return new ev(JSON.parse(_),n.length+p)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ve.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const n=e.xc();n<0&&e.Dc("Reached the end of bundle when a length string is expected.");const c=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),c})()}Cc(e){var n=this;return(0,Ve.Z)(function*(){for(;n.buffer.length<e;)(yield n.Nc())&&n.Dc("Reached the end of bundle when more is expected.");const c=n.vc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),c})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ve.Z)(function*(){const n=yield e.Pc.read();if(!n.done){const c=new Uint8Array(e.buffer.length+n.value.length);c.set(e.buffer),c.set(n.value,e.buffer.length),e.buffer=c}return n.done})()}}class C0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Ve.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new an(Ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const c=yield(p=(0,Ve.Z)(function*(_,C){const N=kn(_),ee=y(N.yt)+"/documents",fe={documents:C.map(rn=>Yu(N.yt,rn))},ke=yield N._o("BatchGetDocuments",ee,fe,C.length),nt=new Map;ke.forEach(rn=>{const mn=function xe(o,e){return"found"in e?function(n,c){Rn(!!c.found);const p=_l(n,c.found.name),_=To(c.found.updateTime),C=c.found.createTime?To(c.found.createTime):Bn.min(),N=new fa({mapValue:{fields:c.found.fields}});return Bs.newFoundDocument(p,_,C,N)}(o,e):"missing"in e?function(n,c){Rn(!!c.missing),Rn(!!c.readTime);const p=_l(n,c.missing),_=To(c.readTime);return Bs.newNoDocument(p,_)}(o,e):In()}(N.yt,rn);nt.set(mn.key.toString(),mn)});const Pt=[];return C.forEach(rn=>{const mn=nt.get(rn.toString());Rn(!!mn),Pt.push(mn)}),Pt}),function(_,C){return p.apply(this,arguments)})(n.datastore,e);var p;return c.forEach(p=>n.recordVersion(p)),c})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(c){this.lastWriteError=c}this.writtenDocs.add(e.toString())}delete(e){this.write(new bu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var c;e.mutations.forEach(c=>{n.delete(c.key.toString())}),n.forEach((c,p)=>{const _=En.fromPath(p);e.mutations.push(new hd(_,e.precondition(_)))}),yield(c=(0,Ve.Z)(function*(p,_){const C=kn(p),N=y(C.yt)+"/documents",ee={writes:_.map(fe=>jt(C.yt,fe))};yield C.ao("Commit",N,ee)}),function(p,_){return c.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw In();n=Bn.min()}const c=this.readVersions.get(e.key.toString());if(c){if(!n.isEqual(c))throw new an(Ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Bn.min())?Vs.exists(!1):Vs.updateTime(n):Vs.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Bn.min()))throw new an(Ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vs.updateTime(n)}return Vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class yv{constructor(e,n,c,p,_){this.asyncQueue=e,this.datastore=n,this.options=c,this.updateFunction=p,this.deferred=_,this.kc=c.maxAttempts,this.xo=new Id(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ve.Z)(function*(){const n=new C0(e.datastore),c=e.Mc(n);c&&c.then(p=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(p)}).catch(_=>{e.Fc(_)}))}).catch(p=>{e.Fc(p)})}))}Mc(e){try{const n=this.updateFunction(e);return!ye(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!tf(n)}return!1}}class g{constructor(e,n,c,p){var _=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=c,this.databaseInfo=p,this.user=kr.UNAUTHENTICATED,this.clientId=Au.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(c,function(){var C=(0,Ve.Z)(function*(N){cn("FirestoreClient","Received user=",N.uid),yield _.authCredentialListener(N),_.user=N});return function(N){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(c,C=>(cn("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,Ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new an(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(c){const p=nl(c,"Failed to shutdown persistence");n.reject(p)}})),n.promise}}function s(o,e){return l.apply(this,arguments)}function l(){return l=(0,Ve.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress(),cn("FirestoreClient","Initializing OfflineComponentProvider");const n=yield o.getConfiguration();yield e.initialize(n);let c=n.initialUser;o.setCredentialChangeListener(function(){var p=(0,Ve.Z)(function*(_){c.isEqual(_)||(yield Eg(e.localStore,_),c=_)});return function(_){return p.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>o.terminate()),o.offlineComponents=e}),l.apply(this,arguments)}function u(o,e){return t.apply(this,arguments)}function t(){return t=(0,Ve.Z)(function*(o,e){o.asyncQueue.verifyOperationInProgress();const n=yield a(o);cn("FirestoreClient","Initializing OnlineComponentProvider");const c=yield o.getConfiguration();yield e.initialize(n,c),o.setCredentialChangeListener(p=>Ay(e.remoteStore,p)),o.setAppCheckTokenChangeListener((p,_)=>Ay(e.remoteStore,_)),o.onlineComponents=e}),t.apply(this,arguments)}function a(o){return h.apply(this,arguments)}function h(){return h=(0,Ve.Z)(function*(o){return o.offlineComponents||(cn("FirestoreClient","Using default OfflineComponentProvider"),yield s(o,new pv)),o.offlineComponents}),h.apply(this,arguments)}function v(o){return S.apply(this,arguments)}function S(){return S=(0,Ve.Z)(function*(o){return o.onlineComponents||(cn("FirestoreClient","Using default OnlineComponentProvider"),yield u(o,new Hg)),o.onlineComponents}),S.apply(this,arguments)}function P(o){return a(o).then(e=>e.persistence)}function H(o){return a(o).then(e=>e.localStore)}function Y(o){return v(o).then(e=>e.remoteStore)}function Z(o){return v(o).then(e=>e.syncEngine)}function je(o){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,Ve.Z)(function*(o){const e=yield v(o),n=e.eventManager;return n.onListen=T0.bind(null,e.syncEngine),n.onUnlisten=iv.bind(null,e.syncEngine),n}),Pe.apply(this,arguments)}function tn(o,e,n={}){const c=new ws;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(p,_,C,N,ee){const fe=new Ip({next:nt=>{_.enqueueAndForget(()=>xl(p,ke));const Pt=nt.docs.has(C);!Pt&&nt.fromCache?ee.reject(new an(Ht.UNAVAILABLE,"Failed to get document because the client is offline.")):Pt&&nt.fromCache&&N&&"server"===N.source?ee.reject(new an(Ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ee.resolve(nt)},error:nt=>ee.reject(nt)}),ke=new bp(Rc(C.path),fe,{includeMetadataChanges:!0,Nu:!0});return Fg(p,ke)}(yield je(o),o.asyncQueue,e,n,c)})),c.promise}function Kt(o,e,n={}){const c=new ws;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function(p,_,C,N,ee){const fe=new Ip({next:nt=>{_.enqueueAndForget(()=>xl(p,ke)),nt.fromCache&&"server"===N.source?ee.reject(new an(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ee.resolve(nt)},error:nt=>ee.reject(nt)}),ke=new bp(C,fe,{includeMetadataChanges:!0,Nu:!0});return Fg(p,ke)}(yield je(o),o.asyncQueue,e,n,c)})),c.promise}class Xt{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Id(this,"async_queue_retry"),this.Wc=()=>{const n=Ag();n&&cn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Ag();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=Ag();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new ws;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ve.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(n){if(!ds(n))throw n;cn("AsyncQueue","Operation failed with retryable error: "+n)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(c=>{throw this.Kc=c,this.Gc=!1,Si("INTERNAL UNHANDLED ERROR: ",function(_){let C=_.message||"";return _.stack&&(C=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),C}(c)),c}).then(c=>(this.Gc=!1,c))));return this.Bc=n,n}enqueueAfterDelay(e,n,c){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const p=Tf.createAndSchedule(this,e,n,c,_=>this.Yc(_));return this.Uc.push(p),p}zc(){this.Kc&&In()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ve.Z)(function*(){let n;do{n=e.Bc,yield n}while(n!==e.Bc)})()}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,c)=>n.targetTimeMs-c.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function Ln(o){return function(e,n){if("object"!=typeof e||null===e)return!1;const c=e;for(const p of["next","error","complete"])if(p in c&&"function"==typeof c[p])return!0;return!1}(o)}class hs{constructor(){this._progressObserver={},this._taskCompletionResolver=new ws,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,c){this._progressObserver={next:e,error:n,complete:c}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kr extends Zc{constructor(e,n,c,p){super(e,n,c,p),this.type="firestore",this._queue=new Xt,this._persistenceKey=p?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$a(this),this._firestoreClient.terminate()}}function Gs(o){return o._firestoreClient||$a(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function $a(o){var e;const n=o._freezeSettings(),c=(_=(null===(e=o._app)||void 0===e?void 0:e.options.appId)||"",new M(o._databaseId,_,o._persistenceKey,(N=n).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var _,N;o._firestoreClient=new g(o._authCredentials,o._appCheckCredentials,o._queue,c)}function ec(o,e,n){const c=new ws;return o.asyncQueue.enqueue((0,Ve.Z)(function*(){try{yield s(o,n),yield u(o,e),c.resolve()}catch(p){const _=p;if(!("FirebaseError"===(C=_).name?C.code===Ht.FAILED_PRECONDITION||C.code===Ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw _;ci("Error enabling offline persistence. Falling back to persistence disabled: "+_),c.reject(_)}var C})).then(()=>c.promise)}function _v(o){if(o._initialized||o._terminated)throw new an(Ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pa(wn.fromBase64String(e))}catch(n){throw new an(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pa(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ka{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new an(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bd{constructor(e){this._methodName=e}}class Xc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new an(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new an(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mr(this._lat,e._lat)||Mr(this._long,e._long)}}const Vd=/^__.*__$/;class bv{constructor(e,n,c){this.data=e,this.fieldMask=n,this.fieldTransforms=c}toMutation(e,n){return null!==this.fieldMask?new gl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ku(e,this.data,n,this.fieldTransforms)}}class ks{constructor(e,n,c){this.data=e,this.fieldMask=n,this.fieldTransforms=c}toMutation(e,n){return new gl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function By(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw In()}}class Hd{constructor(e,n,c,p,_,C){this.settings=e,this.databaseId=n,this.yt=c,this.ignoreUndefinedProperties=p,void 0===_&&this.na(),this.fieldTransforms=_||[],this.fieldMask=C||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Hd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const c=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.ia({path:c,oa:!1});return p.ua(e),p}ca(e){var n;const c=null===(n=this.path)||void 0===n?void 0:n.child(e),p=this.ia({path:c,oa:!1});return p.na(),p}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Np(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(By(this.sa)&&Vd.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Pp{constructor(e,n,c){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=c||Sl(e)}da(e,n,c,p=!1){return new Hd({sa:e,methodName:n,fa:c,path:ys.emptyPath(),oa:!1,la:p},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Jc(o){const e=o._freezeSettings(),n=Sl(o._databaseId);return new Pp(o._databaseId,!!e.ignoreUndefinedProperties,n)}function Rh(o,e,n,c,p,_={}){const C=o.da(_.merge||_.mergeFields?2:0,e,n,p);Lh("Data must be an object, but it was:",C,c);const N=Ev(c,C);let ee,fe;if(_.merge)ee=new Ba(C.fieldMask),fe=C.fieldTransforms;else if(_.mergeFields){const ke=[];for(const nt of _.mergeFields){const Pt=Wg(e,nt,n);if(!C.contains(Pt))throw new an(Ht.INVALID_ARGUMENT,`Field '${Pt}' is specified in your field mask but missing from your input data.`);Pl(ke,Pt)||ke.push(Pt)}ee=new Ba(ke),fe=C.fieldTransforms.filter(nt=>ee.covers(nt.field))}else ee=null,fe=C.fieldTransforms;return new bv(new fa(N),ee,fe)}class Nh extends Bd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nh}}function Af(o,e,n){return new Hd({sa:3,fa:e.settings.fa,methodName:o._methodName,oa:n},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class If extends Bd{_toFieldTransform(e){return new pl(e.path,new Lc)}isEqual(e){return e instanceof If}}class kp extends Bd{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=Af(this,e,!0),c=this._a.map(_=>ed(_,n)),p=new _u(c);return new pl(e.path,p)}isEqual(e){return this===e}}class Vy extends Bd{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=Af(this,e,!0),c=this._a.map(_=>ed(_,n)),p=new Hl(c);return new pl(e.path,p)}isEqual(e){return this===e}}class Tv extends Bd{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new fc(e.yt,cd(e.yt,this.wa));return new pl(e.path,n)}isEqual(e){return this===e}}function us(o,e,n,c){const p=o.da(1,e,n);Lh("Data must be an object, but it was:",p,c);const _=[],C=fa.empty();B(c,(ee,fe)=>{const ke=Rp(e,ee,n);fe=(0,xt.m9)(fe);const nt=p.ca(ke);if(fe instanceof Nh)_.push(ke);else{const Pt=ed(fe,nt);null!=Pt&&(_.push(ke),C.set(ke,Pt))}});const N=new Ba(_);return new ks(C,N,p.fieldTransforms)}function Mp(o,e,n,c,p,_){const C=o.da(1,e,n),N=[Wg(e,c,n)],ee=[p];if(_.length%2!=0)throw new an(Ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Pt=0;Pt<_.length;Pt+=2)N.push(Wg(e,_[Pt])),ee.push(_[Pt+1]);const fe=[],ke=fa.empty();for(let Pt=N.length-1;Pt>=0;--Pt)if(!Pl(fe,N[Pt])){const rn=N[Pt];let mn=ee[Pt];mn=(0,xt.m9)(mn);const qn=C.ca(rn);if(mn instanceof Nh)fe.push(rn);else{const Tr=ed(mn,qn);null!=Tr&&(fe.push(rn),ke.set(rn,Tr))}}const nt=new Ba(fe);return new ks(ke,nt,C.fieldTransforms)}function Op(o,e,n,c=!1){return ed(n,o.da(c?4:3,e))}function ed(o,e){if(wv(o=(0,xt.m9)(o)))return Lh("Unsupported field value:",e,o),Ev(o,e);if(o instanceof Bd)return function(n,c){if(!By(c.sa))throw c.ha(`${n._methodName}() can only be used with update() and set()`);if(!c.path)throw c.ha(`${n._methodName}() is not currently supported inside arrays`);const p=n._toFieldTransform(c);p&&c.fieldTransforms.push(p)}(o,e),null;if(void 0===o&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),o instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(n,c){const p=[];let _=0;for(const C of n){let N=ed(C,c.aa(_));null==N&&(N={nullValue:"NULL_VALUE"}),p.push(N),_++}return{arrayValue:{values:p}}}(o,e)}return function(n,c){if(null===(n=(0,xt.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return cd(c.yt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const p=Ji.fromDate(n);return{timestampValue:Tu(c.yt,p)}}if(n instanceof Ji){const p=new Ji(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Tu(c.yt,p)}}if(n instanceof Xc)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pa)return{bytesValue:yd(c.yt,n._byteString)};if(n instanceof Hs){const p=c.databaseId,_=n.firestore._databaseId;if(!_.isEqual(p))throw c.ha(`Document reference is for database ${_.projectId}/${_.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:Bc(n.firestore._databaseId||c.databaseId,n._key.path)}}throw c.ha(`Unsupported field value: ${Cc(n)}`)}(o,e)}function Ev(o,e){const n={};return J(o)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):B(o,(c,p)=>{const _=ed(p,e.ra(c));null!=_&&(n[c]=_)}),{mapValue:{fields:n}}}function wv(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof Ji||o instanceof Xc||o instanceof Pa||o instanceof Hs||o instanceof Bd)}function Lh(o,e,n){if(!wv(n)||"object"!=typeof(c=n)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const c=Cc(n);throw e.ha("an object"===c?o+" a custom object":o+" "+c)}var c}function Wg(o,e,n){if((e=(0,xt.m9)(e))instanceof ka)return e._internalPath;if("string"==typeof e)return Rp(o,e);throw Np("Field path arguments must be of type string or ",o,!1,void 0,n)}const Hy=new RegExp("[~\\*/\\[\\]]");function Rp(o,e,n){if(e.search(Hy)>=0)throw Np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,n);try{return new ka(...e.split("."))._internalPath}catch{throw Np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,n)}}function Np(o,e,n,c,p){const _=c&&!c.isEmpty(),C=void 0!==p;let N=`Function ${e}() called with invalid data`;n&&(N+=" (via `toFirestore()`)"),N+=". ";let ee="";return(_||C)&&(ee+=" (found",_&&(ee+=` in field ${c}`),C&&(ee+=` in document ${p}`),ee+=")"),new an(Ht.INVALID_ARGUMENT,N+o+ee)}function Pl(o,e){return o.some(n=>n.isEqual(e))}class Pf{constructor(e,n,c,p,_){this._firestore=e,this._userDataWriter=n,this._key=c,this._document=p,this._converter=_}get id(){return this._key.path.lastSegment()}get ref(){return new Hs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new D0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class D0 extends Pf{data(){return super.data()}}function Kg(o,e){return"string"==typeof e?Rp(o,e):e instanceof ka?e._internalPath:e._delegate._internalPath}function Gy(o){if("L"===o.limitType&&0===o.explicitOrderBy.length)throw new an(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cv{}class Lp extends Cv{}function kl(o,e,...n){let c=[];e instanceof Cv&&c.push(e),c=c.concat(n),function(p){const _=p.filter(N=>N instanceof kf).length,C=p.filter(N=>N instanceof nu).length;if(_>1||_>0&&C>0)throw new an(Ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(c);for(const p of c)o=p._apply(o);return o}class nu extends Lp{constructor(e,n,c){super(),this._field=e,this._op=n,this._value=c,this.type="where"}static _create(e,n,c){return new nu(e,n,c)}_apply(e){const n=this._parse(e);return Jg(e._query,n),new Ia(e.firestore,e.converter,Mu(e._query,n))}_parse(e){const n=Jc(e.firestore);return function(p,_,C,N,ee,fe,ke){let nt;if(ee.isKeyField()){if("array-contains"===fe||"array-contains-any"===fe)throw new an(Ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${fe}' queries on documentId().`);if("in"===fe||"not-in"===fe){Up(ke,fe);const Pt=[];for(const rn of ke)Pt.push(Xg(N,p,rn));nt={arrayValue:{values:Pt}}}else nt=Xg(N,p,ke)}else"in"!==fe&&"not-in"!==fe&&"array-contains-any"!==fe||Up(ke,fe),nt=Op(C,"where",ke,"in"===fe||"not-in"===fe);return Or.create(ee,fe,nt)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class kf extends Cv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kf(e,n)}_parse(e){const n=this._queryConstraints.map(c=>c._parse(e)).filter(c=>c.getFilters().length>0);return 1===n.length?n[0]:Ti.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(c,p){let _=c;const C=p.getFlattenedFilters();for(const N of C)Jg(_,N),_=Mu(_,N)}(e._query,n),new Ia(e.firestore,e.converter,Mu(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fp extends Lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fp(e,n)}_apply(e){const n=function(c,p,_){if(null!==c.startAt)throw new an(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new an(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new jl(p,_);return function(N,ee){if(null===Da(N)){const fe=lc(N);null!==fe&&em(0,fe,ee.field)}}(c,C),C}(e._query,this._field,this._direction);return new Ia(e.firestore,e.converter,function(c,p){const _=c.explicitOrderBy.concat([p]);return new Ul(c.path,c.collectionGroup,_,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,n))}}class Zg extends Lp{constructor(e,n,c){super(),this.type=e,this._limit=n,this._limitType=c}static _create(e,n,c){return new Zg(e,n,c)}_apply(e){return new Ia(e.firestore,e.converter,fl(e._query,this._limit,this._limitType))}}class jp extends Lp{constructor(e,n,c){super(),this.type=e,this._docOrFields=n,this._inclusive=c}static _create(e,n,c){return new jp(e,n,c)}_apply(e){const n=Sv(e,this.type,this._docOrFields,this._inclusive);return new Ia(e.firestore,e.converter,(p=n,new Ul((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,p,c.endAt)));var c,p}}class zd extends Lp{constructor(e,n,c){super(),this.type=e,this._docOrFields=n,this._inclusive=c}static _create(e,n,c){return new zd(e,n,c)}_apply(e){const n=Sv(e,this.type,this._docOrFields,this._inclusive);return new Ia(e.firestore,e.converter,(p=n,new Ul((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,p)));var c,p}}function Sv(o,e,n,c){if(n[0]=(0,xt.m9)(n[0]),n[0]instanceof Pf)return function(p,_,C,N,ee){if(!N)throw new an(Ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const fe=[];for(const ke of Bl(p))if(ke.field.isKeyField())fe.push(yu(_,N.key));else{const nt=N.data.field(ke.field);if(Wi(nt))throw new an(Ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ke.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===nt){const Pt=ke.field.canonicalString();throw new an(Ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Pt}' (used as the orderBy) does not exist.`)}fe.push(nt)}return new nr(fe,ee)}(o._query,o.firestore._databaseId,e,n[0]._document,c);{const p=Jc(o.firestore);return function(_,C,N,ee,fe,ke){const nt=_.explicitOrderBy;if(fe.length>nt.length)throw new an(Ht.INVALID_ARGUMENT,`Too many arguments provided to ${ee}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Pt=[];for(let rn=0;rn<fe.length;rn++){const mn=fe[rn];if(nt[rn].field.isKeyField()){if("string"!=typeof mn)throw new an(Ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${ee}(), but got a ${typeof mn}`);if(!Nc(_)&&-1!==mn.indexOf("/"))throw new an(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${ee}() must be a plain document ID, but '${mn}' contains a slash.`);const qn=_.path.child(jr.fromString(mn));if(!En.isDocumentKey(qn))throw new an(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${ee}() must result in a valid document path, but '${qn}' is not because it contains an odd number of segments.`);const Tr=new En(qn);Pt.push(yu(C,Tr))}else{const qn=Op(N,ee,mn);Pt.push(qn)}}return new nr(Pt,ke)}(o._query,o.firestore._databaseId,p,e,n,c)}}function Xg(o,e,n){if("string"==typeof(n=(0,xt.m9)(n))){if(""===n)throw new an(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nc(e)&&-1!==n.indexOf("/"))throw new an(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const c=e.path.child(jr.fromString(n));if(!En.isDocumentKey(c))throw new an(Ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${c}' is not because it has an odd number of segments (${c.length}).`);return yu(o,new En(c))}if(n instanceof Hs)return yu(o,n._key);throw new an(Ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cc(n)}.`)}function Up(o,e){if(!Array.isArray(o)||0===o.length)throw new an(Ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(o.length>10)throw new an(Ht.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Jg(o,e){if(e.isInequality()){const c=lc(o),p=e.field;if(null!==c&&!c.isEqual(p))throw new an(Ht.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${c.toString()}' and '${p.toString()}'`);const _=Da(o);null!==_&&em(0,p,_)}const n=function(c,p){for(const _ of c)for(const C of _.getFlattenedFilters())if(p.indexOf(C.op)>=0)return C.op;return null}(o.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new an(Ht.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function em(o,e,n){if(!n.isEqual(e))throw new an(Ht.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Mf{convertValue(e,n="none"){switch(vu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw In()}}convertObject(e,n){const c={};return B(e.fields,(p,_)=>{c[p]=this.convertValue(_,n)}),c}convertGeoPoint(e){return new Xc(Jr(e.latitude),Jr(e.longitude))}convertArray(e,n){return(e.values||[]).map(c=>this.convertValue(c,n))}convertServerTimestamp(e,n){switch(n){case"previous":const c=Mo(e);return null==c?null:this.convertValue(c,n);case"estimate":return this.convertTimestamp(Cs(e));default:return null}}convertTimestamp(e){const n=ni(e);return new Ji(n.seconds,n.nanos)}convertDocumentKey(e,n){const c=jr.fromString(e);Rn(Td(c));const p=new R(c.get(1),c.get(3)),_=new En(c.popFirst(5));return p.isEqual(n)||Si(`Document ${_} contains a document reference within a different database (${p.projectId}/${p.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),_}}function tm(o,e,n){let c;return c=o?n&&(n.merge||n.mergeFields)?o.toFirestore(e,n):o.toFirestore(e):e,c}class nd extends Mf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,n)}}class Fh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Pf{constructor(e,n,c,p,_,C){super(e,n,c,p,C),this._firestore=e,this._firestoreImpl=e,this.metadata=_}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const c=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==c)return this._userDataWriter.convertValue(c,n.serverTimestamps)}}}class nm extends Uu{data(e={}){return super.data(e)}}class rd{constructor(e,n,c,p){this._firestore=e,this._userDataWriter=n,this._snapshot=p,this.metadata=new Fh(p.hasPendingWrites,p.fromCache),this.query=c}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(c=>{e.call(n,new nm(this._firestore,this._userDataWriter,c.key,c,new Fh(this._snapshot.mutatedKeys.has(c.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new an(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(c,p){if(c._snapshot.oldDocs.isEmpty()){let _=0;return c._snapshot.docChanges.map(C=>({type:"added",doc:new nm(c._firestore,c._userDataWriter,C.doc.key,C.doc,new Fh(c._snapshot.mutatedKeys.has(C.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:_++}))}{let _=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(C=>p||3!==C.type).map(C=>{const N=new nm(c._firestore,c._userDataWriter,C.doc.key,C.doc,new Fh(c._snapshot.mutatedKeys.has(C.doc.key),c._snapshot.fromCache),c.query.converter);let ee=-1,fe=-1;return 0!==C.type&&(ee=_.indexOf(C.doc.key),_=_.delete(C.doc.key)),1!==C.type&&(_=_.add(C.doc),fe=_.indexOf(C.doc.key)),{type:Bp(C.type),doc:N,oldIndex:ee,newIndex:fe}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Bp(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return In()}}function Vp(o,e){return o instanceof Uu&&e instanceof Uu?o._firestore===e._firestore&&o._key.isEqual(e._key)&&(null===o._document?null===e._document:o._document.isEqual(e._document))&&o._converter===e._converter:o instanceof rd&&e instanceof rd&&o._firestore===e._firestore&&qg(o.query,e.query)&&o.metadata.isEqual(e.metadata)&&o._snapshot.isEqual(e._snapshot)}class ol extends Mf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hs(this.firestore,null,n)}}function Wd(o,e,n){o=Zi(o,Hs);const c=Zi(o.firestore,Kr),p=tm(o.converter,e,n);return tc(c,[Rh(Jc(c),"setDoc",o._key,p,null!==o.converter,n).toMutation(o._key,Vs.none())])}function Co(o,e,n,...c){o=Zi(o,Hs);const p=Zi(o.firestore,Kr),_=Jc(p);let C;return C="string"==typeof(e=(0,xt.m9)(e))||e instanceof ka?Mp(_,"updateDoc",o._key,e,n,c):us(_,"updateDoc",o._key,e),tc(p,[C.toMutation(o._key,Vs.exists(!0))])}function Av(o,...e){var n,c,p;o=(0,xt.m9)(o);let _={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||Ln(e[C])||(_=e[C],C++);const N={includeMetadataChanges:_.includeMetadataChanges};if(Ln(e[C])){const nt=e[C];e[C]=null===(n=nt.next)||void 0===n?void 0:n.bind(nt),e[C+1]=null===(c=nt.error)||void 0===c?void 0:c.bind(nt),e[C+2]=null===(p=nt.complete)||void 0===p?void 0:p.bind(nt)}let ee,fe,ke;if(o instanceof Hs)fe=Zi(o.firestore,Kr),ke=Rc(o._key.path),ee={next:nt=>{e[C]&&e[C](Hp(fe,o,nt))},error:e[C+1],complete:e[C+2]};else{const nt=Zi(o,Ia);fe=Zi(nt.firestore,Kr),ke=nt._query;const Pt=new ol(fe);ee={next:rn=>{e[C]&&e[C](new rd(fe,Pt,nt,rn))},error:e[C+1],complete:e[C+2]},Gy(o._query)}return function(nt,Pt,rn,mn){const qn=new Ip(mn),Tr=new bp(Pt,qn,rn);return nt.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return Fg(yield je(nt),Tr)})),()=>{qn.bc(),nt.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return xl(yield je(nt),Tr)}))}}(Gs(fe),ke,N,ee)}function tc(o,e){return function(n,c){const p=new ws;return n.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function ov(o,e,n){return Ep.apply(this,arguments)}(yield Z(n),c,p)})),p.promise}(Gs(o),e)}function Hp(o,e,n){const c=n.docs.get(e._key),p=new ol(o);return new Uu(o,p,e._key,c,new Fh(n.hasPendingWrites,n.fromCache),e.converter)}const qy={maxAttempts:5};class Wy{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jc(e)}set(e,n,c){this._verifyNotCommitted();const p=Kd(e,this._firestore),_=tm(p.converter,n,c),C=Rh(this._dataReader,"WriteBatch.set",p._key,_,null!==p.converter,c);return this._mutations.push(C.toMutation(p._key,Vs.none())),this}update(e,n,c,...p){this._verifyNotCommitted();const _=Kd(e,this._firestore);let C;return C="string"==typeof(n=(0,xt.m9)(n))||n instanceof ka?Mp(this._dataReader,"WriteBatch.update",_._key,n,c,p):us(this._dataReader,"WriteBatch.update",_._key,n),this._mutations.push(C.toMutation(_._key,Vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Kd(e,this._firestore);return this._mutations=this._mutations.concat(new bu(n._key,Vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new an(Ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kd(o,e){if((o=(0,xt.m9)(o)).firestore!==e)throw new an(Ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class Of extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Jc(e)}get(e){const n=Kd(e,this._firestore),c=new nd(this._firestore);return this._transaction.lookup([n._key]).then(p=>{if(!p||1!==p.length)return In();const _=p[0];if(_.isFoundDocument())return new Pf(this._firestore,c,_.key,_,n.converter);if(_.isNoDocument())return new Pf(this._firestore,c,n._key,null,n.converter);throw In()})}set(e,n,c){const p=Kd(e,this._firestore),_=tm(p.converter,n,c),C=Rh(this._dataReader,"Transaction.set",p._key,_,null!==p.converter,c);return this._transaction.set(p._key,C),this}update(e,n,c,...p){const _=Kd(e,this._firestore);let C;return C="string"==typeof(n=(0,xt.m9)(n))||n instanceof ka?Mp(this._dataReader,"Transaction.update",_._key,n,c,p):us(this._dataReader,"Transaction.update",_._key,n),this._transaction.update(_._key,C),this}delete(e){const n=Kd(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Kd(e,this._firestore),c=new ol(this._firestore);return super.get(e).then(p=>new Uu(this._firestore,c,n._key,p._document,new Fh(!1,!1),n.converter))}}function kv(o,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new an("invalid-argument",`Invalid options passed to function ${o}(): You cannot specify both "merge" and "mergeFields".`);return e}function am(){if(typeof Uint8Array>"u")throw new an("unimplemented","Uint8Arrays are not available in this environment.")}function Mv(){if(!function Jt(){return typeof atob<"u"}())throw new an("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(o,e=!0){Fr=Xe.SDK_VERSION,(0,Xe._registerComponent)(new gt.wA("firestore",(n,{instanceIdentifier:c,options:p})=>{const _=n.getProvider("app").getImmediate(),C=new Kr(new al(n.getProvider("auth-internal")),new Po(n.getProvider("app-check-internal")),function(N,ee){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new an(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new R(N.options.projectId,ee)}(_,c),_);return p=Object.assign({useFetchStreams:e},p),C._setSettings(p),C},"PUBLIC").setMultipleInstances(!0)),(0,Xe.registerVersion)(Gr,"3.8.1",o),(0,Xe.registerVersion)(Gr,"3.8.1","esm2017")}();class Nf{constructor(e){this._delegate=e}static fromBase64String(e){return Mv(),new Nf(Pa.fromBase64String(e))}static fromUint8Array(e){return am(),new Nf(Pa.fromUint8Array(e))}toBase64(){return Mv(),this._delegate.toBase64()}toUint8Array(){return am(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function um(o){return function $p(o,e){if("object"!=typeof o||null===o)return!1;const n=o;for(const c of e)if(c in n&&"function"==typeof n[c])return!0;return!1}(o,["next","error","complete"])}class jh{enableIndexedDbPersistence(e,n){return function Al(o,e){_v(o=Zi(o,Kr));const n=Gs(o),c=o._freezeSettings(),p=new Hg;return ec(n,p,new gv(p,c.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Il(o){_v(o=Zi(o,Kr));const e=Gs(o),n=o._freezeSettings(),c=new Hg;return ec(e,c,new Dp(c,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Mh(o){if(o._initialized&&!o._terminated)throw new an(Ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ws;return o._queue.enqueueAndForgetEvenWhileRestricted((0,Ve.Z)(function*(){try{yield(n=(0,Ve.Z)(function*(c){if(!ja.C())return Promise.resolve();const p=c+"main";yield ja.delete(p)}),function(c){return n.apply(this,arguments)})(bg(o._databaseId,o._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class zp{constructor(e,n,c){this._delegate=n,this._persistenceProvider=c,this.INTERNAL={delete:()=>this.terminate()},e instanceof R||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ci("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,c={}){!function Yc(o,e,n,c={}){var p;const _=(o=Zi(o,Zc))._getSettings();if("firestore.googleapis.com"!==_.host&&_.host!==e&&ci("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},_),{host:`${e}:${n}`,ssl:!1})),c.mockUserToken){let C,N;if("string"==typeof c.mockUserToken)C=c.mockUserToken,N=kr.MOCK_USER;else{C=(0,xt.Sg)(c.mockUserToken,null===(p=o._app)||void 0===p?void 0:p.options.projectId);const ee=c.mockUserToken.sub||c.mockUserToken.user_id;if(!ee)throw new an(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new kr(ee)}o._authCredentials=new xu(new Za(C,N))}}(this._delegate,e,n,c)}enableNetwork(){return function Qc(o){return function Re(o){return o.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield P(o),n=yield Y(o);return e.setNetworkEnabled(!0),function(c){const p=kn(c);return p._u.delete(0),vf(p)}(n)}))}(Gs(o=Zi(o,Kr)))}(this._delegate)}disableNetwork(){return function Oh(o){return function Bt(o){return o.asyncQueue.enqueue((0,Ve.Z)(function*(){const e=yield P(o),n=yield Y(o);return e.setNetworkEnabled(!1),(c=(0,Ve.Z)(function*(p){const _=kn(p);_._u.add(0),yield _f(_),_.gu.set("Offline")}),function(p){return c.apply(this,arguments)})(n);var c}))}(Gs(o=Zi(o,Kr)))}(this._delegate)}enablePersistence(e){let n=!1,c=!1;return e&&(n=!!e.synchronizeTabs,c=!!e.experimentalForceOwningTab,Fy("synchronizeTabs",n,"experimentalForceOwningTab",c)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,c)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Ud(o){return function(e){const n=new ws;return e.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return function J0(o,e){return Rd.apply(this,arguments)}(yield Z(e),n)})),n.promise}(Gs(o=Zi(o,Kr)))}(this._delegate)}onSnapshotsInSync(e){return function im(o,e){return function jn(o,e){const n=new Ip(e);return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return c=yield je(o),p=n,kn(c).Ru.add(p),void p.next();var c,p})),()=>{n.bc(),o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return c=yield je(o),p=n,void kn(c).Ru.delete(p);var c,p}))}}(Gs(o=Zi(o,Kr)),Ln(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new an("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uh(this,zg(this._delegate,e))}catch(n){throw ru(n,"collection()","Firestore.collection()")}}doc(e){try{return new nc(this,Ap(this._delegate,e))}catch(n){throw ru(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pi(this,function xf(o,e){if(o=Zi(o,Zc),Ki("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new an(Ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ia(o,null,(n=e,new Ul(jr.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw ru(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function M0(o,e,n){o=Zi(o,Kr);const c=Object.assign(Object.assign({},qy),n);return function(p){if(p.maxAttempts<1)throw new an(Ht.INVALID_ARGUMENT,"Max attempts must be at least 1")}(c),function(p,_,C){const N=new ws;return p.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){const ee=yield function we(o){return v(o).then(e=>e.datastore)}(p);new yv(p.asyncQueue,ee,C,_,N).run()})),N.promise}(Gs(o),p=>e(new Of(o,p)),c)}(this._delegate,n=>e(new Ov(this,n)))}batch(){return Gs(this._delegate),new L0(new Wy(this._delegate,e=>tc(this._delegate,e)))}loadBundle(e){return function Dc(o,e){const n=Gs(o=Zi(o,Kr)),c=new hs;return function Hn(o,e,n,c){const p=function(_,C){let N;return N="string"==typeof _?(new TextEncoder).encode(_):_,ee=function(ee,fe){if(ee instanceof Uint8Array)return Ph(ee,void 0);if(ee instanceof ArrayBuffer)return Ph(new Uint8Array(ee),void 0);if(ee instanceof ReadableStream)return ee.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new vv(ee,C);var ee}(n,Sl(e));o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){!function Ly(o,e,n){const c=kn(o);var p;(p=(0,Ve.Z)(function*(_,C,N){try{const ee=yield C.getMetadata();if(yield function(Pt,rn){const mn=kn(Pt),qn=To(rn.createTime);return mn.persistence.runTransaction("hasNewerBundle","readonly",Tr=>mn.Ns.getBundleMetadata(Tr,rn.id)).then(Tr=>!!Tr&&Tr.createTime.compareTo(qn)>=0)}(_.localStore,ee))return yield C.close(),N._completeWith({taskState:"Success",documentsLoaded:(Pt=ee).totalDocuments,bytesLoaded:Pt.totalBytes,totalDocuments:Pt.totalDocuments,totalBytes:Pt.totalBytes}),Promise.resolve(new Set);N._updateProgress(wf(ee));const fe=new y0(ee,_.localStore,C.yt);let ke=yield C.mc();for(;ke;){const Pt=yield fe.Fu(ke);Pt&&N._updateProgress(Pt),ke=yield C.mc()}const nt=yield fe.complete();return yield zc(_,nt.Lu,void 0),yield function(Pt,rn){const mn=kn(Pt);return mn.persistence.runTransaction("Save bundle","readwrite",qn=>mn.Ns.saveBundleMetadata(qn,rn))}(_.localStore,ee),N._completeWith(nt.progress),Promise.resolve(nt.Bu)}catch(ee){return ci("SyncEngine",`Loading bundle failed with ${ee}`),N._failWith(ee),Promise.resolve(new Set)}var Pt}),function(_,C,N){return p.apply(this,arguments)})(c,e,n).then(p=>{c.sharedClientState.notifyBundleLoaded(p)})}(yield Z(o),p,c)}))}(n,o._databaseId,e,c),c}(this._delegate,e)}namedQuery(e){return function S0(o,e){return function gn(o,e){return o.asyncQueue.enqueue((0,Ve.Z)(function*(){return function(n,c){const p=kn(n);return p.persistence.runTransaction("Get named query","readonly",_=>p.Ns.getNamedQuery(_,c))}(yield H(o),e)}))}(Gs(o=Zi(o,Kr)),e).then(n=>n?new Ia(o,null,n.query):null)}(this._delegate,e).then(n=>n?new Pi(this,n):null)}}class Ac extends Mf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nf(new Pa(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return nc.forKey(n,this.firestore,null)}}class Ov{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ac(e)}get(e){const n=Bh(e);return this._delegate.get(n).then(c=>new qp(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,n.converter)))}set(e,n,c){const p=Bh(e);return c?(kv("Transaction.set",c),this._delegate.set(p,n,c)):this._delegate.set(p,n),this}update(e,n,c,...p){const _=Bh(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,c,...p),this}delete(e){const n=Bh(e);return this._delegate.delete(n),this}}class L0{constructor(e){this._delegate=e}set(e,n,c){const p=Bh(e);return c?(kv("WriteBatch.set",c),this._delegate.set(p,n,c)):this._delegate.set(p,n),this}update(e,n,c,...p){const _=Bh(e);return 2===arguments.length?this._delegate.update(_,n):this._delegate.update(_,n,c,...p),this}delete(e){const n=Bh(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Lf{constructor(e,n,c){this._firestore=e,this._userDataWriter=n,this._delegate=c}fromFirestore(e,n){const c=new nm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wp(this._firestore,c),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const c=Lf.INSTANCES;let p=c.get(e);p||(p=new WeakMap,c.set(e,p));let _=p.get(n);return _||(_=new Lf(e,new Ac(e),n),p.set(n,_)),_}}Lf.INSTANCES=new WeakMap;class nc{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ac(e)}static forPath(e,n,c){if(e.length%2!=0)throw new an("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nc(n,new Hs(n._delegate,c,new En(e)))}static forKey(e,n,c){return new nc(n,new Hs(n._delegate,c,e))}get id(){return this._delegate.id}get parent(){return new Uh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uh(this.firestore,zg(this._delegate,e))}catch(n){throw ru(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Hs&&jd(this._delegate,e)}set(e,n){n=kv("DocumentReference.set",n);try{return n?Wd(this._delegate,e,n):Wd(this._delegate,e)}catch(c){throw ru(c,"setDoc()","DocumentReference.set()")}}update(e,n,...c){try{return 1===arguments.length?Co(this._delegate,e):Co(this._delegate,e,n,...c)}catch(p){throw ru(p,"updateDoc()","DocumentReference.update()")}}delete(){return function I0(o){return tc(Zi(o.firestore,Kr),[new bu(o._key,Vs.none())])}(this._delegate)}onSnapshot(...e){const n=Rv(e),c=rc(e,p=>new qp(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,p._key,p._document,p.metadata,this._delegate.converter)));return Av(this._delegate,n,c)}get(e){let n;return n="cache"===e?.source?function Dv(o){o=Zi(o,Hs);const e=Zi(o.firestore,Kr),n=Gs(e),c=new ol(e);return function It(o,e){const n=new ws;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(c=(0,Ve.Z)(function*(p,_,C){try{const N=yield function(ee,fe){const ke=kn(ee);return ke.persistence.runTransaction("read document","readonly",nt=>ke.localDocuments.getDocument(nt,fe))}(p,_);N.isFoundDocument()?C.resolve(N):N.isNoDocument()?C.resolve(null):C.reject(new an(Ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const ee=nl(N,`Failed to get document '${_} from cache`);C.reject(ee)}}),function(p,_,C){return c.apply(this,arguments)})(yield H(o),e,n);var c})),n.promise}(n,o._key).then(p=>new Uu(e,c,o._key,p,new Fh(null!==p&&p.hasLocalMutations,!0),o.converter))}(this._delegate):"server"===e?.source?function zy(o){o=Zi(o,Hs);const e=Zi(o.firestore,Kr);return tn(Gs(e),o._key,{source:"server"}).then(n=>Hp(e,o,n))}(this._delegate):function Ur(o){o=Zi(o,Hs);const e=Zi(o.firestore,Kr);return tn(Gs(e),o._key).then(n=>Hp(e,o,n))}(this._delegate),n.then(c=>new qp(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)))}withConverter(e){return new nc(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function ru(o,e,n){return o.message=o.message.replace(e,n),o}function Rv(o){for(const e of o)if("object"==typeof e&&!um(e))return e;return{}}function rc(o,e){var n,c;let p;return p=um(o[0])?o[0]:um(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]},{next:_=>{p.next&&p.next(e(_))},error:null===(n=p.error)||void 0===n?void 0:n.bind(p),complete:null===(c=p.complete)||void 0===c?void 0:c.bind(p)}}class qp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new nc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Vp(this._delegate,e._delegate)}}class Wp extends qp{data(e){const n=this._delegate.data(e);return function Du(o,e){o||In()}(void 0!==n),n}}class Pi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ac(e)}where(e,n,c){try{return new Pi(this.firestore,kl(this._delegate,function x0(o,e,n){const c=e,p=Kg("where",o);return nu._create(p,c,n)}(e,n,c)))}catch(p){throw ru(p,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Pi(this.firestore,kl(this._delegate,function uo(o,e="asc"){const n=e,c=Kg("orderBy",o);return Fp._create(c,n)}(e,n)))}catch(c){throw ru(c,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pi(this.firestore,kl(this._delegate,function Yg(o){return Sc("limit",o),Zg._create("limit",o,"F")}(e)))}catch(n){throw ru(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Pi(this.firestore,kl(this._delegate,function Qg(o){return Sc("limitToLast",o),Zg._create("limitToLast",o,"L")}(e)))}catch(n){throw ru(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pi(this.firestore,kl(this._delegate,function $d(...o){return jp._create("startAt",o,!0)}(...e)))}catch(n){throw ru(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pi(this.firestore,kl(this._delegate,function wo(...o){return jp._create("startAfter",o,!1)}(...e)))}catch(n){throw ru(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pi(this.firestore,kl(this._delegate,function za(...o){return zd._create("endBefore",o,!1)}(...e)))}catch(n){throw ru(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pi(this.firestore,kl(this._delegate,function $y(...o){return zd._create("endAt",o,!0)}(...e)))}catch(n){throw ru(n,"endAt()","Query.endAt()")}}isEqual(e){return qg(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function id(o){o=Zi(o,Ia);const e=Zi(o.firestore,Kr),n=Gs(e),c=new ol(e);return function on(o,e){const n=new ws;return o.asyncQueue.enqueueAndForget((0,Ve.Z)(function*(){return(c=(0,Ve.Z)(function*(p,_,C){try{const N=yield Th(p,_,!0),ee=new tv(_,N.Hi),fe=ee.Wu(N.documents),ke=ee.applyChanges(fe,!1);C.resolve(ke.snapshot)}catch(N){const ee=nl(N,`Failed to execute query '${_} against cache`);C.reject(ee)}}),function(p,_,C){return c.apply(this,arguments)})(yield H(o),e,n);var c})),n.promise}(n,o._query).then(p=>new rd(e,c,o,p))}(this._delegate):"server"===e?.source?function rm(o){o=Zi(o,Ia);const e=Zi(o.firestore,Kr),n=Gs(e),c=new ol(e);return Kt(n,o._query,{source:"server"}).then(p=>new rd(e,c,o,p))}(this._delegate):function qd(o){o=Zi(o,Ia);const e=Zi(o.firestore,Kr),n=Gs(e),c=new ol(e);return Gy(o._query),Kt(n,o._query).then(p=>new rd(e,c,o,p))}(this._delegate),n.then(c=>new Nv(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)))}onSnapshot(...e){const n=Rv(e),c=rc(e,p=>new Nv(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,this._delegate,p._snapshot)));return Av(this._delegate,n,c)}withConverter(e){return new Pi(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}class Ff{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Nv{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Ff(this._firestore,n))}forEach(e,n){this._delegate.forEach(c=>{e.call(n,new Wp(this._firestore,c))})}isEqual(e){return Vp(this._delegate,e._delegate)}}class Uh extends Pi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nc(this.firestore,e):null}doc(e){try{return new nc(this.firestore,void 0===e?Ap(this._delegate):Ap(this._delegate,e))}catch(n){throw ru(n,"doc()","CollectionReference.doc()")}}add(e){return function xv(o,e){const n=Zi(o.firestore,Kr),c=Ap(o),p=tm(o.converter,e);return tc(n,[Rh(Jc(o.firestore),"addDoc",c._key,p,null!==o.converter,{}).toMutation(c._key,Vs.exists(!1))]).then(()=>c)}(this._delegate,e).then(n=>new nc(this.firestore,n))}isEqual(e){return jd(this._delegate,e._delegate)}withConverter(e){return new Uh(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function Bh(o){return Zi(o,Hs)}class lm{constructor(...e){this._delegate=new ka(...e)}static documentId(){return new lm(ys.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof ka&&this._delegate._internalPath.isEqual(e._internalPath)}}class Vh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function R0(){return new If("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Vh(e)}static delete(){const e=function O0(){return new Nh("deleteField")}();return e._methodName="FieldValue.delete",new Vh(e)}static arrayUnion(...e){const n=function sm(...o){return new kp("arrayUnion",o)}(...e);return n._methodName="FieldValue.arrayUnion",new Vh(n)}static arrayRemove(...e){const n=function Ky(...o){return new Vy("arrayRemove",o)}(...e);return n._methodName="FieldValue.arrayRemove",new Vh(n)}static increment(e){const n=function Zy(o){return new Tv("increment",o)}(e);return n._methodName="FieldValue.increment",new Vh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Lv={Firestore:zp,GeoPoint:Xc,Timestamp:Ji,Blob:Nf,Transaction:Ov,WriteBatch:L0,DocumentReference:nc,DocumentSnapshot:qp,Query:Pi,QueryDocumentSnapshot:Wp,QuerySnapshot:Nv,CollectionReference:Uh,FieldPath:lm,FieldValue:Vh,setLogLevel:function N0(o){!function to(o){Xr.setLogLevel(o)}(o)},CACHE_SIZE_UNLIMITED:-1};!function Yy(o){(function F0(o,e){o.INTERNAL.registerComponent(new gt.wA("firestore-compat",n=>{const c=n.getProvider("app-compat").getImmediate(),p=n.getProvider("firestore").getImmediate();return e(c,p)},"PUBLIC").setServiceProps(Object.assign({},Lv)))})(o,(e,n)=>new zp(e,n,new jh)),o.registerVersion("@firebase/firestore-compat","0.3.1")}(Et.Z);var Ml=W(1205),j0=W(6217),Qy=W(9260);function Fv(o,e){return function U0(o,e=ie.z){return new ne.y(n=>{let c;return null!=e?e.schedule(()=>{c=o.onSnapshot({includeMetadataChanges:!0},n)}):c=o.onSnapshot({includeMetadataChanges:!0},n),()=>{c?.()}})}(o,e)}function cm(o,e){return Fv(o,e).pipe((0,Ee.U)(n=>({payload:n,type:"query"})))}function dm(o,e){return cm(o,e).pipe((0,ae.O)(void 0),De(),(0,Ee.U)(([n,c])=>{const p=c.payload.docChanges(),_=p.map(C=>({type:C.type,payload:C}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((C,N)=>{const ee=p.find(ke=>ke.doc.ref.isEqual(C.ref)),fe=n?.payload.docs.find(ke=>ke.ref.isEqual(C.ref));ee&&JSON.stringify(ee.doc.metadata)===JSON.stringify(C.metadata)||!ee&&fe&&JSON.stringify(fe.metadata)===JSON.stringify(C.metadata)||_.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:C}})}),_}))}function hm(o,e,n){return dm(o,n).pipe((0,Me.R)((c,p)=>function jf(o,e,n){return e.forEach(c=>{n.indexOf(c.type)>-1&&(o=function jv(o,e){switch(e.type){case"added":if(!o[e.newIndex]||!o[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zd(o,e.newIndex,0,e);break;case"modified":if(null==o[e.oldIndex]||o[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=o.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Zd(o,e.newIndex,1,e)}break;case"removed":if(o[e.oldIndex]&&o[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zd(o,e.oldIndex,1)}return o}(o,c))}),o}(c,p.map(_=>_.payload),e),[]),function rt(o,e=$e.y){return o=o??_t,(0,He.e)((n,c)=>{let p,_=!0;n.subscribe((0,Ae.x)(c,C=>{const N=e(C);(_||!o(p,N))&&(_=!1,p=N,c.next(C))}))})}(),(0,Ee.U)(c=>c.map(p=>({type:p.type,payload:p}))))}function Zd(o,e,n,...c){const p=o.slice();return p.splice(e,n,...c),p}function Uv(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class Bv{constructor(e,n,c){this.ref=e,this.query=n,this.afs=c}stateChanges(e){let n=dm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ee.U)(c=>c.filter(p=>e.indexOf(p.type)>-1)))),n.pipe((0,ae.O)(void 0),De(),(0,St.h)(([c,p])=>p.length>0||!c),(0,Ee.U)(([c,p])=>p),Be.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Me.R)((n,c)=>[...n,...c],[]))}snapshotChanges(e){const n=Uv(e);return hm(this.query,n,this.afs.schedulers.outsideAngular).pipe(Be.iC)}valueChanges(e={}){return cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(n=>n.payload.docs.map(c=>e.idField?Object.assign(Object.assign({},c.data()),{[e.idField]:c.id}):c.data())),Be.iC)}get(e){return(0,F.D)(this.query.get(e)).pipe(Be.iC)}add(e){return this.ref.add(e)}doc(e){return new Vv(this.ref.doc(e),this.afs)}}class Vv{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const c=this.ref.collection(e),{ref:p,query:_}=Kp(c,n);return new Bv(p,_,this.afs)}snapshotChanges(){return function B0(o,e){return Fv(o,e).pipe((0,ae.O)(void 0),De(),(0,Ee.U)(([n,c])=>c.exists?n?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Be.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ee.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,F.D)(this.ref.get(e)).pipe(Be.iC)}}class fm{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?dm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(n=>n.filter(c=>e.indexOf(c.type)>-1)),(0,St.h)(n=>n.length>0),Be.iC):dm(this.query,this.afs.schedulers.outsideAngular).pipe(Be.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Me.R)((n,c)=>[...n,...c],[]))}snapshotChanges(e){const n=Uv(e);return hm(this.query,n,this.afs.schedulers.outsideAngular).pipe(Be.iC)}valueChanges(e={}){return cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ee.U)(c=>c.payload.docs.map(p=>e.idField?Object.assign({[e.idField]:p.id},p.data()):p.data())),Be.iC)}get(e){return(0,F.D)(this.query.get(e)).pipe(Be.iC)}}const pm=new E.OlP("angularfire2.enableFirestorePersistence"),gm=new E.OlP("angularfire2.firestore.persistenceSettings"),Xy=new E.OlP("angularfire2.firestore.settings"),mm=new E.OlP("angularfire2.firestore.use-emulator");function Kp(o,e=(n=>n)){return{query:e(o),ref:o}}let Jy=(()=>{class o{constructor(n,c,p,_,C,N,ee,fe,ke,nt,Pt,rn,mn,qn,Tr,Ms,So){this.schedulers=ee;const ts=(0,Fe.on)(n,N,c),$s=ke;nt&&(0,Ml.nw)(ts,N,Pt,mn,qn,Tr,rn,Ms),[this.firestore,this.persistenceEnabled$]=(0,Fe.cc)(`${ts.name}.firestore`,"AngularFirestore",ts.name,()=>{const _e=N.runOutsideAngular(()=>ts.firestore());if(_&&_e.settings(_),$s&&_e.useEmulator(...$s),p&&!(0,ut.PM)(C)){const I=()=>{try{return(0,F.D)(_e.enablePersistence(fe||void 0).then(()=>!0,()=>!1))}catch(j){return typeof console<"u"&&console.warn(j),(0,Ne.of)(!1)}};return[_e,N.runOutsideAngular(I)]}return[_e,(0,Ne.of)(!1)]},[_,$s,p])}collection(n,c){let p;p="string"==typeof n?this.firestore.collection(n):n;const{ref:_,query:C}=Kp(p,c),N=this.schedulers.ngZone.run(()=>_);return new Bv(N,C,this)}collectionGroup(n,c){const p=c||(C=>C),_=this.firestore.collectionGroup(n);return new fm(p(_),this)}doc(n){let c;c="string"==typeof n?this.firestore.doc(n):n;const p=this.schedulers.ngZone.run(()=>c);return new Vv(p,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(n){return new(n||o)(E.LFG(Fe.Dh),E.LFG(Fe.xv,8),E.LFG(pm,8),E.LFG(Xy,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(Be.HU),E.LFG(gm,8),E.LFG(mm,8),E.LFG(Ml.zQ,8),E.LFG(Ml.Qv,8),E.LFG(Ml.L6,8),E.LFG(Ml._Q,8),E.LFG(Ml.rT,8),E.LFG(Ml.lh,8),E.LFG(Ml.f7,8),E.LFG(j0.nm,8))},o.\u0275prov=E.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),V0=(()=>{class o{constructor(){Qy.Z.registerVersion("angularfire",Be.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:o,providers:[{provide:pm,useValue:!0},{provide:gm,useValue:n}]}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=E.oAB({type:o}),o.\u0275inj=E.cJS({providers:[Jy]}),o})()},377:(Wt,et,W)=>{"use strict";W.d(et,{Q1:()=>Sr,TE:()=>K});var E=W(9751),ie=W(9646),ne=W(8996),F=W(4986),Ne=W(4482),Be=W(5403),He=W(4004),Ae=W(3900),De=W(2122),Ee=W(4650),Me=W(2011),$e=W(3942),rt=W(5861),_t=W(9681),St=W(2090),Fe=W(4859);const ut="firebasestorage.googleapis.com",st="storageBucket";class gt extends St.ZR{constructor(k,ce,Ie=0){super(kt(k),`Firebase Storage: ${ce} (${kt(k)})`),this.status_=Ie,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gt.prototype)}get status(){return this.status_}set status(k){this.status_=k}_codeEquals(k){return kt(k)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(k){this.customData.serverResponse=k,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function kt(w){return"storage/"+w}function xt(){return new gt("unknown","An unknown error occurred, please check the error payload for server response.")}function qe(){return new gt("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function dt(){return new gt("canceled","User canceled the upload/download.")}function Rt(){return new gt("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ln(w){return new gt("invalid-argument",w)}function Zt(){return new gt("app-deleted","The Firebase app was deleted.")}function hn(w){return new gt("invalid-root-operation","The operation '"+w+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gt(w,k){return new gt("invalid-format","String does not match format '"+w+"': "+k)}function rr(w){throw new gt("internal-error","Internal error: "+w)}class Wn{constructor(k,ce){this.bucket=k,this.path_=ce}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const k=encodeURIComponent;return"/b/"+k(this.bucket)+"/o/"+k(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(k,ce){let Ie;try{Ie=Wn.makeFromUrl(k,ce)}catch{return new Wn(k,"")}if(""===Ie.path)return Ie;throw function vt(w){return new gt("invalid-default-bucket","Invalid default bucket '"+w+"'.")}(k)}static makeFromUrl(k,ce){let Ie=null;const tt="([A-Za-z0-9.\\-_]+)",Fn=new RegExp("^gs://"+tt+"(/(.*))?$","i");function Un(Is){Is.path_=decodeURIComponent(Is.path)}const Qi=ce.replace(/[.]/g,"\\."),Vi=[{regex:Fn,indices:{bucket:1,path:3},postModify:function Ge(Is){"/"===Is.path.charAt(Is.path.length-1)&&(Is.path_=Is.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Qi}/v[A-Za-z0-9_]+/b/${tt}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Un},{regex:new RegExp(`^https?://${ce===ut?"(?:storage.googleapis.com|storage.cloud.google.com)":ce}/${tt}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Un}];for(let Is=0;Is<Vi.length;Is++){const Zs=Vi[Is],Es=Zs.regex.exec(k);if(Es){let Ho=Es[Zs.indices.path];Ho||(Ho=""),Ie=new Wn(Es[Zs.indices.bucket],Ho),Zs.postModify(Ie);break}}if(null==Ie)throw function wt(w){return new gt("invalid-url","Invalid URL '"+w+"'.")}(k);return Ie}}class Er{constructor(k){this.promise_=Promise.reject(k)}getPromise(){return this.promise_}cancel(k=!1){}}function zr(w){return"string"==typeof w||w instanceof String}function pr(w){return xn()&&w instanceof Blob}function xn(){return typeof Blob<"u"&&!(0,St.UG)()}function mr(w,k,ce,Ie){if(Ie<k)throw ln(`Invalid value for '${w}'. Expected ${k} or greater.`);if(Ie>ce)throw ln(`Invalid value for '${w}'. Expected ${ce} or less.`)}function yn(w,k,ce){let Ie=k;return null==ce&&(Ie=`https://${k}`),`${ce}://${Ie}/v0${w}`}function xi(w){const k=encodeURIComponent;let ce="?";for(const Ie in w)w.hasOwnProperty(Ie)&&(ce=ce+(k(Ie)+"=")+k(w[Ie])+"&");return ce=ce.slice(0,-1),ce}var br=(()=>{return(w=br||(br={}))[w.NO_ERROR=0]="NO_ERROR",w[w.NETWORK_ERROR=1]="NETWORK_ERROR",w[w.ABORT=2]="ABORT",br;var w})();function xr(w,k){const ce=w>=500&&w<600,tt=-1!==[408,429].indexOf(w),Ge=-1!==k.indexOf(w);return ce||tt||Ge}class gi{constructor(k,ce,Ie,tt,Ge,Ut,Fn,qt,Un,$r,Qi,Qr=!0){this.url_=k,this.method_=ce,this.headers_=Ie,this.body_=tt,this.successCodes_=Ge,this.additionalRetryCodes_=Ut,this.callback_=Fn,this.errorCallback_=qt,this.timeout_=Un,this.progressCallback_=$r,this.connectionFactory_=Qi,this.retry=Qr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ni,Ar)=>{this.resolve_=Ni,this.reject_=Ar,this.start_()})}start_(){const ce=(Ie,tt)=>{const Ge=this.resolve_,Ut=this.reject_,Fn=tt.connection;if(tt.wasSuccessCode)try{const qt=this.callback_(Fn,Fn.getResponse());!function or(w){return void 0!==w}(qt)?Ge():Ge(qt)}catch(qt){Ut(qt)}else if(null!==Fn){const qt=xt();qt.serverResponse=Fn.getErrorText(),Ut(this.errorCallback_?this.errorCallback_(Fn,qt):qt)}else Ut(tt.canceled?this.appDelete_?Zt():dt():qe())};this.canceled_?ce(0,new Ei(!1,null,!0)):this.backoffId_=function _r(w,k,ce){let Ie=1,tt=null,Ge=null,Ut=!1,Fn=0;function qt(){return 2===Fn}let Un=!1;function $r(...Oi){Un||(Un=!0,k.apply(null,Oi))}function Qi(Oi){tt=setTimeout(()=>{tt=null,w(Ni,qt())},Oi)}function Qr(){Ge&&clearTimeout(Ge)}function Ni(Oi,...Ts){if(Un)return void Qr();if(Oi)return Qr(),void $r.call(null,Oi,...Ts);if(qt()||Ut)return Qr(),void $r.call(null,Oi,...Ts);let Vi;Ie<64&&(Ie*=2),1===Fn?(Fn=2,Vi=0):Vi=1e3*(Ie+Math.random()),Qi(Vi)}let Ar=!1;function Xi(Oi){Ar||(Ar=!0,Qr(),!Un&&(null!==tt?(Oi||(Fn=2),clearTimeout(tt),Qi(0)):Oi||(Fn=1)))}return Qi(0),Ge=setTimeout(()=>{Ut=!0,Xi(!0)},ce),Xi}((Ie,tt)=>{if(tt)return void Ie(!1,new Ei(!1,null,!0));const Ge=this.connectionFactory_();this.pendingConnection_=Ge;const Ut=Fn=>{null!==this.progressCallback_&&this.progressCallback_(Fn.loaded,Fn.lengthComputable?Fn.total:-1)};null!==this.progressCallback_&&Ge.addUploadProgressListener(Ut),Ge.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ge.removeUploadProgressListener(Ut),this.pendingConnection_=null;const Fn=Ge.getErrorCode()===br.NO_ERROR,qt=Ge.getStatus();if(!Fn||xr(qt,this.additionalRetryCodes_)&&this.retry){const $r=Ge.getErrorCode()===br.ABORT;return void Ie(!1,new Ei(!1,null,$r))}const Un=-1!==this.successCodes_.indexOf(qt);Ie(!0,new Ei(Un,Ge))})},ce,this.timeout_)}getPromise(){return this.promise_}cancel(k){this.canceled_=!0,this.appDelete_=k||!1,null!==this.backoffId_&&function yi(w){w(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ei{constructor(k,ce,Ie){this.wasSuccessCode=k,this.connection=ce,this.canceled=!!Ie}}function wi(...w){const k=function Mn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==k){const ce=new k;for(let Ie=0;Ie<w.length;Ie++)ce.append(w[Ie]);return ce.getBlob()}if(xn())return new Blob(w);throw new gt("unsupported-environment","This browser doesn't seem to support creating Blobs")}const sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class li{constructor(k,ce){this.data=k,this.contentType=ce||null}}function wr(w,k){switch(w){case sr.RAW:return new li(si(k));case sr.BASE64:case sr.BASE64URL:return new li(dn(w,k));case sr.DATA_URL:return new li(function Cn(w){const k=new zt(w);return k.base64?dn(sr.BASE64,k.rest):function Hi(w){let k;try{k=decodeURIComponent(w)}catch{throw Gt(sr.DATA_URL,"Malformed data URL.")}return si(k)}(k.rest)}(k),function er(w){return new zt(w).contentType}(k))}throw xt()}function si(w){const k=[];for(let ce=0;ce<w.length;ce++){let Ie=w.charCodeAt(ce);Ie<=127?k.push(Ie):Ie<=2047?k.push(192|Ie>>6,128|63&Ie):55296==(64512&Ie)?ce<w.length-1&&56320==(64512&w.charCodeAt(ce+1))?(Ie=65536|(1023&Ie)<<10|1023&w.charCodeAt(++ce),k.push(240|Ie>>18,128|Ie>>12&63,128|Ie>>6&63,128|63&Ie)):k.push(239,191,189):56320==(64512&Ie)?k.push(239,191,189):k.push(224|Ie>>12,128|Ie>>6&63,128|63&Ie)}return new Uint8Array(k)}function dn(w,k){switch(w){case sr.BASE64:{const tt=-1!==k.indexOf("-"),Ge=-1!==k.indexOf("_");if(tt||Ge)throw Gt(w,"Invalid character '"+(tt?"-":"_")+"' found: is it base64url encoded?");break}case sr.BASE64URL:{const tt=-1!==k.indexOf("+"),Ge=-1!==k.indexOf("/");if(tt||Ge)throw Gt(w,"Invalid character '"+(tt?"+":"/")+"' found: is it base64 encoded?");k=k.replace(/-/g,"+").replace(/_/g,"/");break}}let ce;try{ce=function Ri(w){if(typeof atob>"u")throw function $t(w){return new gt("unsupported-environment",`${w} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(w)}(k)}catch(tt){throw tt.message.includes("polyfill")?tt:Gt(w,"Invalid character found")}const Ie=new Uint8Array(ce.length);for(let tt=0;tt<ce.length;tt++)Ie[tt]=ce.charCodeAt(tt);return Ie}class zt{constructor(k){this.base64=!1,this.contentType=null;const ce=k.match(/^data:([^,]+)?,/);if(null===ce)throw Gt(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const Ie=ce[1]||null;null!=Ie&&(this.base64=function $n(w,k){return w.length>=k.length&&w.substring(w.length-k.length)===k}(Ie,";base64"),this.contentType=this.base64?Ie.substring(0,Ie.length-7):Ie),this.rest=k.substring(k.indexOf(",")+1)}}class Vn{constructor(k,ce){let Ie=0,tt="";pr(k)?(this.data_=k,Ie=k.size,tt=k.type):k instanceof ArrayBuffer?(ce?this.data_=new Uint8Array(k):(this.data_=new Uint8Array(k.byteLength),this.data_.set(new Uint8Array(k))),Ie=this.data_.length):k instanceof Uint8Array&&(ce?this.data_=k:(this.data_=new Uint8Array(k.length),this.data_.set(k)),Ie=k.length),this.size_=Ie,this.type_=tt}size(){return this.size_}type(){return this.type_}slice(k,ce){if(pr(this.data_)){const tt=function ki(w,k,ce){return w.webkitSlice?w.webkitSlice(k,ce):w.mozSlice?w.mozSlice(k,ce):w.slice?w.slice(k,ce):null}(this.data_,k,ce);return null===tt?null:new Vn(tt)}{const Ie=new Uint8Array(this.data_.buffer,k,ce-k);return new Vn(Ie,!0)}}static getBlob(...k){if(xn()){const ce=k.map(Ie=>Ie instanceof Vn?Ie.data_:Ie);return new Vn(wi.apply(null,ce))}{const ce=k.map(Ut=>zr(Ut)?wr(sr.RAW,Ut).data:Ut.data_);let Ie=0;ce.forEach(Ut=>{Ie+=Ut.byteLength});const tt=new Uint8Array(Ie);let Ge=0;return ce.forEach(Ut=>{for(let Fn=0;Fn<Ut.length;Fn++)tt[Ge++]=Ut[Fn]}),new Vn(tt,!0)}}uploadData(){return this.data_}}function Qe(w){let k;try{k=JSON.parse(w)}catch{return null}return function Hr(w){return"object"==typeof w&&!Array.isArray(w)}(k)?k:null}function Vt(w){const k=w.lastIndexOf("/",w.length-2);return-1===k?w:w.slice(k+1)}function Dt(w,k){return k}class Tn{constructor(k,ce,Ie,tt){this.server=k,this.local=ce||k,this.writable=!!Ie,this.xform=tt||Dt}}let cr=null;function mi(){if(cr)return cr;const w=[];w.push(new Tn("bucket")),w.push(new Tn("generation")),w.push(new Tn("metageneration")),w.push(new Tn("name","fullPath",!0));const ce=new Tn("name");ce.xform=function k(Ge,Ut){return function Br(w){return!zr(w)||w.length<2?w:Vt(w)}(Ut)},w.push(ce);const tt=new Tn("size");return tt.xform=function Ie(Ge,Ut){return void 0!==Ut?Number(Ut):Ut},w.push(tt),w.push(new Tn("timeCreated")),w.push(new Tn("updated")),w.push(new Tn("md5Hash",null,!0)),w.push(new Tn("cacheControl",null,!0)),w.push(new Tn("contentDisposition",null,!0)),w.push(new Tn("contentEncoding",null,!0)),w.push(new Tn("contentLanguage",null,!0)),w.push(new Tn("contentType",null,!0)),w.push(new Tn("metadata","customMetadata",!0)),cr=w,cr}function de(w,k,ce){const Ie=Qe(k);return null===Ie?null:function re(w,k,ce){const Ie={type:"file"},tt=ce.length;for(let Ge=0;Ge<tt;Ge++){const Ut=ce[Ge];Ie[Ut.local]=Ut.xform(Ie,k[Ut.server])}return function pe(w,k){Object.defineProperty(w,"ref",{get:function ce(){const Ge=new Wn(w.bucket,w.fullPath);return k._makeStorageReference(Ge)}})}(Ie,w),Ie}(w,Ie,ce)}function ze(w,k){const ce={},Ie=k.length;for(let tt=0;tt<Ie;tt++){const Ge=k[tt];Ge.writable&&(ce[Ge.server]=w[Ge.local])}return JSON.stringify(ce)}const bt="prefixes";class Nr{constructor(k,ce,Ie,tt){this.url=k,this.method=ce,this.handler=Ie,this.timeout=tt,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ci(w){if(!w)throw xt()}function Yi(w,k){return function ce(Ie,tt){const Ge=de(w,tt,k);return Ci(null!==Ge),Ge}}function Lr(w){return function k(ce,Ie){let tt;return tt=401===ce.getStatus()?ce.getErrorText().includes("Firebase App Check token is invalid")?function Le(){return new gt("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function ge(){return new gt("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ce.getStatus()?function ve(w){return new gt("quota-exceeded","Quota for bucket '"+w+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(w.bucket):403===ce.getStatus()?function Oe(w){return new gt("unauthorized","User does not have permission to access '"+w+"'.")}(w.path):Ie,tt.status=ce.getStatus(),tt.serverResponse=Ie.serverResponse,tt}}function ns(w){const k=Lr(w);return function ce(Ie,tt){let Ge=k(Ie,tt);return 404===Ie.getStatus()&&(Ge=function X(w){return new gt("object-not-found","Object '"+w+"' does not exist.")}(w.path)),Ge.serverResponse=tt.serverResponse,Ge}}function rs(w,k,ce){const tt=yn(k.fullServerUrl(),w.host,w._protocol),Ut=w.maxOperationRetryTime,Fn=new Nr(tt,"GET",Yi(w,ce),Ut);return Fn.errorHandler=ns(k),Fn}function tr(w,k,ce,Ie,tt){const Ge={};Ge.prefix=k.isRoot?"":k.path+"/",ce&&ce.length>0&&(Ge.delimiter=ce),Ie&&(Ge.pageToken=Ie),tt&&(Ge.maxResults=tt);const Fn=yn(k.bucketOnlyServerUrl(),w.host,w._protocol),Un=w.maxOperationRetryTime,$r=new Nr(Fn,"GET",function Zr(w,k){return function ce(Ie,tt){const Ge=function dr(w,k,ce){const Ie=Qe(ce);return null===Ie?null:function On(w,k,ce){const Ie={prefixes:[],items:[],nextPageToken:ce.nextPageToken};if(ce[bt])for(const tt of ce[bt]){const Ge=tt.replace(/\/$/,""),Ut=w._makeStorageReference(new Wn(k,Ge));Ie.prefixes.push(Ut)}if(ce.items)for(const tt of ce.items){const Ge=w._makeStorageReference(new Wn(k,tt.name));Ie.items.push(Ge)}return Ie}(w,k,Ie)}(w,k,tt);return Ci(null!==Ge),Ge}}(w,k.bucket),Un);return $r.urlParams=Ge,$r.errorHandler=Lr(k),$r}function Dn(w,k,ce){const Ie=Object.assign({},ce);return Ie.fullPath=w.path,Ie.size=k.size(),Ie.contentType||(Ie.contentType=function ps(w,k){return w&&w.contentType||k&&k.type()||"application/octet-stream"}(null,k)),Ie}class di{constructor(k,ce,Ie,tt){this.current=k,this.total=ce,this.finalized=!!Ie,this.metadata=tt||null}}function Ds(w,k){let ce=null;try{ce=w.getResponseHeader("X-Goog-Upload-Status")}catch{Ci(!1)}return Ci(!!ce&&-1!==(k||["active"]).indexOf(ce)),ce}const bs={STATE_CHANGED:"state_changed"},$i={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cr(w){switch(w){case"running":case"pausing":case"canceling":return $i.RUNNING;case"paused":return $i.PAUSED;case"success":return $i.SUCCESS;case"canceled":return $i.CANCELED;default:return $i.ERROR}}class lo{constructor(k,ce,Ie){if(function Xn(w){return"function"==typeof w}(k)||null!=ce||null!=Ie)this.next=k,this.error=ce??void 0,this.complete=Ie??void 0;else{const Ge=k;this.next=Ge.next,this.error=Ge.error,this.complete=Ge.complete}}}function co(w){return(...k)=>{Promise.resolve().then(()=>w(...k))}}class js{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=br.NO_ERROR,this.sendPromise_=new Promise(k=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=br.ABORT,k()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=br.NETWORK_ERROR,k()}),this.xhr_.addEventListener("load",()=>{k()})})}send(k,ce,Ie,tt){if(this.sent_)throw rr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ce,k,!0),void 0!==tt)for(const Ge in tt)tt.hasOwnProperty(Ge)&&this.xhr_.setRequestHeader(Ge,tt[Ge].toString());return void 0!==Ie?this.xhr_.send(Ie):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rr("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(k){return this.xhr_.getResponseHeader(k)}addUploadProgressListener(k){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",k)}removeUploadProgressListener(k){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",k)}}class xs extends js{initXhr(){this.xhr_.responseType="text"}}function ls(){return new xs}class ot{constructor(k,ce,Ie=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=k,this._blob=ce,this._metadata=Ie,this._mappings=mi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=tt=>{if(this._request=void 0,this._chunkMultiplier=1,tt._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const Ge=this.isExponentialBackoffExpired();if(xr(tt.status,[])){if(!Ge)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();tt=qe()}this._error=tt,this._transition("error")}},this._metadataErrorHandler=tt=>{this._request=void 0,tt._codeEquals("canceled")?this.completeTransitions_():(this._error=tt,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((tt,Ge)=>{this._resolve=tt,this._reject=Ge,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const k=this._transferred;return ce=>this._updateProgress(k+ce)}_shouldDoResumable(k){return k.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(k){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ce,Ie])=>{switch(this._state){case"running":k(ce,Ie);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((k,ce)=>{const Ie=function ss(w,k,ce,Ie,tt){const Ge=k.bucketOnlyServerUrl(),Ut=Dn(k,Ie,tt),Fn={name:Ut.fullPath},qt=yn(Ge,w.host,w._protocol),$r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${Ie.size()}`,"X-Goog-Upload-Header-Content-Type":Ut.contentType,"Content-Type":"application/json; charset=utf-8"},Qi=ze(Ut,ce),Ar=new Nr(qt,"POST",function Ni(Xi){let Oi;Ds(Xi);try{Oi=Xi.getResponseHeader("X-Goog-Upload-URL")}catch{Ci(!1)}return Ci(zr(Oi)),Oi},w.maxUploadRetryTime);return Ar.urlParams=Fn,Ar.headers=$r,Ar.body=Qi,Ar.errorHandler=Lr(k),Ar}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),tt=this._ref.storage._makeRequest(Ie,ls,k,ce);this._request=tt,tt.getPromise().then(Ge=>{this._request=void 0,this._uploadUrl=Ge,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const k=this._uploadUrl;this._resolveToken((ce,Ie)=>{const tt=function Ai(w,k,ce,Ie){const qt=new Nr(ce,"POST",function Ge(Un){const $r=Ds(Un,["active","final"]);let Qi=null;try{Qi=Un.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ci(!1)}Qi||Ci(!1);const Qr=Number(Qi);return Ci(!isNaN(Qr)),new di(Qr,Ie.size(),"final"===$r)},w.maxUploadRetryTime);return qt.headers={"X-Goog-Upload-Command":"query"},qt.errorHandler=Lr(k),qt}(this._ref.storage,this._ref._location,k,this._blob),Ge=this._ref.storage._makeRequest(tt,ls,ce,Ie);this._request=Ge,Ge.getPromise().then(Ut=>{this._request=void 0,this._updateProgress(Ut.current),this._needToFetchStatus=!1,Ut.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const k=262144*this._chunkMultiplier,ce=new di(this._transferred,this._blob.size()),Ie=this._uploadUrl;this._resolveToken((tt,Ge)=>{let Ut;try{Ut=function vi(w,k,ce,Ie,tt,Ge,Ut,Fn){const qt=new di(0,0);if(Ut?(qt.current=Ut.current,qt.total=Ut.total):(qt.current=0,qt.total=Ie.size()),Ie.size()!==qt.total)throw function At(){return new gt("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Un=qt.total-qt.current;let $r=Un;tt>0&&($r=Math.min($r,tt));const Qi=qt.current;let Ni="";Ni=0===$r?"finalize":Un===$r?"upload, finalize":"upload";const Ar={"X-Goog-Upload-Command":Ni,"X-Goog-Upload-Offset":`${qt.current}`},Xi=Ie.slice(Qi,Qi+$r);if(null===Xi)throw Rt();const Vi=new Nr(ce,"POST",function Oi(Is,Zs){const Es=Ds(Is,["active","final"]),yo=qt.current+$r,Ho=Ie.size();let oa;return oa="final"===Es?Yi(k,Ge)(Is,Zs):null,new di(yo,Ho,"final"===Es,oa)},k.maxUploadRetryTime);return Vi.headers=Ar,Vi.body=Xi.uploadData(),Vi.progressCallback=Fn||null,Vi.errorHandler=Lr(w),Vi}(this._ref._location,this._ref.storage,Ie,this._blob,k,this._mappings,ce,this._makeProgressCallback())}catch(qt){return this._error=qt,void this._transition("error")}const Fn=this._ref.storage._makeRequest(Ut,ls,tt,Ge,!1);this._request=Fn,Fn.getPromise().then(qt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(qt.current),qt.finalized?(this._metadata=qt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((k,ce)=>{const Ie=rs(this._ref.storage,this._ref._location,this._mappings),tt=this._ref.storage._makeRequest(Ie,ls,k,ce);this._request=tt,tt.getPromise().then(Ge=>{this._request=void 0,this._metadata=Ge,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((k,ce)=>{const Ie=function vr(w,k,ce,Ie,tt){const Ge=k.bucketOnlyServerUrl(),Ut={"X-Goog-Upload-Protocol":"multipart"},qt=function Fn(){let Vi="";for(let Is=0;Is<2;Is++)Vi+=Math.random().toString().slice(2);return Vi}();Ut["Content-Type"]="multipart/related; boundary="+qt;const Un=Dn(k,Ie,tt),$r=ze(Un,ce),Ni=Vn.getBlob("--"+qt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$r+"\r\n--"+qt+"\r\nContent-Type: "+Un.contentType+"\r\n\r\n",Ie,"\r\n--"+qt+"--");if(null===Ni)throw Rt();const Ar={name:Un.fullPath},Xi=yn(Ge,w.host,w._protocol),Ts=w.maxUploadRetryTime,ar=new Nr(Xi,"POST",Yi(w,ce),Ts);return ar.urlParams=Ar,ar.headers=Ut,ar.body=Ni.uploadData(),ar.errorHandler=Lr(k),ar}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),tt=this._ref.storage._makeRequest(Ie,ls,k,ce);this._request=tt,tt.getPromise().then(Ge=>{this._request=void 0,this._metadata=Ge,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(k){const ce=this._transferred;this._transferred=k,this._transferred!==ce&&this._notifyObservers()}_transition(k){if(this._state!==k)switch(k){case"canceling":case"pausing":this._state=k,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const ce="paused"===this._state;this._state=k,ce&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=k,this._notifyObservers();break;case"canceled":this._error=dt(),this._state=k,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const k=Cr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:k,metadata:this._metadata,task:this,ref:this._ref}}on(k,ce,Ie,tt){const Ge=new lo(ce||void 0,Ie||void 0,tt||void 0);return this._addObserver(Ge),()=>{this._removeObserver(Ge)}}then(k,ce){return this._promise.then(k,ce)}catch(k){return this.then(null,k)}_addObserver(k){this._observers.push(k),this._notifyObserver(k)}_removeObserver(k){const ce=this._observers.indexOf(k);-1!==ce&&this._observers.splice(ce,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ce=>{this._notifyObserver(ce)})}_finishPromise(){if(void 0!==this._resolve){let k=!0;switch(Cr(this._state)){case $i.SUCCESS:co(this._resolve.bind(null,this.snapshot))();break;case $i.CANCELED:case $i.ERROR:co(this._reject.bind(null,this._error))();break;default:k=!1}k&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(k){switch(Cr(this._state)){case $i.RUNNING:case $i.PAUSED:k.next&&co(k.next.bind(k,this.snapshot))();break;case $i.SUCCESS:k.complete&&co(k.complete.bind(k))();break;default:k.error&&co(k.error.bind(k,this._error))()}}resume(){const k="paused"===this._state||"pausing"===this._state;return k&&this._transition("running"),k}pause(){const k="running"===this._state;return k&&this._transition("pausing"),k}cancel(){const k="running"===this._state||"pausing"===this._state;return k&&this._transition("canceling"),k}}class lt{constructor(k,ce){this._service=k,this._location=ce instanceof Wn?ce:Wn.makeFromUrl(ce,k.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(k,ce){return new lt(k,ce)}get root(){const k=new Wn(this._location.bucket,"");return this._newRef(this._service,k)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vt(this._location.path)}get storage(){return this._service}get parent(){const k=function Ye(w){if(0===w.length)return null;const k=w.lastIndexOf("/");return-1===k?"":w.slice(0,k)}(this._location.path);if(null===k)return null;const ce=new Wn(this._location.bucket,k);return new lt(this._service,ce)}_throwIfRoot(k){if(""===this._location.path)throw hn(k)}}function oi(w,k,ce){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,rt.Z)(function*(w,k,ce){const tt=yield gs(w,{pageToken:ce});k.prefixes.push(...tt.prefixes),k.items.push(...tt.items),null!=tt.nextPageToken&&(yield oi(w,k,tt.nextPageToken))})).apply(this,arguments)}function gs(w,k){null!=k&&"number"==typeof k.maxResults&&mr("options.maxResults",1,1e3,k.maxResults);const ce=k||{},Ie=tr(w.storage,w._location,"/",ce.pageToken,ce.maxResults);return w.storage.makeRequestWithTokens(Ie,ls)}function gu(w){w._throwIfRoot("getDownloadURL");const k=function Rr(w,k,ce){const tt=yn(k.fullServerUrl(),w.host,w._protocol),Ut=w.maxOperationRetryTime,Fn=new Nr(tt,"GET",function fs(w,k){return function ce(Ie,tt){const Ge=de(w,tt,k);return Ci(null!==Ge),function me(w,k,ce,Ie){const tt=Qe(k);if(null===tt||!zr(tt.downloadTokens))return null;const Ge=tt.downloadTokens;if(0===Ge.length)return null;const Ut=encodeURIComponent;return Ge.split(",").map(Un=>{const Qi=w.fullPath;return yn("/b/"+Ut(w.bucket)+"/o/"+Ut(Qi),ce,Ie)+xi({alt:"media",token:Un})})[0]}(Ge,tt,w.host,w._protocol)}}(w,ce),Ut);return Fn.errorHandler=ns(k),Fn}(w.storage,w._location,mi());return w.storage.makeRequestWithTokens(k,ls).then(ce=>{if(null===ce)throw function Yt(){return new gt("no-download-url","The given file does not have any download URLs.")}();return ce})}function Yo(w,k){const ce=function at(w,k){const ce=k.split("/").filter(Ie=>Ie.length>0).join("/");return 0===w.length?ce:w+"/"+ce}(w._location.path,k),Ie=new Wn(w._location.bucket,ce);return new lt(w.storage,Ie)}function Xs(w,k){if(w instanceof Oa){const ce=w;if(null==ce._bucket)throw function Mt(){return new gt("no-default-bucket","No default bucket found. Did you set the '"+st+"' property when initializing the app?")}();const Ie=new lt(ce,ce._bucket);return null!=k?Xs(Ie,k):Ie}return void 0!==k?Yo(w,k):w}function Fo(w,k){if(k&&function ra(w){return/^[A-Za-z]+:\/\//.test(w)}(k)){if(w instanceof Oa)return function Lo(w,k){return new lt(w,k)}(w,k);throw ln("To use ref(service, url), the first argument must be a Storage instance.")}return Xs(w,k)}function Ma(w,k){const ce=k?.[st];return null==ce?null:Wn.makeFromBucketSpec(ce,w)}class Oa{constructor(k,ce,Ie,tt,Ge){this.app=k,this._authProvider=ce,this._appCheckProvider=Ie,this._url=tt,this._firebaseVersion=Ge,this._bucket=null,this._host=ut,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=tt?Wn.makeFromBucketSpec(tt,this._host):Ma(this._host,this.app.options)}get host(){return this._host}set host(k){this._host=k,this._bucket=null!=this._url?Wn.makeFromBucketSpec(this._url,k):Ma(k,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(k){mr("time",0,Number.POSITIVE_INFINITY,k),this._maxUploadRetryTime=k}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(k){mr("time",0,Number.POSITIVE_INFINITY,k),this._maxOperationRetryTime=k}_getAuthToken(){var k=this;return(0,rt.Z)(function*(){if(k._overrideAuthToken)return k._overrideAuthToken;const ce=k._authProvider.getImmediate({optional:!0});if(ce){const Ie=yield ce.getToken();if(null!==Ie)return Ie.accessToken}return null})()}_getAppCheckToken(){var k=this;return(0,rt.Z)(function*(){const ce=k._appCheckProvider.getImmediate({optional:!0});return ce?(yield ce.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(k=>k.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(k){return new lt(this,k)}_makeRequest(k,ce,Ie,tt,Ge=!0){if(this._deleted)return new Er(Zt());{const Ut=function qr(w,k,ce,Ie,tt,Ge,Ut=!0){const Fn=xi(w.urlParams),qt=w.url+Fn,Un=Object.assign({},w.headers);return function Jn(w,k){k&&(w["X-Firebase-GMPID"]=k)}(Un,k),function ur(w,k){null!==k&&k.length>0&&(w.Authorization="Firebase "+k)}(Un,ce),function zn(w,k){w["X-Firebase-Storage-Version"]="webjs/"+(k??"AppManager")}(Un,Ge),function ui(w,k){null!==k&&(w["X-Firebase-AppCheck"]=k)}(Un,Ie),new gi(qt,w.method,Un,w.body,w.successCodes,w.additionalRetryCodes,w.handler,w.errorHandler,w.timeout,w.progressCallback,tt,Ut)}(k,this._appId,Ie,tt,ce,this._firebaseVersion,Ge);return this._requests.add(Ut),Ut.getPromise().then(()=>this._requests.delete(Ut),()=>this._requests.delete(Ut)),Ut}}makeRequestWithTokens(k,ce){var Ie=this;return(0,rt.Z)(function*(){const[tt,Ge]=yield Promise.all([Ie._getAuthToken(),Ie._getAppCheckToken()]);return Ie._makeRequest(k,ce,tt,Ge).getPromise()})()}}const qa="@firebase/storage";function Js(w,k){return Fo(w=(0,St.m9)(w),k)}function fi(w,{instanceIdentifier:k}){const ce=w.getProvider("app").getImmediate(),Ie=w.getProvider("auth-internal"),tt=w.getProvider("app-check-internal");return new Oa(ce,Ie,tt,k,_t.SDK_VERSION)}!function _a(){(0,_t._registerComponent)(new Fe.wA("storage",fi,"PUBLIC").setMultipleInstances(!0)),(0,_t.registerVersion)(qa,"0.10.1",""),(0,_t.registerVersion)(qa,"0.10.1","esm2017")}();class ba{constructor(k,ce,Ie){this._delegate=k,this.task=ce,this.ref=Ie}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Bo{constructor(k,ce){this._delegate=k,this._ref=ce,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ba(this._delegate.snapshot,this,this._ref)}then(k,ce){return this._delegate.then(Ie=>{if(k)return k(new ba(Ie,this,this._ref))},ce)}on(k,ce,Ie,tt){let Ge;return ce&&(Ge="function"==typeof ce?Ut=>ce(new ba(Ut,this,this._ref)):{next:ce.next?Ut=>ce.next(new ba(Ut,this,this._ref)):void 0,complete:ce.complete||void 0,error:ce.error||void 0}),this._delegate.on(k,Ge,Ie||void 0,tt||void 0)}}class qs{constructor(k,ce){this._delegate=k,this._service=ce}get prefixes(){return this._delegate.prefixes.map(k=>new zi(k,this._service))}get items(){return this._delegate.items.map(k=>new zi(k,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class zi{constructor(k,ce){this._delegate=k,this.storage=ce}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(k){const ce=function Xo(w,k){return Yo(w,k)}(this._delegate,k);return new zi(ce,this.storage)}get root(){return new zi(this._delegate.root,this.storage)}get parent(){const k=this._delegate.parent;return null==k?null:new zi(k,this.storage)}put(k,ce){return this._throwIfRoot("put"),new Bo(function ia(w,k,ce){return function Kn(w,k,ce){return w._throwIfRoot("uploadBytesResumable"),new ot(w,new Vn(k),ce)}(w=(0,St.m9)(w),k,ce)}(this._delegate,k,ce),this)}putString(k,ce=sr.RAW,Ie){this._throwIfRoot("putString");const tt=wr(ce,k),Ge=Object.assign({},Ie);return null==Ge.contentType&&null!=tt.contentType&&(Ge.contentType=tt.contentType),new Bo(new ot(this._delegate,new Vn(tt.data,!0),Ge),this)}listAll(){return function sa(w){return function Pr(w){const k={prefixes:[],items:[]};return oi(w,k).then(()=>k)}(w=(0,St.m9)(w))}(this._delegate).then(k=>new qs(k,this.storage))}list(k){return function Wa(w,k){return gs(w=(0,St.m9)(w),k)}(this._delegate,k||void 0).then(ce=>new qs(ce,this.storage))}getMetadata(){return function Uo(w){return function Bi(w){w._throwIfRoot("getMetadata");const k=rs(w.storage,w._location,mi());return w.storage.makeRequestWithTokens(k,ls)}(w=(0,St.m9)(w))}(this._delegate)}updateMetadata(k){return function ms(w,k){return function Vr(w,k){w._throwIfRoot("updateMetadata");const ce=function Mi(w,k,ce,Ie){const Ge=yn(k.fullServerUrl(),w.host,w._protocol),Fn=ze(ce,Ie),Un=w.maxOperationRetryTime,$r=new Nr(Ge,"PATCH",Yi(w,Ie),Un);return $r.headers={"Content-Type":"application/json; charset=utf-8"},$r.body=Fn,$r.errorHandler=ns(k),$r}(w.storage,w._location,k,mi());return w.storage.makeRequestWithTokens(ce,ls)}(w=(0,St.m9)(w),k)}(this._delegate,k)}getDownloadURL(){return function Qo(w){return gu(w=(0,St.m9)(w))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Yr(w){return function As(w){w._throwIfRoot("deleteObject");const k=function is(w,k){const Ie=yn(k.fullServerUrl(),w.host,w._protocol),Fn=new Nr(Ie,"DELETE",function Ut(qt,Un){},w.maxOperationRetryTime);return Fn.successCodes=[200,204],Fn.errorHandler=ns(k),Fn}(w.storage,w._location);return w.storage.makeRequestWithTokens(k,ls)}(w=(0,St.m9)(w))}(this._delegate)}_throwIfRoot(k){if(""===this._delegate._location.path)throw hn(k)}}class _i{constructor(k,ce){this.app=k,this._delegate=ce}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(k){if(eo(k))throw ln("ref() expected a child path but got a URL, use refFromURL instead.");return new zi(Js(this._delegate,k),this)}refFromURL(k){if(!eo(k))throw ln("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wn.makeFromUrl(k,this._delegate.host)}catch{throw ln("refFromUrl() expected a valid full URL but got an invalid one.")}return new zi(Js(this._delegate,k),this)}setMaxUploadRetryTime(k){this._delegate.maxUploadRetryTime=k}setMaxOperationRetryTime(k){this._delegate.maxOperationRetryTime=k}useEmulator(k,ce,Ie={}){!function fo(w,k,ce,Ie={}){!function ya(w,k,ce,Ie={}){w.host=`${k}:${ce}`,w._protocol="http";const{mockUserToken:tt}=Ie;tt&&(w._overrideAuthToken="string"==typeof tt?tt:(0,St.Sg)(tt,w.app.options.projectId))}(w,k,ce,Ie)}(this._delegate,k,ce,Ie)}}function eo(w){return/^[A-Za-z]+:\/\//.test(w)}function vs(w,{instanceIdentifier:k}){const ce=w.getProvider("app-compat").getImmediate(),Ie=w.getProvider("storage").getImmediate({identifier:k});return new _i(ce,Ie)}!function Ws(w){const k={TaskState:$i,TaskEvent:bs,StringFormat:sr,Storage:_i,Reference:zi};w.INTERNAL.registerComponent(new Fe.wA("storage-compat",vs,"PUBLIC").setServiceProps(k).setMultipleInstances(!0)),w.registerVersion("@firebase/storage-compat","0.2.1")}($e.Z);var Rs=W(6217),Ks=W(9260);function ea(w){const k=function Ns(w){return new E.y(k=>{const ce=Ut=>k.next(Ut);ce(w.snapshot);const Ge=w.on("state_changed",ce);return w.then(Ut=>{ce(Ut),k.complete()},Ut=>{ce(w.snapshot),(Ut=>{k.error(Ut)})(Ut)}),function(){Ge()}}).pipe(function ae(w,k=F.z){return(0,Ne.e)((ce,Ie)=>{let tt=null,Ge=null,Ut=null;const Fn=()=>{if(tt){tt.unsubscribe(),tt=null;const Un=Ge;Ge=null,Ie.next(Un)}};function qt(){const Un=Ut+w,$r=k.now();if($r<Un)return tt=this.schedule(void 0,Un-$r),void Ie.add(tt);Fn()}ce.subscribe((0,Be.x)(Ie,Un=>{Ge=Un,Ut=k.now(),tt||(tt=k.schedule(qt,w),Ie.add(tt))},()=>{Fn(),Ie.complete()},void 0,()=>{Ge=tt=null}))})}(0))}(w);return{task:w,then:w.then.bind(w),catch:w.catch.bind(w),pause:w.pause.bind(w),cancel:w.cancel.bind(w),resume:w.resume.bind(w),snapshotChanges:()=>k,percentageChanges:()=>k.pipe((0,He.U)(ce=>ce.bytesTransferred/ce.totalBytes*100))}}function po(w){return{getDownloadURL:()=>(0,ie.of)(void 0).pipe(De.fc,(0,Ae.w)(()=>w.getDownloadURL()),De.iC),getMetadata:()=>(0,ie.of)(void 0).pipe(De.fc,(0,Ae.w)(()=>w.getMetadata()),De.iC),delete:()=>(0,ne.D)(w.delete()),child:k=>po(w.child(k)),updateMetadata:k=>(0,ne.D)(w.updateMetadata(k)),put:(k,ce)=>ea(w.put(k,ce)),putString:(k,ce,Ie)=>ea(w.putString(k,ce,Ie)),list:k=>(0,ne.D)(w.list(k)),listAll:()=>(0,ne.D)(w.listAll())}}const go=new Ee.OlP("angularfire2.storageBucket"),mo=new Ee.OlP("angularfire2.storage.maxUploadRetryTime"),ro=new Ee.OlP("angularfire2.storage.maxOperationRetryTime"),vo=new Ee.OlP("angularfire2.storage.use-emulator");let Sr=(()=>{class w{constructor(ce,Ie,tt,Ge,Ut,Fn,qt,Un,$r,Qi){const Qr=(0,Me.on)(ce,Ut,Ie);this.storage=(0,Me.cc)(`${Qr.name}.storage.${tt}`,"AngularFireStorage",Qr.name,()=>{const Ni=Ut.runOutsideAngular(()=>Qr.storage(tt||void 0)),Ar=$r;return Ar&&Ni.useEmulator(...Ar),qt&&Ni.setMaxUploadRetryTime(qt),Un&&Ni.setMaxOperationRetryTime(Un),Ni},[qt,Un])}ref(ce){return po(this.storage.ref(ce))}refFromURL(ce){return po(this.storage.refFromURL(ce))}upload(ce,Ie,tt){return po(this.storage.ref(ce)).put(Ie,tt)}}return w.\u0275fac=function(ce){return new(ce||w)(Ee.LFG(Me.Dh),Ee.LFG(Me.xv,8),Ee.LFG(go,8),Ee.LFG(Ee.Lbi),Ee.LFG(Ee.R0b),Ee.LFG(De.HU),Ee.LFG(mo,8),Ee.LFG(ro,8),Ee.LFG(vo,8),Ee.LFG(Rs.nm,8))},w.\u0275prov=Ee.Yz7({token:w,factory:w.\u0275fac,providedIn:"any"}),w})(),te=(()=>{class w{}return w.\u0275fac=function(ce){return new(ce||w)},w.\u0275mod=Ee.oAB({type:w}),w.\u0275inj=Ee.cJS({}),w})(),K=(()=>{class w{constructor(){Ks.Z.registerVersion("angularfire",De.q4.full,"gcs-compat")}}return w.\u0275fac=function(ce){return new(ce||w)},w.\u0275mod=Ee.oAB({type:w}),w.\u0275inj=Ee.cJS({providers:[Sr],imports:[te]}),w})()},2011:(Wt,et,W)=>{"use strict";W.d(et,{Dh:()=>He,GT:()=>Be,cc:()=>rt,hO:()=>$e,on:()=>De,pX:()=>Ne,xv:()=>Ae});var E=W(4650),ie=W(9260),ne=W(2122);Wt=W.hmd(Wt);const F=["ngOnDestroy"],Ne=(ut,st,Et,Ve={})=>new Proxy(ut,{get:(Xe,gt)=>Et.runOutsideAngular(()=>{var kt;if(ut[gt])return!(null===(kt=Ve?.spy)||void 0===kt)&&kt.get&&Ve.spy.get(gt,ut[gt]),ut[gt];if(F.indexOf(gt)>-1)return()=>{};const xt=st.toPromise().then(X=>{const ve=X&&X[gt];return"function"==typeof ve?ve.bind(X):ve&&ve.then?ve.then(ge=>Et.run(()=>ge)):Et.run(()=>ve)});return new Proxy(()=>{},{get:(X,ve)=>xt[ve],apply:(X,ve,ge)=>xt.then(Le=>{var Oe;const qe=Le&&Le(...ge);return!(null===(Oe=Ve?.spy)||void 0===Oe)&&Oe.apply&&Ve.spy.apply(gt,ge,qe),qe})})})}),Be=(ut,st)=>{st.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(Ve=>{Object.defineProperty(ut.prototype,Ve,Object.getOwnPropertyDescriptor(Et.prototype||Et,Ve))})})};class ae{constructor(st){return st}}const He=new E.OlP("angularfire2.app.options"),Ae=new E.OlP("angularfire2.app.name");function De(ut,st,Et){const Xe="object"==typeof Et&&Et||{};Xe.name=Xe.name||"string"==typeof Et&&Et||"[DEFAULT]";const kt=ie.Z.apps.filter(xt=>xt&&xt.name===Xe.name)[0]||st.runOutsideAngular(()=>ie.Z.initializeApp(ut,Xe));try{JSON.stringify(ut)!==JSON.stringify(kt.options)&&Ee("error",`${kt.name} Firebase App already initialized with different options${Wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ae(kt)}const Ee=(ut,...st)=>{(0,E.X6Q)()&&typeof console<"u"&&console[ut](...st)},Me={provide:ae,useFactory:De,deps:[He,E.R0b,[new E.FiY,Ae]]};let $e=(()=>{class ut{constructor(Et){ie.Z.registerVersion("angularfire",ne.q4.full,"core"),ie.Z.registerVersion("angularfire",ne.q4.full,"app-compat"),ie.Z.registerVersion("angular",E.q4F.full,Et.toString())}static initializeApp(Et,Ve){return{ngModule:ut,providers:[{provide:He,useValue:Et},{provide:Ae,useValue:Ve}]}}}return ut.\u0275fac=function(Et){return new(Et||ut)(E.LFG(E.Lbi))},ut.\u0275mod=E.oAB({type:ut}),ut.\u0275inj=E.cJS({providers:[Me]}),ut})();function rt(ut,st,Et,Ve,Xe){const[,gt,kt]=globalThis.\u0275AngularfireInstanceCache.find(xt=>xt[0]===ut)||[];if(gt)return function _t(ut,st){try{return ut.toString()===st.toString()}catch{return ut===st}}(Xe,kt)||(Fe("error",`${st} was already initialized on the ${Et} Firebase App with different settings.${St?" You may need to reload as Firebase is not HMR aware.":""}`),Fe("warn",{is:Xe,was:kt})),gt;{const xt=Ve();return globalThis.\u0275AngularfireInstanceCache.push([ut,xt,Xe]),xt}}const St=!!Wt.hot,Fe=(ut,...st)=>{(0,E.X6Q)()&&typeof console<"u"&&console[ut](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Wt,et,W)=>{"use strict";W.d(et,{q4:()=>B,iC:()=>Ll,fc:()=>Qd,HU:()=>vu,vb:()=>Mo,JM:()=>Wi});var E=W(4650),ie=W(259),ne=W(5861),F=W(9681),Ne=W(2090),Be=W(4859),ae=W(1877),He=W(8766);const Ae="@firebase/installations",Me="w:0.6.1",$e="FIS_v2",st=new Ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Et(q){return q instanceof Ne.ZR&&q.code.includes("request-failed")}function Ve({projectId:q}){return`https://firebaseinstallations.googleapis.com/v1/projects/${q}/installations`}function Xe(q){return{token:q.token,requestStatus:2,expiresIn:Le(q.expiresIn),creationTime:Date.now()}}function gt(q,Q){return kt.apply(this,arguments)}function kt(){return(kt=(0,ne.Z)(function*(q,Q){const Ke=(yield Q.json()).error;return st.create("request-failed",{requestName:q,serverCode:Ke.code,serverMessage:Ke.message,serverStatus:Ke.status})})).apply(this,arguments)}function xt({apiKey:q}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q})}function X(q,{refreshToken:Q}){const be=xt(q);return be.append("Authorization",function Oe(q){return`${$e} ${q}`}(Q)),be}function ve(q){return ge.apply(this,arguments)}function ge(){return(ge=(0,ne.Z)(function*(q){const Q=yield q();return Q.status>=500&&Q.status<600?q():Q})).apply(this,arguments)}function Le(q){return Number(q.replace("s","000"))}function qe(q,Q){return dt.apply(this,arguments)}function dt(){return(dt=(0,ne.Z)(function*({appConfig:q,heartbeatServiceProvider:Q},{fid:be}){const Ke=Ve(q),Tt=xt(q),Lt=Q.getImmediate({optional:!0});if(Lt){const nr=yield Lt.getHeartbeatsHeader();nr&&Tt.append("x-firebase-client",nr)}const Zn={method:"POST",headers:Tt,body:JSON.stringify({fid:be,authVersion:$e,appId:q.appId,sdkVersion:Me})},fr=yield ve(()=>fetch(Ke,Zn));if(fr.ok){const nr=yield fr.json();return{fid:nr.fid||be,registrationStatus:2,refreshToken:nr.refreshToken,authToken:Xe(nr.authToken)}}throw yield gt("Create Installation",fr)})).apply(this,arguments)}function wt(q){return new Promise(Q=>{setTimeout(Q,q)})}const Mt=/^[cdef][\w-]{21}$/;function At(){try{const q=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(q),q[0]=112+q[0]%16;const be=function Yt(q){return function vt(q){return btoa(String.fromCharCode(...q)).replace(/\+/g,"-").replace(/\//g,"_")}(q).substr(0,22)}(q);return Mt.test(be)?be:""}catch{return""}}function $t(q){return`${q.appName}!${q.appId}`}const ln=new Map;function Zt(q,Q){const be=$t(q);rr(be,Q),function Wn(q,Q){const be=function _r(){return!Er&&"BroadcastChannel"in self&&(Er=new BroadcastChannel("[Firebase] FID Change"),Er.onmessage=q=>{rr(q.data.key,q.data.fid)}),Er}();be&&be.postMessage({key:q,fid:Q}),function yi(){0===ln.size&&Er&&(Er.close(),Er=null)}()}(be,Q)}function rr(q,Q){const be=ln.get(q);if(be)for(const Ke of be)Ke(Q)}let Er=null;const Hr="firebase-installations-store";let zr=null;function pr(){return zr||(zr=(0,He.X3)("firebase-installations-database",1,{upgrade:(q,Q)=>{0===Q&&q.createObjectStore(Hr)}})),zr}function xn(q,Q){return mr.apply(this,arguments)}function mr(){return(mr=(0,ne.Z)(function*(q,Q){const be=$t(q),Tt=(yield pr()).transaction(Hr,"readwrite"),Lt=Tt.objectStore(Hr),fn=yield Lt.get(be);return yield Lt.put(Q,be),yield Tt.done,(!fn||fn.fid!==Q.fid)&&Zt(q,Q.fid),Q})).apply(this,arguments)}function yn(q){return xi.apply(this,arguments)}function xi(){return(xi=(0,ne.Z)(function*(q){const Q=$t(q),Ke=(yield pr()).transaction(Hr,"readwrite");yield Ke.objectStore(Hr).delete(Q),yield Ke.done})).apply(this,arguments)}function br(q,Q){return xr.apply(this,arguments)}function xr(){return(xr=(0,ne.Z)(function*(q,Q){const be=$t(q),Tt=(yield pr()).transaction(Hr,"readwrite"),Lt=Tt.objectStore(Hr),fn=yield Lt.get(be),Zn=Q(fn);return void 0===Zn?yield Lt.delete(be):yield Lt.put(Zn,be),yield Tt.done,Zn&&(!fn||fn.fid!==Zn.fid)&&Zt(q,Zn.fid),Zn})).apply(this,arguments)}function gi(q){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,ne.Z)(function*(q){let Q;const be=yield br(q.appConfig,Ke=>{const Tt=ur(Ke),Lt=zn(q,Tt);return Q=Lt.registrationPromise,Lt.installationEntry});return""===be.fid?{installationEntry:yield Q}:{installationEntry:be,registrationPromise:Q}})).apply(this,arguments)}function ur(q){return ki(q||{fid:At(),registrationStatus:0})}function zn(q,Q){if(0===Q.registrationStatus){if(!navigator.onLine)return{installationEntry:Q,registrationPromise:Promise.reject(st.create("app-offline"))};const be={fid:Q.fid,registrationStatus:1,registrationTime:Date.now()},Ke=function Jn(q,Q){return ui.apply(this,arguments)}(q,be);return{installationEntry:be,registrationPromise:Ke}}return 1===Q.registrationStatus?{installationEntry:Q,registrationPromise:qr(q)}:{installationEntry:Q}}function ui(){return(ui=(0,ne.Z)(function*(q,Q){try{const be=yield qe(q,Q);return xn(q.appConfig,be)}catch(be){throw Et(be)&&409===be.customData.serverCode?yield yn(q.appConfig):yield xn(q.appConfig,{fid:Q.fid,registrationStatus:0}),be}})).apply(this,arguments)}function qr(q){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,ne.Z)(function*(q){let Q=yield wi(q.appConfig);for(;1===Q.registrationStatus;)yield wt(100),Q=yield wi(q.appConfig);if(0===Q.registrationStatus){const{installationEntry:be,registrationPromise:Ke}=yield gi(q);return Ke||be}return Q})).apply(this,arguments)}function wi(q){return br(q,Q=>{if(!Q)throw st.create("installation-not-found");return ki(Q)})}function ki(q){return function Ri(q){return 1===q.registrationStatus&&q.registrationTime+1e4<Date.now()}(q)?{fid:q.fid,registrationStatus:0}:q}function sr(q,Q){return li.apply(this,arguments)}function li(){return(li=(0,ne.Z)(function*({appConfig:q,heartbeatServiceProvider:Q},be){const Ke=wr(q,be),Tt=X(q,be),Lt=Q.getImmediate({optional:!0});if(Lt){const nr=yield Lt.getHeartbeatsHeader();nr&&Tt.append("x-firebase-client",nr)}const Zn={method:"POST",headers:Tt,body:JSON.stringify({installation:{sdkVersion:Me,appId:q.appId}})},fr=yield ve(()=>fetch(Ke,Zn));if(fr.ok)return Xe(yield fr.json());throw yield gt("Generate Auth Token",fr)})).apply(this,arguments)}function wr(q,{fid:Q}){return`${Ve(q)}/${Q}/authTokens:generate`}function si(q){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,ne.Z)(function*(q,Q=!1){let be;const Ke=yield br(q.appConfig,Lt=>{if(!Vn(Lt))throw st.create("not-registered");const fn=Lt.authToken;if(!Q&&Qe(fn))return Lt;if(1===fn.requestStatus)return be=dn(q,Q),Lt;{if(!navigator.onLine)throw st.create("app-offline");const Zn=at(Lt);return be=er(q,Zn),Zn}});return be?yield be:Ke.authToken})).apply(this,arguments)}function dn(q,Q){return zt.apply(this,arguments)}function zt(){return(zt=(0,ne.Z)(function*(q,Q){let be=yield Cn(q.appConfig);for(;1===be.authToken.requestStatus;)yield wt(100),be=yield Cn(q.appConfig);const Ke=be.authToken;return 0===Ke.requestStatus?si(q,Q):Ke})).apply(this,arguments)}function Cn(q){return br(q,Q=>{if(!Vn(Q))throw st.create("not-registered");return function Vt(q){return 1===q.requestStatus&&q.requestTime+1e4<Date.now()}(Q.authToken)?Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}}):Q})}function er(q,Q){return $n.apply(this,arguments)}function $n(){return($n=(0,ne.Z)(function*(q,Q){try{const be=yield sr(q,Q),Ke=Object.assign(Object.assign({},Q),{authToken:be});return yield xn(q.appConfig,Ke),be}catch(be){if(!Et(be)||401!==be.customData.serverCode&&404!==be.customData.serverCode){const Ke=Object.assign(Object.assign({},Q),{authToken:{requestStatus:0}});yield xn(q.appConfig,Ke)}else yield yn(q.appConfig);throw be}})).apply(this,arguments)}function Vn(q){return void 0!==q&&2===q.registrationStatus}function Qe(q){return 2===q.requestStatus&&!function Ye(q){const Q=Date.now();return Q<q.creationTime||q.creationTime+q.expiresIn<Q+36e5}(q)}function at(q){const Q={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},q),{authToken:Q})}function Tn(){return(Tn=(0,ne.Z)(function*(q){const Q=q,{installationEntry:be,registrationPromise:Ke}=yield gi(Q);return Ke?Ke.catch(console.error):si(Q).catch(console.error),be.fid})).apply(this,arguments)}function Br(){return(Br=(0,ne.Z)(function*(q,Q=!1){const be=q;return yield mi(be),(yield si(be,Q)).token})).apply(this,arguments)}function mi(q){return pe.apply(this,arguments)}function pe(){return(pe=(0,ne.Z)(function*(q){const{registrationPromise:Q}=yield gi(q);Q&&(yield Q)})).apply(this,arguments)}function Nr(q){return st.create("missing-app-config-values",{valueName:q})}const Ci="installations",Zr=q=>{const Q=q.getProvider("app").getImmediate(),be=function dr(q){if(!q||!q.options)throw Nr("App Configuration");if(!q.name)throw Nr("App Name");const Q=["projectId","apiKey","appId"];for(const be of Q)if(!q.options[be])throw Nr(be);return{appName:q.name,projectId:q.options.projectId,apiKey:q.options.apiKey,appId:q.options.appId}}(Q);return{app:Q,appConfig:be,heartbeatServiceProvider:(0,F._getProvider)(Q,"heartbeat"),_delete:()=>Promise.resolve()}},fs=q=>{const Q=q.getProvider("app").getImmediate(),be=(0,F._getProvider)(Q,Ci).getImmediate();return{getId:()=>function Dt(q){return Tn.apply(this,arguments)}(be),getToken:Tt=>function cr(q){return Br.apply(this,arguments)}(be,Tt)}};(function Lr(){(0,F._registerComponent)(new Be.wA(Ci,Zr,"PUBLIC")),(0,F._registerComponent)(new Be.wA("installations-internal",fs,"PRIVATE"))})(),(0,F.registerVersion)(Ae,"0.6.1"),(0,F.registerVersion)(Ae,"0.6.1","esm2017");const ns="@firebase/remote-config",Mi=new Ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Do{constructor(Q,be,Ke,Tt){this.client=Q,this.storage=be,this.storageCache=Ke,this.logger=Tt}isCachedDataFresh(Q,be){if(!be)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ke=Date.now()-be,Tt=Ke<=Q;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ke}. Cache max age millis (minimumFetchIntervalMillis setting): ${Q}. Is cache hit: ${Tt}.`),Tt}fetch(Q){var be=this;return(0,ne.Z)(function*(){const[Ke,Tt]=yield Promise.all([be.storage.getLastSuccessfulFetchTimestampMillis(),be.storage.getLastSuccessfulFetchResponse()]);if(Tt&&be.isCachedDataFresh(Q.cacheMaxAgeMillis,Ke))return Tt;Q.eTag=Tt&&Tt.eTag;const Lt=yield be.client.fetch(Q),fn=[be.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Lt.status&&fn.push(be.storage.setLastSuccessfulFetchResponse(Lt)),yield Promise.all(fn),Lt})()}}function Os(q=navigator){return q.languages&&q.languages[0]||q.language}class xo{constructor(Q,be,Ke,Tt,Lt,fn){this.firebaseInstallations=Q,this.sdkVersion=be,this.namespace=Ke,this.projectId=Tt,this.apiKey=Lt,this.appId=fn}fetch(Q){var be=this;return(0,ne.Z)(function*(){const[Ke,Tt]=yield Promise.all([be.firebaseInstallations.getId(),be.firebaseInstallations.getToken()]),fn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${be.projectId}/namespaces/${be.namespace}:fetch?key=${be.apiKey}`,Zn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Q.eTag||"*"},fr={sdk_version:be.sdkVersion,app_instance_id:Ke,app_instance_id_token:Tt,app_id:be.appId,language_code:Os()},nr={method:"POST",headers:Zn,body:JSON.stringify(fr)},ti=fetch(fn,nr),Wr=new Promise((Ss,ku)=>{Q.signal.addEventListener(()=>{const ji=new Error("The operation was aborted.");ji.name="AbortError",ku(ji)})});let Sa;try{yield Promise.race([ti,Wr]),Sa=yield ti}catch(Ss){let ku="fetch-client-network";throw"AbortError"===Ss?.name&&(ku="fetch-timeout"),Mi.create(ku,{originalErrorMessage:Ss?.message})}let Or=Sa.status;const Ti=Sa.headers.get("ETag")||void 0;let Oo,Xa;if(200===Sa.status){let Ss;try{Ss=yield Sa.json()}catch(ku){throw Mi.create("fetch-client-parse",{originalErrorMessage:ku?.message})}Oo=Ss.entries,Xa=Ss.state}if("INSTANCE_STATE_UNSPECIFIED"===Xa?Or=500:"NO_CHANGE"===Xa?Or=304:("NO_TEMPLATE"===Xa||"EMPTY_CONFIG"===Xa)&&(Oo={}),304!==Or&&200!==Or)throw Mi.create("fetch-status",{httpStatus:Or});return{status:Or,eTag:Ti,config:Oo}})()}}class lt{constructor(Q,be){this.client=Q,this.storage=be}fetch(Q){var be=this;return(0,ne.Z)(function*(){const Ke=(yield be.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return be.attemptFetch(Q,Ke)})()}attemptFetch(Q,{throttleEndTimeMillis:be,backoffCount:Ke}){var Tt=this;return(0,ne.Z)(function*(){yield function vn(q,Q){return new Promise((be,Ke)=>{const Tt=Math.max(Q-Date.now(),0),Lt=setTimeout(be,Tt);q.addEventListener(()=>{clearTimeout(Lt),Ke(Mi.create("fetch-throttle",{throttleEndTimeMillis:Q}))})})}(Q.signal,be);try{const Lt=yield Tt.client.fetch(Q);return yield Tt.storage.deleteThrottleMetadata(),Lt}catch(Lt){if(!function ot(q){if(!(q instanceof Ne.ZR&&q.customData))return!1;const Q=Number(q.customData.httpStatus);return 429===Q||500===Q||503===Q||504===Q}(Lt))throw Lt;const fn={throttleEndTimeMillis:Date.now()+(0,Ne.$s)(Ke),backoffCount:Ke+1};return yield Tt.storage.setThrottleMetadata(fn),Tt.attemptFetch(Q,fn)}})()}}class pn{constructor(Q,be,Ke,Tt,Lt){this.app=Q,this._client=be,this._storageCache=Ke,this._storage=Tt,this._logger=Lt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Kn(q,Q){const be=q.target.error||void 0;return Mi.create(Q,{originalErrorMessage:be&&be?.message})}const ir="app_namespace_store";class gs{constructor(Q,be,Ke,Tt=function Ui(){return new Promise((q,Q)=>{try{const be=indexedDB.open("firebase_remote_config",1);be.onerror=Ke=>{Q(Kn(Ke,"storage-open"))},be.onsuccess=Ke=>{q(Ke.target.result)},be.onupgradeneeded=Ke=>{0===Ke.oldVersion&&Ke.target.result.createObjectStore(ir,{keyPath:"compositeKey"})}}catch(be){Q(Mi.create("storage-open",{originalErrorMessage:be?.message}))}})}()){this.appId=Q,this.appName=be,this.namespace=Ke,this.openDbPromise=Tt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Q){return this.set("last_fetch_status",Q)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Q){return this.set("last_successful_fetch_timestamp_millis",Q)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Q){return this.set("last_successful_fetch_response",Q)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Q){return this.set("active_config",Q)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Q){return this.set("active_config_etag",Q)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Q){return this.set("throttle_metadata",Q)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Q){var be=this;return(0,ne.Z)(function*(){const Ke=yield be.openDbPromise;return new Promise((Tt,Lt)=>{const Zn=Ke.transaction([ir],"readonly").objectStore(ir),fr=be.createCompositeKey(Q);try{const nr=Zn.get(fr);nr.onerror=ti=>{Lt(Kn(ti,"storage-get"))},nr.onsuccess=ti=>{const Wr=ti.target.result;Tt(Wr?Wr.value:void 0)}}catch(nr){Lt(Mi.create("storage-get",{originalErrorMessage:nr?.message}))}})})()}set(Q,be){var Ke=this;return(0,ne.Z)(function*(){const Tt=yield Ke.openDbPromise;return new Promise((Lt,fn)=>{const fr=Tt.transaction([ir],"readwrite").objectStore(ir),nr=Ke.createCompositeKey(Q);try{const ti=fr.put({compositeKey:nr,value:be});ti.onerror=Wr=>{fn(Kn(Wr,"storage-set"))},ti.onsuccess=()=>{Lt()}}catch(ti){fn(Mi.create("storage-set",{originalErrorMessage:ti?.message}))}})})()}delete(Q){var be=this;return(0,ne.Z)(function*(){const Ke=yield be.openDbPromise;return new Promise((Tt,Lt)=>{const Zn=Ke.transaction([ir],"readwrite").objectStore(ir),fr=be.createCompositeKey(Q);try{const nr=Zn.delete(fr);nr.onerror=ti=>{Lt(Kn(ti,"storage-delete"))},nr.onsuccess=()=>{Tt()}}catch(nr){Lt(Mi.create("storage-delete",{originalErrorMessage:nr?.message}))}})})()}createCompositeKey(Q){return[this.appId,this.appName,this.namespace,Q].join()}}class Bi{constructor(Q){this.storage=Q}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Q=this;return(0,ne.Z)(function*(){const be=Q.storage.getLastFetchStatus(),Ke=Q.storage.getLastSuccessfulFetchTimestampMillis(),Tt=Q.storage.getActiveConfig(),Lt=yield be;Lt&&(Q.lastFetchStatus=Lt);const fn=yield Ke;fn&&(Q.lastSuccessfulFetchTimestampMillis=fn);const Zn=yield Tt;Zn&&(Q.activeConfig=Zn)})()}setLastFetchStatus(Q){return this.lastFetchStatus=Q,this.storage.setLastFetchStatus(Q)}setLastSuccessfulFetchTimestampMillis(Q){return this.lastSuccessfulFetchTimestampMillis=Q,this.storage.setLastSuccessfulFetchTimestampMillis(Q)}setActiveConfig(Q){return this.activeConfig=Q,this.storage.setActiveConfig(Q)}}function Yo(){return ra.apply(this,arguments)}function ra(){return(ra=(0,ne.Z)(function*(){if(!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch{return!1}})).apply(this,arguments)}!function Vr(){(0,F._registerComponent)(new Be.wA("remote-config",function q(Q,{instanceIdentifier:be}){const Ke=Q.getProvider("app").getImmediate(),Tt=Q.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mi.create("registration-window");if(!(0,Ne.hl)())throw Mi.create("indexed-db-unavailable");const{projectId:Lt,apiKey:fn,appId:Zn}=Ke.options;if(!Lt)throw Mi.create("registration-project-id");if(!fn)throw Mi.create("registration-api-key");if(!Zn)throw Mi.create("registration-app-id");const fr=new gs(Zn,Ke.name,be=be||"firebase"),nr=new Bi(fr),ti=new ae.Yd(ns);ti.logLevel=ae.in.ERROR;const Wr=new xo(Tt,F.SDK_VERSION,be,Lt,fn,Zn),Sa=new lt(Wr,fr),Or=new Do(Sa,fr,nr,ti),Ti=new pn(Ke,Or,nr,fr,ti);return function vi(q){const Q=(0,Ne.m9)(q);Q._initializePromise||(Q._initializePromise=Q._storageCache.loadFromStorage().then(()=>{Q._isInitializationComplete=!0}))}(Ti),Ti},"PUBLIC").setMultipleInstances(!0)),(0,F.registerVersion)(ns,"0.4.1"),(0,F.registerVersion)(ns,"0.4.1","esm2017")}();const Lo="/firebase-messaging-sw.js",Xs="/firebase-cloud-messaging-push-scope",Fo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ya="google.c.a.c_id",Oa="google.c.a.c_l",qa="google.c.a.ts",jo="google.c.a.e";var no=(()=>{return(q=no||(no={})).PUSH_RECEIVED="push-received",q.NOTIFICATION_CLICKED="notification-clicked",no;var q})();function zs(q){const Q=new Uint8Array(q);return btoa(String.fromCharCode(...Q)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Us(q){const be=(q+"=".repeat((4-q.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ke=atob(be),Tt=new Uint8Array(Ke.length);for(let Lt=0;Lt<Ke.length;++Lt)Tt[Lt]=Ke.charCodeAt(Lt);return Tt}const ia="fcm_token_details_db",ms="fcm_token_object_Store";function Wa(q){return sa.apply(this,arguments)}function sa(){return sa=(0,ne.Z)(function*(q){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Lt=>Lt.name).includes(ia))return null;let Q=null;return(yield(0,He.X3)(ia,5,{upgrade:(Ke=(0,ne.Z)(function*(Tt,Lt,fn,Zn){var fr;if(Lt<2||!Tt.objectStoreNames.contains(ms))return;const nr=Zn.objectStore(ms),ti=yield nr.index("fcmSenderId").get(q);if(yield nr.clear(),ti)if(2===Lt){const Wr=ti;if(!Wr.auth||!Wr.p256dh||!Wr.endpoint)return;Q={token:Wr.fcmToken,createTime:null!==(fr=Wr.createTime)&&void 0!==fr?fr:Date.now(),subscriptionOptions:{auth:Wr.auth,p256dh:Wr.p256dh,endpoint:Wr.endpoint,swScope:Wr.swScope,vapidKey:"string"==typeof Wr.vapidKey?Wr.vapidKey:zs(Wr.vapidKey)}}}else if(3===Lt){const Wr=ti;Q={token:Wr.fcmToken,createTime:Wr.createTime,subscriptionOptions:{auth:zs(Wr.auth),p256dh:zs(Wr.p256dh),endpoint:Wr.endpoint,swScope:Wr.swScope,vapidKey:zs(Wr.vapidKey)}}}else if(4===Lt){const Wr=ti;Q={token:Wr.fcmToken,createTime:Wr.createTime,subscriptionOptions:{auth:zs(Wr.auth),p256dh:zs(Wr.p256dh),endpoint:Wr.endpoint,swScope:Wr.swScope,vapidKey:zs(Wr.vapidKey)}}}}),function(Lt,fn,Zn,fr){return Ke.apply(this,arguments)})})).close(),yield(0,He.Lj)(ia),yield(0,He.Lj)("fcm_vapid_details_db"),yield(0,He.Lj)("undefined"),Qo(Q)?Q:null;var Ke}),sa.apply(this,arguments)}function Qo(q){if(!q||!q.subscriptionOptions)return!1;const{subscriptionOptions:Q}=q;return"number"==typeof q.createTime&&q.createTime>0&&"string"==typeof q.token&&q.token.length>0&&"string"==typeof Q.auth&&Q.auth.length>0&&"string"==typeof Q.p256dh&&Q.p256dh.length>0&&"string"==typeof Q.endpoint&&Q.endpoint.length>0&&"string"==typeof Q.swScope&&Q.swScope.length>0&&"string"==typeof Q.vapidKey&&Q.vapidKey.length>0}const Xo="firebase-messaging-store";let hi=null;function fo(){return hi||(hi=(0,He.X3)("firebase-messaging-database",1,{upgrade:(q,Q)=>{0===Q&&q.createObjectStore(Xo)}})),hi}function Ra(q){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,ne.Z)(function*(q){const Q=qs(q),Ke=yield(yield fo()).transaction(Xo).objectStore(Xo).get(Q);if(Ke)return Ke;{const Tt=yield Wa(q.appConfig.senderId);if(Tt)return yield fi(q,Tt),Tt}})).apply(this,arguments)}function fi(q,Q){return _a.apply(this,arguments)}function _a(){return(_a=(0,ne.Z)(function*(q,Q){const be=qs(q),Tt=(yield fo()).transaction(Xo,"readwrite");return yield Tt.objectStore(Xo).put(Q,be),yield Tt.done,Q})).apply(this,arguments)}function ba(q){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,ne.Z)(function*(q){const Q=qs(q),Ke=(yield fo()).transaction(Xo,"readwrite");yield Ke.objectStore(Xo).delete(Q),yield Ke.done})).apply(this,arguments)}function qs({appConfig:q}){return q.appId}const _i=new Ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function eo(q,Q){return cs.apply(this,arguments)}function cs(){return(cs=(0,ne.Z)(function*(q,Q){const be=yield Ks(q),Ke=ea(Q),Tt={method:"POST",headers:be,body:JSON.stringify(Ke)};let Lt;try{Lt=yield(yield fetch(Rs(q.appConfig),Tt)).json()}catch(fn){throw _i.create("token-subscribe-failed",{errorInfo:fn?.toString()})}if(Lt.error)throw _i.create("token-subscribe-failed",{errorInfo:Lt.error.message});if(!Lt.token)throw _i.create("token-subscribe-no-token");return Lt.token})).apply(this,arguments)}function Ao(q,Q){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,ne.Z)(function*(q,Q){const be=yield Ks(q),Ke=ea(Q.subscriptionOptions),Tt={method:"PATCH",headers:be,body:JSON.stringify(Ke)};let Lt;try{Lt=yield(yield fetch(`${Rs(q.appConfig)}/${Q.token}`,Tt)).json()}catch(fn){throw _i.create("token-update-failed",{errorInfo:fn?.toString()})}if(Lt.error)throw _i.create("token-update-failed",{errorInfo:Lt.error.message});if(!Lt.token)throw _i.create("token-update-no-token");return Lt.token})).apply(this,arguments)}function vs(q,Q){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,ne.Z)(function*(q,Q){const Ke={method:"DELETE",headers:yield Ks(q)};try{const Lt=yield(yield fetch(`${Rs(q.appConfig)}/${Q}`,Ke)).json();if(Lt.error)throw _i.create("token-unsubscribe-failed",{errorInfo:Lt.error.message})}catch(Tt){throw _i.create("token-unsubscribe-failed",{errorInfo:Tt?.toString()})}})).apply(this,arguments)}function Rs({projectId:q}){return`https://fcmregistrations.googleapis.com/v1/projects/${q}/registrations`}function Ks(q){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,ne.Z)(function*({appConfig:q,installations:Q}){const be=yield Q.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":q.apiKey,"x-goog-firebase-installations-auth":`FIS ${be}`})})).apply(this,arguments)}function ea({p256dh:q,auth:Q,endpoint:be,vapidKey:Ke}){const Tt={web:{endpoint:be,auth:Q,p256dh:q}};return Ke!==Fo&&(Tt.web.applicationPubKey=Ke),Tt}const po=6048e5;function go(q){return mo.apply(this,arguments)}function mo(){return(mo=(0,ne.Z)(function*(q){const Q=yield w(q.swRegistration,q.vapidKey),be={vapidKey:q.vapidKey,swScope:q.swRegistration.scope,endpoint:Q.endpoint,auth:zs(Q.getKey("auth")),p256dh:zs(Q.getKey("p256dh"))},Ke=yield Ra(q.firebaseDependencies);if(Ke){if(ce(Ke.subscriptionOptions,be))return Date.now()>=Ke.createTime+po?Sr(q,{token:Ke.token,createTime:Date.now(),subscriptionOptions:be}):Ke.token;try{yield vs(q.firebaseDependencies,Ke.token)}catch(Tt){console.warn(Tt)}return te(q.firebaseDependencies,be)}return te(q.firebaseDependencies,be)})).apply(this,arguments)}function ro(q){return vo.apply(this,arguments)}function vo(){return(vo=(0,ne.Z)(function*(q){const Q=yield Ra(q.firebaseDependencies);Q&&(yield vs(q.firebaseDependencies,Q.token),yield ba(q.firebaseDependencies));const be=yield q.swRegistration.pushManager.getSubscription();return!be||be.unsubscribe()})).apply(this,arguments)}function Sr(q,Q){return mu.apply(this,arguments)}function mu(){return(mu=(0,ne.Z)(function*(q,Q){try{const be=yield Ao(q.firebaseDependencies,Q),Ke=Object.assign(Object.assign({},Q),{token:be,createTime:Date.now()});return yield fi(q.firebaseDependencies,Ke),be}catch(be){throw yield ro(q),be}})).apply(this,arguments)}function te(q,Q){return K.apply(this,arguments)}function K(){return(K=(0,ne.Z)(function*(q,Q){const Ke={token:yield eo(q,Q),createTime:Date.now(),subscriptionOptions:Q};return yield fi(q,Ke),Ke.token})).apply(this,arguments)}function w(q,Q){return k.apply(this,arguments)}function k(){return(k=(0,ne.Z)(function*(q,Q){return(yield q.pushManager.getSubscription())||q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Us(Q)})})).apply(this,arguments)}function ce(q,Q){return Q.vapidKey===q.vapidKey&&Q.endpoint===q.endpoint&&Q.auth===q.auth&&Q.p256dh===q.p256dh}function Ie(q){const Q={from:q.from,collapseKey:q.collapse_key,messageId:q.fcmMessageId};return function tt(q,Q){if(!Q.notification)return;q.notification={};const be=Q.notification.title;be&&(q.notification.title=be);const Ke=Q.notification.body;Ke&&(q.notification.body=Ke);const Tt=Q.notification.image;Tt&&(q.notification.image=Tt);const Lt=Q.notification.icon;Lt&&(q.notification.icon=Lt)}(Q,q),function Ge(q,Q){!Q.data||(q.data=Q.data)}(Q,q),function Ut(q,Q){var be,Ke,Tt,Lt,fn;if(!(Q.fcmOptions||null!==(be=Q.notification)&&void 0!==be&&be.click_action))return;q.fcmOptions={};const Zn=null!==(Tt=null===(Ke=Q.fcmOptions)||void 0===Ke?void 0:Ke.link)&&void 0!==Tt?Tt:null===(Lt=Q.notification)||void 0===Lt?void 0:Lt.click_action;Zn&&(q.fcmOptions.link=Zn);const fr=null===(fn=Q.fcmOptions)||void 0===fn?void 0:fn.analytics_label;fr&&(q.fcmOptions.analyticsLabel=fr)}(Q,q),Q}function Fn(q){return"object"==typeof q&&!!q&&ya in q}function qt(q,Q){const be=[];for(let Ke=0;Ke<q.length;Ke++)be.push(q.charAt(Ke)),Ke<Q.length&&be.push(Q.charAt(Ke));return be.join("")}function $r(q){return _i.create("missing-app-config-values",{valueName:q})}qt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Qi{constructor(Q,be,Ke){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Tt=function Un(q){if(!q||!q.options)throw $r("App Configuration Object");if(!q.name)throw $r("App Name");const Q=["projectId","apiKey","appId","messagingSenderId"],{options:be}=q;for(const Ke of Q)if(!be[Ke])throw $r(Ke);return{appName:q.name,projectId:be.projectId,apiKey:be.apiKey,appId:be.appId,senderId:be.messagingSenderId}}(Q);this.firebaseDependencies={app:Q,appConfig:Tt,installations:be,analyticsProvider:Ke}}_delete(){return Promise.resolve()}}function Qr(q){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,ne.Z)(function*(q){try{q.swRegistration=yield navigator.serviceWorker.register(Lo,{scope:Xs}),q.swRegistration.update().catch(()=>{})}catch(Q){throw _i.create("failed-service-worker-registration",{browserErrorMessage:Q?.message})}})).apply(this,arguments)}function Ar(q,Q){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,ne.Z)(function*(q,Q){if(!Q&&!q.swRegistration&&(yield Qr(q)),Q||!q.swRegistration){if(!(Q instanceof ServiceWorkerRegistration))throw _i.create("invalid-sw-registration");q.swRegistration=Q}})).apply(this,arguments)}function Oi(q,Q){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,ne.Z)(function*(q,Q){Q?q.vapidKey=Q:q.vapidKey||(q.vapidKey=Fo)})).apply(this,arguments)}function Vi(){return(Vi=(0,ne.Z)(function*(q,Q){if(!navigator)throw _i.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _i.create("permission-blocked");return yield Oi(q,Q?.vapidKey),yield Ar(q,Q?.serviceWorkerRegistration),go(q)})).apply(this,arguments)}function Is(q,Q,be){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,ne.Z)(function*(q,Q,be){const Ke=Es(Q);(yield q.firebaseDependencies.analyticsProvider.get()).logEvent(Ke,{message_id:be[ya],message_name:be[Oa],message_time:be[qa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Es(q){switch(q){case no.NOTIFICATION_CLICKED:return"notification_open";case no.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ho(){return(Ho=(0,ne.Z)(function*(q,Q){const be=Q.data;if(!be.isFirebaseMessaging)return;q.onMessageHandler&&be.messageType===no.PUSH_RECEIVED&&("function"==typeof q.onMessageHandler?q.onMessageHandler(Ie(be)):q.onMessageHandler.next(Ie(be)));const Ke=be.data;Fn(Ke)&&"1"===Ke[jo]&&(yield Is(q,be.messageType,Ke))})).apply(this,arguments)}const oa="@firebase/messaging",aa=q=>{const Q=new Qi(q.getProvider("app").getImmediate(),q.getProvider("installations-internal").getImmediate(),q.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",be=>function yo(q,Q){return Ho.apply(this,arguments)}(Q,be)),Q},_o=q=>{const Q=q.getProvider("messaging").getImmediate();return{getToken:Ke=>function ar(q,Q){return Vi.apply(this,arguments)}(Q,Ke)}};function ua(){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,ne.Z)(function*(){try{yield(0,Ne.eu)()}catch{return!1}return typeof window<"u"&&(0,Ne.hl)()&&(0,Ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ou(){(0,F._registerComponent)(new Be.wA("messaging",aa,"PUBLIC")),(0,F._registerComponent)(new Be.wA("messaging-internal",_o,"PRIVATE")),(0,F.registerVersion)(oa,"0.12.1"),(0,F.registerVersion)(oa,"0.12.1","esm2017")}();const Gu="analytics",Go="firebase_id",la="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bo="https://www.googletagmanager.com/gtag/js",Ir=new ae.Yd("@firebase/analytics");function Ka(q){return Promise.all(q.map(Q=>Q.catch(be=>be)))}function Su(q,Q){const be=document.createElement("script");be.src=`${bo}?l=${q}&id=${Q}`,be.async=!0,document.head.appendChild(be)}function ue(q,Q,be,Ke,Tt,Lt){return G.apply(this,arguments)}function G(){return(G=(0,ne.Z)(function*(q,Q,be,Ke,Tt,Lt){const fn=Ke[Tt];try{if(fn)yield Q[fn];else{const fr=(yield Ka(be)).find(nr=>nr.measurementId===Tt);fr&&(yield Q[fr.appId])}}catch(Zn){Ir.error(Zn)}q("config",Tt,Lt)})).apply(this,arguments)}function Te(q,Q,be,Ke,Tt){return Je.apply(this,arguments)}function Je(){return(Je=(0,ne.Z)(function*(q,Q,be,Ke,Tt){try{let Lt=[];if(Tt&&Tt.send_to){let fn=Tt.send_to;Array.isArray(fn)||(fn=[fn]);const Zn=yield Ka(be);for(const fr of fn){const nr=Zn.find(Wr=>Wr.measurementId===fr),ti=nr&&Q[nr.appId];if(!ti){Lt=[];break}Lt.push(ti)}}0===Lt.length&&(Lt=Object.values(Q)),yield Promise.all(Lt),q("event",Ke,Tt||{})}catch(Lt){Ir.error(Lt)}})).apply(this,arguments)}function Nn(q){const Q=window.document.getElementsByTagName("script");for(const be of Object.values(Q))if(be.src&&be.src.includes(bo)&&be.src.includes(q))return be;return null}const Gr=new Ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),bi=new class Xr{constructor(Q={},be=1e3){this.throttleMetadata=Q,this.intervalMillis=be}getThrottleMetadata(Q){return this.throttleMetadata[Q]}setThrottleMetadata(Q,be){this.throttleMetadata[Q]=be}deleteThrottleMetadata(Q){delete this.throttleMetadata[Q]}};function to(q){return new Headers({Accept:"application/json","x-goog-api-key":q})}function cn(q){return Si.apply(this,arguments)}function Si(){return(Si=(0,ne.Z)(function*(q){var Q;const{appId:be,apiKey:Ke}=q,Tt={method:"GET",headers:to(Ke)},Lt=la.replace("{app-id}",be),fn=yield fetch(Lt,Tt);if(200!==fn.status&&304!==fn.status){let Zn="";try{const fr=yield fn.json();null!==(Q=fr.error)&&void 0!==Q&&Q.message&&(Zn=fr.error.message)}catch{}throw Gr.create("config-fetch-failed",{httpStatus:fn.status,responseMessage:Zn})}return fn.json()})).apply(this,arguments)}function ci(q){return Io.apply(this,arguments)}function Io(){return(Io=(0,ne.Z)(function*(q,Q=bi,be){const{appId:Ke,apiKey:Tt,measurementId:Lt}=q.options;if(!Ke)throw Gr.create("no-app-id");if(!Tt){if(Lt)return{measurementId:Lt,appId:Ke};throw Gr.create("no-api-key")}const fn=Q.getThrottleMetadata(Ke)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Zn=new Ht;return setTimeout((0,ne.Z)(function*(){Zn.abort()}),void 0!==be?be:6e4),In({appId:Ke,apiKey:Tt,measurementId:Lt},fn,Zn,Q)})).apply(this,arguments)}function In(q,Q,be){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,ne.Z)(function*(q,{throttleEndTimeMillis:Q,backoffCount:be},Ke,Tt=bi){var Lt;const{appId:fn,measurementId:Zn}=q;try{yield Du(Ke,Q)}catch(fr){if(Zn)return Ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Zn} provided in the "measurementId" field in the local Firebase config. [${fr?.message}]`),{appId:fn,measurementId:Zn};throw fr}try{const fr=yield cn(q);return Tt.deleteThrottleMetadata(fn),fr}catch(fr){const nr=fr;if(!kn(nr)){if(Tt.deleteThrottleMetadata(fn),Zn)return Ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Zn} provided in the "measurementId" field in the local Firebase config. [${nr?.message}]`),{appId:fn,measurementId:Zn};throw fr}const ti=503===Number(null===(Lt=nr?.customData)||void 0===Lt?void 0:Lt.httpStatus)?(0,Ne.$s)(be,Tt.intervalMillis,30):(0,Ne.$s)(be,Tt.intervalMillis),Wr={throttleEndTimeMillis:Date.now()+ti,backoffCount:be+1};return Tt.setThrottleMetadata(fn,Wr),Ir.debug(`Calling attemptFetch again in ${ti} millis`),In(q,Wr,Ke,Tt)}})).apply(this,arguments)}function Du(q,Q){return new Promise((be,Ke)=>{const Tt=Math.max(Q-Date.now(),0),Lt=setTimeout(be,Tt);q.addEventListener(()=>{clearTimeout(Lt),Ke(Gr.create("fetch-throttle",{throttleEndTimeMillis:Q}))})})}function kn(q){if(!(q instanceof Ne.ZR&&q.customData))return!1;const Q=Number(q.customData.httpStatus);return 429===Q||500===Q||503===Q||504===Q}class Ht{constructor(){this.listeners=[]}addEventListener(Q){this.listeners.push(Q)}abort(){this.listeners.forEach(Q=>Q())}}let an,Ya;function Za(){return(Za=(0,ne.Z)(function*(q,Q,be,Ke,Tt){if(Tt&&Tt.global)q("event",be,Ke);else{const Lt=yield Q;q("event",be,Object.assign(Object.assign({},Ke),{send_to:Lt}))}})).apply(this,arguments)}function Au(q){Ya=q}function Mr(q){an=q}function La(){return sd.apply(this,arguments)}function sd(){return(sd=(0,ne.Z)(function*(){if(!(0,Ne.hl)())return Ir.warn(Gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ne.eu)()}catch(q){return Ir.warn(Gr.create("indexeddb-unavailable",{errorInfo:q?.toString()}).message),!1}return!0})).apply(this,arguments)}function Bn(){return(Bn=(0,ne.Z)(function*(q,Q,be,Ke,Tt,Lt,fn){var Zn;const fr=ci(q);fr.then(Or=>{be[Or.measurementId]=Or.appId,q.options.measurementId&&Or.measurementId!==q.options.measurementId&&Ir.warn(`The measurement ID in the local Firebase config (${q.options.measurementId}) does not match the measurement ID fetched from the server (${Or.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Or=>Ir.error(Or)),Q.push(fr);const nr=La().then(Or=>{if(Or)return Ke.getId()}),[ti,Wr]=yield Promise.all([fr,nr]);Nn(Lt)||Su(Lt,ti.measurementId),Ya&&(Tt("consent","default",Ya),Au(void 0)),Tt("js",new Date);const Sa=null!==(Zn=fn?.config)&&void 0!==Zn?Zn:{};return Sa.origin="firebase",Sa.update=!0,null!=Wr&&(Sa[Go]=Wr),Tt("config",ti.measurementId,Sa),an&&(Tt("set",an),Mr(void 0)),ti.measurementId})).apply(this,arguments)}class Ls{constructor(Q){this.app=Q}_delete(){return delete jr[this.app.options.appId],Promise.resolve()}}let jr={},Fa=[];const ys={};let Fi,Ps,En="dataLayer",uu=!1;function Qa(q,Q,be){!function zu(){const q=[];if((0,Ne.ru)()&&q.push("This is a browser extension environment."),(0,Ne.zI)()||q.push("Cookies are not available."),q.length>0){const Q=q.map((Ke,Tt)=>`(${Tt+1}) ${Ke}`).join(" "),be=Gr.create("invalid-analytics-context",{errorInfo:Q});Ir.warn(be.message)}}();const Ke=q.options.appId;if(!Ke)throw Gr.create("no-app-id");if(!q.options.apiKey){if(!q.options.measurementId)throw Gr.create("no-api-key");Ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${q.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=jr[Ke])throw Gr.create("already-exists",{id:Ke});if(!uu){!function V(q){let Q=[];Array.isArray(window[q])?Q=window[q]:window[q]=Q}(En);const{wrappedGtag:Lt,gtagCore:fn}=function en(q,Q,be,Ke,Tt){let Lt=function(...fn){window[Ke].push(arguments)};return window[Tt]&&"function"==typeof window[Tt]&&(Lt=window[Tt]),window[Tt]=function Nt(q,Q,be,Ke){function Lt(){return(Lt=(0,ne.Z)(function*(fn,Zn,fr){try{"event"===fn?yield Te(q,Q,be,Zn,fr):"config"===fn?yield ue(q,Q,be,Ke,Zn,fr):"consent"===fn?q("consent","update",fr):q("set",Zn)}catch(nr){Ir.error(nr)}})).apply(this,arguments)}return function Tt(fn,Zn,fr){return Lt.apply(this,arguments)}}(Lt,q,Q,be),{gtagCore:Lt,wrappedGtag:window[Tt]}}(jr,Fa,ys,En,"gtag");Ps=Lt,Fi=fn,uu=!0}return jr[Ke]=function Ji(q,Q,be,Ke,Tt,Lt,fn){return Bn.apply(this,arguments)}(q,Fa,ys,Q,Fi,En,be),new Ls(q)}function ko(){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,ne.Z)(function*(){if((0,Ne.ru)()||!(0,Ne.zI)()||!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch{return!1}})).apply(this,arguments)}const as="@firebase/analytics";!function ds(){(0,F._registerComponent)(new Be.wA(Gu,(Q,{options:be})=>Qa(Q.getProvider("app").getImmediate(),Q.getProvider("installations-internal").getImmediate(),be),"PUBLIC")),(0,F._registerComponent)(new Be.wA("analytics-internal",function q(Q){try{const be=Q.getProvider(Gu).getImmediate();return{logEvent:(Ke,Tt,Lt)=>function ul(q,Q,be,Ke){q=(0,Ne.m9)(q),function ws(q,Q,be,Ke,Tt){return Za.apply(this,arguments)}(Ps,jr[q.app.options.appId],Q,be,Ke).catch(Tt=>Ir.error(Tt))}(be,Ke,Tt,Lt)}}catch(be){throw Gr.create("interop-component-reg-failed",{reason:be})}},"PRIVATE")),(0,F.registerVersion)(as,"0.9.1"),(0,F.registerVersion)(as,"0.9.1","esm2017")}();var od=W(4408),Mc=W(7565);const Oc=new class Rl extends Mc.v{}(class qi extends od.o{constructor(Q,be){super(Q,be),this.scheduler=Q,this.work=be}schedule(Q,be=0){return be>0?super.schedule(Q,be):(this.delay=be,this.state=Q,this.scheduler.flush(this),this)}execute(Q,be){return be>0||this.closed?super.execute(Q,be):this._execute(Q,be)}requestAsyncId(Q,be,Ke=0){return null!=Ke&&Ke>0||null==Ke&&this.delay>0?super.requestAsyncId(Q,be,Ke):(Q.flush(this),0)}});var nn=W(4986),M=W(8505),R=W(5363),x=W(9468);const B=new E.GfV("7.5.0"),J="__angularfire_symbol__analyticsIsSupportedValue",ye="__angularfire_symbol__analyticsIsSupported",Se="__angularfire_symbol__remoteConfigIsSupportedValue",mt="__angularfire_symbol__remoteConfigIsSupported",Jt="__angularfire_symbol__messagingIsSupportedValue",wn="__angularfire_symbol__messagingIsSupported";function Wi(q,Q,be){if(Q){if(1===Q.length)return Q[0];const Lt=Q.filter(fn=>fn.app===be);if(1===Lt.length)return Lt[0]}return be.container.getProvider(q).getImmediate({optional:!0})}globalThis[ye]||(globalThis[ye]=ko().then(q=>globalThis[J]=q).catch(()=>globalThis[J]=!1)),globalThis[wn]||(globalThis[wn]=ua().then(q=>globalThis[Jt]=q).catch(()=>globalThis[Jt]=!1)),globalThis[mt]||(globalThis[mt]=Yo().then(q=>globalThis[Se]=q).catch(()=>globalThis[Se]=!1));const Mo=(q,Q)=>{const be=Q?[Q]:(0,ie.C6)(),Ke=[];return be.forEach(Tt=>{Tt.container.getProvider(q).instances.forEach(fn=>{Ke.includes(fn)||Ke.push(fn)})}),Ke};function Cs(){}class ta{constructor(Q,be=Oc){this.zone=Q,this.delegate=be}now(){return this.delegate.now()}schedule(Q,be,Ke){const Tt=this.zone;return this.delegate.schedule(function(fn){Tt.runGuarded(()=>{Q.apply(this,[fn])})},be,Ke)}}class Wu{constructor(Q){this.zone=Q,this.task=null}call(Q,be){const Ke=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cs,{},Cs,Cs)),be.pipe((0,M.b)({next:Ke,complete:Ke,error:Ke})).subscribe(Q).add(Ke)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vu=(()=>{class q{constructor(be){this.ngZone=be,this.outsideAngular=be.runOutsideAngular(()=>new ta(Zone.current)),this.insideAngular=be.run(()=>new ta(Zone.current,nn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return q.\u0275fac=function(be){return new(be||q)(E.LFG(E.R0b))},q.\u0275prov=E.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();function $o(){const q=globalThis.\u0275AngularFireScheduler;if(!q)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return q}function Qd(q){return q.pipe((0,R.Q)($o().outsideAngular))}function Ll(q){return $o(),function yu(q){return function(be){return(be=be.lift(new Wu(q.ngZone))).pipe((0,x.R)(q.outsideAngular),(0,R.Q)(q.insideAngular))}}($o())(q)}},2090:(Wt,et,W)=>{"use strict";W.d(et,{$s:()=>Cn,BH:()=>Xe,G6:()=>vt,L:()=>He,LL:()=>ln,Pz:()=>Ve,Sg:()=>gt,UG:()=>X,US:()=>Be,ZB:()=>Ee,ZR:()=>$t,aH:()=>Et,b$:()=>Le,eu:()=>Rt,hl:()=>Mt,jU:()=>ve,m9:()=>Vn,ne:()=>Ei,pd:()=>xr,r3:()=>Xn,ru:()=>ge,tV:()=>Ae,uI:()=>xt,vZ:()=>xn,w1:()=>qe,xO:()=>xi,xb:()=>zr,z$:()=>kt,zI:()=>At,zd:()=>br});const F=function(Qe){const Ye=[];let at=0;for(let Vt=0;Vt<Qe.length;Vt++){let Dt=Qe.charCodeAt(Vt);Dt<128?Ye[at++]=Dt:Dt<2048?(Ye[at++]=Dt>>6|192,Ye[at++]=63&Dt|128):55296==(64512&Dt)&&Vt+1<Qe.length&&56320==(64512&Qe.charCodeAt(Vt+1))?(Dt=65536+((1023&Dt)<<10)+(1023&Qe.charCodeAt(++Vt)),Ye[at++]=Dt>>18|240,Ye[at++]=Dt>>12&63|128,Ye[at++]=Dt>>6&63|128,Ye[at++]=63&Dt|128):(Ye[at++]=Dt>>12|224,Ye[at++]=Dt>>6&63|128,Ye[at++]=63&Dt|128)}return Ye},Be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Qe,Ye){if(!Array.isArray(Qe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const at=Ye?this.byteToCharMapWebSafe_:this.byteToCharMap_,Vt=[];for(let Dt=0;Dt<Qe.length;Dt+=3){const Tn=Qe[Dt],cr=Dt+1<Qe.length,Br=cr?Qe[Dt+1]:0,mi=Dt+2<Qe.length,pe=mi?Qe[Dt+2]:0;let me=(15&Br)<<2|pe>>6,ze=63&pe;mi||(ze=64,cr||(me=64)),Vt.push(at[Tn>>2],at[(3&Tn)<<4|Br>>4],at[me],at[ze])}return Vt.join("")},encodeString(Qe,Ye){return this.HAS_NATIVE_SUPPORT&&!Ye?btoa(Qe):this.encodeByteArray(F(Qe),Ye)},decodeString(Qe,Ye){return this.HAS_NATIVE_SUPPORT&&!Ye?atob(Qe):function(Qe){const Ye=[];let at=0,Vt=0;for(;at<Qe.length;){const Dt=Qe[at++];if(Dt<128)Ye[Vt++]=String.fromCharCode(Dt);else if(Dt>191&&Dt<224){const Tn=Qe[at++];Ye[Vt++]=String.fromCharCode((31&Dt)<<6|63&Tn)}else if(Dt>239&&Dt<365){const mi=((7&Dt)<<18|(63&Qe[at++])<<12|(63&Qe[at++])<<6|63&Qe[at++])-65536;Ye[Vt++]=String.fromCharCode(55296+(mi>>10)),Ye[Vt++]=String.fromCharCode(56320+(1023&mi))}else{const Tn=Qe[at++],cr=Qe[at++];Ye[Vt++]=String.fromCharCode((15&Dt)<<12|(63&Tn)<<6|63&cr)}}return Ye.join("")}(this.decodeStringToByteArray(Qe,Ye))},decodeStringToByteArray(Qe,Ye){this.init_();const at=Ye?this.charToByteMapWebSafe_:this.charToByteMap_,Vt=[];for(let Dt=0;Dt<Qe.length;){const Tn=at[Qe.charAt(Dt++)],Br=Dt<Qe.length?at[Qe.charAt(Dt)]:0;++Dt;const pe=Dt<Qe.length?at[Qe.charAt(Dt)]:64;++Dt;const de=Dt<Qe.length?at[Qe.charAt(Dt)]:64;if(++Dt,null==Tn||null==Br||null==pe||null==de)throw Error();Vt.push(Tn<<2|Br>>4),64!==pe&&(Vt.push(Br<<4&240|pe>>2),64!==de&&Vt.push(pe<<6&192|de))}return Vt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Qe=0;Qe<this.ENCODED_VALS.length;Qe++)this.byteToCharMap_[Qe]=this.ENCODED_VALS.charAt(Qe),this.charToByteMap_[this.byteToCharMap_[Qe]]=Qe,this.byteToCharMapWebSafe_[Qe]=this.ENCODED_VALS_WEBSAFE.charAt(Qe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Qe]]=Qe,Qe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Qe)]=Qe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Qe)]=Qe)}}},He=function(Qe){return function(Qe){const Ye=F(Qe);return Be.encodeByteArray(Ye,!0)}(Qe).replace(/\./g,"")},Ae=function(Qe){try{return Be.decodeString(Qe,!0)}catch(Ye){console.error("base64Decode failed: ",Ye)}return null};function Ee(Qe,Ye){if(!(Ye instanceof Object))return Ye;switch(Ye.constructor){case Date:return new Date(Ye.getTime());case Object:void 0===Qe&&(Qe={});break;case Array:Qe=[];break;default:return Ye}for(const at in Ye)!Ye.hasOwnProperty(at)||!Me(at)||(Qe[at]=Ee(Qe[at],Ye[at]));return Qe}function Me(Qe){return"__proto__"!==Qe}const Fe=()=>{try{return function $e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Qe=process.env.__FIREBASE_DEFAULTS__;return Qe?JSON.parse(Qe):void 0})()||(()=>{if(typeof document>"u")return;let Qe;try{Qe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ye=Qe&&Ae(Qe[1]);return Ye&&JSON.parse(Ye)})()}catch(Qe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Qe}`)}},Et=()=>{var Qe;return null===(Qe=Fe())||void 0===Qe?void 0:Qe.config},Ve=Qe=>{var Ye;return null===(Ye=Fe())||void 0===Ye?void 0:Ye[`_${Qe}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ye,at)=>{this.resolve=Ye,this.reject=at})}wrapCallback(Ye){return(at,Vt)=>{at?this.reject(at):this.resolve(Vt),"function"==typeof Ye&&(this.promise.catch(()=>{}),1===Ye.length?Ye(at):Ye(at,Vt))}}}function gt(Qe,Ye){if(Qe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Vt=Ye||"demo-project",Dt=Qe.iat||0,Tn=Qe.sub||Qe.user_id;if(!Tn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const cr=Object.assign({iss:`https://securetoken.google.com/${Vt}`,aud:Vt,iat:Dt,exp:Dt+3600,auth_time:Dt,sub:Tn,user_id:Tn,firebase:{sign_in_provider:"custom",identities:{}}},Qe);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(cr)),""].join(".")}function kt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function X(){var Qe;const Ye=null===(Qe=Fe())||void 0===Qe?void 0:Qe.forceEnvironment;if("node"===Ye)return!0;if("browser"===Ye)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function ge(){const Qe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Qe&&void 0!==Qe.id}function Le(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){const Qe=kt();return Qe.indexOf("MSIE ")>=0||Qe.indexOf("Trident/")>=0}function vt(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mt(){try{return"object"==typeof indexedDB}catch{return!1}}function Rt(){return new Promise((Qe,Ye)=>{try{let at=!0;const Vt="validate-browser-context-for-indexeddb-analytics-module",Dt=self.indexedDB.open(Vt);Dt.onsuccess=()=>{Dt.result.close(),at||self.indexedDB.deleteDatabase(Vt),Qe(!0)},Dt.onupgradeneeded=()=>{at=!1},Dt.onerror=()=>{var Tn;Ye((null===(Tn=Dt.error)||void 0===Tn?void 0:Tn.message)||"")}}catch(at){Ye(at)}})}function At(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class $t extends Error{constructor(Ye,at,Vt){super(at),this.code=Ye,this.customData=Vt,this.name="FirebaseError",Object.setPrototypeOf(this,$t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}}class ln{constructor(Ye,at,Vt){this.service=Ye,this.serviceName=at,this.errors=Vt}create(Ye,...at){const Vt=at[0]||{},Dt=`${this.service}/${Ye}`,Tn=this.errors[Ye],cr=Tn?function Zt(Qe,Ye){return Qe.replace(hn,(at,Vt)=>{const Dt=Ye[Vt];return null!=Dt?String(Dt):`<${Vt}?>`})}(Tn,Vt):"Error";return new $t(Dt,`${this.serviceName}: ${cr} (${Dt}).`,Vt)}}const hn=/\{\$([^}]+)}/g;function Xn(Qe,Ye){return Object.prototype.hasOwnProperty.call(Qe,Ye)}function zr(Qe){for(const Ye in Qe)if(Object.prototype.hasOwnProperty.call(Qe,Ye))return!1;return!0}function xn(Qe,Ye){if(Qe===Ye)return!0;const at=Object.keys(Qe),Vt=Object.keys(Ye);for(const Dt of at){if(!Vt.includes(Dt))return!1;const Tn=Qe[Dt],cr=Ye[Dt];if(mr(Tn)&&mr(cr)){if(!xn(Tn,cr))return!1}else if(Tn!==cr)return!1}for(const Dt of Vt)if(!at.includes(Dt))return!1;return!0}function mr(Qe){return null!==Qe&&"object"==typeof Qe}function xi(Qe){const Ye=[];for(const[at,Vt]of Object.entries(Qe))Array.isArray(Vt)?Vt.forEach(Dt=>{Ye.push(encodeURIComponent(at)+"="+encodeURIComponent(Dt))}):Ye.push(encodeURIComponent(at)+"="+encodeURIComponent(Vt));return Ye.length?"&"+Ye.join("&"):""}function br(Qe){const Ye={};return Qe.replace(/^\?/,"").split("&").forEach(Vt=>{if(Vt){const[Dt,Tn]=Vt.split("=");Ye[decodeURIComponent(Dt)]=decodeURIComponent(Tn)}}),Ye}function xr(Qe){const Ye=Qe.indexOf("?");if(!Ye)return"";const at=Qe.indexOf("#",Ye);return Qe.substring(Ye,at>0?at:void 0)}function Ei(Qe,Ye){const at=new ur(Qe,Ye);return at.subscribe.bind(at)}class ur{constructor(Ye,at){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=at,this.task.then(()=>{Ye(this)}).catch(Vt=>{this.error(Vt)})}next(Ye){this.forEachObserver(at=>{at.next(Ye)})}error(Ye){this.forEachObserver(at=>{at.error(Ye)}),this.close(Ye)}complete(){this.forEachObserver(Ye=>{Ye.complete()}),this.close()}subscribe(Ye,at,Vt){let Dt;if(void 0===Ye&&void 0===at&&void 0===Vt)throw new Error("Missing Observer.");Dt=function Jn(Qe,Ye){if("object"!=typeof Qe||null===Qe)return!1;for(const at of Ye)if(at in Qe&&"function"==typeof Qe[at])return!0;return!1}(Ye,["next","error","complete"])?Ye:{next:Ye,error:at,complete:Vt},void 0===Dt.next&&(Dt.next=ui),void 0===Dt.error&&(Dt.error=ui),void 0===Dt.complete&&(Dt.complete=ui);const Tn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Dt.error(this.finalError):Dt.complete()}catch{}}),this.observers.push(Dt),Tn}unsubscribeOne(Ye){void 0===this.observers||void 0===this.observers[Ye]||(delete this.observers[Ye],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ye){if(!this.finalized)for(let at=0;at<this.observers.length;at++)this.sendOne(at,Ye)}sendOne(Ye,at){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ye])try{at(this.observers[Ye])}catch(Vt){typeof console<"u"&&console.error&&console.error(Vt)}})}close(Ye){this.finalized||(this.finalized=!0,void 0!==Ye&&(this.finalError=Ye),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ui(){}function Cn(Qe,Ye=1e3,at=2){const Vt=Ye*Math.pow(at,Qe),Dt=Math.round(.5*Vt*(Math.random()-.5)*2);return Math.min(144e5,Vt+Dt)}function Vn(Qe){return Qe&&Qe._delegate?Qe._delegate:Qe}},8293:(Wt,et,W)=>{"use strict";W.d(et,{Y:()=>$e});var E=W(5861),ie=W(3900),ne=W(4004),F=W(9841),Ne=W(9646),Be=W(6805),He=W(4650),Ae=W(2095),De=W(1205),Ee=W(377),Me=W(9062);class $e{constructor(_t,St,Fe,ut){this.db=_t,this.auth=St,this.storage=Fe,this.router=ut,this.pageClips=[],this.pendigReq=!1,this.clipsCollection=_t.collection("clips")}createClip(_t){return this.clipsCollection.add(_t)}getUserClips(_t){return(0,F.a)([this.auth.user,_t]).pipe((0,ie.w)(St=>{const[Fe,ut]=St;return Fe?this.clipsCollection.ref.where("uid","==",Fe.uid).orderBy("timestamp","1"===ut?"desc":"asc").get():(0,Ne.of)([])}),(0,ne.U)(St=>St.docs))}updateClip(_t,St){return this.clipsCollection.doc(_t).update({title:St})}deleteClip(_t){var St=this;return(0,E.Z)(function*(){const Fe=St.storage.ref(`clips/${_t.fileName}`),ut=St.storage.ref(`screenshots/${_t.screenshotFileName}`);yield Fe.delete(),yield ut.delete(),St.clipsCollection.doc(_t.docId).delete()})()}getClips(){var _t=this;return(0,E.Z)(function*(){if(_t.pendigReq)return;_t.pendigReq=!0;let St=_t.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const{length:Fe}=_t.pageClips;if(Fe){const st=_t.pageClips[Fe-1].docId,Et=yield function ae(rt,_t){const St="object"==typeof _t;return new Promise((Fe,ut)=>{let Et,st=!1;rt.subscribe({next:Ve=>{Et=Ve,st=!0},error:ut,complete:()=>{st?Fe(Et):St?Fe(_t.defaultValue):ut(new Be.K)}})})}(_t.clipsCollection.doc(st).get());St=St.startAfter(Et)}(yield St.get()).forEach(st=>{_t.pageClips.push({docId:st.id,...st.data()})}),_t.pendigReq=!1})()}resolve(_t,St){return this.clipsCollection.doc(_t.params.id).get().pipe((0,ne.U)(Fe=>Fe.data()||(this.router.navigate(["/"]),null)))}}$e.\u0275fac=function(_t){return new(_t||$e)(He.LFG(Ae.ST),He.LFG(De.zQ),He.LFG(Ee.Q1),He.LFG(Me.F0))},$e.\u0275prov=He.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"root"})},1609:(Wt,et,W)=>{"use strict";W.d(et,{Z:()=>ie});var E=W(4650);class ie{constructor(){this.modals=[]}isModalopen(F){return!!this.modals.find(Ne=>Ne.id===F)?.visible}toggleModal(F){const Ne=this.modals.find(Be=>Be.id===F);Ne&&(Ne.visible=!Ne.visible)}register(F){this.modals.push({id:F,visible:!1})}unregister(F){this.modals=this.modals.filter(Ne=>Ne.id!==F)}}ie.\u0275fac=function(F){return new(F||ie)},ie.\u0275prov=E.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})},8549:(Wt,et,W)=>{"use strict";W.d(et,{w:()=>Ne});var E=W(4650),ie=W(6895);const ne=function(Be){return{"background-color":Be}};class Ne{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}}Ne.\u0275fac=function(ae){return new(ae||Ne)},Ne.\u0275cmp=E.Xpm({type:Ne,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:["*"],decls:2,vars:3,consts:[[1,"text-center","text-white","font-bold","p-4","mb-4","rounded-md",3,"ngStyle"]],template:function(ae,He){1&ae&&(E.F$t(),E.TgZ(0,"div",0),E.Hsn(1),E.qZA()),2&ae&&E.Q6J("ngStyle",E.VKq(1,ne,He.color?He.color:""))},dependencies:[ie.PC]})},235:(Wt,et,W)=>{"use strict";W.d(et,{a:()=>$e});var E=W(4006),ie=W(4650),ne=W(6895);function F(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," Passwords must be atleast 8 characters long, have 1 uppercase letter, 1 lowercase letter and 1 number. "),ie.qZA())}function Ne(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," Field is required "),ie.qZA())}function Be(rt,_t){if(1&rt&&(ie.TgZ(0,"p",3),ie._uU(1),ie.qZA()),2&rt){const St=ie.oxw(2);ie.xp6(1),ie.AsE(" The input value is ",null==St.control.errors||null==St.control.errors.minlength?null:St.control.errors.minlength.actualLength," characters long. It must be atleast ",null==St.control.errors?null:St.control.errors.minlength.requiredLength," characters long. ")}}function ae(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," You must enter a valid email. "),ie.qZA())}function He(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," Value too low. "),ie.qZA())}function Ae(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," Value too high. "),ie.qZA())}function De(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," Passwords do not match. "),ie.qZA())}function Ee(rt,_t){1&rt&&(ie.TgZ(0,"p",3),ie._uU(1," Email taken. Try another email. "),ie.qZA())}function Me(rt,_t){if(1&rt&&(ie.ynx(0),ie.YNc(1,F,2,0,"p",2),ie.YNc(2,Ne,2,0,"p",2),ie.YNc(3,Be,2,2,"p",2),ie.YNc(4,ae,2,0,"p",2),ie.YNc(5,He,2,0,"p",2),ie.YNc(6,Ae,2,0,"p",2),ie.YNc(7,De,2,0,"p",2),ie.YNc(8,Ee,2,0,"p",2),ie.BQk()),2&rt){const St=ie.oxw();ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.pattern),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.required),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.minlength),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.email),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.min),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.max),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.noMatch),ie.xp6(1),ie.Q6J("ngIf",null==St.control.errors?null:St.control.errors.emailTaken)}}class $e{constructor(){this.control=new E.NI,this.type="text",this.placeholder=""}}$e.\u0275fac=function(_t){return new(_t||$e)},$e.\u0275cmp=ie.Xpm({type:$e,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder"},decls:2,vars:4,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(_t,St){1&_t&&(ie._UZ(0,"input",0),ie.YNc(1,Me,9,8,"ng-container",1)),2&_t&&(ie.Q6J("formControl",St.control)("type",St.type)("placeholder",St.placeholder),ie.xp6(1),ie.Q6J("ngIf",St.control.touched&&St.control.dirty))},dependencies:[ne.O5,E.Fj,E.JJ,E.oH]})},3446:(Wt,et,W)=>{"use strict";W.d(et,{z:()=>ae});var E=W(4650),ie=W(1609),ne=W(6895);const F=[[["","heading",""]],"*"],Ne=function(He){return{hidden:He}};class ae{constructor(Ae,De){this.modal=Ae,this.el=De,this.modalID=""}closeModal(Ae){this.modal.toggleModal(this.modalID)}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}}ae.\u0275fac=function(Ae){return new(Ae||ae)(E.Y36(ie.Z),E.Y36(E.SBq))},ae.\u0275cmp=E.Xpm({type:ae,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:["[heading]","*"],decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(Ae,De){1&Ae&&(E.F$t(F),E.TgZ(0,"div",0)(1,"div",1)(2,"div",2),E.NdJ("click",function(Me){return De.closeModal(Me)}),E._UZ(3,"div",3),E.qZA(),E.TgZ(4,"span",4),E._uU(5,"\u200b"),E.qZA(),E.TgZ(6,"div",5)(7,"div",6)(8,"div",7),E.Hsn(9),E.TgZ(10,"div",8),E.NdJ("click",function(Me){return De.closeModal(Me)}),E._uU(11," \u2715 "),E.qZA()(),E.Hsn(12,1),E.qZA()()()()),2&Ae&&E.Q6J("ngClass",E.VKq(1,Ne,!De.modal.isModalopen(De.modalID)))},dependencies:[ne.mk]})},4466:(Wt,et,W)=>{"use strict";W.d(et,{m:()=>F});var E=W(6895),ie=W(4006),ne=W(4650);class F{}F.\u0275fac=function(Be){return new(Be||F)},F.\u0275mod=ne.oAB({type:F}),F.\u0275inj=ne.cJS({imports:[E.ez,ie.UX]})},1517:(Wt,et,W)=>{"use strict";var E=W(1481),ie=W(5861),ne=W(9062),F=W(4650);class Ne{}Ne.\u0275fac=function(s){return new(s||Ne)},Ne.\u0275cmp=F.Xpm({type:Ne,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(s,l){1&s&&(F.TgZ(0,"p",0),F._uU(1," This is a basic about page to demonstrate basic routing capabilities. "),F.qZA())}});var Be=W(9226),ae=W.n(Be),He=W(1421),Ae=W.n(He);function De(){return De=Object.assign?Object.assign.bind():function(g){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(g[u]=l[u])}return g},De.apply(this,arguments)}function Ee(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function Me(g,s){return(Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,t){return u.__proto__=t,u})(g,s)}function $e(g,s){g.prototype=Object.create(s.prototype),g.prototype.constructor=g,Me(g,s)}var rt=W(8099),_t=W.n(rt),St=W(1234),Fe=W.n(St),ut=W(745),st=W.n(ut),Et=W(3629),Ve=W.n(Et);function Xe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gt(g,s,l){return(gt=Xe()?Reflect.construct.bind():function(t,a,h){var v=[null];v.push.apply(v,a);var P=new(Function.bind.apply(t,v));return h&&Me(P,h.prototype),P}).apply(null,arguments)}var xt=W(3871),X=W.n(xt),ve="http://example.com";const Le=function(s,l){if(/^[a-z]+:/i.test(l))return l;/^data:/.test(s)&&(s=ae().location&&ae().location.href||"");var u="function"==typeof ae().URL,t=/^\/\//.test(s),a=!ae().location&&!/\/\//i.test(s);if(u?s=new(ae().URL)(s,ae().location||ve):/\/\//i.test(s)||(s=X().buildAbsoluteURL(ae().location&&ae().location.href||"",s)),u){var h=new URL(l,s);return a?h.href.slice(ve.length):t?h.href.slice(h.protocol.length):h.href}return X().buildAbsoluteURL(s,l)};var Oe=function(){function g(){this.listeners={}}var s=g.prototype;return s.on=function(u,t){this.listeners[u]||(this.listeners[u]=[]),this.listeners[u].push(t)},s.off=function(u,t){if(!this.listeners[u])return!1;var a=this.listeners[u].indexOf(t);return this.listeners[u]=this.listeners[u].slice(0),this.listeners[u].splice(a,1),a>-1},s.trigger=function(u){var t=this.listeners[u];if(t)if(2===arguments.length)for(var a=t.length,h=0;h<a;++h)t[h].call(this,arguments[1]);else for(var v=Array.prototype.slice.call(arguments,1),S=t.length,P=0;P<S;++P)t[P].apply(this,v)},s.dispose=function(){this.listeners={}},s.pipe=function(u){this.on("data",function(t){u.push(t)})},g}();function dt(g){for(var s=function(s){return ae().atob?ae().atob(s):Buffer.from(s,"base64").toString("binary")}(g),l=new Uint8Array(s.length),u=0;u<s.length;u++)l[u]=s.charCodeAt(u);return l}var no,g,wt=function(g){function s(){var u;return(u=g.call(this)||this).buffer="",u}return $e(s,g),s.prototype.push=function(t){var a;for(this.buffer+=t,a=this.buffer.indexOf("\n");a>-1;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},s}(Oe),vt=String.fromCharCode(9),Mt=function(s){var l=/([0-9.]*)?@?([0-9.]*)?/.exec(s||""),u={};return l[1]&&(u.length=parseInt(l[1],10)),l[2]&&(u.offset=parseInt(l[2],10)),u},At=function(s){for(var a,l=s.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),u={},t=l.length;t--;)""!==l[t]&&((a=/([^=]*)=(.*)/.exec(l[t]).slice(1))[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),u[a[0]]=a[1]);return u},Yt=function(g){function s(){var u;return(u=g.call(this)||this).customParsers=[],u.tagMappers=[],u}$e(s,g);var l=s.prototype;return l.push=function(t){var h,v,a=this;if(0!==(t=t.trim()).length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce(function(P,H){var Y=H(t);return Y===t?P:P.concat([Y])},[t]).forEach(function(P){for(var H=0;H<a.customParsers.length;H++)if(a.customParsers[H].call(a,P))return;if(0===P.indexOf("#EXT"))if(P=P.replace("\r",""),h=/^#EXTM3U/.exec(P))a.trigger("data",{type:"tag",tagType:"m3u"});else{if(h=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(P))return v={type:"tag",tagType:"inf"},h[1]&&(v.duration=parseFloat(h[1])),h[2]&&(v.title=h[2]),void a.trigger("data",v);if(h=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(P))return v={type:"tag",tagType:"targetduration"},h[1]&&(v.duration=parseInt(h[1],10)),void a.trigger("data",v);if(h=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(P))return v={type:"tag",tagType:"version"},h[1]&&(v.version=parseInt(h[1],10)),void a.trigger("data",v);if(h=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(P))return v={type:"tag",tagType:"media-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void a.trigger("data",v);if(h=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(P))return v={type:"tag",tagType:"discontinuity-sequence"},h[1]&&(v.number=parseInt(h[1],10)),void a.trigger("data",v);if(h=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(P))return v={type:"tag",tagType:"playlist-type"},h[1]&&(v.playlistType=h[1]),void a.trigger("data",v);if(h=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(P))return v=De(Mt(h[1]),{type:"tag",tagType:"byterange"}),void a.trigger("data",v);if(h=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(P))return v={type:"tag",tagType:"allow-cache"},h[1]&&(v.allowed=!/NO/.test(h[1])),void a.trigger("data",v);if(h=/^#EXT-X-MAP:?(.*)$/.exec(P)){if(v={type:"tag",tagType:"map"},h[1]){var Y=At(h[1]);Y.URI&&(v.uri=Y.URI),Y.BYTERANGE&&(v.byterange=Mt(Y.BYTERANGE))}a.trigger("data",v)}else if(h=/^#EXT-X-STREAM-INF:?(.*)$/.exec(P)){if(v={type:"tag",tagType:"stream-inf"},h[1]){if(v.attributes=At(h[1]),v.attributes.RESOLUTION){var Z=v.attributes.RESOLUTION.split("x"),we={};Z[0]&&(we.width=parseInt(Z[0],10)),Z[1]&&(we.height=parseInt(Z[1],10)),v.attributes.RESOLUTION=we}v.attributes.BANDWIDTH&&(v.attributes.BANDWIDTH=parseInt(v.attributes.BANDWIDTH,10)),v.attributes["PROGRAM-ID"]&&(v.attributes["PROGRAM-ID"]=parseInt(v.attributes["PROGRAM-ID"],10))}a.trigger("data",v)}else{if(h=/^#EXT-X-MEDIA:?(.*)$/.exec(P))return v={type:"tag",tagType:"media"},h[1]&&(v.attributes=At(h[1])),void a.trigger("data",v);if(h=/^#EXT-X-ENDLIST/.exec(P))a.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(h=/^#EXT-X-DISCONTINUITY/.exec(P)))return(h=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(P))?(v={type:"tag",tagType:"program-date-time"},h[1]&&(v.dateTimeString=h[1],v.dateTimeObject=new Date(h[1])),void a.trigger("data",v)):(h=/^#EXT-X-KEY:?(.*)$/.exec(P))?(v={type:"tag",tagType:"key"},h[1]&&(v.attributes=At(h[1]),v.attributes.IV&&("0x"===v.attributes.IV.substring(0,2).toLowerCase()&&(v.attributes.IV=v.attributes.IV.substring(2)),v.attributes.IV=v.attributes.IV.match(/.{8}/g),v.attributes.IV[0]=parseInt(v.attributes.IV[0],16),v.attributes.IV[1]=parseInt(v.attributes.IV[1],16),v.attributes.IV[2]=parseInt(v.attributes.IV[2],16),v.attributes.IV[3]=parseInt(v.attributes.IV[3],16),v.attributes.IV=new Uint32Array(v.attributes.IV))),void a.trigger("data",v)):(h=/^#EXT-X-START:?(.*)$/.exec(P))?(v={type:"tag",tagType:"start"},h[1]&&(v.attributes=At(h[1]),v.attributes["TIME-OFFSET"]=parseFloat(v.attributes["TIME-OFFSET"]),v.attributes.PRECISE=/YES/.test(v.attributes.PRECISE)),void a.trigger("data",v)):(h=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(P))?((v={type:"tag",tagType:"cue-out-cont"}).data=h[1]?h[1]:"",void a.trigger("data",v)):(h=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(P))?((v={type:"tag",tagType:"cue-out"}).data=h[1]?h[1]:"",void a.trigger("data",v)):(h=/^#EXT-X-CUE-IN:?(.*)?$/.exec(P))?((v={type:"tag",tagType:"cue-in"}).data=h[1]?h[1]:"",void a.trigger("data",v)):(h=/^#EXT-X-SKIP:(.*)$/.exec(P))&&h[1]?((v={type:"tag",tagType:"skip"}).attributes=At(h[1]),v.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(v.attributes["SKIPPED-SEGMENTS"]=parseInt(v.attributes["SKIPPED-SEGMENTS"],10)),v.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(v.attributes["RECENTLY-REMOVED-DATERANGES"]=v.attributes["RECENTLY-REMOVED-DATERANGES"].split(vt)),void a.trigger("data",v)):(h=/^#EXT-X-PART:(.*)$/.exec(P))&&h[1]?((v={type:"tag",tagType:"part"}).attributes=At(h[1]),["DURATION"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseFloat(v.attributes[je]))}),["INDEPENDENT","GAP"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=/YES/.test(v.attributes[je]))}),v.attributes.hasOwnProperty("BYTERANGE")&&(v.attributes.byterange=Mt(v.attributes.BYTERANGE)),void a.trigger("data",v)):(h=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(P))&&h[1]?((v={type:"tag",tagType:"server-control"}).attributes=At(h[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseFloat(v.attributes[je]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=/YES/.test(v.attributes[je]))}),void a.trigger("data",v)):(h=/^#EXT-X-PART-INF:(.*)$/.exec(P))&&h[1]?((v={type:"tag",tagType:"part-inf"}).attributes=At(h[1]),["PART-TARGET"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseFloat(v.attributes[je]))}),void a.trigger("data",v)):(h=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(P))&&h[1]?((v={type:"tag",tagType:"preload-hint"}).attributes=At(h[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(je){if(v.attributes.hasOwnProperty(je)){v.attributes[je]=parseInt(v.attributes[je],10);var Pe="BYTERANGE-LENGTH"===je?"length":"offset";v.attributes.byterange=v.attributes.byterange||{},v.attributes.byterange[Pe]=v.attributes[je],delete v.attributes[je]}}),void a.trigger("data",v)):(h=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(P))&&h[1]?((v={type:"tag",tagType:"rendition-report"}).attributes=At(h[1]),["LAST-MSN","LAST-PART"].forEach(function(je){v.attributes.hasOwnProperty(je)&&(v.attributes[je]=parseInt(v.attributes[je],10))}),void a.trigger("data",v)):void a.trigger("data",{type:"tag",data:P.slice(4)});a.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else a.trigger("data",{type:"comment",text:P.slice(1)})})}},l.addParser=function(t){var a=this,h=t.expression,v=t.customType,S=t.dataParser,P=t.segment;"function"!=typeof S&&(S=function(Y){return Y}),this.customParsers.push(function(H){if(h.exec(H))return a.trigger("data",{type:"custom",data:S(H),customType:v,segment:P}),!0})},l.addTagMapper=function(t){var a=t.expression,h=t.map;this.tagMappers.push(function(P){return a.test(P)?h(P):P})},s}(Oe),ln=function(s){var l={};return Object.keys(s).forEach(function(u){l[function(s){return s.toLowerCase().replace(/-(\w)/g,function(l){return l[1].toUpperCase()})}(u)]=s[u]}),l},Zt=function(s){var l=s.serverControl,u=s.targetDuration,t=s.partTargetDuration;if(l){var a="#EXT-X-SERVER-CONTROL",h="holdBack",v="partHoldBack",S=u&&3*u,P=t&&2*t;u&&!l.hasOwnProperty(h)&&(l[h]=S,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+S+")."})),S&&l[h]<S&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+l[h]+") to targetDuration * 3 ("+S+")"}),l[h]=S),t&&!l.hasOwnProperty(v)&&(l[v]=3*t,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+l[v]+")."})),t&&l[v]<P&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+l[v]+") to partTargetDuration * 2 ("+P+")."}),l[v]=P)}},hn=function(g){function s(){var u;(u=g.call(this)||this).lineStream=new wt,u.parseStream=new Yt,u.lineStream.pipe(u.parseStream);var v,S,t=Ee(u),a=[],h={},P=!1,H=function(){},Y={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},we=0;u.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var je=0,Pe=0;return u.on("end",function(){h.uri||!h.parts&&!h.preloadHints||(!h.map&&v&&(h.map=v),!h.key&&S&&(h.key=S),!h.timeline&&"number"==typeof we&&(h.timeline=we),u.manifest.preloadSegment=h)}),u.parseStream.on("data",function(Re){var Bt,It;({tag:function(){({version:function(){Re.version&&(this.manifest.version=Re.version)},"allow-cache":function(){this.manifest.allowCache=Re.allowed,"allowed"in Re||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var Kt={};"length"in Re&&(h.byterange=Kt,Kt.length=Re.length,"offset"in Re||(Re.offset=je)),"offset"in Re&&(h.byterange=Kt,Kt.offset=Re.offset),je=Kt.offset+Kt.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),Re.duration>0&&(h.duration=Re.duration),0===Re.duration&&(h.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(Re.attributes)if("NONE"!==Re.attributes.METHOD)if(Re.attributes.URI){if("com.apple.streamingkeydelivery"===Re.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:Re.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===Re.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(Re.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===Re.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==Re.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):Re.attributes.KEYID&&"0x"===Re.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:Re.attributes.KEYFORMAT,keyId:Re.attributes.KEYID.substring(2)},pssh:dt(Re.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));Re.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),S={method:Re.attributes.METHOD||"AES-128",uri:Re.attributes.URI},typeof Re.attributes.IV<"u"&&(S.iv=Re.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else S=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(Re.number)?this.manifest.mediaSequence=Re.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+Re.number})},"discontinuity-sequence":function(){isFinite(Re.number)?(this.manifest.discontinuitySequence=Re.number,we=Re.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+Re.number})},"playlist-type":function(){/VOD|EVENT/.test(Re.playlistType)?this.manifest.playlistType=Re.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+Re.playlist})},map:function(){v={},Re.uri&&(v.uri=Re.uri),Re.byterange&&(v.byterange=Re.byterange),S&&(v.key=S)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||Y,Re.attributes?(h.attributes||(h.attributes={}),De(h.attributes,Re.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||Y,Re.attributes&&Re.attributes.TYPE&&Re.attributes["GROUP-ID"]&&Re.attributes.NAME){var Kt=this.manifest.mediaGroups[Re.attributes.TYPE];Kt[Re.attributes["GROUP-ID"]]=Kt[Re.attributes["GROUP-ID"]]||{},Bt=Kt[Re.attributes["GROUP-ID"]],(It={default:/yes/i.test(Re.attributes.DEFAULT)}).autoselect=!!It.default||/yes/i.test(Re.attributes.AUTOSELECT),Re.attributes.LANGUAGE&&(It.language=Re.attributes.LANGUAGE),Re.attributes.URI&&(It.uri=Re.attributes.URI),Re.attributes["INSTREAM-ID"]&&(It.instreamId=Re.attributes["INSTREAM-ID"]),Re.attributes.CHARACTERISTICS&&(It.characteristics=Re.attributes.CHARACTERISTICS),Re.attributes.FORCED&&(It.forced=/yes/i.test(Re.attributes.FORCED)),Bt[Re.attributes.NAME]=It}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){we+=1,h.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=Re.dateTimeString,this.manifest.dateTimeObject=Re.dateTimeObject),h.dateTimeString=Re.dateTimeString,h.dateTimeObject=Re.dateTimeObject},targetduration:function(){!isFinite(Re.duration)||Re.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+Re.duration}):(this.manifest.targetDuration=Re.duration,Zt.call(this,this.manifest))},start:function(){Re.attributes&&!isNaN(Re.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:Re.attributes["TIME-OFFSET"],precise:Re.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){h.cueOut=Re.data},"cue-out-cont":function(){h.cueOutCont=Re.data},"cue-in":function(){h.cueIn=Re.data},skip:function(){this.manifest.skip=ln(Re.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",Re.attributes,["SKIPPED-SEGMENTS"])},part:function(){var Kt=this;P=!0;var jn=this.manifest.segments.length,Hn=ln(Re.attributes);h.parts=h.parts||[],h.parts.push(Hn),Hn.byterange&&(Hn.byterange.hasOwnProperty("offset")||(Hn.byterange.offset=Pe),Pe=Hn.byterange.offset+Hn.byterange.length),this.warnOnMissingAttributes_("#EXT-X-PART #"+(h.parts.length-1)+" for segment #"+jn,Re.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(Xt,Ln){Xt.hasOwnProperty("lastPart")||Kt.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+Ln+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var Kt=this.manifest.serverControl=ln(Re.attributes);Kt.hasOwnProperty("canBlockReload")||(Kt.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Zt.call(this,this.manifest),Kt.canSkipDateranges&&!Kt.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var Kt=this.manifest.segments.length,jn=ln(Re.attributes),Hn=jn.type&&"PART"===jn.type;h.preloadHints=h.preloadHints||[],h.preloadHints.push(jn),jn.byterange&&(jn.byterange.hasOwnProperty("offset")||(jn.byterange.offset=Hn?Pe:0,Hn&&(Pe=jn.byterange.offset+jn.byterange.length)));var gn=h.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+gn+" for segment #"+Kt,Re.attributes,["TYPE","URI"]),jn.type)for(var Xt=0;Xt<h.preloadHints.length-1;Xt++){var Ln=h.preloadHints[Xt];!Ln.type||Ln.type===jn.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+gn+" for segment #"+Kt+" has the same TYPE "+jn.type+" as preload hint #"+Xt})}},"rendition-report":function(){var Kt=ln(Re.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(Kt);var jn=this.manifest.renditionReports.length-1,Hn=["LAST-MSN","URI"];P&&Hn.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+jn,Re.attributes,Hn)},"part-inf":function(){this.manifest.partInf=ln(Re.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",Re.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Zt.call(this,this.manifest)}}[Re.tagType]||H).call(t)},uri:function(){h.uri=Re.uri,a.push(h),this.manifest.targetDuration&&!("duration"in h)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),h.duration=this.manifest.targetDuration),S&&(h.key=S),h.timeline=we,v&&(h.map=v),Pe=0,h={}},comment:function(){},custom:function(){Re.segment?(h.custom=h.custom||{},h.custom[Re.customType]=Re.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[Re.customType]=Re.data)}})[Re.type].call(t)}),u}$e(s,g);var l=s.prototype;return l.warnOnMissingAttributes_=function(t,a,h){var v=[];h.forEach(function(S){a.hasOwnProperty(S)||v.push(S)}),v.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+v.join(", ")})},l.push=function(t){this.lineStream.push(t)},l.end=function(){this.lineStream.push("\n"),this.trigger("end")},l.addParser=function(t){this.parseStream.addParser(t)},l.addTagMapper=function(t){this.parseStream.addTagMapper(t)},s}(Oe),Gt={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},rr=["video","audio","text"],Wn=["Video","Audio","Text"],Er=function(s){return s&&s.replace(/avc1\.(\d+)\.(\d+)/i,function(l,u,t){return"avc1."+("00"+Number(u).toString(16)).slice(-2)+"00"+("00"+Number(t).toString(16)).slice(-2)})},or=function(s){void 0===s&&(s="");var l=s.split(","),u=[];return l.forEach(function(t){var a;t=t.trim(),rr.forEach(function(h){var v=Gt[h].exec(t.toLowerCase());if(v&&!(v.length<=1)){a=h;var S=t.substring(0,v[1].length),P=t.replace(S,"");u.push({type:S,details:P,mediaType:h})}}),a||u.push({type:t,details:"",mediaType:"unknown"})}),u},zr=function(s){return void 0===s&&(s=""),Gt.audio.test(s.trim().toLowerCase())},xn=function(s){if(s&&"string"==typeof s){var l=s.toLowerCase().split(",").map(function(a){return Er(a.trim())}),u="video";1===l.length&&zr(l[0])?u="audio":1===l.length&&function(s){return void 0===s&&(s=""),Gt.text.test(s.trim().toLowerCase())}(l[0])&&(u="application");var t="mp4";return l.every(function(a){return Gt.mp4.test(a)})?t="mp4":l.every(function(a){return Gt.webm.test(a)})?t="webm":l.every(function(a){return Gt.ogg.test(a)})&&(t="ogg"),u+"/"+t+';codecs="'+s+'"'}},mr=function(s){return void 0===s&&(s=""),ae().MediaSource&&ae().MediaSource.isTypeSupported&&ae().MediaSource.isTypeSupported(xn(s))||!1},yn=function(s){return void 0===s&&(s=""),s.toLowerCase().split(",").every(function(l){l=l.trim();for(var u=0;u<Wn.length;u++)if(Gt["muxer"+Wn[u]].test(l))return!0;return!1})},xi="mp4a.40.2",xr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,gi=/^application\/dash\+xml/i,Ei=function(s){return xr.test(s)?"hls":gi.test(s)?"dash":"application/vnd.videojs.vhs+json"===s?"vhs-json":null},ur=W(978),Jn=function(s){return!!s&&"object"==typeof s},ui=function g(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return l.reduce(function(t,a){return"object"!=typeof a||Object.keys(a).forEach(function(h){t[h]=Array.isArray(t[h])&&Array.isArray(a[h])?t[h].concat(a[h]):Jn(t[h])&&Jn(a[h])?g(t[h],a[h]):a[h]}),t},{})},wi=function(s){return s.reduce(function(l,u){return l.concat(u)},[])},ki=function(s){if(!s.length)return[];for(var l=[],u=0;u<s.length;u++)l.push(s[u]);return l},li=function(s){var l=s.baseUrl,t=s.source,a=void 0===t?"":t,h=s.range,v=void 0===h?"":h,S=s.indexRange,P=void 0===S?"":S,H={uri:a,resolvedUri:Le((void 0===l?"":l)||"",a)};if(v||P){var Z=(v||P).split("-"),we=parseInt(Z[0],10),je=parseInt(Z[1],10);H.byterange={length:je-we+1,offset:we}}return H},si=function(s){return s&&"number"!=typeof s&&(s=parseInt(s,10)),isNaN(s)?null:s},Hi={static:function(s){var l=s.duration,u=s.timescale,t=void 0===u?1:u,a=s.sourceDuration,h=s.periodDuration,v=si(s.endNumber),S=l/t;return"number"==typeof v?{start:0,end:v}:"number"==typeof h?{start:0,end:h/S}:{start:0,end:a/S}},dynamic:function(s){var l=s.NOW,u=s.clientOffset,t=s.availabilityStartTime,a=s.timescale,h=void 0===a?1:a,v=s.duration,S=s.start,P=void 0===S?0:S,H=s.minimumUpdatePeriod,Y=void 0===H?0:H,Z=s.timeShiftBufferDepth,we=void 0===Z?1/0:Z,je=si(s.endNumber),Pe=(l+u)/1e3,Re=t+P,tn=Math.ceil((Pe+Y-Re)*h/v),on=Math.floor((Pe-Re-we)*h/v),Kt=Math.floor((Pe-Re)*h/v);return{start:Math.max(0,on),end:"number"==typeof je?je:Math.min(tn,Kt)}}},zt=function(s){var l=s.type,u=s.duration,t=s.timescale,a=void 0===t?1:t,h=s.periodDuration,v=s.sourceDuration,S=Hi[l](s),Y=function(s,l){for(var u=[],t=s;t<l;t++)u.push(t);return u}(S.start,S.end).map(function(s){return function(l,u){var t=s.duration,a=s.timescale,S=s.startNumber;return{number:(void 0===S?1:S)+l,duration:t/(void 0===a?1:a),timeline:s.periodIndex,time:u*t}}}(s));if("static"===l){var Z=Y.length-1;Y[Z].duration=("number"==typeof h?h:v)-u/a*Z}return Y},Cn=function(s){var l=s.baseUrl,u=s.initialization,t=void 0===u?{}:u,a=s.sourceDuration,h=s.indexRange,v=void 0===h?"":h,S=s.duration;if(!l)throw new Error("NO_BASE_URL");var P=li({baseUrl:l,source:t.sourceURL,range:t.range}),H=li({baseUrl:l,source:l,indexRange:v});if(H.map=P,S){var Y=zt(s);Y.length&&(H.duration=Y[0].duration,H.timeline=Y[0].timeline)}else a&&(H.duration=a,H.timeline=0);return H.number=0,[H]},er=function(s,l,u){for(var t=s.sidx.map?s.sidx.map:null,a=s.sidx.duration,h=s.timeline||0,v=s.sidx.byterange,S=v.offset+v.length,P=l.timescale,H=l.references.filter(function(jn){return 1!==jn.referenceType}),Y=[],Z=s.endList?"static":"dynamic",we=S+l.firstOffset,je=0;je<H.length;je++){var Pe=l.references[je],Re=Pe.referencedSize,Kt=Cn({baseUrl:u,timescale:P,timeline:h,periodIndex:h,duration:Pe.subsegmentDuration,sourceDuration:a,indexRange:we+"-"+(we+Re-1),type:Z})[0];t&&(Kt.map=t),Y.push(Kt),we+=Re}return s.segments=Y,s},$n=function(s){return s&&s.uri+"-"+function(s){return s.offset+"-"+(s.offset+s.length-1)}(s.byterange)},Vn=function(s){return function(s){return Object.keys(s).map(function(l){return s[l]})}(s.reduce(function(u,t){var h,a=t.attributes.id+(t.attributes.lang||"");return u[a]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(h=u[a].segments).push.apply(h,t.segments),t.attributes.contentProtection&&(u[a].attributes.contentProtection=t.attributes.contentProtection)):u[a]=t,u},{})).map(function(u){return u.discontinuityStarts=function(s,l){return s.reduce(function(u,t,a){return t.discontinuity&&u.push(a),u},[])}(u.segments),u})},Qe=function(s,l){var u=$n(s.sidx),t=u&&l[u]&&l[u].sidx;return t&&er(s,t,s.sidx.resolvedUri),s},Ye=function(s,l){if(void 0===l&&(l={}),!Object.keys(l).length)return s;for(var u in s)s[u]=Qe(s[u],l);return s},Br=function(s){var l,u=s.attributes,t=s.segments,a=s.sidx,h={attributes:(l={NAME:u.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:u.width,height:u.height},CODECS:u.codecs,BANDWIDTH:u.bandwidth},l["PROGRAM-ID"]=1,l),uri:"",endList:"static"===u.type,timeline:u.periodIndex,resolvedUri:"",targetDuration:u.duration,segments:t,mediaSequence:t.length?t[0].number:1};return u.contentProtection&&(h.contentProtection=u.contentProtection),a&&(h.sidx=a),h},mi=function(s){var l=s.attributes;return"video/mp4"===l.mimeType||"video/webm"===l.mimeType||"video"===l.contentType},pe=function(s){var l=s.attributes;return"audio/mp4"===l.mimeType||"audio/webm"===l.mimeType||"audio"===l.contentType},re=function(s){var l=s.attributes;return"text/vtt"===l.mimeType||"text"===l.contentType},me=function(s,l,u){var v=s.timescale,P=s.start,Y=s.minimumUpdatePeriod;return Math.ceil((((s.NOW+s.clientOffset)/1e3+(void 0===Y?0:Y)-(s.availabilityStartTime+(void 0===P?0:P)))*(void 0===v?1:v)-l)/u)},ze=function(s,l){for(var u=s.type,t=s.minimumUpdatePeriod,a=void 0===t?0:t,h=s.media,v=void 0===h?"":h,S=s.sourceDuration,P=s.timescale,H=void 0===P?1:P,Y=s.startNumber,Z=void 0===Y?1:Y,we=s.periodIndex,je=[],Pe=-1,Re=0;Re<l.length;Re++){var Bt=l[Re],It=Bt.d,tn=Bt.r||0,on=Bt.t||0;Pe<0&&(Pe=on),on&&on>Pe&&(Pe=on);var Kt=void 0;if(tn<0){var jn=Re+1;Kt=jn===l.length?"dynamic"===u&&a>0&&v.indexOf("$Number$")>0?me(s,Pe,It):(S*H-Pe)/It:(l[jn].t-Pe)/It}else Kt=tn+1;for(var Hn=Z+je.length+Kt,gn=Z+je.length;gn<Hn;)je.push({number:gn,duration:It/H,time:Pe,timeline:we}),Pe+=It,gn++}return je},bt=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,On=function(s,l){return s.replace(bt,function(s){return function(l,u,t,a){if("$$"===l)return"$";if(typeof s[u]>"u")return l;var h=""+s[u];return"RepresentationID"===u||(a=t?parseInt(a,10):1,h.length>=a)?h:""+new Array(a-h.length+1).join("0")+h}}(l))},Nr=function(s,l){var u={RepresentationID:s.id,Bandwidth:s.bandwidth||0},t=s.initialization,a=void 0===t?{sourceURL:"",range:""}:t,h=li({baseUrl:s.baseUrl,source:On(a.sourceURL,u),range:a.range}),v=function(s,l){return s.duration||l?s.duration?zt(s):ze(s,l):[{number:s.startNumber||1,duration:s.sourceDuration,time:0,timeline:s.periodIndex}]}(s,l);return v.map(function(S){u.Number=S.number,u.Time=S.time;var P=On(s.media||"",u),Z=s.periodStart+(S.time-(s.presentationTimeOffset||0))/(s.timescale||1);return{uri:P,timeline:S.timeline,duration:S.duration,resolvedUri:Le(s.baseUrl||"",P),map:h,number:S.number,presentationTime:Z}})},Yi=function(s,l){var u=s.duration,t=s.segmentUrls,a=void 0===t?[]:t,h=s.periodStart;if(!u&&!l||u&&l)throw new Error("SEGMENT_TIME_UNSPECIFIED");var S,v=a.map(function(H){return function(s,l){var u=s.baseUrl,t=s.initialization,a=void 0===t?{}:t,h=li({baseUrl:u,source:a.sourceURL,range:a.range}),v=li({baseUrl:u,source:l.media,range:l.mediaRange});return v.map=h,v}(s,H)});return u&&(S=zt(s)),l&&(S=ze(s,l)),S.map(function(H,Y){if(v[Y]){var Z=v[Y],we=s.timescale||1,je=s.presentationTimeOffset||0;return Z.timeline=H.timeline,Z.duration=H.duration,Z.number=H.number,Z.presentationTime=h+(H.time-je)/we,Z}}).filter(function(H){return H})},Zr=function(s){var t,a,l=s.attributes,u=s.segmentInfo;u.template?(a=Nr,t=ui(l,u.template)):u.base?(a=Cn,t=ui(l,u.base)):u.list&&(a=Yi,t=ui(l,u.list));var h={attributes:l};if(!a)return h;var v=a(t,u.segmentTimeline);if(t.duration){var H=t.timescale;t.duration=t.duration/(void 0===H?1:H)}else t.duration=v.length?v.reduce(function(Z,we){return Math.max(Z,Math.ceil(we.duration))},0):0;return h.attributes=t,h.segments=v,u.base&&t.indexRange&&(h.sidx=v[0],h.segments=[]),h},Lr=function(s,l){return ki(s.childNodes).filter(function(u){return u.tagName===l})},ns=function(s){return s.textContent.trim()},rs=function(s){var S=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(s);if(!S)return 0;var P=S.slice(1),Y=P[1],Z=P[2],we=P[3],je=P[4],Pe=P[5];return 31536e3*parseFloat(P[0]||0)+2592e3*parseFloat(Y||0)+86400*parseFloat(Z||0)+3600*parseFloat(we||0)+60*parseFloat(je||0)+parseFloat(Pe||0)},Gi={mediaPresentationDuration:function(s){return rs(s)},availabilityStartTime:function(s){return function(s){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(s)&&(s+="Z"),Date.parse(s)}(s)/1e3},minimumUpdatePeriod:function(s){return rs(s)},suggestedPresentationDelay:function(s){return rs(s)},type:function(s){return s},timeShiftBufferDepth:function(s){return rs(s)},start:function(s){return rs(s)},width:function(s){return parseInt(s,10)},height:function(s){return parseInt(s,10)},bandwidth:function(s){return parseInt(s,10)},startNumber:function(s){return parseInt(s,10)},timescale:function(s){return parseInt(s,10)},presentationTimeOffset:function(s){return parseInt(s,10)},duration:function(s){var l=parseInt(s,10);return isNaN(l)?rs(s):l},d:function(s){return parseInt(s,10)},t:function(s){return parseInt(s,10)},r:function(s){return parseInt(s,10)},DEFAULT:function(s){return s}},Rr=function(s){return s&&s.attributes?ki(s.attributes).reduce(function(l,u){return l[u.name]=(Gi[u.name]||Gi.DEFAULT)(u.value),l},{}):{}},Mi={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},is=function(s,l){return l.length?wi(s.map(function(u){return l.map(function(t){return Le(u,ns(t))})})):s},ps=function(s){var l=Lr(s,"SegmentTemplate")[0],u=Lr(s,"SegmentList")[0],t=u&&Lr(u,"SegmentURL").map(function(Z){return ui({tag:"SegmentURL"},Rr(Z))}),a=Lr(s,"SegmentBase")[0],h=u||l,v=h&&Lr(h,"SegmentTimeline")[0],S=u||a||l,P=S&&Lr(S,"Initialization")[0],H=l&&Rr(l);H&&P?H.initialization=P&&Rr(P):H&&H.initialization&&(H.initialization={sourceURL:H.initialization});var Y={template:H,segmentTimeline:v&&Lr(v,"S").map(function(Z){return Rr(Z)}),list:u&&ui(Rr(u),{segmentUrls:t,initialization:Rr(P)}),base:a&&ui(Rr(a),{initialization:Rr(P)})};return Object.keys(Y).forEach(function(Z){Y[Z]||delete Y[Z]}),Y},ss=function(s,l){return function(u,t){var a=is(l,Lr(u.node,"BaseURL")),h=parseInt(u.attributes.id,10),v=ae().isNaN(h)?t:h,S=ui(s,{periodIndex:v,periodStart:u.attributes.start});"number"==typeof u.attributes.duration&&(S.periodDuration=u.attributes.duration);var P=Lr(u.node,"AdaptationSet"),H=ps(u.node);return wi(P.map(function(s,l,u){return function(t){var a=Rr(t),h=is(l,Lr(t,"BaseURL")),v=Lr(t,"Role")[0],S={role:Rr(v)},P=ui(s,a,S),H=Lr(t,"Accessibility")[0],Y=function(s){return"urn:scte:dash:cc:cea-608:2015"===s.schemeIdUri?s.value.split(";").map(function(t){var a,h;if(h=t,/^CC\d=/.test(t)){var v=t.split("=");a=v[0],h=v[1]}else/^CC\d$/.test(t)&&(a=t);return{channel:a,language:h}}):"urn:scte:dash:cc:cea-708:2015"===s.schemeIdUri?s.value.split(";").map(function(t){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var h=t.split("="),S=h[1],P=void 0===S?"":S;a.channel=h[0],a.language=t,P.split(",").forEach(function(H){var Y=H.split(":"),Z=Y[0],we=Y[1];"lang"===Z?a.language=we:"er"===Z?a.easyReader=Number(we):"war"===Z?a.aspectRatio=Number(we):"3D"===Z&&(a["3D"]=Number(we))})}else a.language=t;return a.channel&&(a.channel="SERVICE"+a.channel),a}):void 0}(Rr(H));Y&&(P=ui(P,{captionServices:Y}));var Z=Lr(t,"Label")[0];if(Z&&Z.childNodes.length){var we=Z.childNodes[0].nodeValue.trim();P=ui(P,{label:we})}var je=function(s){return s.reduce(function(l,u){var t=Rr(u),a=Mi[t.schemeIdUri];if(a){l[a]={attributes:t};var h=Lr(u,"cenc:pssh")[0];if(h){var v=ns(h),S=v&&dt(v);l[a].pssh=S}}return l},{})}(Lr(t,"ContentProtection"));Object.keys(je).length&&(P=ui(P,{contentProtection:je}));var Pe=ps(t),Re=Lr(t,"Representation"),Bt=ui(u,Pe);return wi(Re.map(function(s,l,u){return function(t){var a=Lr(t,"BaseURL"),h=is(l,a),v=ui(s,Rr(t)),S=ps(t);return h.map(function(P){return{segmentInfo:ui(u,S),attributes:ui(v,{baseUrl:P})}})}}(P,h,Bt)))}}(S,a,H)))}},vi=function(s){if(""===s)throw new Error("DASH_EMPTY_MANIFEST");var u,t,l=new ur.DOMParser;try{t=(u=l.parseFromString(s,"application/xml"))&&"MPD"===u.documentElement.tagName?u.documentElement:null}catch{}if(!t||t&&t.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return t},Cr=function(s,l){void 0===l&&(l={});var u=function(s,l){void 0===l&&(l={});var u=l,t=u.manifestUri,a=void 0===t?"":t,h=u.NOW,v=void 0===h?Date.now():h,S=u.clientOffset,P=void 0===S?0:S,H=Lr(s,"Period");if(!H.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var Y=Lr(s,"Location"),Z=Rr(s),we=is([a],Lr(s,"BaseURL"));Z.type=Z.type||"static",Z.sourceDuration=Z.mediaPresentationDuration||0,Z.NOW=v,Z.clientOffset=P,Y.length&&(Z.locations=Y.map(ns));var je=[];return H.forEach(function(Pe,Re){var Bt=Rr(Pe),It=je[Re-1];Bt.start=function(s){var l=s.attributes,u=s.priorPeriodAttributes;return"number"==typeof l.start?l.start:u&&"number"==typeof u.start&&"number"==typeof u.duration?u.start+u.duration:u||"static"!==s.mpdType?null:0}({attributes:Bt,priorPeriodAttributes:It?It.attributes:null,mpdType:Z.type}),je.push({node:Pe,attributes:Bt})}),{locations:Z.locations,representationInfo:wi(je.map(ss(Z,we)))}}(vi(s),l),t=function(s){return s.map(Zr)}(u.representationInfo);return function(s,l,u){var t;if(void 0===u&&(u={}),!s.length)return{};var a=s[0].attributes,h=a.sourceDuration,v=a.type,S=a.suggestedPresentationDelay,P=a.minimumUpdatePeriod,H=Vn(s.filter(mi)).map(Br),Y=Vn(s.filter(pe)),Z=s.filter(re),we=s.map(function(Re){return Re.attributes.captionServices}).filter(Boolean),je={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:h,playlists:Ye(H,u)};return P>=0&&(je.minimumUpdatePeriod=1e3*P),l&&(je.locations=l),"dynamic"===v&&(je.suggestedPresentationDelay=S),Y.length&&(je.mediaGroups.AUDIO.audio=function(s,l,u){void 0===l&&(l={}),void 0===u&&(u=!1);var t,a=s.reduce(function(v,S){var P=S.attributes.role&&S.attributes.role.value||"",H=S.attributes.lang||"",Y=S.attributes.label||"main";H&&!S.attributes.label&&(Y=S.attributes.lang+(P?" ("+P+")":"")),v[Y]||(v[Y]={language:H,autoselect:!0,default:"main"===P,playlists:[],uri:""});var we=Qe(function(s,l){var u,t=s.attributes,a=s.segments,h=s.sidx,v={attributes:(u={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},u["PROGRAM-ID"]=1,u),uri:"",endList:"static"===t.type,timeline:t.periodIndex,resolvedUri:"",targetDuration:t.duration,segments:a,mediaSequence:a.length?a[0].number:1};return t.contentProtection&&(v.contentProtection=t.contentProtection),h&&(v.sidx=h),l&&(v.attributes.AUDIO="audio",v.attributes.SUBTITLES="subs"),v}(S,u),l);return v[Y].playlists.push(we),typeof t>"u"&&"main"===P&&((t=S).default=!0),v},{});return t||(a[Object.keys(a)[0]].default=!0),a}(Y,u,0===je.playlists.length)),Z.length&&(je.mediaGroups.SUBTITLES.subs=function(s,l){return void 0===l&&(l={}),s.reduce(function(u,t){var a=t.attributes.lang||"text";return u[a]||(u[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),u[a].playlists.push(Qe(function(s){var l,u=s.attributes,t=s.segments;typeof t>"u"&&(t=[{uri:u.baseUrl,timeline:u.periodIndex,resolvedUri:u.baseUrl||"",duration:u.sourceDuration,number:0}],u.duration=u.sourceDuration);var a=((l={NAME:u.id,BANDWIDTH:u.bandwidth})["PROGRAM-ID"]=1,l);return u.codecs&&(a.CODECS=u.codecs),{attributes:a,uri:"",endList:"static"===u.type,timeline:u.periodIndex,resolvedUri:u.baseUrl||"",targetDuration:u.duration,segments:t,mediaSequence:t.length?t[0].number:1}}(t),l)),u},{})}(Z,u)),we.length&&(je.mediaGroups["CLOSED-CAPTIONS"].cc=function(s){return s.reduce(function(l,u){return u&&u.forEach(function(t){var h=t.language;l[h]={autoselect:!1,default:!1,instreamId:t.channel,language:h},t.hasOwnProperty("aspectRatio")&&(l[h].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(l[h].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(l[h]["3D"]=t["3D"])}),l},{})}(we)),je}(t,u.locations,l.sidxMapping)},co=W(7459),wu=W.n(co),vn=function(s){return s instanceof Uint8Array?s:(!Array.isArray(s)&&!function(s){return function(s){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer}(s)}(s)&&!(s instanceof ArrayBuffer)&&(s="number"!=typeof s||"number"==typeof s&&s!=s?0:[s]),new Uint8Array(s&&s.buffer||s,s&&s.byteOffset||0,s&&s.byteLength||0))},ft=ae().BigInt||Number,Qt=[ft("0x1"),ft("0x100"),ft("0x10000"),ft("0x1000000"),ft("0x100000000"),ft("0x10000000000"),ft("0x1000000000000"),ft("0x100000000000000"),ft("0x10000000000000000")],Pr=(g=new Uint16Array([65484]),new Uint8Array(g.buffer,g.byteOffset,g.byteLength),function(s,l){var u=void 0===l?{}:l,t=u.signed,a=void 0!==t&&t,h=u.le,v=void 0!==h&&h;s=vn(s);var S=v?"reduce":"reduceRight",H=(s[S]?s[S]:Array.prototype[S]).call(s,function(Z,we,je){var Pe=v?je:Math.abs(je+1-s.length);return Z+ft(we)*Qt[Pe]},ft(0));if(a){var Y=Qt[s.length]/ft(2)-ft(1);(H=ft(H))>Y&&(H-=Y,H-=Y,H-=ft(2))}return Number(H)}),gs=function(s,l){if("string"!=typeof s&&s&&"function"==typeof s.toString&&(s=s.toString()),"string"!=typeof s)return new Uint8Array;l||(s=unescape(encodeURIComponent(s)));for(var u=new Uint8Array(s.length),t=0;t<s.length;t++)u[t]=s.charCodeAt(t);return u},Vr=function(s,l,u){var t=void 0===u?{}:u,a=t.offset,h=void 0===a?0:a,v=t.mask,S=void 0===v?[]:v;return s=vn(s),(l=vn(l)).length&&s.length-h>=l.length&&(l.every?l.every:Array.prototype.every).call(l,function(H,Y){return H===(S[Y]?S[Y]&s[h+Y]:s[h+Y])})},Yo=vn([73,68,51]),Lo=function g(s,l){return void 0===l&&(l=0),(s=vn(s)).length-l<10||!Vr(s,Yo,{offset:l})?l:(l+=function(s,l){void 0===l&&(l=0);var t=(s=vn(s))[l+6]<<21|s[l+7]<<14|s[l+8]<<7|s[l+9];return(16&s[l+5])>>4?t+20:t+10}(s,l),g(s,l))},jo=(new Uint8Array([79,112,117,115,72,101,97,100]),function(s){return"string"==typeof s?gs(s):s}),zs=function(s){s=vn(s);for(var l=[],u=0;s.length>u;){var t=s[u],a=0,h=0,v=s[++h];for(h++;128&v;)a=(127&v)<<7,v=s[h],h++;a+=127&v;for(var S=0;S<no.length;S++){var P=no[S];if(t===P.id){l.push((0,P.parser)(s.subarray(h,h+a)));break}}u+=a+h}return l};no=[{id:3,parser:function(s){var l={tag:3,id:s[0]<<8|s[1],flags:s[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&l.flags&&(l.dependsOnEsId=s[l.size]<<8|s[l.size+1],l.size+=2),64&l.flags){var u=s[l.size];l.url=function(s){if(!s)return"";s=Array.prototype.slice.call(s);var l=String.fromCharCode.apply(null,vn(s));try{return decodeURIComponent(escape(l))}catch{}return l}(s.subarray(l.size+1,l.size+1+u)),l.size+=u}return 32&l.flags&&(l.ocrEsId=s[l.size]<<8|s[l.size+1],l.size+=2),l.descriptors=zs(s.subarray(l.size))||[],l}},{id:4,parser:function(s){return{tag:4,oti:s[0],streamType:s[1],bufferSize:s[2]<<16|s[3]<<8|s[4],maxBitrate:s[5]<<24|s[6]<<16|s[7]<<8|s[8],avgBitrate:s[9]<<24|s[10]<<16|s[11]<<8|s[12],descriptors:zs(s.subarray(13))}}},{id:5,parser:function(s){return{tag:5,bytes:s}}},{id:6,parser:function(s){return{tag:6,bytes:s}}}];var Us=function g(s,l,u){void 0===u&&(u=!1),l=function(s){return Array.isArray(s)?s.map(function(l){return jo(l)}):[jo(s)]}(l),s=vn(s);var t=[];if(!l.length)return t;for(var a=0;a<s.length;){var h=(s[a]<<24|s[a+1]<<16|s[a+2]<<8|s[a+3])>>>0,v=s.subarray(a+4,a+8);if(0===h)break;var S=a+h;if(S>s.length){if(u)break;S=s.length}var P=s.subarray(a+8,S);Vr(v,l[0])&&(1===l.length?t.push(P):t.push.apply(t,g(P,l.slice(1),u))),a=S}return t},Yr={EBML:vn([26,69,223,163]),DocType:vn([66,130]),Segment:vn([24,83,128,103]),SegmentInfo:vn([21,73,169,102]),Tracks:vn([22,84,174,107]),Track:vn([174]),TrackNumber:vn([215]),DefaultDuration:vn([35,227,131]),TrackEntry:vn([174]),TrackType:vn([131]),FlagDefault:vn([136]),CodecID:vn([134]),CodecPrivate:vn([99,162]),VideoTrack:vn([224]),AudioTrack:vn([225]),Cluster:vn([31,67,182,117]),Timestamp:vn([231]),TimestampScale:vn([42,215,177]),BlockGroup:vn([160]),BlockDuration:vn([155]),Block:vn([161]),SimpleBlock:vn([163])},Js=[128,64,32,16,8,4,2,1],hi=function(s,l,u,t){void 0===u&&(u=!0),void 0===t&&(t=!1);var a=function(s){for(var l=1,u=0;u<Js.length&&!(s&Js[u]);u++)l++;return l}(s[l]),h=s.subarray(l,l+a);return u&&((h=Array.prototype.slice.call(s,l,l+a))[0]^=Js[a-1]),{length:a,value:Pr(h,{signed:t}),bytes:h}},fo=function g(s){return"string"==typeof s?s.match(/.{1,2}/g).map(function(l){return g(l)}):"number"==typeof s?function(s,l){var t=(void 0===l?{}:l).le,a=void 0!==t&&t;("bigint"!=typeof s&&"number"!=typeof s||"number"==typeof s&&s!=s)&&(s=0);for(var h=function(s){return Math.ceil(function(s){return s.toString(2).length}(s)/8)}(s=ft(s)),v=new Uint8Array(new ArrayBuffer(h)),S=0;S<h;S++){var P=a?S:Math.abs(S+1-v.length);v[P]=Number(s/Qt[S]&ft(255)),s<0&&(v[P]=Math.abs(~v[P]),v[P]-=0===S?1:2)}return v}(s):s},Jo=function g(s,l,u){if(u>=l.length)return l.length;var t=hi(l,u,!1);if(Vr(s.bytes,t.bytes))return u;var a=hi(l,u+t.length);return g(s,l,u+a.length+a.value+t.length)},fi=function g(s,l){l=function(s){return Array.isArray(s)?s.map(function(l){return fo(l)}):[fo(s)]}(l),s=vn(s);var u=[];if(!l.length)return u;for(var t=0;t<s.length;){var a=hi(s,t,!1),h=hi(s,t+a.length),v=t+a.length+h.length;127===h.value&&(h.value=Jo(a,s,v),h.value!==s.length&&(h.value-=v));var P=s.subarray(v,v+h.value>s.length?s.length:v+h.value);Vr(l[0],a.bytes)&&(1===l.length?u.push(P):u=u.concat(g(P,l.slice(1)))),t+=a.length+h.length+P.length}return u},zi=vn([0,0,0,1]),_i=vn([0,0,1]),eo=vn([0,0,3]),cs=function(s){for(var l=[],u=1;u<s.length-2;)Vr(s.subarray(u,u+3),eo)&&(l.push(u+2),u++),u++;if(0===l.length)return s;var t=s.length-l.length,a=new Uint8Array(t),h=0;for(u=0;u<t;h++,u++)h===l[0]&&(h++,l.shift()),a[u]=s[h];return a},Ao=function(s,l,u,t){void 0===t&&(t=1/0),s=vn(s),u=[].concat(u);for(var h,a=0,v=0;a<s.length&&(v<t||h);){var S=void 0;if(Vr(s.subarray(a),zi)?S=4:Vr(s.subarray(a),_i)&&(S=3),S){if(v++,h)return cs(s.subarray(h,a));var P=void 0;"h264"===l?P=31&s[a+S]:"h265"===l&&(P=s[a+S]>>1&63),-1!==u.indexOf(P)&&(h=a+S),a+=S+("h264"===l?1:2)}else a++}return s.subarray(0,0)},Ws={webm:vn([119,101,98,109]),matroska:vn([109,97,116,114,111,115,107,97]),flac:vn([102,76,97,67]),ogg:vn([79,103,103,83]),ac3:vn([11,119]),riff:vn([82,73,70,70]),avi:vn([65,86,73]),wav:vn([87,65,86,69]),"3gp":vn([102,116,121,112,51,103]),mp4:vn([102,116,121,112]),fmp4:vn([115,116,121,112]),mov:vn([102,116,121,112,113,116]),moov:vn([109,111,111,118]),moof:vn([109,111,111,102])},Rs={aac:function(s){var l=Lo(s);return Vr(s,[255,16],{offset:l,mask:[255,22]})},mp3:function(s){var l=Lo(s);return Vr(s,[255,2],{offset:l,mask:[255,6]})},webm:function(s){var l=fi(s,[Yr.EBML,Yr.DocType])[0];return Vr(l,Ws.webm)},mkv:function(s){var l=fi(s,[Yr.EBML,Yr.DocType])[0];return Vr(l,Ws.matroska)},mp4:function(s){return!Rs["3gp"](s)&&!Rs.mov(s)&&(!!(Vr(s,Ws.mp4,{offset:4})||Vr(s,Ws.fmp4,{offset:4})||Vr(s,Ws.moof,{offset:4})||Vr(s,Ws.moov,{offset:4}))||void 0)},mov:function(s){return Vr(s,Ws.mov,{offset:4})},"3gp":function(s){return Vr(s,Ws["3gp"],{offset:4})},ac3:function(s){var l=Lo(s);return Vr(s,Ws.ac3,{offset:l})},ts:function(s){if(s.length<189&&s.length>=1)return 71===s[0];for(var l=0;l+188<s.length&&l<188;){if(71===s[l]&&71===s[l+188])return!0;l+=1}return!1},flac:function(s){var l=Lo(s);return Vr(s,Ws.flac,{offset:l})},ogg:function(s){return Vr(s,Ws.ogg)},avi:function(s){return Vr(s,Ws.riff)&&Vr(s,Ws.avi,{offset:8})},wav:function(s){return Vr(s,Ws.riff)&&Vr(s,Ws.wav,{offset:8})},h264:function(s){return function(s,l,u){return Ao(s,"h264",7,3)}(s).length},h265:function(s){return function(s,l,u){return Ao(s,"h265",[32,33],3)}(s).length}},Ks=Object.keys(Rs).filter(function(g){return"ts"!==g&&"h264"!==g&&"h265"!==g}).concat(["ts","h264","h265"]);Ks.forEach(function(g){var s=Rs[g];Rs[g]=function(l){return s(vn(l))}});for(var ce,Ns=Rs,ea=function(s){s=vn(s);for(var l=0;l<Ks.length;l++){var u=Ks[l];if(Ns[u](s))return u}return""},go=W(6277),ro={},vo=function(s,l){return ro[s]=ro[s]||[],l&&(ro[s]=ro[s].concat(l)),ro[s]},mu=function(s,l){var u=vo(s).indexOf(l);return!(u<=-1||(ro[s]=ro[s].slice(),ro[s].splice(u,1),0))},K={prefixed:!0},w=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],k=w[0],Ie=0;Ie<w.length;Ie++)if(w[Ie][1]in Ae()){ce=w[Ie];break}if(ce){for(var tt=0;tt<ce.length;tt++)K[k[tt]]=ce[tt];K.prefixed=ce[0]!==k[0]}var Ge=[],qt=function Fn(g){var l,s="info",u=function(){for(var a=arguments.length,h=new Array(a),v=0;v<a;v++)h[v]=arguments[v];l("log",s,h)};return l=function(s,l){return function(u,t,a){var h=l.levels[t],v=new RegExp("^("+h+")$");if("log"!==u&&a.unshift(u.toUpperCase()+":"),a.unshift(s+":"),Ge){Ge.push([].concat(a));var S=Ge.length-1e3;Ge.splice(0,S>0?S:0)}if(ae().console){var P=ae().console[u];!P&&"debug"===u&&(P=ae().console.info||ae().console.log),P&&h&&v.test(u)&&P[Array.isArray(a)?"apply":"call"](ae().console,a)}}}(g,u),u.createLogger=function(t){return Fn(g+": "+t)},u.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},u.level=function(t){if("string"==typeof t){if(!u.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');s=t}return s},(u.history=function(){return Ge?[].concat(Ge):[]}).filter=function(t){return(Ge||[]).filter(function(a){return new RegExp(".*"+t+".*").test(a[0])})},u.history.clear=function(){Ge&&(Ge.length=0)},u.history.disable=function(){null!==Ge&&(Ge.length=0,Ge=null)},u.history.enable=function(){null===Ge&&(Ge=[])},u.error=function(){for(var t=arguments.length,a=new Array(t),h=0;h<t;h++)a[h]=arguments[h];return l("error",s,a)},u.warn=function(){for(var t=arguments.length,a=new Array(t),h=0;h<t;h++)a[h]=arguments[h];return l("warn",s,a)},u.debug=function(){for(var t=arguments.length,a=new Array(t),h=0;h<t;h++)a[h]=arguments[h];return l("debug",s,a)},u}("VIDEOJS"),Un=qt.createLogger,$r=Object.prototype.toString,Qi=function(s){return Xi(s)?Object.keys(s):[]};function Qr(g,s){Qi(g).forEach(function(l){return s(g[l],l)})}function Ar(g){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return Object.assign?De.apply(void 0,[g].concat(l)):(l.forEach(function(t){!t||Qr(t,function(a,h){g[h]=a})}),g)}function Xi(g){return!!g&&"object"==typeof g}function Oi(g){return Xi(g)&&"[object Object]"===$r.call(g)&&g.constructor===Object}function Ts(g,s){if(!g||!s)return"";if("function"==typeof ae().getComputedStyle){var l;try{l=ae().getComputedStyle(g)}catch{return""}return l?l.getPropertyValue(s)||l[s]:""}return""}var ar=ae().navigator&&ae().navigator.userAgent||"",Vi=/AppleWebKit\/([\d.]+)/i.exec(ar),Is=Vi?parseFloat(Vi.pop()):null,Zs=/iPod/i.test(ar),Es=function(){var g=ar.match(/OS (\d+)_/i);return g&&g[1]?g[1]:null}(),yo=/Android/i.test(ar),Ho=function(){var g=ar.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!g)return null;var s=g[1]&&parseFloat(g[1]),l=g[2]&&parseFloat(g[2]);return s&&l?parseFloat(g[1]+"."+g[2]):s||null}(),oa=yo&&Ho<5&&Is<537,Na=/Firefox/i.test(ar),aa=/Edg/i.test(ar),_o=!aa&&(/Chrome/i.test(ar)||/CriOS/i.test(ar)),ou=function(){var g=ar.match(/(Chrome|CriOS)\/(\d+)/);return g&&g[2]?parseFloat(g[2]):null}(),ua=function(){var g=/MSIE\s(\d+)\.\d/.exec(ar),s=g&&parseFloat(g[1]);return!s&&/Trident\/7.0/i.test(ar)&&/rv:11.0/.test(ar)&&(s=11),s}(),Vu=/Safari/i.test(ar)&&!_o&&!yo&&!aa,Ol=/Windows/i.test(ar),Ta=Boolean(Ea()&&("ontouchstart"in ae()||ae().navigator.maxTouchPoints||ae().DocumentTouch&&ae().document instanceof ae().DocumentTouch)),Hu=/iPad/i.test(ar)||Vu&&Ta&&!/iPhone/i.test(ar),sc=/iPhone/i.test(ar)&&!Hu,io=sc||Hu||Zs,au=(Vu||io)&&!_o,Ic=Object.freeze({__proto__:null,IS_IPOD:Zs,IOS_VERSION:Es,IS_ANDROID:yo,ANDROID_VERSION:Ho,IS_NATIVE_ANDROID:oa,IS_FIREFOX:Na,IS_EDGE:aa,IS_CHROME:_o,CHROME_VERSION:ou,IE_VERSION:ua,IS_SAFARI:Vu,IS_WINDOWS:Ol,TOUCH_ENABLED:Ta,IS_IPAD:Hu,IS_IPHONE:sc,IS_IOS:io,IS_ANY_SAFARI:au});function Cu(g){return"string"==typeof g&&Boolean(g.trim())}function Gu(g){if(g.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Ea(){return Ae()===ae().document}function Li(g){return Xi(g)&&1===g.nodeType}function la(){try{return ae().parent!==ae().self}catch{return!0}}function bo(g){return function(s,l){if(!Cu(s))return Ae()[g](null);Cu(l)&&(l=Ae().querySelector(l));var u=Li(l)?l:Ae();return u[g]&&u[g](s)}}function Ir(g,s,l,u){void 0===g&&(g="div"),void 0===s&&(s={}),void 0===l&&(l={});var t=Ae().createElement(g);return Object.getOwnPropertyNames(s).forEach(function(a){var h=s[a];-1!==a.indexOf("aria-")||"role"===a||"type"===a?(qt.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+a+" to "+h+"."),t.setAttribute(a,h)):"textContent"===a?Ka(t,h):(t[a]!==h||"tabIndex"===a)&&(t[a]=h)}),Object.getOwnPropertyNames(l).forEach(function(a){t.setAttribute(a,l[a])}),u&&ci(t,u),t}function Ka(g,s){return typeof g.textContent>"u"?g.innerText=s:g.textContent=s,g}function Su(g,s){s.firstChild?s.insertBefore(g,s.firstChild):s.appendChild(g)}function V(g,s){return Gu(s),g.classList?g.classList.contains(s):function Go(g){return new RegExp("(^|\\s)"+g+"($|\\s)")}(s).test(g.className)}function ue(g,s){return g.classList?g.classList.add(s):V(g,s)||(g.className=(g.className+" "+s).trim()),g}function G(g,s){return g?(g.classList?g.classList.remove(s):(Gu(s),g.className=g.className.split(/\s+/).filter(function(l){return l!==s}).join(" ")),g):(qt.warn("removeClass was called with an element that doesn't exist"),null)}function Te(g,s,l){var u=V(g,s);if("function"==typeof l&&(l=l(g,s)),"boolean"!=typeof l&&(l=!u),l!==u)return l?ue(g,s):G(g,s),g}function Je(g,s){Object.getOwnPropertyNames(s).forEach(function(l){var u=s[l];null===u||typeof u>"u"||!1===u?g.removeAttribute(l):g.setAttribute(l,!0===u?"":u)})}function Nt(g){var s={};if(g&&g.attributes&&g.attributes.length>0)for(var u=g.attributes,t=u.length-1;t>=0;t--){var a=u[t].name,h=u[t].value;("boolean"==typeof g[a]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+a+","))&&(h=null!==h),s[a]=h}return s}function en(g,s){return g.getAttribute(s)}function Nn(g,s,l){g.setAttribute(s,l)}function ai(g,s){g.removeAttribute(s)}function Gr(){Ae().body.focus(),Ae().onselectstart=function(){return!1}}function kr(){Ae().onselectstart=function(){return!0}}function Fr(g){if(g&&g.getBoundingClientRect&&g.parentNode){var s=g.getBoundingClientRect(),l={};return["bottom","height","left","right","top","width"].forEach(function(u){void 0!==s[u]&&(l[u]=s[u])}),l.height||(l.height=parseFloat(Ts(g,"height"))),l.width||(l.width=parseFloat(Ts(g,"width"))),l}}function Xr(g){if(!g||g&&!g.offsetParent)return{left:0,top:0,width:0,height:0};for(var s=g.offsetWidth,l=g.offsetHeight,u=0,t=0;g.offsetParent&&g!==Ae()[K.fullscreenElement];)u+=g.offsetLeft,t+=g.offsetTop,g=g.offsetParent;return{left:u,top:t,width:s,height:l}}function bi(g,s){var l={x:0,y:0};if(io)for(var u=g;u&&"html"!==u.nodeName.toLowerCase();){var t=Ts(u,"transform");if(/^matrix/.test(t)){var a=t.slice(7,-1).split(/,\s/).map(Number);l.x+=a[4],l.y+=a[5]}else if(/^matrix3d/.test(t)){var h=t.slice(9,-1).split(/,\s/).map(Number);l.x+=h[12],l.y+=h[13]}u=u.parentNode}var v={},S=Xr(s.target),P=Xr(g),H=P.width,Z=s.offsetY-(P.top-S.top),we=s.offsetX-(P.left-S.left);return s.changedTouches&&(we=s.changedTouches[0].pageX-P.left,Z=s.changedTouches[0].pageY+P.top,io&&(we-=l.x,Z-=l.y)),v.y=1-Math.max(0,Math.min(1,Z/P.height)),v.x=Math.max(0,Math.min(1,we/H)),v}function to(g){return Xi(g)&&3===g.nodeType}function cn(g){for(;g.firstChild;)g.removeChild(g.firstChild);return g}function Si(g){return"function"==typeof g&&(g=g()),(Array.isArray(g)?g:[g]).map(function(s){return"function"==typeof s&&(s=s()),Li(s)||to(s)?s:"string"==typeof s&&/\S/.test(s)?Ae().createTextNode(s):void 0}).filter(function(s){return s})}function ci(g,s){return Si(s).forEach(function(l){return g.appendChild(l)}),g}function Io(g,s){return ci(cn(g),s)}function In(g){return void 0===g.button&&void 0===g.buttons||0===g.button&&void 0===g.buttons||"mouseup"===g.type&&0===g.button&&0===g.buttons||!(0!==g.button||1!==g.buttons)}var an,Rn=bo("querySelector"),Du=bo("querySelectorAll"),kn=Object.freeze({__proto__:null,isReal:Ea,isEl:Li,isInFrame:la,createEl:Ir,textContent:Ka,prependTo:Su,hasClass:V,addClass:ue,removeClass:G,toggleClass:Te,setAttributes:Je,getAttributes:Nt,getAttribute:en,setAttribute:Nn,removeAttribute:ai,blockTextSelection:Gr,unblockTextSelection:kr,getBoundingClientRect:Fr,findPosition:Xr,getPointerPosition:bi,isTextNode:to,emptyEl:cn,normalizeContent:Si,appendContent:ci,insertContent:Io,isSingleLeftClick:In,$:Rn,$$:Du}),Ht=!1,ws=function(){if(!1!==an.options.autoSetup){var s=Array.prototype.slice.call(Ae().getElementsByTagName("video")),l=Array.prototype.slice.call(Ae().getElementsByTagName("audio")),u=Array.prototype.slice.call(Ae().getElementsByTagName("video-js")),t=s.concat(l,u);if(t&&t.length>0)for(var a=0,h=t.length;a<h;a++){var v=t[a];if(!v||!v.getAttribute){Za(1);break}void 0===v.player&&null!==v.getAttribute("data-setup")&&an(v)}else Ht||Za(1)}};function Za(g,s){!Ea()||(s&&(an=s),ae().setTimeout(ws,g))}function $u(){Ht=!0,ae().removeEventListener("load",$u)}Ea()&&("complete"===Ae().readyState?$u():ae().addEventListener("load",$u));var Po,xu=function(s){var l=Ae().createElement("style");return l.className=s,l},al=function(s,l){s.styleSheet?s.styleSheet.cssText=l:s.textContent=l},Pc=3;function Ys(){return Pc++}ae().WeakMap||(Po=function(){function g(){this.vdata="vdata"+Math.floor(ae().performance&&ae().performance.now()||Date.now()),this.data={}}var s=g.prototype;return s.set=function(u,t){var a=u[this.vdata]||Ys();return u[this.vdata]||(u[this.vdata]=a),this.data[a]=t,this},s.get=function(u){var t=u[this.vdata];if(t)return this.data[t];qt("We have no data for this element",u)},s.has=function(u){return u[this.vdata]in this.data},s.delete=function(u){var t=u[this.vdata];t&&(delete this.data[t],delete u[this.vdata])},g}());var so=ae().WeakMap?new WeakMap:new Po;function Ya(g,s){if(so.has(g)){var l=so.get(g);0===l.handlers[s].length&&(delete l.handlers[s],g.removeEventListener?g.removeEventListener(s,l.dispatcher,!1):g.detachEvent&&g.detachEvent("on"+s,l.dispatcher)),Object.getOwnPropertyNames(l.handlers).length<=0&&(delete l.handlers,delete l.dispatcher,delete l.disabled),0===Object.getOwnPropertyNames(l).length&&so.delete(g)}}function Au(g,s,l,u){l.forEach(function(t){g(s,t,u)})}function Mr(g){if(g.fixed_)return g;function s(){return!0}function l(){return!1}if(!g||!g.isPropagationStopped||!g.isImmediatePropagationStopped){var u=g||ae().event;for(var t in g={},u)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&("returnValue"===t&&u.preventDefault||(g[t]=u[t]));if(g.target||(g.target=g.srcElement||Ae()),g.relatedTarget||(g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement),g.preventDefault=function(){u.preventDefault&&u.preventDefault(),g.returnValue=!1,u.returnValue=!1,g.defaultPrevented=!0},g.defaultPrevented=!1,g.stopPropagation=function(){u.stopPropagation&&u.stopPropagation(),g.cancelBubble=!0,u.cancelBubble=!0,g.isPropagationStopped=s},g.isPropagationStopped=l,g.stopImmediatePropagation=function(){u.stopImmediatePropagation&&u.stopImmediatePropagation(),g.isImmediatePropagationStopped=s,g.stopPropagation()},g.isImmediatePropagationStopped=l,null!=g.clientX){var a=Ae().documentElement,h=Ae().body;g.pageX=g.clientX+(a&&a.scrollLeft||h&&h.scrollLeft||0)-(a&&a.clientLeft||h&&h.clientLeft||0),g.pageY=g.clientY+(a&&a.scrollTop||h&&h.scrollTop||0)-(a&&a.clientTop||h&&h.clientTop||0)}g.which=g.charCode||g.keyCode,null!=g.button&&(g.button=1&g.button?0:4&g.button?1:2&g.button?2:0)}return g.fixed_=!0,g}var La,Ji=["touchstart","touchmove"];function Bn(g,s,l){if(Array.isArray(s))return Au(Bn,g,s,l);so.has(g)||so.set(g,{});var u=so.get(g);if(u.handlers||(u.handlers={}),u.handlers[s]||(u.handlers[s]=[]),l.guid||(l.guid=Ys()),u.handlers[s].push(l),u.dispatcher||(u.disabled=!1,u.dispatcher=function(a,h){if(!u.disabled){a=Mr(a);var v=u.handlers[a.type];if(v)for(var S=v.slice(0),P=0,H=S.length;P<H&&!a.isImmediatePropagationStopped();P++)try{S[P].call(g,a,h)}catch(Y){qt.error(Y)}}}),1===u.handlers[s].length)if(g.addEventListener){var t=!1;(function(){if("boolean"!=typeof La){La=!1;try{var s=Object.defineProperty({},"passive",{get:function(){La=!0}});ae().addEventListener("test",null,s),ae().removeEventListener("test",null,s)}catch{}}return La})()&&Ji.indexOf(s)>-1&&(t={passive:!0}),g.addEventListener(s,u.dispatcher,t)}else g.attachEvent&&g.attachEvent("on"+s,u.dispatcher)}function Ls(g,s,l){if(so.has(g)){var u=so.get(g);if(u.handlers){if(Array.isArray(s))return Au(Ls,g,s,l);var t=function(P,H){u.handlers[H]=[],Ya(P,H)};if(void 0===s){for(var a in u.handlers)Object.prototype.hasOwnProperty.call(u.handlers||{},a)&&t(g,a);return}var h=u.handlers[s];if(h){if(!l)return void t(g,s);if(l.guid)for(var v=0;v<h.length;v++)h[v].guid===l.guid&&h.splice(v--,1);Ya(g,s)}}}}function jr(g,s,l){var u=so.has(g)?so.get(g):{},t=g.parentNode||g.ownerDocument;if("string"==typeof s?s={type:s,target:g}:s.target||(s.target=g),s=Mr(s),u.dispatcher&&u.dispatcher.call(g,s,l),t&&!s.isPropagationStopped()&&!0===s.bubbles)jr.call(null,t,s,l);else if(!t&&!s.defaultPrevented&&s.target&&s.target[s.type]){so.has(s.target)||so.set(s.target,{});var a=so.get(s.target);s.target[s.type]&&(a.disabled=!0,"function"==typeof s.target[s.type]&&s.target[s.type](),a.disabled=!1)}return!s.defaultPrevented}function Fa(g,s,l){if(Array.isArray(s))return Au(Fa,g,s,l);var u=function t(){Ls(g,s,t),l.apply(this,arguments)};u.guid=l.guid=l.guid||Ys(),Bn(g,s,u)}function ys(g,s,l){var u=function t(){Ls(g,s,t),l.apply(this,arguments)};u.guid=l.guid=l.guid||Ys(),Bn(g,s,u)}var zu,En=Object.freeze({__proto__:null,fixEvent:Mr,on:Bn,off:Ls,trigger:jr,one:Fa,any:ys}),Fi=function(s,l,u){l.guid||(l.guid=Ys());var t=l.bind(s);return t.guid=u?u+"_"+l.guid:l.guid,t},Ps=function(s,l){var u=ae().performance.now();return function(){var h=ae().performance.now();h-u>=l&&(s.apply(void 0,arguments),u=h)}},oo=function(){};oo.prototype.allowedEvents_={},oo.prototype.addEventListener=oo.prototype.on=function(g,s){var l=this.addEventListener;this.addEventListener=function(){},Bn(this,g,s),this.addEventListener=l},oo.prototype.removeEventListener=oo.prototype.off=function(g,s){Ls(this,g,s)},oo.prototype.one=function(g,s){var l=this.addEventListener;this.addEventListener=function(){},Fa(this,g,s),this.addEventListener=l},oo.prototype.any=function(g,s){var l=this.addEventListener;this.addEventListener=function(){},ys(this,g,s),this.addEventListener=l},oo.prototype.dispatchEvent=oo.prototype.trigger=function(g){var s=g.type||g;"string"==typeof g&&(g={type:s}),g=Mr(g),this.allowedEvents_[s]&&this["on"+s]&&this["on"+s](g),jr(this,g)},oo.prototype.queueTrigger=function(g){var s=this;zu||(zu=new Map);var l=g.type||g,u=zu.get(this);u||zu.set(this,u=new Map);var t=u.get(l);u.delete(l),ae().clearTimeout(t);var a=ae().setTimeout(function(){0===u.size&&(u=null,zu.delete(s)),s.trigger(g)},0);u.set(l,a)};var Qa=function(s){return"function"==typeof s.name?s.name():"string"==typeof s.name?s.name:s.name_?s.name_:s.constructor&&s.constructor.name?s.constructor.name:typeof s},wa=function(s){return s instanceof oo||!!s.eventBusEl_&&["on","one","off","trigger"].every(function(l){return"function"==typeof s[l]})},ko=function(s){return"string"==typeof s&&/\S/.test(s)||Array.isArray(s)&&!!s.length},Ca=function(s,l,u){if(!s||!s.nodeName&&!wa(s))throw new Error("Invalid target for "+Qa(l)+"#"+u+"; must be a DOM node or evented object.")},Iu=function(s,l,u){if(!ko(s))throw new Error("Invalid event type for "+Qa(l)+"#"+u+"; must be a non-empty string or array.")},qu=function(s,l,u){if("function"!=typeof s)throw new Error("Invalid listener for "+Qa(l)+"#"+u+"; must be a function.")},lu=function(s,l,u){var a,h,v,t=l.length<3||l[0]===s||l[0]===s.eventBusEl_;return t?(a=s.eventBusEl_,l.length>=3&&l.shift(),h=l[0],v=l[1]):(a=l[0],h=l[1],v=l[2]),Ca(a,s,u),Iu(h,s,u),qu(v,s,u),{isTargetingSelf:t,target:a,type:h,listener:v=Fi(s,v)}},ca=function(s,l,u,t){Ca(s,s,l),s.nodeName?En[l](s,u,t):s[l](u,t)},Ft={on:function(){for(var s=this,l=arguments.length,u=new Array(l),t=0;t<l;t++)u[t]=arguments[t];var a=lu(this,u,"on"),h=a.isTargetingSelf,v=a.target,S=a.type,P=a.listener;if(ca(v,"on",S,P),!h){var H=function(){return s.off(v,S,P)};H.guid=P.guid;var Y=function(){return s.off("dispose",H)};Y.guid=P.guid,ca(this,"on","dispose",H),ca(v,"on","dispose",Y)}},one:function(){for(var s=this,l=arguments.length,u=new Array(l),t=0;t<l;t++)u[t]=arguments[t];var a=lu(this,u,"one"),h=a.isTargetingSelf,v=a.target,S=a.type,P=a.listener;if(h)ca(v,"one",S,P);else{var H=function Y(){s.off(v,S,Y);for(var Z=arguments.length,we=new Array(Z),je=0;je<Z;je++)we[je]=arguments[je];P.apply(null,we)};H.guid=P.guid,ca(v,"one",S,H)}},any:function(){for(var s=this,l=arguments.length,u=new Array(l),t=0;t<l;t++)u[t]=arguments[t];var a=lu(this,u,"any"),h=a.isTargetingSelf,v=a.target,S=a.type,P=a.listener;if(h)ca(v,"any",S,P);else{var H=function Y(){s.off(v,S,Y);for(var Z=arguments.length,we=new Array(Z),je=0;je<Z;je++)we[je]=arguments[je];P.apply(null,we)};H.guid=P.guid,ca(v,"any",S,H)}},off:function(s,l,u){if(!s||ko(s))Ls(this.eventBusEl_,s,l);else{var t=s,a=l;Ca(t,this,"off"),Iu(a,this,"off"),qu(u,this,"off"),u=Fi(this,u),this.off("dispose",u),t.nodeName?(Ls(t,a,u),Ls(t,"dispose",u)):wa(t)&&(t.off(a,u),t.off("dispose",u))}},trigger:function(s,l){if(Ca(this.eventBusEl_,this,"trigger"),!ko(s&&"string"!=typeof s?s.type:s)){var t="Invalid event type for "+Qa(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!s)throw new Error(t);(this.log||qt).error(t)}return jr(this.eventBusEl_,s,l)}};function ul(g,s){void 0===s&&(s={});var u=s.eventBusKey;if(u){if(!g[u].nodeName)throw new Error('The eventBusKey "'+u+'" does not refer to an element.');g.eventBusEl_=g[u]}else g.eventBusEl_=Ir("span",{className:"vjs-event-bus"});return Ar(g,Ft),g.eventedCallbacks&&g.eventedCallbacks.forEach(function(t){t()}),g.on("dispose",function(){g.off(),[g,g.el_,g.eventBusEl_].forEach(function(t){t&&so.has(t)&&so.delete(t)}),ae().setTimeout(function(){g.eventBusEl_=null},0)}),g}var ja={state:{},setState:function(s){var u,l=this;return"function"==typeof s&&(s=s()),Qr(s,function(t,a){l.state[a]!==t&&((u=u||{})[a]={from:l.state[a],to:t}),l.state[a]=t}),u&&wa(this)&&this.trigger({changes:u,type:"statechanged"}),u}};function as(g,s){return Ar(g,ja),g.state=Ar({},g.state,s),"function"==typeof g.handleStateChanged&&wa(g)&&g.on("statechanged",g.handleStateChanged),g}var cu=function(s){return"string"!=typeof s?s:s.replace(/./,function(l){return l.toLowerCase()})},ds=function(s){return"string"!=typeof s?s:s.replace(/./,function(l){return l.toUpperCase()})};function qi(){for(var g={},s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return l.forEach(function(t){!t||Qr(t,function(a,h){Oi(a)?(Oi(g[h])||(g[h]={}),g[h]=qi(g[h],a)):g[h]=a})}),g}var Mc=function(){function g(){this.map_={}}var s=g.prototype;return s.has=function(u){return u in this.map_},s.delete=function(u){var t=this.has(u);return delete this.map_[u],t},s.set=function(u,t){return this.map_[u]=t,this},s.forEach=function(u,t){for(var a in this.map_)u.call(t,this.map_[a],a,this)},g}(),Rl=ae().Map?ae().Map:Mc,Oc=function(){function g(){this.set_={}}var s=g.prototype;return s.has=function(u){return u in this.set_},s.delete=function(u){var t=this.has(u);return delete this.set_[u],t},s.add=function(u){return this.set_[u]=1,this},s.forEach=function(u,t){for(var a in this.set_)u.call(t,a,a,this)},g}(),ll=ae().Set?ae().Set:Oc,nn=function(){function g(l,u,t){if(this.player_=!l&&this.play?l=this:l,this.isDisposed_=!1,this.parentComponent_=null,this.options_=qi({},this.options_),u=this.options_=qi(this.options_,u),this.id_=u.id||u.el&&u.el.id,!this.id_){var a=l&&l.id&&l.id()||"no_player";this.id_=a+"_component_"+Ys()}this.name_=u.name||null,u.el?this.el_=u.el:!1!==u.createEl&&(this.el_=this.createEl()),!1!==u.evented&&(ul(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),as(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new ll,this.setIntervalIds_=new ll,this.rafIds_=new ll,this.namedRafs_=new Rl,this.clearingTimersOnDispose_=!1,!1!==u.initChildren&&this.initChildren(),this.ready(t),!1!==u.reportTouchActivity&&this.enableTouchActivity()}var s=g.prototype;return s.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var u=this.children_.length-1;u>=0;u--)this.children_[u].dispose&&this.children_[u].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},s.isDisposed=function(){return Boolean(this.isDisposed_)},s.player=function(){return this.player_},s.options=function(u){return u?(this.options_=qi(this.options_,u),this.options_):this.options_},s.el=function(){return this.el_},s.createEl=function(u,t,a){return Ir(u,t,a)},s.localize=function(u,t,a){void 0===a&&(a=u);var h=this.player_.language&&this.player_.language(),v=this.player_.languages&&this.player_.languages(),S=v&&v[h],P=h&&h.split("-")[0],H=v&&v[P],Y=a;return S&&S[u]?Y=S[u]:H&&H[u]&&(Y=H[u]),t&&(Y=Y.replace(/\{(\d+)\}/g,function(Z,we){var je=t[we-1],Pe=je;return typeof je>"u"&&(Pe=Z),Pe})),Y},s.handleLanguagechange=function(){},s.contentEl=function(){return this.contentEl_||this.el_},s.id=function(){return this.id_},s.name=function(){return this.name_},s.children=function(){return this.children_},s.getChildById=function(u){return this.childIndex_[u]},s.getChild=function(u){if(u)return this.childNameIndex_[u]},s.getDescendant=function(){for(var u=arguments.length,t=new Array(u),a=0;a<u;a++)t[a]=arguments[a];t=t.reduce(function(S,P){return S.concat(P)},[]);for(var h=this,v=0;v<t.length;v++)if(!(h=h.getChild(t[v]))||!h.getChild)return;return h},s.addChild=function(u,t,a){var h,v;if(void 0===t&&(t={}),void 0===a&&(a=this.children_.length),"string"==typeof u){v=ds(u);var S=t.componentClass||v;t.name=v;var P=g.getComponent(S);if(!P)throw new Error("Component "+S+" does not exist");if("function"!=typeof P)return null;h=new P(this.player_||this,t)}else h=u;if(h.parentComponent_&&h.parentComponent_.removeChild(h),this.children_.splice(a,0,h),h.parentComponent_=this,"function"==typeof h.id&&(this.childIndex_[h.id()]=h),(v=v||h.name&&ds(h.name()))&&(this.childNameIndex_[v]=h,this.childNameIndex_[cu(v)]=h),"function"==typeof h.el&&h.el()){var H=null;this.children_[a+1]&&(this.children_[a+1].el_?H=this.children_[a+1].el_:Li(this.children_[a+1])&&(H=this.children_[a+1])),this.contentEl().insertBefore(h.el(),H)}return h},s.removeChild=function(u){if("string"==typeof u&&(u=this.getChild(u)),u&&this.children_){for(var t=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===u){t=!0,this.children_.splice(a,1);break}if(t){u.parentComponent_=null,this.childIndex_[u.id()]=null,this.childNameIndex_[ds(u.name())]=null,this.childNameIndex_[cu(u.name())]=null;var h=u.el();h&&h.parentNode===this.contentEl()&&this.contentEl().removeChild(u.el())}}},s.initChildren=function(){var u=this,t=this.options_.children;if(t){var v,a=this.options_,S=g.getComponent("Tech");(v=Array.isArray(t)?t:Object.keys(t)).concat(Object.keys(this.options_).filter(function(P){return!v.some(function(H){return"string"==typeof H?P===H:P===H.name})})).map(function(P){var H,Y;return"string"==typeof P?Y=t[H=P]||u.options_[H]||{}:(H=P.name,Y=P),{name:H,opts:Y}}).filter(function(P){var H=g.getComponent(P.opts.componentClass||ds(P.name));return H&&!S.isTech(H)}).forEach(function(H){var Y=H.name,Z=H.opts;if(void 0!==a[Y]&&(Z=a[Y]),!1!==Z){!0===Z&&(Z={}),Z.playerOptions=u.options_.playerOptions;var we=u.addChild(Y,Z);we&&(u[Y]=we)}})}},s.buildCSSClass=function(){return""},s.ready=function(u,t){if(void 0===t&&(t=!1),u){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(u);t?u.call(this):this.setTimeout(u,1)}},s.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var u=this.readyQueue_;this.readyQueue_=[],u&&u.length>0&&u.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},s.$=function(u,t){return Rn(u,t||this.contentEl())},s.$$=function(u,t){return Du(u,t||this.contentEl())},s.hasClass=function(u){return V(this.el_,u)},s.addClass=function(u){ue(this.el_,u)},s.removeClass=function(u){G(this.el_,u)},s.toggleClass=function(u,t){Te(this.el_,u,t)},s.show=function(){this.removeClass("vjs-hidden")},s.hide=function(){this.addClass("vjs-hidden")},s.lockShowing=function(){this.addClass("vjs-lock-showing")},s.unlockShowing=function(){this.removeClass("vjs-lock-showing")},s.getAttribute=function(u){return en(this.el_,u)},s.setAttribute=function(u,t){Nn(this.el_,u,t)},s.removeAttribute=function(u){ai(this.el_,u)},s.width=function(u,t){return this.dimension("width",u,t)},s.height=function(u,t){return this.dimension("height",u,t)},s.dimensions=function(u,t){this.width(u,!0),this.height(t)},s.dimension=function(u,t,a){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[u]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(a||this.trigger("componentresize"));if(!this.el_)return 0;var h=this.el_.style[u],v=h.indexOf("px");return parseInt(-1!==v?h.slice(0,v):this.el_["offset"+ds(u)],10)},s.currentDimension=function(u){var t=0;if("width"!==u&&"height"!==u)throw new Error("currentDimension only accepts width or height value");if(t=Ts(this.el_,u),0===(t=parseFloat(t))||isNaN(t)){var a="offset"+ds(u);t=this.el_[a]}return t},s.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},s.currentWidth=function(){return this.currentDimension("width")},s.currentHeight=function(){return this.currentDimension("height")},s.focus=function(){this.el_.focus()},s.blur=function(){this.el_.blur()},s.handleKeyDown=function(u){this.player_&&(u.stopPropagation(),this.player_.handleKeyDown(u))},s.handleKeyPress=function(u){this.handleKeyDown(u)},s.emitTapEvents=function(){var v,u=0,t=null;this.on("touchstart",function(P){1===P.touches.length&&(t={pageX:P.touches[0].pageX,pageY:P.touches[0].pageY},u=ae().performance.now(),v=!0)}),this.on("touchmove",function(P){if(P.touches.length>1)v=!1;else if(t){var H=P.touches[0].pageX-t.pageX,Y=P.touches[0].pageY-t.pageY;Math.sqrt(H*H+Y*Y)>10&&(v=!1)}});var S=function(){v=!1};this.on("touchleave",S),this.on("touchcancel",S),this.on("touchend",function(P){t=null,!0===v&&ae().performance.now()-u<200&&(P.preventDefault(),this.trigger("tap"))})},s.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,u=Fi(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){u(),this.clearInterval(t),t=this.setInterval(u,250)});var a=function(v){u(),this.clearInterval(t)};this.on("touchmove",u),this.on("touchend",a),this.on("touchcancel",a)}},s.setTimeout=function(u,t){var h,a=this;return u=Fi(this,u),this.clearTimersOnDispose_(),h=ae().setTimeout(function(){a.setTimeoutIds_.has(h)&&a.setTimeoutIds_.delete(h),u()},t),this.setTimeoutIds_.add(h),h},s.clearTimeout=function(u){return this.setTimeoutIds_.has(u)&&(this.setTimeoutIds_.delete(u),ae().clearTimeout(u)),u},s.setInterval=function(u,t){u=Fi(this,u),this.clearTimersOnDispose_();var a=ae().setInterval(u,t);return this.setIntervalIds_.add(a),a},s.clearInterval=function(u){return this.setIntervalIds_.has(u)&&(this.setIntervalIds_.delete(u),ae().clearInterval(u)),u},s.requestAnimationFrame=function(u){var a,t=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),u=Fi(this,u),a=ae().requestAnimationFrame(function(){t.rafIds_.has(a)&&t.rafIds_.delete(a),u()}),this.rafIds_.add(a),a):this.setTimeout(u,1e3/60)},s.requestNamedAnimationFrame=function(u,t){var a=this;if(!this.namedRafs_.has(u)){this.clearTimersOnDispose_(),t=Fi(this,t);var h=this.requestAnimationFrame(function(){t(),a.namedRafs_.has(u)&&a.namedRafs_.delete(u)});return this.namedRafs_.set(u,h),u}},s.cancelNamedAnimationFrame=function(u){!this.namedRafs_.has(u)||(this.cancelAnimationFrame(this.namedRafs_.get(u)),this.namedRafs_.delete(u))},s.cancelAnimationFrame=function(u){return this.supportsRaf_?(this.rafIds_.has(u)&&(this.rafIds_.delete(u),ae().cancelAnimationFrame(u)),u):this.clearTimeout(u)},s.clearTimersOnDispose_=function(){var u=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var h=t[1];u[t[0]].forEach(function(v,S){return u[h](S)})}),u.clearingTimersOnDispose_=!1}))},g.registerComponent=function(u,t){if("string"!=typeof u||!u)throw new Error('Illegal component name, "'+u+'"; must be a non-empty string.');var a=g.getComponent("Tech"),h=a&&a.isTech(t),v=g===t||g.prototype.isPrototypeOf(t.prototype);if(h||!v)throw new Error('Illegal component, "'+u+'"; '+(h?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");u=ds(u),g.components_||(g.components_={});var P=g.getComponent("Player");if("Player"===u&&P&&P.players){var H=P.players,Y=Object.keys(H);if(H&&Y.length>0&&Y.map(function(Z){return H[Z]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return g.components_[u]=t,g.components_[cu(u)]=t,t},g.getComponent=function(u){if(u&&g.components_)return g.components_[u]},g}();function R(g,s,l,u){return function M(g,s,l){if("number"!=typeof s||s<0||s>l)throw new Error("Failed to execute '"+g+"' on 'TimeRanges': The index provided ("+s+") is non-numeric or out of bounds (0-"+l+").")}(g,u,l.length-1),l[u][s]}function x(g){var s;return s=void 0===g||0===g.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:g.length,start:R.bind(null,"start",0,g),end:R.bind(null,"end",1,g)},ae().Symbol&&ae().Symbol.iterator&&(s[ae().Symbol.iterator]=function(){return(g||[]).values()}),s}function B(g,s){return Array.isArray(g)?x(g):void 0===g||void 0===s?x():x([[g,s]])}function J(g,s){var u,t,l=0;if(!s)return 0;(!g||!g.length)&&(g=B(0,0));for(var a=0;a<g.length;a++)u=g.start(a),(t=g.end(a))>s&&(t=s),l+=t-u;return l/s}function ye(g){if(g instanceof ye)return g;"number"==typeof g?this.code=g:"string"==typeof g?this.message=g:Xi(g)&&("number"==typeof g.code&&(this.code=g.code),Ar(this,g)),this.message||(this.message=ye.defaultMessages[this.code]||"")}nn.prototype.supportsRaf_="function"==typeof ae().requestAnimationFrame&&"function"==typeof ae().cancelAnimationFrame,nn.registerComponent("Component",nn),ye.prototype.code=0,ye.prototype.message="",ye.prototype.status=null,ye.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ye.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Se=0;Se<ye.errorTypes.length;Se++)ye[ye.errorTypes[Se]]=Se,ye.prototype[ye.errorTypes[Se]]=Se;function mt(g){return null!=g&&"function"==typeof g.then}function Jt(g){mt(g)&&g.then(null,function(s){})}var wn=function(s){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(u,t,a){return s[t]&&(u[t]=s[t]),u},{cues:s.cues&&Array.prototype.map.call(s.cues,function(u){return{startTime:u.startTime,endTime:u.endTime,text:u.text,id:u.id}})})},da="vjs-modal-dialog",Wi=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).handleKeyDown_=function(h){return a.handleKeyDown(h)},a.close_=function(h){return a.close(h)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=Ir("div",{className:da+"-content"},{role:"document"}),a.descEl_=Ir("p",{className:da+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),Ka(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},l.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,g.prototype.dispose.call(this)},l.buildCSSClass=function(){return da+" vjs-hidden "+g.prototype.buildCSSClass.call(this)},l.label=function(){return this.localize(this.options_.label||"Modal Window")},l.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},l.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},l.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},l.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},l.closeable=function(t){if("boolean"==typeof t){var a=this.closeable_=!!t,h=this.getChild("closeButton");if(a&&!h){var v=this.contentEl_;this.contentEl_=this.el_,h=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=v,this.on(h,"close",this.close_)}!a&&h&&(this.off(h,"close",this.close_),this.removeChild(h),h.dispose())}return this.closeable_},l.fill=function(){this.fillWith(this.content())},l.fillWith=function(t){var a=this.contentEl(),h=a.parentNode,v=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,h.removeChild(a),this.empty(),Io(a,t),this.trigger("modalfill"),v?h.insertBefore(a,v):h.appendChild(a);var S=this.getChild("closeButton");S&&h.appendChild(S.el_)},l.empty=function(){this.trigger("beforemodalempty"),cn(this.contentEl()),this.trigger("modalempty")},l.content=function(t){return typeof t<"u"&&(this.content_=t),this.content_},l.conditionalFocus_=function(){var t=Ae().activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(t)||a===t)&&(this.previouslyActiveEl_=t,this.focus())},l.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},l.handleKeyDown=function(t){if(t.stopPropagation(),Fe().isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(Fe().isEventKey(t,"Tab")){for(var v,a=this.focusableEls_(),h=this.el_.querySelector(":focus"),S=0;S<a.length;S++)if(h===a[S]){v=S;break}Ae().activeElement===this.el_&&(v=0),t.shiftKey&&0===v?(a[a.length-1].focus(),t.preventDefault()):!t.shiftKey&&v===a.length-1&&(a[0].focus(),t.preventDefault())}},l.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(a){return(a instanceof ae().HTMLAnchorElement||a instanceof ae().HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof ae().HTMLInputElement||a instanceof ae().HTMLSelectElement||a instanceof ae().HTMLTextAreaElement||a instanceof ae().HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof ae().HTMLIFrameElement||a instanceof ae().HTMLObjectElement||a instanceof ae().HTMLEmbedElement||a.hasAttribute("tabindex")&&-1!==a.getAttribute("tabindex")||a.hasAttribute("contenteditable")})},s}(nn);Wi.prototype.options_={pauseOnOpen:!0,temporary:!0},nn.registerComponent("ModalDialog",Wi);var Mo=function(g){function s(u){var t;void 0===u&&(u=[]),(t=g.call(this)||this).tracks_=[],Object.defineProperty(Ee(t),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<u.length;a++)t.addTrack(u[a]);return t}$e(s,g);var l=s.prototype;return l.addTrack=function(t){var a=this,h=this.tracks_.length;""+h in this||Object.defineProperty(this,h,{get:function(){return this.tracks_[h]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){a.trigger({track:t,type:"labelchange",target:a})},wa(t)&&t.addEventListener("labelchange",t.labelchange_)},l.removeTrack=function(t){for(var a,h=0,v=this.length;h<v;h++)if(this[h]===t){(a=this[h]).off&&a.off(),this.tracks_.splice(h,1);break}!a||this.trigger({track:a,type:"removetrack",target:this})},l.getTrackById=function(t){for(var a=null,h=0,v=this.length;h<v;h++){var S=this[h];if(S.id===t){a=S;break}}return a},s}(oo);for(var Cs in Mo.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Mo.prototype.allowedEvents_)Mo.prototype["on"+Cs]=null;var ta=function(s,l){for(var u=0;u<s.length;u++)!Object.keys(s[u]).length||l.id===s[u].id||(s[u].enabled=!1)},Wu=function(g){function s(u){var t;void 0===u&&(u=[]);for(var a=u.length-1;a>=0;a--)if(u[a].enabled){ta(u,u[a]);break}return(t=g.call(this,u)||this).changing_=!1,t}$e(s,g);var l=s.prototype;return l.addTrack=function(t){var a=this;t.enabled&&ta(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){a.changing_||(a.changing_=!0,ta(a,t),a.changing_=!1,a.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},l.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},s}(Mo),vu=function(s,l){for(var u=0;u<s.length;u++)!Object.keys(s[u]).length||l.id===s[u].id||(s[u].selected=!1)},$o=function(g){function s(u){var t;void 0===u&&(u=[]);for(var a=u.length-1;a>=0;a--)if(u[a].selected){vu(u,u[a]);break}return(t=g.call(this,u)||this).changing_=!1,Object.defineProperty(Ee(t),"selectedIndex",{get:function(){for(var v=0;v<this.length;v++)if(this[v].selected)return v;return-1},set:function(){}}),t}$e(s,g);var l=s.prototype;return l.addTrack=function(t){var a=this;t.selected&&vu(this,t),g.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){a.changing_||(a.changing_=!0,vu(a,t),a.changing_=!1,a.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},l.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},s}(Mo),cl=function(g){function s(){return g.apply(this,arguments)||this}$e(s,g);var l=s.prototype;return l.addTrack=function(t){var a=this;g.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},l.removeTrack=function(t){g.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},s}(Mo),ha=function(){function g(l){void 0===l&&(l=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var u=0,t=l.length;u<t;u++)this.addTrackElement_(l[u])}var s=g.prototype;return s.addTrackElement_=function(u){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(u)&&this.trackElements_.push(u)},s.getTrackElementByTrack_=function(u){for(var t,a=0,h=this.trackElements_.length;a<h;a++)if(u===this.trackElements_[a].track){t=this.trackElements_[a];break}return t},s.removeTrackElement_=function(u){for(var t=0,a=this.trackElements_.length;t<a;t++)if(u===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},g}(),Qd=function(){function g(l){g.prototype.setCues_.call(this,l),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var s=g.prototype;return s.setCues_=function(u){var t=this.length||0,a=0,h=u.length;this.cues_=u,this.length_=u.length;var v=function(P){""+P in this||Object.defineProperty(this,""+P,{get:function(){return this.cues_[P]}})};if(t<h)for(a=t;a<h;a++)v.call(this,a)},s.getCueById=function(u){for(var t=null,a=0,h=this.length;a<h;a++){var v=this[a];if(v.id===u){t=v;break}}return t},g}(),Nl={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Ll={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},yu={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ac={disabled:"disabled",hidden:"hidden",showing:"showing"},Pu=function(g){function s(l){var u;void 0===l&&(l={}),u=g.call(this)||this;var t={id:l.id||"vjs_track_"+Ys(),kind:l.kind||"",language:l.language||""},a=l.label||"",h=function(P){Object.defineProperty(Ee(u),P,{get:function(){return t[P]},set:function(){}})};for(var v in t)h(v);return Object.defineProperty(Ee(u),"label",{get:function(){return a},set:function(P){P!==a&&(a=P,this.trigger("labelchange"))}}),u}return $e(s,g),s}(oo),q=function(s){var l=["protocol","hostname","port","pathname","search","hash","host"],u=Ae().createElement("a");u.href=s;for(var t={},a=0;a<l.length;a++)t[l[a]]=u[l[a]];return"http:"===t.protocol&&(t.host=t.host.replace(/:80$/,"")),"https:"===t.protocol&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=ae().location.protocol),t.host||(t.host=ae().location.host),t},Q=function(s){if(!s.match(/^https?:\/\//)){var l=Ae().createElement("a");l.href=s,s=l.href}return s},be=function(s){if("string"==typeof s){var u=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(s);if(u)return u.pop().toLowerCase()}return""},Ke=function(s,l){void 0===l&&(l=ae().location);var u=q(s);return(":"===u.protocol?l.protocol:u.protocol)+u.host!==l.protocol+l.host},Tt=Object.freeze({__proto__:null,parseUrl:q,getAbsoluteURL:Q,getFileExtension:be,isCrossOrigin:Ke}),Lt=function(s,l){var u=new(ae().WebVTT.Parser)(ae(),ae().vttjs,ae().WebVTT.StringDecoder()),t=[];u.oncue=function(a){l.addCue(a)},u.onparsingerror=function(a){t.push(a)},u.onflush=function(){l.trigger({type:"loadeddata",target:l})},u.parse(s),t.length>0&&(ae().console&&ae().console.groupCollapsed&&ae().console.groupCollapsed("Text Track parsing errors for "+l.src),t.forEach(function(a){return qt.error(a)}),ae().console&&ae().console.groupEnd&&ae().console.groupEnd()),u.flush()},fn=function(s,l){var u={uri:s},t=Ke(s);t&&(u.cors=t);var a="use-credentials"===l.tech_.crossOrigin();a&&(u.withCredentials=a),st()(u,Fi(this,function(h,v,S){if(h)return qt.error(h,v);l.loaded_=!0,"function"!=typeof ae().WebVTT?l.tech_&&l.tech_.any(["vttjsloaded","vttjserror"],function(P){if("vttjserror"!==P.type)return Lt(S,l);qt.error("vttjs failed to load, stopping trying to process "+l.src)}):Lt(S,l)}))},Zn=function(g){function s(u){var t;if(void 0===u&&(u={}),!u.tech)throw new Error("A tech was not provided.");var a=qi(u,{kind:yu[u.kind]||"subtitles",language:u.language||u.srclang||""}),h=ac[a.mode]||"disabled",v=a.default;("metadata"===a.kind||"chapters"===a.kind)&&(h="hidden"),(t=g.call(this,a)||this).tech_=a.tech,t.cues_=[],t.activeCues_=[],t.preload_=!1!==t.tech_.preloadTextTracks;var S=new Qd(t.cues_),P=new Qd(t.activeCues_),H=!1,Y=Fi(Ee(t),function(){!this.tech_.isReady_||this.tech_.isDisposed()||(this.activeCues=this.activeCues,H&&(this.trigger("cuechange"),H=!1))});return t.tech_.one("dispose",function(){t.tech_.off("timeupdate",Y)}),"disabled"!==h&&t.tech_.on("timeupdate",Y),Object.defineProperties(Ee(t),{default:{get:function(){return v},set:function(){}},mode:{get:function(){return h},set:function(je){!ac[je]||h!==je&&(h=je,!this.preload_&&"disabled"!==h&&0===this.cues.length&&fn(this.src,this),this.tech_.off("timeupdate",Y),"disabled"!==h&&this.tech_.on("timeupdate",Y),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?S:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return P;for(var je=this.tech_.currentTime(),Pe=[],Re=0,Bt=this.cues.length;Re<Bt;Re++){var It=this.cues[Re];(It.startTime<=je&&It.endTime>=je||It.startTime===It.endTime&&It.startTime<=je&&It.startTime+.5>=je)&&Pe.push(It)}if(H=!1,Pe.length!==this.activeCues_.length)H=!0;else for(var tn=0;tn<Pe.length;tn++)-1===this.activeCues_.indexOf(Pe[tn])&&(H=!0);return this.activeCues_=Pe,P.setCues_(this.activeCues_),P},set:function(){}}}),a.src?(t.src=a.src,t.preload_||(t.loaded_=!0),(t.preload_||"subtitles"!==a.kind&&"captions"!==a.kind)&&fn(t.src,Ee(t))):t.loaded_=!0,t}$e(s,g);var l=s.prototype;return l.addCue=function(t){var a=t;if(ae().vttjs&&!(t instanceof ae().vttjs.VTTCue)){for(var h in a=new(ae().vttjs.VTTCue)(t.startTime,t.endTime,t.text),t)h in a||(a[h]=t[h]);a.id=t.id,a.originalCue_=t}for(var v=this.tech_.textTracks(),S=0;S<v.length;S++)v[S]!==this&&v[S].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},l.removeCue=function(t){for(var a=this.cues_.length;a--;){var h=this.cues_[a];if(h===t||h.originalCue_&&h.originalCue_===t){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},s}(Pu);Zn.prototype.allowedEvents_={cuechange:"cuechange"};var fr=function(g){function s(l){var u;void 0===l&&(l={});var t=qi(l,{kind:Ll[l.kind]||""});u=g.call(this,t)||this;var a=!1;return Object.defineProperty(Ee(u),"enabled",{get:function(){return a},set:function(v){"boolean"!=typeof v||v===a||(a=v,this.trigger("enabledchange"))}}),t.enabled&&(u.enabled=t.enabled),u.loaded_=!0,u}return $e(s,g),s}(Pu),nr=function(g){function s(l){var u;void 0===l&&(l={});var t=qi(l,{kind:Nl[l.kind]||""});u=g.call(this,t)||this;var a=!1;return Object.defineProperty(Ee(u),"selected",{get:function(){return a},set:function(v){"boolean"!=typeof v||v===a||(a=v,this.trigger("selectedchange"))}}),t.selected&&(u.selected=t.selected),u}return $e(s,g),s}(Pu),Ti=function(g){function s(l){var u;void 0===l&&(l={}),u=g.call(this)||this;var t,a=new Zn(l);return u.kind=a.kind,u.src=a.src,u.srclang=a.language,u.label=a.label,u.default=a.default,Object.defineProperties(Ee(u),{readyState:{get:function(){return t}},track:{get:function(){return a}}}),t=0,a.addEventListener("loadeddata",function(){t=2,u.trigger({type:"load",target:Ee(u)})}),u}return $e(s,g),s}(oo);Ti.prototype.allowedEvents_={load:"load"},Ti.NONE=0,Ti.LOADING=1,Ti.LOADED=2,Ti.ERROR=3;var Oo={audio:{ListClass:Wu,TrackClass:fr,capitalName:"Audio"},video:{ListClass:$o,TrackClass:nr,capitalName:"Video"},text:{ListClass:cl,TrackClass:Zn,capitalName:"Text"}};Object.keys(Oo).forEach(function(g){Oo[g].getterName=g+"Tracks",Oo[g].privateName=g+"Tracks_"});var Xa={remoteText:{ListClass:cl,TrackClass:Zn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ha,TrackClass:Ti,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ss=De({},Oo,Xa);Xa.names=Object.keys(Xa),Oo.names=Object.keys(Oo),Ss.names=[].concat(Xa.names).concat(Oo.names);var ji=function(g){function s(u,t){var a;return void 0===u&&(u={}),void 0===t&&(t=function(){}),u.reportTouchActivity=!1,(a=g.call(this,null,u,t)||this).onDurationChange_=function(h){return a.onDurationChange(h)},a.trackProgress_=function(h){return a.trackProgress(h)},a.trackCurrentTime_=function(h){return a.trackCurrentTime(h)},a.stopTrackingCurrentTime_=function(h){return a.stopTrackingCurrentTime(h)},a.disposeSourceHandler_=function(h){return a.disposeSourceHandler(h)},a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Ss.names.forEach(function(h){var v=Ss[h];u&&u[v.getterName]&&(a[v.privateName]=u[v.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(h){!1===u["native"+h+"Tracks"]&&(a["featuresNative"+h+"Tracks"]=!1)}),!1===u.nativeCaptions||!1===u.nativeTextTracks?a.featuresNativeTextTracks=!1:(!0===u.nativeCaptions||!0===u.nativeTextTracks)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=!1!==u.preloadTextTracks,a.autoRemoteTextTracks_=new Ss.text.ListClass,a.initTrackListeners(),u.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}$e(s,g);var l=s.prototype;return l.triggerSourceset=function(t){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},l.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},l.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},l.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Fi(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},l.onDurationChange=function(t){this.duration_=this.duration()},l.buffered=function(){return B(0,0)},l.bufferedPercent=function(){return J(this.buffered(),this.duration_)},l.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},l.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},l.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},l.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},l.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},l.dispose=function(){this.clearTracks(Oo.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),g.prototype.dispose.call(this)},l.clearTracks=function(t){var a=this;(t=[].concat(t)).forEach(function(h){for(var v=a[h+"Tracks"]()||[],S=v.length;S--;){var P=v[S];"text"===h&&a.removeRemoteTextTrack(P),v.removeTrack(P)}})},l.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],a=t.length;a--;)this.removeRemoteTextTrack(t[a])},l.reset=function(){},l.crossOrigin=function(){},l.setCrossOrigin=function(){},l.error=function(t){return void 0!==t&&(this.error_=new ye(t),this.trigger("error")),this.error_},l.played=function(){return this.hasStarted_?B(0,0):B()},l.play=function(){},l.setScrubbing=function(){},l.scrubbing=function(){},l.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},l.initTrackListeners=function(){var t=this;Oo.names.forEach(function(a){var v=function(){t.trigger(a+"trackchange")},S=t[Oo[a].getterName]();S.addEventListener("removetrack",v),S.addEventListener("addtrack",v),t.on("dispose",function(){S.removeEventListener("removetrack",v),S.removeEventListener("addtrack",v)})})},l.addWebVttScript_=function(){var t=this;if(!ae().WebVTT)if(Ae().body.contains(this.el())){if(!this.options_["vtt.js"]&&Oi(Ve())&&Object.keys(Ve()).length>0)return void this.trigger("vttjsloaded");var a=Ae().createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){t.trigger("vttjsloaded")},a.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),ae().WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},l.emulateTextTracks=function(){var t=this,a=this.textTracks(),h=this.remoteTextTracks(),v=function(Z){return a.addTrack(Z.track)},S=function(Z){return a.removeTrack(Z.track)};h.on("addtrack",v),h.on("removetrack",S),this.addWebVttScript_();var P=function(){return t.trigger("texttrackchange")},H=function(){P();for(var Z=0;Z<a.length;Z++){var we=a[Z];we.removeEventListener("cuechange",P),"showing"===we.mode&&we.addEventListener("cuechange",P)}};H(),a.addEventListener("change",H),a.addEventListener("addtrack",H),a.addEventListener("removetrack",H),this.on("dispose",function(){h.off("addtrack",v),h.off("removetrack",S),a.removeEventListener("change",H),a.removeEventListener("addtrack",H),a.removeEventListener("removetrack",H);for(var Y=0;Y<a.length;Y++)a[Y].removeEventListener("cuechange",P)})},l.addTextTrack=function(t,a,h){if(!t)throw new Error("TextTrack kind is required but was not provided");return function ku(g,s,l,u,t){void 0===t&&(t={});var a=g.textTracks();t.kind=s,l&&(t.label=l),u&&(t.language=u),t.tech=g;var h=new Ss.text.TrackClass(t);return a.addTrack(h),h}(this,t,a,h)},l.createRemoteTextTrack=function(t){var a=qi(t,{tech:this});return new Xa.remoteTextEl.TrackClass(a)},l.addRemoteTextTrack=function(t,a){var h=this;void 0===t&&(t={});var v=this.createRemoteTextTrack(t);return!0!==a&&!1!==a&&(qt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(v),this.remoteTextTracks().addTrack(v.track),!0!==a&&this.ready(function(){return h.autoRemoteTextTracks_.addTrack(v.track)}),v},l.removeRemoteTextTrack=function(t){var a=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},l.getVideoPlaybackQuality=function(){return{}},l.requestPictureInPicture=function(){var t=this.options_.Promise||ae().Promise;if(t)return t.reject()},l.disablePictureInPicture=function(){return!0},l.setDisablePictureInPicture=function(){},l.setPoster=function(){},l.playsinline=function(){},l.setPlaysinline=function(){},l.overrideNativeAudioTracks=function(){},l.overrideNativeVideoTracks=function(){},l.canPlayType=function(){return""},s.canPlayType=function(){return""},s.canPlaySource=function(t,a){return s.canPlayType(t.type)},s.isTech=function(t){return t.prototype instanceof s||t instanceof s||t===s},s.registerTech=function(t,a){if(s.techs_||(s.techs_={}),!s.isTech(a))throw new Error("Tech "+t+" must be a Tech");if(!s.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!s.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=ds(t),s.techs_[t]=a,s.techs_[cu(t)]=a,"Tech"!==t&&s.defaultTechOrder_.push(t),a},s.getTech=function(t){if(t){if(s.techs_&&s.techs_[t])return s.techs_[t];if(t=ds(t),ae()&&ae().videojs&&ae().videojs[t])return qt.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),ae().videojs[t]}},s}(nn);Ss.names.forEach(function(g){var s=Ss[g];ji.prototype[s.getterName]=function(){return this[s.privateName]=this[s.privateName]||new s.ListClass,this[s.privateName]}}),ji.prototype.featuresVolumeControl=!0,ji.prototype.featuresMuteControl=!0,ji.prototype.featuresFullscreenResize=!1,ji.prototype.featuresPlaybackRate=!1,ji.prototype.featuresProgressEvents=!1,ji.prototype.featuresSourceset=!1,ji.prototype.featuresTimeupdateEvents=!1,ji.prototype.featuresNativeTextTracks=!1,ji.withSourceHandlers=function(g){g.registerSourceHandler=function(l,u){var t=g.sourceHandlers;t||(t=g.sourceHandlers=[]),void 0===u&&(u=t.length),t.splice(u,0,l)},g.canPlayType=function(l){for(var t,u=g.sourceHandlers||[],a=0;a<u.length;a++)if(t=u[a].canPlayType(l))return t;return""},g.selectSourceHandler=function(l,u){for(var t=g.sourceHandlers||[],h=0;h<t.length;h++)if(t[h].canHandleSource(l,u))return t[h];return null},g.canPlaySource=function(l,u){var t=g.selectSourceHandler(l,u);return t?t.canHandleSource(l,u):""},["seekable","seeking","duration"].forEach(function(l){var u=this[l];"function"==typeof u&&(this[l]=function(){return this.sourceHandler_&&this.sourceHandler_[l]?this.sourceHandler_[l].apply(this.sourceHandler_,arguments):u.apply(this,arguments)})},g.prototype),g.prototype.setSource=function(l){var u=g.selectSourceHandler(l,this.options_);u||(g.nativeSourceHandler?u=g.nativeSourceHandler:qt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),u!==g.nativeSourceHandler&&(this.currentSource_=l),this.sourceHandler_=u.handleSource(l,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},g.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},nn.registerComponent("Tech",ji),ji.registerTech("Tech",ji),ji.defaultTechOrder_=[];var Fl={},Gh={},ad={};function Qp(g,s,l){g.setTimeout(function(){return es(s,Fl[s.type],l,g)},1)}function uc(g,s,l,u){void 0===u&&(u=null);var t="call"+ds(l),a=g.reduce(Xp(t),u),h=a===ad,v=h?null:s[l](a);return function Ro(g,s,l,u){for(var t=g.length-1;t>=0;t--){var a=g[t];a[s]&&a[s](u,l)}}(g,l,v,h),v}var $v={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},zv={setCurrentTime:1,setMuted:1,setVolume:1},jl={play:1,pause:1};function Xp(g){return function(s,l){return s===ad?ad:l[g]?l[g](s):s}}function es(g,s,l,u,t,a){void 0===g&&(g={}),void 0===s&&(s=[]),void 0===t&&(t=[]),void 0===a&&(a=!1);var v=s[0],S=s.slice(1);if("string"==typeof v)es(g,Fl[v],l,u,t,a);else if(v){var P=function Ua(g,s){var l=Gh[g.id()],u=null;if(null==l)return u=s(g),Gh[g.id()]=[[s,u]],u;for(var t=0;t<l.length;t++){var a=l[t];a[0]===s&&(u=a[1])}return null===u&&(u=s(g),l.push([s,u])),u}(u,v);if(!P.setSource)return t.push(P),es(g,S,l,u,t,a);P.setSource(Ar({},g),function(H,Y){if(H)return es(g,S,l,u,t,a);t.push(P),es(Y,g.type===Y.type?S:Fl[Y.type],l,u,t,a)})}else S.length?es(g,S,l,u,t,a):a?l(g,t):es(g,Fl["*"],l,u,t,!0)}var $h={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},dl=function(s){void 0===s&&(s="");var l=be(s);return $h[l.toLowerCase()]||""},fa=function g(s){if(Array.isArray(s)){var l=[];s.forEach(function(u){u=g(u),Array.isArray(u)?l=l.concat(u):Xi(u)&&l.push(u)}),s=l}else s="string"==typeof s&&s.trim()?[zh({src:s})]:Xi(s)&&"string"==typeof s.src&&s.src&&s.src.trim()?[zh(s)]:[];return s};function zh(g){if(!g.type){var s=dl(g.src);s&&(g.type=s)}return g}var Bs=function(g){function s(l,u,t){var a,h=qi({createEl:!1},u);if(a=g.call(this,l,h,t)||this,u.playerOptions.sources&&0!==u.playerOptions.sources.length)l.src(u.playerOptions.sources);else for(var v=0,S=u.playerOptions.techOrder;v<S.length;v++){var P=ds(S[v]),H=ji.getTech(P);if(P||(H=nn.getComponent(P)),H&&H.isSupported()){l.loadTech_(P);break}}return a}return $e(s,g),s}(nn);nn.registerComponent("MediaLoader",Bs);var du=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).handleMouseOver_=function(h){return a.handleMouseOver(h)},a.handleMouseOut_=function(h){return a.handleMouseOut(h)},a.handleClick_=function(h){return a.handleClick(h)},a.handleKeyDown_=function(h){return a.handleKeyDown(h)},a.emitTapEvents(),a.enable(),a}$e(s,g);var l=s.prototype;return l.createEl=function(t,a,h){void 0===t&&(t="div"),void 0===a&&(a={}),void 0===h&&(h={}),a=Ar({className:this.buildCSSClass(),tabIndex:0},a),"button"===t&&qt.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),h=Ar({role:"button"},h),this.tabIndex_=a.tabIndex;var v=Ir(t,a,h);return v.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},l.dispose=function(){this.controlTextEl_=null,g.prototype.dispose.call(this)},l.createControlTextEl=function(t){return this.controlTextEl_=Ir("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},l.controlText=function(t,a){if(void 0===a&&(a=this.el()),void 0===t)return this.controlText_||"Need Text";var h=this.localize(t);this.controlText_=t,Ka(this.controlTextEl_,h),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",h)},l.buildCSSClass=function(){return"vjs-control vjs-button "+g.prototype.buildCSSClass.call(this)},l.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},l.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},l.handleLanguagechange=function(){this.controlText(this.controlText_)},l.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},l.handleKeyDown=function(t){Fe().isEventKey(t,"Space")||Fe().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},s}(nn);nn.registerComponent("ClickableComponent",du);var Gf=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).update(),a.update_=function(h){return a.update(h)},u.on("posterchange",a.update_),a}$e(s,g);var l=s.prototype;return l.dispose=function(){this.player().off("posterchange",this.update_),g.prototype.dispose.call(this)},l.createEl=function(){return Ir("div",{className:"vjs-poster",tabIndex:-1})},l.update=function(t){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},l.setSrc=function(t){var a="";t&&(a='url("'+t+'")'),this.el_.style.backgroundImage=a},l.handleClick=function(t){if(this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((ua||aa)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?Jt(this.player_.play()):this.player_.pause()}},s}(du);nn.registerComponent("PosterImage",Gf);var pa="#222",Xd={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function hl(g,s){var l;if(4===g.length)l=g[1]+g[1]+g[2]+g[2]+g[3]+g[3];else{if(7!==g.length)throw new Error("Invalid color code provided, "+g+"; must be formatted as e.g. #f0e or #f604e2.");l=g.slice(1)}return"rgba("+parseInt(l.slice(0,2),16)+","+parseInt(l.slice(2,4),16)+","+parseInt(l.slice(4,6),16)+","+s+")"}function qh(g,s,l){try{g.style[s]=l}catch{return}}var Wh=function(g){function s(u,t,a){var h;h=g.call(this,u,t,a)||this;var v=function(P){return h.updateDisplay(P)};return u.on("loadstart",function(S){return h.toggleDisplay(S)}),u.on("texttrackchange",v),u.on("loadedmetadata",function(S){return h.preselectTrack(S)}),u.ready(Fi(Ee(h),function(){if(u.tech_&&u.tech_.featuresNativeTextTracks)this.hide();else{u.on("fullscreenchange",v),u.on("playerresize",v),ae().addEventListener("orientationchange",v),u.on("dispose",function(){return ae().removeEventListener("orientationchange",v)});for(var S=this.options_.playerOptions.tracks||[],P=0;P<S.length;P++)this.player_.addRemoteTextTrack(S[P],!0);this.preselectTrack()}})),h}$e(s,g);var l=s.prototype;return l.preselectTrack=function(){for(var v,S,P,t={captions:1,subtitles:1},a=this.player_.textTracks(),h=this.player_.cache_.selectedLanguage,H=0;H<a.length;H++){var Y=a[H];h&&h.enabled&&h.language&&h.language===Y.language&&Y.kind in t?Y.kind===h.kind?P=Y:P||(P=Y):h&&!h.enabled?(P=null,v=null,S=null):Y.default&&("descriptions"!==Y.kind||v?Y.kind in t&&!S&&(S=Y):v=Y)}P?P.mode="showing":S?S.mode="showing":v&&(v.mode="showing")},l.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},l.clearDisplay=function(){"function"==typeof ae().WebVTT&&ae().WebVTT.processCues(ae(),[],this.el_)},l.updateDisplay=function(){var t=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var h=[],v=0;v<t.length;++v){var S=t[v];"showing"===S.mode&&h.push(S)}this.updateForTrack(h)}else{for(var P=null,H=null,Y=t.length;Y--;){var Z=t[Y];"showing"===Z.mode&&("descriptions"===Z.kind?P=Z:H=Z)}H?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(H)):P&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(P))}},l.updateDisplayState=function(t){for(var a=this.player_.textTrackSettings.getValues(),h=t.activeCues,v=h.length;v--;){var S=h[v];if(S){var P=S.displayState;if(a.color&&(P.firstChild.style.color=a.color),a.textOpacity&&qh(P.firstChild,"color",hl(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(P.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&qh(P.firstChild,"backgroundColor",hl(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?qh(P,"backgroundColor",hl(a.windowColor,a.windowOpacity)):P.style.backgroundColor=a.windowColor),a.edgeStyle&&("dropshadow"===a.edgeStyle?P.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+pa:"raised"===a.edgeStyle?P.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+pa:"depressed"===a.edgeStyle?P.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+pa:"uniform"===a.edgeStyle&&(P.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+pa)),a.fontPercent&&1!==a.fontPercent){var H=ae().parseFloat(P.style.fontSize);P.style.fontSize=H*a.fontPercent+"px",P.style.height="auto",P.style.top="auto"}a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?P.firstChild.style.fontVariant="small-caps":P.firstChild.style.fontFamily=Xd[a.fontFamily])}}},l.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"==typeof ae().WebVTT&&!t.every(function(we){return!we.activeCues})){for(var a=[],h=0;h<t.length;++h)for(var v=t[h],S=0;S<v.activeCues.length;++S)a.push(v.activeCues[S]);ae().WebVTT.processCues(ae(),a,this.el_);for(var P=0;P<t.length;++P){for(var H=t[P],Y=0;Y<H.activeCues.length;++Y){var Z=H.activeCues[Y].displayState;ue(Z,"vjs-text-track-cue"),ue(Z,"vjs-text-track-cue-"+(H.language?H.language:P))}this.player_.textTrackSettings&&this.updateDisplayState(H)}}},s}(nn);nn.registerComponent("TextTrackDisplay",Wh);var Ul=function(g){function s(){return g.apply(this,arguments)||this}return $e(s,g),s.prototype.createEl=function(){var t=this.player_.isAudio(),a=this.localize(t?"Audio Player":"Video Player"),h=Ir("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),v=g.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return v.appendChild(h),v},s}(nn);nn.registerComponent("LoadingSpinner",Ul);var hu=function(g){function s(){return g.apply(this,arguments)||this}$e(s,g);var l=s.prototype;return l.createEl=function(t,a,h){void 0===a&&(a={}),void 0===h&&(h={});var v=Ir("button",a=Ar({className:this.buildCSSClass()},a),h=Ar({type:"button"},h));return v.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(v),v},l.addChild=function(t,a){return void 0===a&&(a={}),qt.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),nn.prototype.addChild.call(this,t,a)},l.enable=function(){g.prototype.enable.call(this),this.el_.removeAttribute("disabled")},l.disable=function(){g.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},l.handleKeyDown=function(t){Fe().isEventKey(t,"Space")||Fe().isEventKey(t,"Enter")?t.stopPropagation():g.prototype.handleKeyDown.call(this,t)},s}(du);nn.registerComponent("Button",hu);var Rc=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).mouseused_=!1,a.on("mousedown",function(h){return a.handleMouseDown(h)}),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-big-play-button"},l.handleClick=function(t){var a=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var h=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Jt(a),void(this.player_.tech(!0)&&(!ua&&!aa||!h)&&this.player_.tech(!0).focus())}var v=this.player_.getChild("controlBar"),S=v&&v.getChild("playToggle");if(S){var P=function(){return S.focus()};mt(a)?a.then(P,function(){}):this.setTimeout(P,1)}else this.player_.tech(!0).focus()},l.handleKeyDown=function(t){this.mouseused_=!1,g.prototype.handleKeyDown.call(this,t)},l.handleMouseDown=function(t){this.mouseused_=!0},s}(hu);Rc.prototype.controlText_="Play Video",nn.registerComponent("BigPlayButton",Rc);var Kh=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).controlText(t&&t.controlText||a.localize("Close")),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-close-button "+g.prototype.buildCSSClass.call(this)},l.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},l.handleKeyDown=function(t){Fe().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):g.prototype.handleKeyDown.call(this,t)},s}(hu);nn.registerComponent("CloseButton",Kh);var Da=function(g){function s(u,t){var a;return void 0===t&&(t={}),a=g.call(this,u,t)||this,t.replay=void 0===t.replay||t.replay,a.on(u,"play",function(h){return a.handlePlay(h)}),a.on(u,"pause",function(h){return a.handlePause(h)}),t.replay&&a.on(u,"ended",function(h){return a.handleEnded(h)}),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-play-control "+g.prototype.buildCSSClass.call(this)},l.handleClick=function(t){this.player_.paused()?Jt(this.player_.play()):this.player_.pause()},l.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},l.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},l.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},l.handleEnded=function(t){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(h){return a.handleSeeked(h)})},s}(hu);Da.prototype.controlText_="Play",nn.registerComponent("PlayToggle",Da);var lc=function(s,l){s=s<0?0:s;var u=Math.floor(s%60),t=Math.floor(s/60%60),a=Math.floor(s/3600),h=Math.floor(l/60%60),v=Math.floor(l/3600);return(isNaN(s)||s===1/0)&&(a=t=u="-"),(a=a>0||v>0?a+":":"")+(t=((a||h>=10)&&t<10?"0"+t:t)+":")+(u<10?"0"+u:u)},Nc=lc;function Mu(g,s){return void 0===s&&(s=g),Nc(g,s)}var fl=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).on(u,["timeupdate","ended"],function(h){return a.updateContent(h)}),a.updateTextNode_(),a}$e(s,g);var l=s.prototype;return l.createEl=function(){var t=this.buildCSSClass(),a=g.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),h=Ir("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return a.appendChild(h),this.contentEl_=Ir("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},l.dispose=function(){this.contentEl_=null,this.textNode_=null,g.prototype.dispose.call(this)},l.updateTextNode_=function(t){var a=this;void 0===t&&(t=0),t=Mu(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(a.contentEl_){var h=a.textNode_;h&&a.contentEl_.firstChild!==h&&(h=null,qt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=Ae().createTextNode(a.formattedTime_),a.textNode_&&(h?a.contentEl_.replaceChild(a.textNode_,h):a.contentEl_.appendChild(a.textNode_))}}))},l.updateContent=function(t){},s}(nn);fl.prototype.labelText_="Time",fl.prototype.controlText_="Time",nn.registerComponent("TimeDisplay",fl);var cc=function(g){function s(){return g.apply(this,arguments)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-current-time"},l.updateContent=function(t){var a;a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},s}(fl);cc.prototype.labelText_="Current Time",cc.prototype.controlText_="Current Time",nn.registerComponent("CurrentTimeDisplay",cc);var Jd=function(g){function s(u,t){var a,h=function(S){return a.updateContent(S)};return(a=g.call(this,u,t)||this).on(u,"durationchange",h),a.on(u,"loadstart",h),a.on(u,"loadedmetadata",h),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-duration"},l.updateContent=function(t){var a=this.player_.duration();this.updateTextNode_(a)},s}(fl);Jd.prototype.labelText_="Duration",Jd.prototype.controlText_="Duration",nn.registerComponent("DurationDisplay",Jd);var Zh=function(g){function s(){return g.apply(this,arguments)||this}return $e(s,g),s.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=g.prototype.createEl.call(this,"div"),h=g.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(h),t.appendChild(a),t},s}(nn);nn.registerComponent("TimeDivider",Zh);var Yh=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).on(u,"durationchange",function(h){return a.updateContent(h)}),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-remaining-time"},l.createEl=function(){var t=g.prototype.createEl.call(this);return t.insertBefore(Ir("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},l.updateContent=function(t){var a;"number"==typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))},s}(fl);Yh.prototype.labelText_="Remaining Time",Yh.prototype.controlText_="Remaining Time",nn.registerComponent("RemainingTimeDisplay",Yh);var Vl=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).updateShowing(),a.on(a.player(),"durationchange",function(h){return a.updateShowing(h)}),a}$e(s,g);var l=s.prototype;return l.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ir("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ir("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(Ae().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},l.dispose=function(){this.contentEl_=null,g.prototype.dispose.call(this)},l.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},s}(nn);nn.registerComponent("LiveDisplay",Vl);var $f=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(h){return a.updateLiveEdgeStatus(h)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}$e(s,g);var l=s.prototype;return l.createEl=function(){var t=g.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Ir("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},l.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},l.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},l.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,g.prototype.dispose.call(this)},s}(hu);$f.prototype.controlText_="Seek to live, currently playing live",nn.registerComponent("SeekToLive",$f);var eh=function(s,l,u){return s=Number(s),Math.min(u,Math.max(l,isNaN(s)?l:s))},ld=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).handleMouseDown_=function(h){return a.handleMouseDown(h)},a.handleMouseUp_=function(h){return a.handleMouseUp(h)},a.handleKeyDown_=function(h){return a.handleKeyDown(h)},a.handleClick_=function(h){return a.handleClick(h)},a.handleMouseMove_=function(h){return a.handleMouseMove(h)},a.update_=function(h){return a.update(h)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}$e(s,g);var l=s.prototype;return l.enabled=function(){return this.enabled_},l.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},l.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},l.createEl=function(t,a,h){return void 0===a&&(a={}),void 0===h&&(h={}),a.className=a.className+" vjs-slider",a=Ar({tabIndex:0},a),h=Ar({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},h),g.prototype.createEl.call(this,t,a,h)},l.handleMouseDown=function(t){var a=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"===t.type&&!_o&&t.preventDefault(),Gr(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(t)},l.handleMouseMove=function(t){},l.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;kr(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},l.update=function(){var t=this;if(this.el_&&this.bar){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var h=t.vertical()?"height":"width";t.bar.el().style[h]=(100*a).toFixed(2)+"%"})),a}},l.getProgress=function(){return Number(eh(this.getPercent(),0,1).toFixed(4))},l.calculateDistance=function(t){var a=bi(this.el_,t);return this.vertical()?a.y:a.x},l.handleKeyDown=function(t){Fe().isEventKey(t,"Left")||Fe().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Fe().isEventKey(t,"Right")||Fe().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):g.prototype.handleKeyDown.call(this,t)},l.handleClick=function(t){t.stopPropagation(),t.preventDefault()},l.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},s}(nn);nn.registerComponent("Slider",ld);var Qh=function(s,l){return eh(s/l*100,0,100).toFixed(2)+"%"},cd=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).partEls_=[],a.on(u,"progress",function(h){return a.update(h)}),a}$e(s,g);var l=s.prototype;return l.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=Ir("span",{className:"vjs-control-text"}),h=Ir("span",{textContent:this.localize("Loaded")}),v=Ae().createTextNode(": ");return this.percentageEl_=Ir("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(a),a.appendChild(h),a.appendChild(v),a.appendChild(this.percentageEl_),t},l.dispose=function(){this.partEls_=null,this.percentageEl_=null,g.prototype.dispose.call(this)},l.update=function(t){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var h=a.player_.liveTracker,v=a.player_.buffered(),S=h&&h.isLive()?h.seekableEnd():a.player_.duration(),P=a.player_.bufferedEnd(),H=a.partEls_,Y=Qh(P,S);a.percent_!==Y&&(a.el_.style.width=Y,Ka(a.percentageEl_,Y),a.percent_=Y);for(var Z=0;Z<v.length;Z++){var we=v.start(Z),je=v.end(Z),Pe=H[Z];Pe||(Pe=a.el_.appendChild(Ir()),H[Z]=Pe),(Pe.dataset.start!==we||Pe.dataset.end!==je)&&(Pe.dataset.start=we,Pe.dataset.end=je,Pe.style.left=Qh(we,P),Pe.style.width=Qh(je-we,P))}for(var Re=H.length;Re>v.length;Re--)a.el_.removeChild(H[Re-1]);H.length=v.length})},s}(nn);nn.registerComponent("LoadProgressBar",cd);var dd=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).update=Ps(Fi(Ee(a),a.update),30),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},l.update=function(t,a,h){var v=Xr(this.el_),S=Fr(this.player_.el()),P=t.width*a;if(S&&v){var H=t.left-S.left+P,Y=t.width-P+(S.right-t.right),Z=v.width/2;H<Z?Z+=Z-H:Y<Z&&(Z=Y),Z<0?Z=0:Z>v.width&&(Z=v.width),Z=Math.round(Z),this.el_.style.right="-"+Z+"px",this.write(h)}},l.write=function(t){Ka(this.el_,t)},l.updateTime=function(t,a,h,v){var S=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var P,H=S.player_.duration();if(S.player_.liveTracker&&S.player_.liveTracker.isLive()){var Y=S.player_.liveTracker.liveWindow(),Z=Y-a*Y;P=(Z<1?"":"-")+Mu(Z,Y)}else P=Mu(h,H);S.update(t,a,P),v&&v()})},s}(nn);nn.registerComponent("TimeTooltip",dd);var zf=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).update=Ps(Fi(Ee(a),a.update),30),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},l.update=function(t,a){var h=this.getChild("timeTooltip");if(h){var v=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();h.updateTime(t,a,v)}},s}(nn);zf.prototype.options_={children:[]},!io&&!yo&&zf.prototype.options_.children.push("timeTooltip"),nn.registerComponent("PlayProgressBar",zf);var dc=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).update=Ps(Fi(Ee(a),a.update),30),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},l.update=function(t,a){var h=this,v=a*this.player_.duration();this.getChild("timeTooltip").updateTime(t,a,v,function(){h.el_.style.left=t.width*a+"px"})},s}(nn);dc.prototype.options_={children:["timeTooltip"]},nn.registerComponent("MouseTimeDisplay",dc);var _u=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).setEventHandlers_(),a}$e(s,g);var l=s.prototype;return l.setEventHandlers_=function(){var t=this;this.update_=Fi(this,this.update),this.update=Ps(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return t.enableInterval_(a)},this.disableIntervalHandler_=function(a){return t.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae()&&"visibilityState"in Ae()&&this.on(Ae(),"visibilitychange",this.toggleVisibility_)},l.toggleVisibility_=function(t){"hidden"===Ae().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},l.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},l.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},l.update=function(t){var a=this;if("hidden"!==Ae().visibilityState){var h=g.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var v=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),S=a.player_.liveTracker,P=a.player_.duration();S&&S.isLive()&&(P=a.player_.liveTracker.liveCurrentTime()),a.percent_!==h&&(a.el_.setAttribute("aria-valuenow",(100*h).toFixed(2)),a.percent_=h),(a.currentTime_!==v||a.duration_!==P)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Mu(v,P),Mu(P,P)],"{1} of {2}")),a.currentTime_=v,a.duration_=P),a.bar&&a.bar.update(Fr(a.el()),a.getProgress())}),h}},l.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},l.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},l.getPercent=function(){var a,t=this.getCurrentTime_(),h=this.player_.liveTracker;return h&&h.isLive()?(a=(t-h.seekableStart())/h.liveWindow(),h.atLiveEdge()&&(a=1)):a=t/this.player_.duration(),a},l.handleMouseDown=function(t){!In(t)||(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),g.prototype.handleMouseDown.call(this,t))},l.handleMouseMove=function(t){if(In(t)){var a,h=this.calculateDistance(t),v=this.player_.liveTracker;if(v&&v.isLive()){if(h>=.99)return void v.seekToLiveEdge();var S=v.seekableStart(),P=v.liveCurrentTime();if((a=S+h*v.liveWindow())>=P&&(a=P),a<=S&&(a=S+.1),a===1/0)return}else(a=h*this.player_.duration())===this.player_.duration()&&(a-=.1);this.userSeek_(a)}},l.enable=function(){g.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.show()},l.disable=function(){g.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.hide()},l.handleMouseUp=function(t){g.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Jt(this.player_.play()):this.update_()},l.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},l.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},l.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},l.handleKeyDown=function(t){var a=this.player_.liveTracker;if(Fe().isEventKey(t,"Space")||Fe().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Fe().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(Fe().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Fe()(t))){t.preventDefault(),t.stopPropagation();var h=10*(Fe().codes[Fe()(t)]-Fe().codes[0])/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*h):this.userSeek_(this.player_.duration()*h)}else Fe().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Fe().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):g.prototype.handleKeyDown.call(this,t)},l.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ae()&&"visibilityState"in Ae()&&this.off(Ae(),"visibilitychange",this.toggleVisibility_),g.prototype.dispose.call(this)},s}(ld);_u.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!io&&!yo&&_u.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),nn.registerComponent("SeekBar",_u);var nh=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).handleMouseMove=Ps(Fi(Ee(a),a.handleMouseMove),30),a.throttledHandleMouseSeek=Ps(Fi(Ee(a),a.handleMouseSeek),30),a.handleMouseUpHandler_=function(h){return a.handleMouseUp(h)},a.handleMouseDownHandler_=function(h){return a.handleMouseDown(h)},a.enable(),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},l.handleMouseMove=function(t){var a=this.getChild("seekBar");if(a){var h=a.getChild("playProgressBar"),v=a.getChild("mouseTimeDisplay");if(h||v){var S=a.el(),P=Xr(S),H=bi(S,t).x;H=eh(H,0,1),v&&v.update(P,H),h&&h.update(P,a.getProgress())}}},l.handleMouseSeek=function(t){var a=this.getChild("seekBar");a&&a.handleMouseMove(t)},l.enabled=function(){return this.enabled_},l.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Jt(this.player_.play())}},l.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},l.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},l.handleMouseDown=function(t){var a=this.el_.ownerDocument,h=this.getChild("seekBar");h&&h.handleMouseDown(t),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},l.handleMouseUp=function(t){var a=this.getChild("seekBar");a&&a.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},s}(nn);nh.prototype.options_={children:["seekBar"]},nn.registerComponent("ProgressControl",nh);var Hl=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).on(u,["enterpictureinpicture","leavepictureinpicture"],function(h){return a.handlePictureInPictureChange(h)}),a.on(u,["disablepictureinpicturechanged","loadedmetadata"],function(h){return a.handlePictureInPictureEnabledChange(h)}),a.disable(),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-picture-in-picture-control "+g.prototype.buildCSSClass.call(this)},l.handlePictureInPictureEnabledChange=function(){Ae().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},l.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},l.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},s}(hu);Hl.prototype.controlText_="Picture-in-Picture",nn.registerComponent("PictureInPictureToggle",Hl);var hc=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).on(u,"fullscreenchange",function(h){return a.handleFullscreenChange(h)}),!1===Ae()[u.fsApi_.fullscreenEnabled]&&a.disable(),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-fullscreen-control "+g.prototype.buildCSSClass.call(this)},l.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},l.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},s}(hu);hc.prototype.controlText_="Fullscreen",nn.registerComponent("FullscreenToggle",hc);var qf=function(g){function s(){return g.apply(this,arguments)||this}return $e(s,g),s.prototype.createEl=function(){var t=g.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},s}(nn);nn.registerComponent("VolumeLevel",qf);var Wf=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).update=Ps(Fi(Ee(a),a.update),30),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},l.update=function(t,a,h,v){if(!h){var S=Fr(this.el_),P=Fr(this.player_.el()),H=t.width*a;if(!P||!S)return;var Y=t.left-P.left+H,Z=t.width-H+(P.right-t.right),we=S.width/2;Y<we?we+=we-Y:Z<we&&(we=Z),we<0?we=0:we>S.width&&(we=S.width),this.el_.style.right="-"+we+"px"}this.write(v+"%")},l.write=function(t){Ka(this.el_,t)},l.updateVolume=function(t,a,h,v,S){var P=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){P.update(t,a,h,v.toFixed(0)),S&&S()})},s}(nn);nn.registerComponent("VolumeLevelTooltip",Wf);var pl=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).update=Ps(Fi(Ee(a),a.update),30),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},l.update=function(t,a,h){var v=this,S=100*a;this.getChild("volumeLevelTooltip").updateVolume(t,a,h,S,function(){h?v.el_.style.bottom=t.height*a+"px":v.el_.style.left=t.width*a+"px"})},s}(nn);pl.prototype.options_={children:["volumeLevelTooltip"]},nn.registerComponent("MouseVolumeLevelDisplay",pl);var Xh=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).on("slideractive",function(h){return a.updateLastVolume_(h)}),a.on(u,"volumechange",function(h){return a.updateARIAAttributes(h)}),u.ready(function(){return a.updateARIAAttributes()}),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},l.handleMouseDown=function(t){!In(t)||g.prototype.handleMouseDown.call(this,t)},l.handleMouseMove=function(t){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var h=this.el(),v=Fr(h),S=this.vertical(),P=bi(h,t);P=eh(P=S?P.y:P.x,0,1),a.update(v,P,S)}!In(t)||(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},l.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},l.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},l.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},l.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},l.updateARIAAttributes=function(t){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},l.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},l.updateLastVolume_=function(){var t=this,a=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(a)})},s}(ld);Xh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!io&&!yo&&Xh.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Xh.prototype.playerEvent="volumechange",nn.registerComponent("VolumeBar",Xh);var Jp=function(g){function s(u,t){var a;return void 0===t&&(t={}),t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||Oi(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),function(s,l){l.tech_&&!l.tech_.featuresVolumeControl&&s.addClass("vjs-hidden"),s.on(l,"loadstart",function(){l.tech_.featuresVolumeControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")})}(Ee(a=g.call(this,u,t)||this),u),a.throttledHandleMouseMove=Ps(Fi(Ee(a),a.handleMouseMove),30),a.handleMouseUpHandler_=function(h){return a.handleMouseUp(h)},a.on("mousedown",function(h){return a.handleMouseDown(h)}),a.on("touchstart",function(h){return a.handleMouseDown(h)}),a.on("mousemove",function(h){return a.handleMouseMove(h)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}$e(s,g);var l=s.prototype;return l.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},l.handleMouseDown=function(t){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},l.handleMouseUp=function(t){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},l.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},s}(nn);Jp.prototype.options_={children:["volumeBar"]},nn.registerComponent("VolumeControl",Jp);var Fc=function(g){function s(u,t){var a;return function(s,l){l.tech_&&!l.tech_.featuresMuteControl&&s.addClass("vjs-hidden"),s.on(l,"loadstart",function(){l.tech_.featuresMuteControl?s.removeClass("vjs-hidden"):s.addClass("vjs-hidden")})}(Ee(a=g.call(this,u,t)||this),u),a.on(u,["loadstart","volumechange"],function(h){return a.update(h)}),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-mute-control "+g.prototype.buildCSSClass.call(this)},l.handleClick=function(t){var a=this.player_.volume(),h=this.player_.lastVolume_();0===a?(this.player_.volume(h<.1?.1:h),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},l.update=function(t){this.updateIcon_(),this.updateControlText_()},l.updateIcon_=function(){var t=this.player_.volume(),a=3;io&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?a=0:t<.33?a=1:t<.67&&(a=2);for(var h=0;h<4;h++)G(this.el_,"vjs-vol-"+h);ue(this.el_,"vjs-vol-"+a)},l.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},s}(hu);Fc.prototype.controlText_="Mute",nn.registerComponent("MuteToggle",Fc);var rh=function(g){function s(u,t){var a;return void 0===t&&(t={}),t.inline=!(typeof t.inline<"u")||t.inline,(typeof t.volumeControl>"u"||Oi(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(a=g.call(this,u,t)||this).handleKeyPressHandler_=function(h){return a.handleKeyPress(h)},a.on(u,["loadstart"],function(h){return a.volumePanelState_(h)}),a.on(a.muteToggle,"keyup",function(h){return a.handleKeyPress(h)}),a.on(a.volumeControl,"keyup",function(h){return a.handleVolumeControlKeyUp(h)}),a.on("keydown",function(h){return a.handleKeyPress(h)}),a.on("mouseover",function(h){return a.handleMouseOver(h)}),a.on("mouseout",function(h){return a.handleMouseOut(h)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}$e(s,g);var l=s.prototype;return l.sliderActive_=function(){this.addClass("vjs-slider-active")},l.sliderInactive_=function(){this.removeClass("vjs-slider-active")},l.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},l.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),g.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},l.dispose=function(){this.handleMouseOut(),g.prototype.dispose.call(this)},l.handleVolumeControlKeyUp=function(t){Fe().isEventKey(t,"Esc")&&this.muteToggle.focus()},l.handleMouseOver=function(t){this.addClass("vjs-hover"),Bn(Ae(),"keyup",this.handleKeyPressHandler_)},l.handleMouseOut=function(t){this.removeClass("vjs-hover"),Ls(Ae(),"keyup",this.handleKeyPressHandler_)},l.handleKeyPress=function(t){Fe().isEventKey(t,"Esc")&&this.handleMouseOut()},s}(nn);rh.prototype.options_={children:["muteToggle","volumeControl"]},nn.registerComponent("VolumePanel",rh);var Kf=function(g){function s(u,t){var a;return a=g.call(this,u,t)||this,t&&(a.menuButton_=t.menuButton),a.focusedChild_=-1,a.on("keydown",function(h){return a.handleKeyDown(h)}),a.boundHandleBlur_=function(h){return a.handleBlur(h)},a.boundHandleTapClick_=function(h){return a.handleTapClick(h)},a}$e(s,g);var l=s.prototype;return l.addEventListenerForItem=function(t){t instanceof nn&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},l.removeEventListenerForItem=function(t){t instanceof nn&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},l.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),g.prototype.removeChild.call(this,t)},l.addItem=function(t){var a=this.addChild(t);a&&this.addEventListenerForItem(a)},l.createEl=function(){this.contentEl_=Ir(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=g.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),Bn(a,"click",function(h){h.preventDefault(),h.stopImmediatePropagation()}),a},l.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,g.prototype.dispose.call(this)},l.handleBlur=function(t){var a=t.relatedTarget||Ae().activeElement;if(!this.children().some(function(v){return v.el()===a})){var h=this.menuButton_;h&&h.buttonPressed_&&a!==h.el().firstChild&&h.unpressButton()}},l.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var h=a.filter(function(v){return v.el()===t.target})[0];if(!h)return;"CaptionSettingsMenuItem"!==h.name()&&this.menuButton_.focus()}},l.handleKeyDown=function(t){Fe().isEventKey(t,"Left")||Fe().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(Fe().isEventKey(t,"Right")||Fe().isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},l.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},l.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},l.focus=function(t){void 0===t&&(t=0);var a=this.children().slice();a.length&&a[0].hasClass("vjs-menu-title")&&a.shift(),a.length>0&&(t<0?t=0:t>=a.length&&(t=a.length-1),this.focusedChild_=t,a[t].el_.focus())},s}(nn);nn.registerComponent("Menu",Kf);var jc=function(g){function s(u,t){var a;void 0===t&&(t={}),(a=g.call(this,u,t)||this).menuButton_=new hu(u,t),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var h=hu.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+h,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var v=function(P){return a.handleClick(P)};return a.handleMenuKeyUp_=function(S){return a.handleMenuKeyUp(S)},a.on(a.menuButton_,"tap",v),a.on(a.menuButton_,"click",v),a.on(a.menuButton_,"keydown",function(S){return a.handleKeyDown(S)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),Bn(Ae(),"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(S){return a.handleMouseLeave(S)}),a.on("keydown",function(S){return a.handleSubmenuKeyDown(S)}),a}$e(s,g);var l=s.prototype;return l.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},l.createMenu=function(){var t=new Kf(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=Ir("li",{className:"vjs-menu-title",textContent:ds(this.options_.title),tabIndex:-1}),h=new nn(this.player_,{el:a});t.addItem(h)}if(this.items=this.createItems(),this.items)for(var v=0;v<this.items.length;v++)t.addItem(this.items[v]);return t},l.createItems=function(){},l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},l.buildWrapperCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+hu.prototype.buildCSSClass()+" "+g.prototype.buildCSSClass.call(this)},l.buildCSSClass=function(){var t="vjs-menu-button";return"vjs-menu-button "+(t+=!0===this.options_.inline?"-inline":"-popup")+" "+g.prototype.buildCSSClass.call(this)},l.controlText=function(t,a){return void 0===a&&(a=this.menuButton_.el()),this.menuButton_.controlText(t,a)},l.dispose=function(){this.handleMouseLeave(),g.prototype.dispose.call(this)},l.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},l.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Ls(Ae(),"keyup",this.handleMenuKeyUp_)},l.focus=function(){this.menuButton_.focus()},l.blur=function(){this.menuButton_.blur()},l.handleKeyDown=function(t){Fe().isEventKey(t,"Esc")||Fe().isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),Fe().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(Fe().isEventKey(t,"Up")||Fe().isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},l.handleMenuKeyUp=function(t){(Fe().isEventKey(t,"Esc")||Fe().isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},l.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},l.handleSubmenuKeyDown=function(t){(Fe().isEventKey(t,"Esc")||Fe().isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Fe().isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},l.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),io&&la())return;this.menu.focus()}},l.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},l.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},l.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},s}(nn);nn.registerComponent("MenuButton",jc);var Gl=function(g){function s(l,u){var t,a=u.tracks;if((t=g.call(this,l,u)||this).items.length<=1&&t.hide(),!a)return Ee(t);var h=Fi(Ee(t),t.update);return a.addEventListener("removetrack",h),a.addEventListener("addtrack",h),a.addEventListener("labelchange",h),t.player_.on("ready",h),t.player_.on("dispose",function(){a.removeEventListener("removetrack",h),a.removeEventListener("addtrack",h),a.removeEventListener("labelchange",h)}),t}return $e(s,g),s}(jc);nn.registerComponent("TrackButton",Gl);var eg=["Tab","Esc","Up","Down","Right","Left"],pc=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).selectable=t.selectable,a.isSelected_=t.selected||!1,a.multiSelectable=t.multiSelectable,a.selected(a.isSelected_),a.el_.setAttribute("role",a.selectable?a.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),a}$e(s,g);var l=s.prototype;return l.createEl=function(t,a,h){this.nonIconControl=!0;var v=g.prototype.createEl.call(this,"li",Ar({className:"vjs-menu-item",tabIndex:-1},a),h);return v.replaceChild(Ir("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),v.querySelector(".vjs-icon-placeholder")),v},l.handleKeyDown=function(t){eg.some(function(a){return Fe().isEventKey(t,a)})||g.prototype.handleKeyDown.call(this,t)},l.handleClick=function(t){this.selected(!0)},l.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},s}(du);nn.registerComponent("MenuItem",pc);var Ku=function(g){function s(u,t){var a,h=t.track,v=u.textTracks();t.label=h.label||h.language||"Unknown",t.selected="showing"===h.mode,(a=g.call(this,u,t)||this).track=h,a.kinds=(t.kinds||[t.kind||a.track.kind]).filter(Boolean);var H,S=function(){for(var Z=arguments.length,we=new Array(Z),je=0;je<Z;je++)we[je]=arguments[je];a.handleTracksChange.apply(Ee(a),we)},P=function(){for(var Z=arguments.length,we=new Array(Z),je=0;je<Z;je++)we[je]=arguments[je];a.handleSelectedLanguageChange.apply(Ee(a),we)};return u.on(["loadstart","texttrackchange"],S),v.addEventListener("change",S),v.addEventListener("selectedlanguagechange",P),a.on("dispose",function(){u.off(["loadstart","texttrackchange"],S),v.removeEventListener("change",S),v.removeEventListener("selectedlanguagechange",P)}),void 0===v.onchange&&a.on(["tap","click"],function(){if("object"!=typeof ae().Event)try{H=new(ae().Event)("change")}catch{}H||(H=Ae().createEvent("Event")).initEvent("change",!0,!0),v.dispatchEvent(H)}),a.handleTracksChange(),a}$e(s,g);var l=s.prototype;return l.handleClick=function(t){var a=this.track,h=this.player_.textTracks();if(g.prototype.handleClick.call(this,t),h)for(var v=0;v<h.length;v++){var S=h[v];-1!==this.kinds.indexOf(S.kind)&&(S===a?"showing"!==S.mode&&(S.mode="showing"):"disabled"!==S.mode&&(S.mode="disabled"))}},l.handleTracksChange=function(t){var a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)},l.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},l.dispose=function(){this.track=null,g.prototype.dispose.call(this)},s}(pc);nn.registerComponent("TextTrackMenuItem",Ku);var gl=function(g){function s(u,t){return t.track={player:u,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,g.call(this,u,t)||this}$e(s,g);var l=s.prototype;return l.handleTracksChange=function(t){for(var a=this.player().textTracks(),h=!0,v=0,S=a.length;v<S;v++){var P=a[v];if(this.options_.kinds.indexOf(P.kind)>-1&&"showing"===P.mode){h=!1;break}}h!==this.isSelected_&&this.selected(h)},l.handleSelectedLanguageChange=function(t){for(var a=this.player().textTracks(),h=!0,v=0,S=a.length;v<S;v++){var P=a[v];if(["captions","descriptions","subtitles"].indexOf(P.kind)>-1&&"showing"===P.mode){h=!1;break}}h&&(this.player_.cache_.selectedLanguage={enabled:!1})},s}(Ku);nn.registerComponent("OffTextTrackMenuItem",gl);var gc=function(g){function s(u,t){return void 0===t&&(t={}),t.tracks=u.textTracks(),g.call(this,u,t)||this}return $e(s,g),s.prototype.createItems=function(t,a){var h;void 0===t&&(t=[]),void 0===a&&(a=Ku),this.label_&&(h=this.label_+" off"),t.push(new gl(this.player_,{kinds:this.kinds_,kind:this.kind_,label:h})),this.hideThreshold_+=1;var v=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var S=0;S<v.length;S++){var P=v[S];if(this.kinds_.indexOf(P.kind)>-1){var H=new a(this.player_,{track:P,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});H.addClass("vjs-"+P.kind+"-menu-item"),t.push(H)}}return t},s}(Gl);nn.registerComponent("TextTrackButton",gc);var Jh=function(g){function s(u,t){var a,h=t.track,v=t.cue,S=u.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=v.text,t.selected=v.startTime<=S&&S<v.endTime,(a=g.call(this,u,t)||this).track=h,a.cue=v,h.addEventListener("cuechange",Fi(Ee(a),a.update)),a}$e(s,g);var l=s.prototype;return l.handleClick=function(t){g.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},l.update=function(t){var a=this.cue,h=this.player_.currentTime();this.selected(a.startTime<=h&&h<a.endTime)},s}(pc);nn.registerComponent("ChaptersTrackMenuItem",Jh);var ml=function(g){function s(u,t,a){return g.call(this,u,t,a)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-chapters-button "+g.prototype.buildWrapperCSSClass.call(this)},l.update=function(t){(!this.track_||t&&("addtrack"===t.type||"removetrack"===t.type))&&this.setTrack(this.findChaptersTrack()),g.prototype.update.call(this)},l.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var h=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);h&&h.addEventListener("load",this.updateHandler_)}}},l.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],a=t.length-1;a>=0;a--){var h=t[a];if(h.kind===this.kind_)return h}},l.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ds(this.kind_))},l.createMenu=function(){return this.options_.title=this.getMenuCaption(),g.prototype.createMenu.call(this)},l.createItems=function(){var t=[];if(!this.track_)return t;var a=this.track_.cues;if(!a)return t;for(var h=0,v=a.length;h<v;h++){var P=new Jh(this.player_,{track:this.track_,cue:a[h]});t.push(P)}return t},s}(gc);ml.prototype.kind_="chapters",ml.prototype.controlText_="Chapters",nn.registerComponent("ChaptersButton",ml);var bu=function(g){function s(u,t,a){var h;h=g.call(this,u,t,a)||this;var v=u.textTracks(),S=Fi(Ee(h),h.handleTracksChange);return v.addEventListener("change",S),h.on("dispose",function(){v.removeEventListener("change",S)}),h}$e(s,g);var l=s.prototype;return l.handleTracksChange=function(t){for(var a=this.player().textTracks(),h=!1,v=0,S=a.length;v<S;v++){var P=a[v];if(P.kind!==this.kind_&&"showing"===P.mode){h=!0;break}}h?this.disable():this.enable()},l.buildCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+g.prototype.buildWrapperCSSClass.call(this)},s}(gc);bu.prototype.kind_="descriptions",bu.prototype.controlText_="Descriptions",nn.registerComponent("DescriptionsButton",bu);var hd=function(g){function s(u,t,a){return g.call(this,u,t,a)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+g.prototype.buildWrapperCSSClass.call(this)},s}(gc);hd.prototype.kind_="subtitles",hd.prototype.controlText_="Subtitles",nn.registerComponent("SubtitlesButton",hd);var ef=function(g){function s(u,t){var a;return t.track={player:u,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(a=g.call(this,u,t)||this).addClass("vjs-texttrack-settings"),a.controlText(", opens "+t.kind+" settings dialog"),a}return $e(s,g),s.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},s}(Ku);nn.registerComponent("CaptionSettingsMenuItem",ef);var No=function(g){function s(u,t,a){return g.call(this,u,t,a)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-captions-button "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-captions-button "+g.prototype.buildWrapperCSSClass.call(this)},l.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new ef(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t)},s}(gc);No.prototype.kind_="captions",No.prototype.controlText_="Captions",nn.registerComponent("CaptionsButton",No);var Ii=function(g){function s(){return g.apply(this,arguments)||this}return $e(s,g),s.prototype.createEl=function(t,a,h){var v=g.prototype.createEl.call(this,t,a,h),S=v.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(S.appendChild(Ir("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(Ir("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),v},s}(Ku);nn.registerComponent("SubsCapsMenuItem",Ii);var tf=function(g){function s(u,t){var a;return void 0===t&&(t={}),(a=g.call(this,u,t)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(ds(a.label_)),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+g.prototype.buildWrapperCSSClass.call(this)},l.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new ef(this.player_,{kind:this.label_})),this.hideThreshold_+=1),g.prototype.createItems.call(this,t,Ii)},s}(gc);tf.prototype.kinds_=["captions","subtitles"],tf.prototype.controlText_="Subtitles",nn.registerComponent("SubsCapsButton",tf);var nf=function(g){function s(u,t){var a,h=t.track,v=u.audioTracks();t.label=h.label||h.language||"Unknown",t.selected=h.enabled,(a=g.call(this,u,t)||this).track=h,a.addClass("vjs-"+h.kind+"-menu-item");var S=function(){for(var H=arguments.length,Y=new Array(H),Z=0;Z<H;Z++)Y[Z]=arguments[Z];a.handleTracksChange.apply(Ee(a),Y)};return v.addEventListener("change",S),a.on("dispose",function(){v.removeEventListener("change",S)}),a}$e(s,g);var l=s.prototype;return l.createEl=function(t,a,h){var v=g.prototype.createEl.call(this,t,a,h),S=v.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(S.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),S.appendChild(g.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),v},l.handleClick=function(t){g.prototype.handleClick.call(this,t),this.track.enabled=!0},l.handleTracksChange=function(t){this.selected(this.track.enabled)},s}(pc);nn.registerComponent("AudioTrackMenuItem",nf);var Zu=function(g){function s(u,t){return void 0===t&&(t={}),t.tracks=u.audioTracks(),g.call(this,u,t)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-audio-button "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-audio-button "+g.prototype.buildWrapperCSSClass.call(this)},l.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),h=0;h<a.length;h++)t.push(new nf(this.player_,{track:a[h],selectable:!0,multiSelectable:!1}));return t},s}(Gl);Zu.prototype.controlText_="Audio Track",nn.registerComponent("AudioTrackButton",Zu);var fd=function(g){function s(u,t){var a,h=t.rate,v=parseFloat(h,10);return t.label=h,t.selected=v===u.playbackRate(),t.selectable=!0,t.multiSelectable=!1,(a=g.call(this,u,t)||this).label=h,a.rate=v,a.on(u,"ratechange",function(S){return a.update(S)}),a}$e(s,g);var l=s.prototype;return l.handleClick=function(t){g.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},l.update=function(t){this.selected(this.player().playbackRate()===this.rate)},s}(pc);fd.prototype.contentElType="button",nn.registerComponent("PlaybackRateMenuItem",fd);var na=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(u,"loadstart",function(h){return a.updateVisibility(h)}),a.on(u,"ratechange",function(h){return a.updateLabel(h)}),a.on(u,"playbackrateschange",function(h){return a.handlePlaybackRateschange(h)}),a}$e(s,g);var l=s.prototype;return l.createEl=function(){var t=g.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ir("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},l.dispose=function(){this.labelEl_=null,g.prototype.dispose.call(this)},l.buildCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildCSSClass.call(this)},l.buildWrapperCSSClass=function(){return"vjs-playback-rate "+g.prototype.buildWrapperCSSClass.call(this)},l.createItems=function(){for(var t=this.playbackRates(),a=[],h=t.length-1;h>=0;h--)a.push(new fd(this.player(),{rate:t[h]+"x"}));return a},l.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},l.handleClick=function(t){for(var a=this.player().playbackRate(),h=this.playbackRates(),v=h[0],S=0;S<h.length;S++)if(h[S]>a){v=h[S];break}this.player().playbackRate(v)},l.handlePlaybackRateschange=function(t){this.update()},l.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},l.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},l.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},l.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},s}(jc);na.prototype.controlText_="Playback Rate",nn.registerComponent("PlaybackRateMenuButton",na);var ih=function(g){function s(){return g.apply(this,arguments)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-spacer "+g.prototype.buildCSSClass.call(this)},l.createEl=function(t,a,h){return void 0===t&&(t="div"),void 0===a&&(a={}),void 0===h&&(h={}),a.className||(a.className=this.buildCSSClass()),g.prototype.createEl.call(this,t,a,h)},s}(nn);nn.registerComponent("Spacer",ih);var mc=function(g){function s(){return g.apply(this,arguments)||this}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-custom-control-spacer "+g.prototype.buildCSSClass.call(this)},l.createEl=function(){return g.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},s}(ih);nn.registerComponent("CustomControlSpacer",mc);var vl=function(g){function s(){return g.apply(this,arguments)||this}return $e(s,g),s.prototype.createEl=function(){return g.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},s}(nn);vl.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Ae()&&vl.prototype.options_.children.splice(vl.prototype.options_.children.length-1,0,"pictureInPictureToggle"),nn.registerComponent("ControlBar",vl);var Ou=function(g){function s(u,t){var a;return(a=g.call(this,u,t)||this).on(u,"error",function(h){return a.open(h)}),a}$e(s,g);var l=s.prototype;return l.buildCSSClass=function(){return"vjs-error-display "+g.prototype.buildCSSClass.call(this)},l.content=function(){var t=this.player().error();return t?this.localize(t.message):""},s}(Wi);Ou.prototype.options_=De({},Wi.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),nn.registerComponent("ErrorDisplay",Ou);var ga="vjs-text-track-settings",Ru=["#000","Black"],sh=["#00F","Blue"],pd=["#0FF","Cyan"],ri=["#0F0","Green"],oh=["#F0F","Magenta"],ah=["#F00","Red"],Uc=["#FFF","White"],gd=["#FF0","Yellow"],fu=["1","Opaque"],md=["0.5","Semi-Transparent"],vd=["0","Transparent"],yl={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ru,Uc,ah,ri,sh,gd,oh,pd]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[fu,md,vd]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Uc,Ru,ah,ri,sh,gd,oh,pd]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(s){return"1.00"===s?null:Number(s)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[fu,md]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[vd,md,fu]}};function vc(g,s){if(s&&(g=s(g)),g&&"none"!==g)return g}yl.windowColor.options=yl.backgroundColor.options;var tg=function(g){function s(u,t){var a;return t.temporary=!1,(a=g.call(this,u,t)||this).updateDisplay=a.updateDisplay.bind(Ee(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=Ir("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),void 0===t.persistTextTrackSettings&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),Qr(yl,function(h){a.on(a.$(h.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}$e(s,g);var l=s.prototype;return l.dispose=function(){this.endDialog=null,g.prototype.dispose.call(this)},l.createElSelect_=function(t,a,h){var v=this;void 0===a&&(a=""),void 0===h&&(h="label");var S=yl[t],P=S.id.replace("%s",this.id_),H=[a,P].join(" ").trim();return["<"+h+' id="'+P+'" class="'+("label"===h?"vjs-label":"")+'">',this.localize(S.label),"</"+h+">",'<select aria-labelledby="'+H+'">'].concat(S.options.map(function(Y){var Z=P+"-"+Y[1].replace(/\W+/g,"");return['<option id="'+Z+'" value="'+Y[0]+'" ','aria-labelledby="'+H+" "+Z+'">',v.localize(Y[1]),"</option>"].join("")})).concat("</select>").join("")},l.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},l.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},l.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},l.createElColors_=function(){return Ir("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},l.createElFont_=function(){return Ir("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},l.createElControls_=function(){var t=this.localize("restore all settings to the default values");return Ir("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},l.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},l.label=function(){return this.localize("Caption Settings Dialog")},l.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},l.buildCSSClass=function(){return g.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},l.getValues=function(){var t=this;return function Ni(g,s,l){return void 0===l&&(l=0),Qi(g).reduce(function(u,t){return s(u,g[t],t)},l)}(yl,function(a,h,v){var S=function Zf(g,s){return vc(g.options[g.options.selectedIndex].value,s)}(t.$(h.selector),h.parser);return void 0!==S&&(a[v]=S),a},{})},l.setValues=function(t){var a=this;Qr(yl,function(h,v){!function Ja(g,s,l){if(s)for(var u=0;u<g.options.length;u++)if(vc(g.options[u].value,l)===s){g.selectedIndex=u;break}}(a.$(h.selector),t[v],h.parser)})},l.setDefaults=function(){var t=this;Qr(yl,function(a){var h=a.hasOwnProperty("default")?a.default:0;t.$(a.selector).selectedIndex=h})},l.restoreSettings=function(){var t;try{t=JSON.parse(ae().localStorage.getItem(ga))}catch(a){qt.warn(a)}t&&this.setValues(t)},l.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?ae().localStorage.setItem(ga,JSON.stringify(t)):ae().localStorage.removeItem(ga)}catch(a){qt.warn(a)}}},l.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},l.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,a=t&&t.subsCapsButton,h=t&&t.captionsButton;a?a.focus():h&&h.focus()},s}(Wi);nn.registerComponent("TextTrackSettings",tg);var Yf=function(g){function s(u,t){var a,h=t.ResizeObserver||ae().ResizeObserver;null===t.ResizeObserver&&(h=!1);var v=qi({createEl:!h,reportTouchActivity:!1},t);return(a=g.call(this,u,v)||this).ResizeObserver=t.ResizeObserver||ae().ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=function(s,l,u,t){void 0===t&&(t=ae());var a,v=function(){var P=this,H=arguments,Y=function(){a=null,Y=null,s.apply(P,H)};t.clearTimeout(a),a=t.setTimeout(Y,100)};return v.cancel=function(){t.clearTimeout(a),a=null},v}(function(){a.resizeHandler()},0,0,Ee(a)),h?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(u.el())):(a.loadListener_=function(){if(a.el_&&a.el_.contentWindow){var S=a.debouncedHandler_,P=a.unloadListener_=function(){Ls(this,"resize",S),Ls(this,"unload",P),P=null};Bn(a.el_.contentWindow,"unload",P),Bn(a.el_.contentWindow,"resize",S)}},a.one("load",a.loadListener_)),a}$e(s,g);var l=s.prototype;return l.createEl=function(){return g.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},l.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},l.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,g.prototype.dispose.call(this)},s}(nn);nn.registerComponent("ResizeManager",Yf);var Qf={trackingThreshold:30,liveTolerance:15},$l=function(g){function s(u,t){var a,h=qi(Qf,t,{createEl:!1});return(a=g.call(this,u,h)||this).handleVisibilityChange_=function(v){return a.handleVisibilityChange(v)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(v){return a.handlePlay(v)},a.handleFirstTimeupdate_=function(v){return a.handleFirstTimeupdate(v)},a.handleSeeked_=function(v){return a.handleSeeked(v)},a.seekToLiveEdge_=function(v){return a.seekToLiveEdge(v)},a.reset_(),a.on(a.player_,"durationchange",function(v){return a.handleDurationchange(v)}),a.one(a.player_,"canplay",function(){return a.toggleTracking()}),ua&&"hidden"in Ae()&&"visibilityState"in Ae()&&a.on(Ae(),"visibilitychange",a.handleVisibilityChange_),a}$e(s,g);var l=s.prototype;return l.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Ae().hidden?this.stopTracking():this.startTracking())},l.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var a=Number(ae().performance.now().toFixed(4)),h=-1===this.lastTime_?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+h;var v=this.liveCurrentTime(),S=this.player_.currentTime(),P=this.player_.paused()||this.seekedBehindLive_||Math.abs(v-S)>this.options_.liveTolerance;(!this.timeupdateSeen_||v===1/0)&&(P=!1),P!==this.behindLiveEdge_&&(this.behindLiveEdge_=P,this.trigger("liveedgechange"))}},l.handleDurationchange=function(){this.toggleTracking()},l.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},l.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},l.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},l.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},l.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},l.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},l.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},l.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},l.seekableEnd=function(){for(var t=this.player_.seekable(),a=[],h=t?t.length:0;h--;)a.push(t.end(h));return a.length?a.sort()[a.length-1]:1/0},l.seekableStart=function(){for(var t=this.player_.seekable(),a=[],h=t?t.length:0;h--;)a.push(t.start(h));return a.length?a.sort()[0]:0},l.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},l.isLive=function(){return this.isTracking()},l.atLiveEdge=function(){return!this.behindLiveEdge()},l.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},l.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},l.behindLiveEdge=function(){return this.behindLiveEdge_},l.isTracking=function(){return"number"==typeof this.trackingInterval_},l.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},l.dispose=function(){this.off(Ae(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),g.prototype.dispose.call(this)},s}(nn);nn.registerComponent("LiveTracker",$l);var y,Tu=function(s){var l=s.el();if(l.hasAttribute("src"))return s.triggerSourceset(l.src),!0;var u=s.$$("source"),t=[],a="";if(!u.length)return!1;for(var h=0;h<u.length;h++){var v=u[h].src;v&&-1===t.indexOf(v)&&t.push(v)}return!!t.length&&(1===t.length&&(a=t[0]),s.triggerSourceset(a),!0)},yd=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(s){var l=Ae().createElement(this.nodeName.toLowerCase());l.innerHTML=s;for(var u=Ae().createDocumentFragment();l.childNodes.length;)u.appendChild(l.childNodes[0]);return this.innerText="",ae().Element.prototype.appendChild.call(this,u),this.innerHTML}}),uh=function(s,l){for(var u={},t=0;t<s.length&&!((u=Object.getOwnPropertyDescriptor(s[t],l))&&u.set&&u.get);t++);return u.enumerable=!0,u.configurable=!0,u},Bc=function(s){var l=s.el();if(!l.resetSourceWatch_){var u={},t=function(s){return uh([s.el(),ae().HTMLMediaElement.prototype,ae().Element.prototype,yd],"innerHTML")}(s),a=function(v){return function(){for(var S=arguments.length,P=new Array(S),H=0;H<S;H++)P[H]=arguments[H];var Y=v.apply(l,P);return Tu(s),Y}};["append","appendChild","insertAdjacentHTML"].forEach(function(h){!l[h]||(u[h]=l[h],l[h]=a(u[h]))}),Object.defineProperty(l,"innerHTML",qi(t,{set:a(t.set)})),l.resetSourceWatch_=function(){l.resetSourceWatch_=null,Object.keys(u).forEach(function(h){l[h]=u[h]}),Object.defineProperty(l,"innerHTML",t)},s.one("sourceset",l.resetSourceWatch_)}},Xf=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Q(ae().Element.prototype.getAttribute.call(this,"src")):""},set:function(s){return ae().Element.prototype.setAttribute.call(this,"src",s),s}}),lh=function(s,l,u,t){void 0===t&&(t=!0);var a=function(S){return Object.defineProperty(s,l,{value:S,enumerable:!0,writable:!0})},h={configurable:!0,enumerable:!0,get:function(){var S=u();return a(S),S}};return t&&(h.set=a),Object.defineProperty(s,l,h)},D=function(g){function s(u,t){var a;a=g.call(this,u,t)||this;var h=u.source,v=!1;if(h&&(a.el_.currentSrc!==h.src||u.tag&&3===u.tag.initNetworkState_)?a.setSource(h):a.handleLateInit_(a.el_),u.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var S=a.el_.childNodes,P=S.length,H=[];P--;){var Y=S[P];"track"===Y.nodeName.toLowerCase()&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(Y),a.remoteTextTracks().addTrack(Y.track),a.textTracks().addTrack(Y.track),!v&&!a.el_.hasAttribute("crossorigin")&&Ke(Y.src)&&(v=!0)):H.push(Y))}for(var we=0;we<H.length;we++)a.el_.removeChild(H[we])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&v&&qt.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),a.restoreMetadataTracksInIOSNativePlayer_(),(Ta||sc||oa)&&!0===u.nativeControlsForTouch&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}$e(s,g);var l=s.prototype;return l.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),s.disposeMediaElement(this.el_),this.options_=null,g.prototype.dispose.call(this)},l.setupSourcesetHandling_=function(){!function(s){if(s.featuresSourceset){var l=s.el();if(!l.resetSourceset_){var u=function(s){return uh([s.el(),ae().HTMLMediaElement.prototype,Xf],"src")}(s),t=l.setAttribute,a=l.load;Object.defineProperty(l,"src",qi(u,{set:function(v){var S=u.set.call(l,v);return s.triggerSourceset(l.src),S}})),l.setAttribute=function(h,v){var S=t.call(l,h,v);return/src/i.test(h)&&s.triggerSourceset(l.src),S},l.load=function(){var h=a.call(l);return Tu(s)||(s.triggerSourceset(""),Bc(s)),h},l.currentSrc?s.triggerSourceset(l.currentSrc):Tu(s)||Bc(s),l.resetSourceset_=function(){l.resetSourceset_=null,l.load=a,l.setAttribute=t,Object.defineProperty(l,"src",u),l.resetSourceWatch_&&l.resetSourceWatch_()}}}}(this)},l.restoreMetadataTracksInIOSNativePlayer_=function(){var a,t=this.textTracks(),h=function(){a=[];for(var P=0;P<t.length;P++){var H=t[P];"metadata"===H.kind&&a.push({track:H,storedMode:H.mode})}};h(),t.addEventListener("change",h),this.on("dispose",function(){return t.removeEventListener("change",h)});var v=function S(){for(var P=0;P<a.length;P++){var H=a[P];"disabled"===H.track.mode&&H.track.mode!==H.storedMode&&(H.track.mode=H.storedMode)}t.removeEventListener("change",S)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",h),t.removeEventListener("change",v),t.addEventListener("change",v)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",h),t.addEventListener("change",h),t.removeEventListener("change",v)})},l.overrideNative_=function(t,a){var h=this;if(a===this["featuresNative"+t+"Tracks"]){var v=t.toLowerCase();this[v+"TracksListeners_"]&&Object.keys(this[v+"TracksListeners_"]).forEach(function(S){h.el()[v+"Tracks"].removeEventListener(S,h[v+"TracksListeners_"][S])}),this["featuresNative"+t+"Tracks"]=!a,this[v+"TracksListeners_"]=null,this.proxyNativeTracksForType_(v)}},l.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},l.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},l.proxyNativeTracksForType_=function(t){var a=this,h=Oo[t],v=this.el()[h.getterName],S=this[h.getterName]();if(this["featuresNative"+h.capitalName+"Tracks"]&&v&&v.addEventListener){var P={change:function(Z){var we={type:"change",target:S,currentTarget:S,srcElement:S};S.trigger(we),"text"===t&&a[Xa.remoteText.getterName]().trigger(we)},addtrack:function(Z){S.addTrack(Z.track)},removetrack:function(Z){S.removeTrack(Z.track)}},H=function(){for(var Z=[],we=0;we<S.length;we++){for(var je=!1,Pe=0;Pe<v.length;Pe++)if(v[Pe]===S[we]){je=!0;break}je||Z.push(S[we])}for(;Z.length;)S.removeTrack(Z.shift())};this[h.getterName+"Listeners_"]=P,Object.keys(P).forEach(function(Y){var Z=P[Y];v.addEventListener(Y,Z),a.on("dispose",function(we){return v.removeEventListener(Y,Z)})}),this.on("loadstart",H),this.on("dispose",function(Y){return a.off("loadstart",H)})}},l.proxyNativeTracks_=function(){var t=this;Oo.names.forEach(function(a){t.proxyNativeTracksForType_(a)})},l.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var a=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(a,t),s.disposeMediaElement(t),t=a}else{t=Ae().createElement("video");var v=qi({},this.options_.tag&&Nt(this.options_.tag));(!Ta||!0!==this.options_.nativeControlsForTouch)&&delete v.controls,Je(t,Ar(v,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Nn(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var S=["loop","muted","playsinline","autoplay"],P=0;P<S.length;P++){var H=S[P],Y=this.options_[H];typeof Y<"u"&&(Y?Nn(t,H,H):ai(t,H),t[H]=Y)}return t},l.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var a=!1,h=function(){a=!0};this.on("loadstart",h);var v=function(){a||this.trigger("loadstart")};return this.on("loadedmetadata",v),void this.ready(function(){this.off("loadstart",h),this.off("loadedmetadata",v),a||this.trigger("loadstart")})}var S=["loadstart"];S.push("loadedmetadata"),t.readyState>=2&&S.push("loadeddata"),t.readyState>=3&&S.push("canplay"),t.readyState>=4&&S.push("canplaythrough"),this.ready(function(){S.forEach(function(P){this.trigger(P)},this)})}},l.setScrubbing=function(t){this.isScrubbing_=t},l.scrubbing=function(){return this.isScrubbing_},l.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&au?this.el_.fastSeek(t):this.el_.currentTime=t}catch(a){qt(a,"Video is not ready. (Video.js)")}},l.duration=function(){var t=this;return this.el_.duration===1/0&&yo&&_o&&0===this.el_.currentTime?(this.on("timeupdate",function h(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",h))}),NaN):this.el_.duration||NaN},l.width=function(){return this.el_.offsetWidth},l.height=function(){return this.el_.offsetHeight},l.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},h=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",h),this.on("dispose",function(){t.off("webkitbeginfullscreen",h),t.off("webkitendfullscreen",a)})}},l.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=ae().navigator&&ae().navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},l.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Jt(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{t.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},l.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},l.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},l.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},l.reset=function(){s.resetMediaElement(this.el_)},l.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},l.setControls=function(t){this.el_.controls=!!t},l.addTextTrack=function(t,a,h){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,a,h):g.prototype.addTextTrack.call(this,t,a,h)},l.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return g.prototype.createRemoteTextTrack.call(this,t);var a=Ae().createElement("track");return t.kind&&(a.kind=t.kind),t.label&&(a.label=t.label),(t.language||t.srclang)&&(a.srclang=t.language||t.srclang),t.default&&(a.default=t.default),t.id&&(a.id=t.id),t.src&&(a.src=t.src),a},l.addRemoteTextTrack=function(t,a){var h=g.prototype.addRemoteTextTrack.call(this,t,a);return this.featuresNativeTextTracks&&this.el().appendChild(h),h},l.removeRemoteTextTrack=function(t){if(g.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var a=this.$$("track"),h=a.length;h--;)(t===a[h]||t===a[h].track)&&this.el().removeChild(a[h])},l.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),ae().performance&&"function"==typeof ae().performance.now?t.creationTime=ae().performance.now():ae().performance&&ae().performance.timing&&"number"==typeof ae().performance.timing.navigationStart&&(t.creationTime=ae().Date.now()-ae().performance.timing.navigationStart),t},s}(ji);lh(D,"TEST_VID",function(){if(Ea()){var g=Ae().createElement("video"),s=Ae().createElement("track");return s.kind="captions",s.srclang="en",s.label="English",g.appendChild(s),g}}),D.isSupported=function(){try{D.TEST_VID.volume=.5}catch{return!1}return!(!D.TEST_VID||!D.TEST_VID.canPlayType)},D.canPlayType=function(g){return D.TEST_VID.canPlayType(g)},D.canPlaySource=function(g,s){return D.canPlayType(g.type)},D.canControlVolume=function(){try{var g=D.TEST_VID.volume;return D.TEST_VID.volume=g/2+.1,g!==D.TEST_VID.volume}catch{return!1}},D.canMuteVolume=function(){try{var g=D.TEST_VID.muted;return D.TEST_VID.muted=!g,D.TEST_VID.muted?Nn(D.TEST_VID,"muted","muted"):ai(D.TEST_VID,"muted"),g!==D.TEST_VID.muted}catch{return!1}},D.canControlPlaybackRate=function(){if(yo&&_o&&ou<58)return!1;try{var g=D.TEST_VID.playbackRate;return D.TEST_VID.playbackRate=g/2+.1,g!==D.TEST_VID.playbackRate}catch{return!1}},D.canOverrideAttributes=function(){try{var g=function(){};Object.defineProperty(Ae().createElement("video"),"src",{get:g,set:g}),Object.defineProperty(Ae().createElement("audio"),"src",{get:g,set:g}),Object.defineProperty(Ae().createElement("video"),"innerHTML",{get:g,set:g}),Object.defineProperty(Ae().createElement("audio"),"innerHTML",{get:g,set:g})}catch{return!1}return!0},D.supportsNativeTextTracks=function(){return au||io&&_o},D.supportsNativeVideoTracks=function(){return!(!D.TEST_VID||!D.TEST_VID.videoTracks)},D.supportsNativeAudioTracks=function(){return!(!D.TEST_VID||!D.TEST_VID.audioTracks)},D.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(g){var l=g[1];lh(D.prototype,g[0],function(){return D[l]()},!0)}),D.prototype.movingMediaElementInDOM=!io,D.prototype.featuresFullscreenResize=!0,D.prototype.featuresProgressEvents=!0,D.prototype.featuresTimeupdateEvents=!0,D.patchCanPlayType=function(){Ho>=4&&!Na&&!_o&&(y=D.TEST_VID&&D.TEST_VID.constructor.prototype.canPlayType,D.TEST_VID.constructor.prototype.canPlayType=function(g){return g&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(g)?"maybe":y.call(this,g)})},D.unpatchCanPlayType=function(){var g=D.TEST_VID.constructor.prototype.canPlayType;return y&&(D.TEST_VID.constructor.prototype.canPlayType=y),g},D.patchCanPlayType(),D.disposeMediaElement=function(g){if(g){for(g.parentNode&&g.parentNode.removeChild(g);g.hasChildNodes();)g.removeChild(g.firstChild);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},D.resetMediaElement=function(g){if(g){for(var s=g.querySelectorAll("source"),l=s.length;l--;)g.removeChild(s[l]);g.removeAttribute("src"),"function"==typeof g.load&&function(){try{g.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(g){D.prototype[g]=function(){return this.el_[g]||this.el_.hasAttribute(g)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(g){D.prototype["set"+ds(g)]=function(s){this.el_[g]=s,s?this.el_.setAttribute(g,g):this.el_.removeAttribute(g)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(g){D.prototype[g]=function(){return this.el_[g]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(g){D.prototype["set"+ds(g)]=function(s){this.el_[g]=s}}),["pause","load","play"].forEach(function(g){D.prototype[g]=function(){return this.el_[g]()}}),ji.withSourceHandlers(D),D.nativeSourceHandler={},D.nativeSourceHandler.canPlayType=function(g){try{return D.TEST_VID.canPlayType(g)}catch{return""}},D.nativeSourceHandler.canHandleSource=function(g,s){if(g.type)return D.nativeSourceHandler.canPlayType(g.type);if(g.src){var l=be(g.src);return D.nativeSourceHandler.canPlayType("video/"+l)}return""},D.nativeSourceHandler.handleSource=function(g,s,l){s.setSrc(g.src)},D.nativeSourceHandler.dispose=function(){},D.registerSourceHandler(D.nativeSourceHandler),ji.registerTech("Html5",D);var T=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],O={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},le=["tiny","xsmall","small","medium","large","xlarge","huge"],xe={};le.forEach(function(g){var s="x"===g.charAt(0)?"x-"+g.substring(1):g;xe[g]="vjs-layout-"+s});var ht={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},jt=function(g){function s(u,t,a){var h;if(u.id=u.id||t.id||"vjs_video_"+Ys(),(t=Ar(s.getTagSettings(u),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof u.closest){var v=u.closest("[lang]");v&&v.getAttribute&&(t.language=v.getAttribute("lang"))}else for(var S=u;S&&1===S.nodeType;){if(Nt(S).hasOwnProperty("lang")){t.language=S.getAttribute("lang");break}S=S.parentNode}if((h=g.call(this,null,t,a)||this).boundDocumentFullscreenChange_=function(Z){return h.documentFullscreenChange_(Z)},h.boundFullWindowOnEscKey_=function(Z){return h.fullWindowOnEscKey(Z)},h.boundUpdateStyleEl_=function(Z){return h.updateStyleEl_(Z)},h.boundApplyInitTime_=function(Z){return h.applyInitTime_(Z)},h.boundUpdateCurrentBreakpoint_=function(Z){return h.updateCurrentBreakpoint_(Z)},h.boundHandleTechClick_=function(Z){return h.handleTechClick_(Z)},h.boundHandleTechDoubleClick_=function(Z){return h.handleTechDoubleClick_(Z)},h.boundHandleTechTouchStart_=function(Z){return h.handleTechTouchStart_(Z)},h.boundHandleTechTouchMove_=function(Z){return h.handleTechTouchMove_(Z)},h.boundHandleTechTouchEnd_=function(Z){return h.handleTechTouchEnd_(Z)},h.boundHandleTechTap_=function(Z){return h.handleTechTap_(Z)},h.isFullscreen_=!1,h.log=Un(h.id_),h.fsApi_=K,h.isPosterFromTech_=!1,h.queuedCallbacks_=[],h.isReady_=!1,h.hasStarted_=!1,h.userActive_=!1,h.debugEnabled_=!1,!h.options_||!h.options_.techOrder||!h.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(h.tag=u,h.tagAttributes=u&&Nt(u),h.language(h.options_.language),t.languages){var P={};Object.getOwnPropertyNames(t.languages).forEach(function(Z){P[Z.toLowerCase()]=t.languages[Z]}),h.languages_=P}else h.languages_=s.prototype.options_.languages;h.resetCache_(),h.poster_=t.poster||"",h.controls_=!!t.controls,u.controls=!1,u.removeAttribute("controls"),h.changingSrc_=!1,h.playCallbacks_=[],h.playTerminatedQueue_=[],u.hasAttribute("autoplay")?h.autoplay(!0):h.autoplay(h.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(Z){if("function"!=typeof h[Z])throw new Error('plugin "'+Z+'" does not exist')}),h.scrubbing_=!1,h.el_=h.createEl(),ul(Ee(h),{eventBusKey:"el_"}),h.fsApi_.requestFullscreen&&(Bn(Ae(),h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_),h.on(h.fsApi_.fullscreenchange,h.boundDocumentFullscreenChange_)),h.fluid_&&h.on(["playerreset","resize"],h.boundUpdateStyleEl_);var H=qi(h.options_);t.plugins&&Object.keys(t.plugins).forEach(function(Z){h[Z](t.plugins[Z])}),t.debug&&h.debug(!0),h.options_.playerOptions=H,h.middleware_=[],h.playbackRates(t.playbackRates),h.initChildren(),h.isAudio("audio"===u.nodeName.toLowerCase()),h.controls()?h.addClass("vjs-controls-enabled"):h.addClass("vjs-controls-disabled"),h.el_.setAttribute("role","region"),h.isAudio()?h.el_.setAttribute("aria-label",h.localize("Audio Player")):h.el_.setAttribute("aria-label",h.localize("Video Player")),h.isAudio()&&h.addClass("vjs-audio"),h.flexNotSupported_()&&h.addClass("vjs-no-flex"),Ta&&h.addClass("vjs-touch-enabled"),io||h.addClass("vjs-workinghover"),s.players[h.id_]=Ee(h);var Y="7.15.4".split(".")[0];return h.addClass("vjs-v"+Y),h.userActive(!0),h.reportUserActivity(),h.one("play",function(Z){return h.listenForUserActivity_(Z)}),h.on("stageclick",function(Z){return h.handleStageClick_(Z)}),h.on("keydown",function(Z){return h.handleKeyDown(Z)}),h.on("languagechange",function(Z){return h.handleLanguagechange(Z)}),h.breakpoints(h.options_.breakpoints),h.responsive(h.options_.responsive),h}$e(s,g);var l=s.prototype;return l.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Ls(Ae(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ls(Ae(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),s.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function Hf(g){Gh[g.id()]=null}(this),Ss.names.forEach(function(a){var v=t[Ss[a].getterName]();v&&v.off&&v.off()}),g.prototype.dispose.call(this)},l.createEl=function(){var a,t=this.tag,h=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),v="video-js"===this.tag.tagName.toLowerCase();h?a=this.el_=t.parentNode:v||(a=this.el_=g.prototype.createEl.call(this,"div"));var S=Nt(t);if(v){for(a=this.el_=t,t=this.tag=Ae().createElement("video");a.children.length;)t.appendChild(a.firstChild);V(a,"video-js")||ue(a,"video-js"),a.appendChild(t),h=this.playerElIngest_=a,Object.keys(a).forEach(function(je){try{t[je]=a[je]}catch{}})}if(t.setAttribute("tabindex","-1"),S.tabindex="-1",(ua||_o&&Ol)&&(t.setAttribute("role","application"),S.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in S&&delete S.width,"height"in S&&delete S.height,Object.getOwnPropertyNames(S).forEach(function(je){v&&"class"===je||a.setAttribute(je,S[je]),v&&t.setAttribute(je,S[je])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=a.player=this,this.addClass("vjs-paused"),!0!==ae().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=xu("vjs-styles-dimensions");var P=Rn(".vjs-styles-defaults"),H=Rn("head");H.insertBefore(this.styleEl_,P?P.nextSibling:H.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var Y=t.getElementsByTagName("a"),Z=0;Z<Y.length;Z++){var we=Y.item(Z);ue(we,"vjs-hidden"),we.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!h&&t.parentNode.insertBefore(a,t),Su(t,a),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_=a,a},l.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):qt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},l.width=function(t){return this.dimension("width",t)},l.height=function(t){return this.dimension("height",t)},l.dimension=function(t,a){var h=t+"_";if(void 0===a)return this[h]||0;if(""===a||"auto"===a)return this[h]=void 0,void this.updateStyleEl_();var v=parseFloat(a);isNaN(v)?qt.error('Improper value "'+a+'" supplied for for '+t):(this[h]=v,this.updateStyleEl_())},l.fluid=function(t){var a=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,wa(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),function(s,l){wa(s)?l():(s.eventedCallbacks||(s.eventedCallbacks=[]),s.eventedCallbacks.push(l))}(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},l.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},l.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},l.updateStyleEl_=function(){if(!0!==ae().VIDEOJS_NO_DYNAMIC_STYLE){var v,S,H,Y=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),Z=Y[1]/Y[0];v=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/Z:this.videoWidth()||300,S=void 0!==this.height_?this.height_:v*Z,H=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(H),al(this.styleEl_,"\n      ."+H+" {\n        width: "+v+"px;\n        height: "+S+"px;\n      }\n\n      ."+H+".vjs-fluid {\n        padding-top: "+100*Z+"%;\n      }\n    ")}else{var t="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(t>=0&&(h.width=t),a>=0&&(h.height=a))}},l.loadTech_=function(t,a){var h=this;this.tech_&&this.unloadTech_();var v=ds(t),S=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==v&&this.tag&&(ji.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=v,this.isReady_=!1;var P=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(P=!1);var H={source:a,autoplay:P,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+S+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ss.names.forEach(function(Z){var we=Ss[Z];H[we.getterName]=h[we.privateName]}),Ar(H,this.options_[v]),Ar(H,this.options_[S]),Ar(H,this.options_[t.toLowerCase()]),this.tag&&(H.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(H.startTime=this.cache_.currentTime);var Y=ji.getTech(t);if(!Y)throw new Error("No Tech named '"+v+"' exists! '"+v+"' should be registered using videojs.registerTech()'");this.tech_=new Y(H),this.tech_.ready(Fi(this,this.handleTechReady_),!0),function(s,l){s.forEach(function(u){var t=l.addRemoteTextTrack(u).track;!u.src&&u.cues&&u.cues.forEach(function(a){return t.addCue(a)})}),l.textTracks()}(this.textTracksJson_||[],this.tech_),T.forEach(function(Z){h.on(h.tech_,Z,function(we){return h["handleTech"+ds(Z)+"_"](we)})}),Object.keys(O).forEach(function(Z){h.on(h.tech_,Z,function(we){0===h.tech_.playbackRate()&&h.tech_.seeking()?h.queuedCallbacks_.push({callback:h["handleTech"+O[Z]+"_"].bind(h),event:we}):h["handleTech"+O[Z]+"_"](we)})}),this.on(this.tech_,"loadstart",function(Z){return h.handleTechLoadStart_(Z)}),this.on(this.tech_,"sourceset",function(Z){return h.handleTechSourceset_(Z)}),this.on(this.tech_,"waiting",function(Z){return h.handleTechWaiting_(Z)}),this.on(this.tech_,"ended",function(Z){return h.handleTechEnded_(Z)}),this.on(this.tech_,"seeking",function(Z){return h.handleTechSeeking_(Z)}),this.on(this.tech_,"play",function(Z){return h.handleTechPlay_(Z)}),this.on(this.tech_,"firstplay",function(Z){return h.handleTechFirstPlay_(Z)}),this.on(this.tech_,"pause",function(Z){return h.handleTechPause_(Z)}),this.on(this.tech_,"durationchange",function(Z){return h.handleTechDurationChange_(Z)}),this.on(this.tech_,"fullscreenchange",function(Z,we){return h.handleTechFullscreenChange_(Z,we)}),this.on(this.tech_,"fullscreenerror",function(Z,we){return h.handleTechFullscreenError_(Z,we)}),this.on(this.tech_,"enterpictureinpicture",function(Z){return h.handleTechEnterPictureInPicture_(Z)}),this.on(this.tech_,"leavepictureinpicture",function(Z){return h.handleTechLeavePictureInPicture_(Z)}),this.on(this.tech_,"error",function(Z){return h.handleTechError_(Z)}),this.on(this.tech_,"posterchange",function(Z){return h.handleTechPosterChange_(Z)}),this.on(this.tech_,"textdata",function(Z){return h.handleTechTextData_(Z)}),this.on(this.tech_,"ratechange",function(Z){return h.handleTechRateChange_(Z)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==v||!this.tag)&&Su(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},l.unloadTech_=function(){var t=this;Ss.names.forEach(function(a){var h=Ss[a];t[h.privateName]=t[h.getterName]()}),this.textTracksJson_=function(s){var l=s.$$("track"),u=Array.prototype.map.call(l,function(a){return a.track});return Array.prototype.map.call(l,function(a){var h=wn(a.track);return a.src&&(h.src=a.src),h}).concat(Array.prototype.filter.call(s.textTracks(),function(a){return-1===u.indexOf(a)}).map(wn))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},l.tech=function(t){return void 0===t&&qt.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},l.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},l.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},l.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},l.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},l.manualAutoplay_=function(t){var a=this;if(this.tech_&&"string"==typeof t){var v,h=function(){var P=a.muted();a.muted(!0);var H=function(){a.muted(P)};a.playTerminatedQueue_.push(H);var Y=a.play();if(mt(Y))return Y.catch(function(Z){throw H(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(Z||""))})};if("any"!==t||this.muted()?v="muted"!==t||this.muted()?this.play():h():mt(v=this.play())&&(v=v.catch(h)),mt(v))return v.then(function(){a.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:t})})}},l.updateSourceCaches_=function(t){void 0===t&&(t="");var a=t,h="";"string"!=typeof a&&(a=t.src,h=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!h&&(h=function(s,l){if(!l)return"";if(s.cache_.source.src===l&&s.cache_.source.type)return s.cache_.source.type;var u=s.cache_.sources.filter(function(v){return v.src===l});if(u.length)return u[0].type;for(var t=s.$$("source"),a=0;a<t.length;a++){var h=t[a];if(h.type&&h.src&&h.src===l)return h.type}return dl(l)}(this,a)),this.cache_.source=qi({},t,{src:a,type:h});for(var v=this.cache_.sources.filter(function(we){return we.src&&we.src===a}),S=[],P=this.$$("source"),H=[],Y=0;Y<P.length;Y++){var Z=Nt(P[Y]);S.push(Z),Z.src&&Z.src===a&&H.push(Z.src)}H.length&&!v.length?this.cache_.sources=S:v.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},l.handleTechSourceset_=function(t){var a=this;if(!this.changingSrc_){var h=function(H){return a.updateSourceCaches_(H)},v=this.currentSource().src,S=t.src;v&&!/^blob:/.test(v)&&/^blob:/.test(S)&&(!this.lastSource_||this.lastSource_.tech!==S&&this.lastSource_.player!==v)&&(h=function(){}),h(S),t.src||this.tech_.any(["sourceset","loadstart"],function(P){if("sourceset"!==P.type){var H=a.techGet("currentSrc");a.lastSource_.tech=H,a.updateSourceCaches_(H)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},l.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},l.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},l.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},l.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime();this.on("timeupdate",function v(){a!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",v))})},l.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},l.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},l.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},l.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},l.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},l.handleTechFirstPlay_=function(){this.options_.starttime&&(qt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},l.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},l.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},l.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},l.handleTechClick_=function(t){!this.controls_||(this.paused()?Jt(this.play()):this.pause())},l.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(h){return h.contains(t.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},l.handleTechTap_=function(){this.userActive(!this.userActive())},l.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},l.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},l.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},l.handleStageClick_=function(){this.reportUserActivity()},l.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},l.documentFullscreenChange_=function(t){var a=t.target.player;if(!a||a===this){var h=this.el(),v=Ae()[this.fsApi_.fullscreenElement]===h;!v&&h.matches?v=h.matches(":"+this.fsApi_.fullscreen):!v&&h.msMatchesSelector&&(v=h.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(v)}},l.handleTechFullscreenChange_=function(t,a){a&&(a.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(a.isFullscreen))},l.handleTechFullscreenError_=function(t,a){this.trigger("fullscreenerror",a)},l.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},l.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},l.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},l.handleTechError_=function(){var t=this.tech_.error();this.error(t)},l.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},l.getCache=function(){return this.cache_},l.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},l.techCall_=function(t,a){this.ready(function(){if(t in zv)return function _m(g,s,l,u){return s[l](g.reduce(Xp(l),u))}(this.middleware_,this.tech_,t,a);if(t in jl)return uc(this.middleware_,this.tech_,t,a);try{this.tech_&&this.tech_[t](a)}catch(h){throw qt(h),h}},!0)},l.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in $v)return function Vf(g,s,l){return g.reduceRight(Xp(l),s[l]())}(this.middleware_,this.tech_,t);if(t in jl)return uc(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(a){throw void 0===this.tech_[t]?(qt("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",a),a):"TypeError"===a.name?(qt("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(qt(a),a)}}},l.play=function(){var t=this,a=this.options_.Promise||ae().Promise;return a?new a(function(h){t.play_(h)}):this.play_()},l.play_=function(t){var a=this;void 0===t&&(t=Jt),this.playCallbacks_.push(t);var h=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!h)return this.waitToPlay_=function(S){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!h&&(au||io)&&this.load());var v=this.techGet_("play");null===v?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(v)},l.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(a){a()})},l.runPlayCallbacks_=function(t){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(h){h(t)})},l.pause=function(){this.techCall_("pause")},l.paused=function(){return!1!==this.techGet_("paused")},l.played=function(){return this.techGet_("played")||B(0,0)},l.scrubbing=function(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},l.currentTime=function(t){return typeof t<"u"?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},l.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},l.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},l.remainingTime=function(){return this.duration()-this.currentTime()},l.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},l.buffered=function(){var t=this.techGet_("buffered");return(!t||!t.length)&&(t=B(0,0)),t},l.bufferedPercent=function(){return J(this.buffered(),this.duration())},l.bufferedEnd=function(){var t=this.buffered(),a=this.duration(),h=t.end(t.length-1);return h>a&&(h=a),h},l.volume=function(t){var a;return void 0!==t?(a=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=a,this.techCall_("setVolume",a),void(a>0&&this.lastVolume_(a))):(a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a)},l.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},l.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},l.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},l.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},l.isFullscreen=function(t){if(void 0!==t){var a=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},l.requestFullscreen=function(t){var a=this.options_.Promise||ae().Promise;if(a){var h=this;return new a(function(v,S){function P(){h.off("fullscreenerror",Y),h.off("fullscreenchange",H)}function H(){P(),v()}function Y(we,je){P(),S(je)}h.one("fullscreenchange",H),h.one("fullscreenerror",Y);var Z=h.requestFullscreenHelper_(t);Z&&(Z.then(P,P),Z.then(v,S))})}return this.requestFullscreenHelper_()},l.requestFullscreenHelper_=function(t){var h,a=this;if(this.fsApi_.prefixed||(h=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(h=t)),this.fsApi_.requestFullscreen){var v=this.el_[this.fsApi_.requestFullscreen](h);return v&&v.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),v}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},l.exitFullscreen=function(){var t=this.options_.Promise||ae().Promise;if(t){var a=this;return new t(function(h,v){function S(){a.off("fullscreenerror",H),a.off("fullscreenchange",P)}function P(){S(),h()}function H(Z,we){S(),v(we)}a.one("fullscreenchange",P),a.one("fullscreenerror",H);var Y=a.exitFullscreenHelper_();Y&&(Y.then(S,S),Y.then(h,v))})}return this.exitFullscreenHelper_()},l.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var a=Ae()[this.fsApi_.exitFullscreen]();return a&&Jt(a.then(function(){return t.isFullscreen(!1)})),a}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},l.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ae().documentElement.style.overflow,Bn(Ae(),"keydown",this.boundFullWindowOnEscKey_),Ae().documentElement.style.overflow="hidden",ue(Ae().body,"vjs-full-window"),this.trigger("enterFullWindow")},l.fullWindowOnEscKey=function(t){Fe().isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},l.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Ls(Ae(),"keydown",this.boundFullWindowOnEscKey_),Ae().documentElement.style.overflow=this.docOrigOverflow,G(Ae().body,"vjs-full-window"),this.trigger("exitFullWindow")},l.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},l.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},l.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Ae()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},l.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Ae())return Ae().exitPictureInPicture()},l.handleKeyDown=function(t){var S,P,a=this.options_.userActions;a&&a.hotkeys&&(P=(S=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),S.isContentEditable||("input"===P?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(S.type):-1!==["textarea"].indexOf(P))||("function"==typeof a.hotkeys?a.hotkeys.call(this,t):this.handleHotkeys(t)))},l.handleHotkeys=function(t){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},h=a.fullscreenKey,S=a.muteKey,P=void 0===S?function(Pe){return Fe().isEventKey(Pe,"m")}:S,H=a.playPauseKey,Y=void 0===H?function(Pe){return Fe().isEventKey(Pe,"k")||Fe().isEventKey(Pe,"Space")}:H;if((void 0===h?function(Pe){return Fe().isEventKey(Pe,"f")}:h).call(this,t)){t.preventDefault(),t.stopPropagation();var Z=nn.getComponent("FullscreenToggle");!1!==Ae()[this.fsApi_.fullscreenEnabled]&&Z.prototype.handleClick.call(this,t)}else P.call(this,t)?(t.preventDefault(),t.stopPropagation(),nn.getComponent("MuteToggle").prototype.handleClick.call(this,t)):Y.call(this,t)&&(t.preventDefault(),t.stopPropagation(),nn.getComponent("PlayToggle").prototype.handleClick.call(this,t))},l.canPlayType=function(t){for(var a,h=0,v=this.options_.techOrder;h<v.length;h++){var S=v[h],P=ji.getTech(S);if(P||(P=nn.getComponent(S)),P){if(P.isSupported()&&(a=P.canPlayType(t)))return a}else qt.error('The "'+S+'" tech is undefined. Skipped browser support check for that tech.')}return""},l.selectSource=function(t){var Z,a=this,h=this.options_.techOrder.map(function(Y){return[Y,ji.getTech(Y)]}).filter(function(Y){var Z=Y[0],we=Y[1];return we?we.isSupported():(qt.error('The "'+Z+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),v=function(Z,we,je){var Pe;return Z.some(function(Re){return we.some(function(Bt){if(Pe=je(Re,Bt))return!0})}),Pe},H=function(Z,we){var je=Z[0];if(Z[1].canPlaySource(we,a.options_[je.toLowerCase()]))return{source:we,tech:je}};return(this.options_.sourceOrder?v(t,h,(Z=H,function(we,je){return Z(je,we)})):v(h,t,H))||!1},l.handleSrc_=function(t,a){var h=this;if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var v=fa(t);if(v.length){if(this.changingSrc_=!0,a||(this.cache_.sources=v),this.updateSourceCaches_(v[0]),Qp(this,v[0],function(H,Y){if(h.middleware_=Y,a||(h.cache_.sources=v),h.updateSourceCaches_(H),h.src_(H))return v.length>1?h.handleSrc_(v.slice(1)):(h.changingSrc_=!1,h.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void h.triggerReady());!function Gv(g,s){g.forEach(function(l){return l.setTech&&l.setTech(s)})}(Y,h.tech_)}),this.options_.retryOnError&&v.length>1){var S=function(){h.error(null),h.handleSrc_(v.slice(1),!0)},P=function(){h.off("error",S)};this.one("error",S),this.one("playing",P),this.resetRetryOnError_=function(){h.off("error",S),h.off("playing",P)}}}else this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},l.src=function(t){return this.handleSrc_(t,!1)},l.src_=function(t){var a=this,h=this.selectSource([t]);return!h||(function(s,l){return ds(s)===ds(l)}(h.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(h.tech,h.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1))},l.load=function(){this.techCall_("load")},l.reset=function(){var t=this,a=this.options_.Promise||ae().Promise;this.paused()||!a?this.doReset_():Jt(this.play().then(function(){return t.doReset_()}))},l.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),wa(this)&&this.trigger("playerreset")},l.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},l.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,a=t.durationDisplay,h=t.remainingTimeDisplay;a&&a.updateContent(),h&&h.updateContent()},l.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},l.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},l.currentSources=function(){var t=this.currentSource(),a=[];return 0!==Object.keys(t).length&&a.push(t),this.cache_.sources||a},l.currentSource=function(){return this.cache_.source||{}},l.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},l.currentType=function(){return this.currentSource()&&this.currentSource().type||""},l.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},l.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var a;"string"==typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"==typeof t?t:"play"),a=!1):this.options_.autoplay=!!t,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},l.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},l.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},l.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},l.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},l.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},l.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},l.error=function(t){var a=this;if(void 0===t)return this.error_||null;if(vo("beforeerror").forEach(function(v){var S=v(a,t);Xi(S)&&!Array.isArray(S)||"string"==typeof S||"number"==typeof S||null===S?t=S:a.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&t&&4===t.code){var h=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],h),void this.one("loadstart",function(){this.off(["click","touchstart"],h)})}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new ye(t),this.addClass("vjs-error"),qt.error("(CODE:"+this.error_.code+" "+ye.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),vo("error").forEach(function(v){return v(a,a.error_)})},l.reportUserActivity=function(t){this.userActivity_=!0},l.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},l.listenForUserActivity_=function(){var t,a,h,v=Fi(this,this.reportUserActivity),H=function(je){v(),this.clearInterval(t)};this.on("mousedown",function(){v(),this.clearInterval(t),t=this.setInterval(v,250)}),this.on("mousemove",function(je){(je.screenX!==a||je.screenY!==h)&&(a=je.screenX,h=je.screenY,v())}),this.on("mouseup",H),this.on("mouseleave",H);var Z,Y=this.getChild("controlBar");Y&&!io&&!yo&&(Y.on("mouseenter",function(we){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),Y.on("mouseleave",function(we){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",v),this.on("keyup",v),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(Z);var we=this.options_.inactivityTimeout;we<=0||(Z=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},we))}},250)},l.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},l.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},l.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},l.addTextTrack=function(t,a,h){if(this.tech_)return this.tech_.addTextTrack(t,a,h)},l.addRemoteTextTrack=function(t,a){if(this.tech_)return this.tech_.addRemoteTextTrack(t,a)},l.removeRemoteTextTrack=function(t){void 0===t&&(t={});var h=t.track;if(h||(h=t),this.tech_)return this.tech_.removeRemoteTextTrack(h)},l.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},l.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},l.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},l.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),wa(this)&&this.trigger("languagechange"))},l.languages=function(){return qi(s.prototype.options_.languages,this.languages_)},l.toJSON=function(){var t=qi(this.options_),a=t.tracks;t.tracks=[];for(var h=0;h<a.length;h++){var v=a[h];(v=qi(v)).player=void 0,t.tracks[h]=v}return t},l.createModal=function(t,a){var h=this;(a=a||{}).content=t||"";var v=new Wi(this,a);return this.addChild(v),v.on("dispose",function(){h.removeChild(v)}),v.open(),v},l.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),a=this.currentWidth(),h=0;h<le.length;h++){var v=le[h];if(a<=this.breakpoints_[v]){if(t===v)return;t&&this.removeClass(xe[t]),this.addClass(xe[v]),this.breakpoint_=v;break}}},l.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},l.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=Ar({},ht,t),this.updateCurrentBreakpoint_()),Ar(this.breakpoints_)},l.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},l.currentBreakpoint=function(){return this.breakpoint_},l.currentBreakpointClass=function(){return xe[this.breakpoint_]||""},l.loadMedia=function(t,a){var h=this;if(t&&"object"==typeof t){this.reset(),this.cache_.media=qi(t);var v=this.cache_.media,P=v.poster,H=v.src,Y=v.textTracks;!v.artwork&&P&&(this.cache_.media.artwork=[{src:P,type:dl(P)}]),H&&this.src(H),P&&this.poster(P),Array.isArray(Y)&&Y.forEach(function(Z){return h.addRemoteTextTrack(Z,!1)}),this.ready(a)}},l.getMedia=function(){if(!this.cache_.media){var t=this.poster(),v={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(S){return{kind:S.kind,label:S.label,language:S.language,src:S.src}})};return t&&(v.poster=t,v.artwork=[{src:v.poster,type:dl(v.poster)}]),v}return qi(this.cache_.media)},s.getTagSettings=function(t){var a={sources:[],tracks:[]},h=Nt(t),v=h["data-setup"];if(V(t,"vjs-fill")&&(h.fill=!0),V(t,"vjs-fluid")&&(h.fluid=!0),null!==v){var S=_t()(v||"{}"),P=S[0],H=S[1];P&&qt.error(P),Ar(h,H)}if(Ar(a,h),t.hasChildNodes())for(var Y=t.childNodes,Z=0,we=Y.length;Z<we;Z++){var je=Y[Z],Pe=je.nodeName.toLowerCase();"source"===Pe?a.sources.push(Nt(je)):"track"===Pe&&a.tracks.push(Nt(je))}return a},l.flexNotSupported_=function(){var t=Ae().createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},l.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},l.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;!Array.isArray(t)||!t.every(function(a){return"number"==typeof a})||(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},s}(nn);Ss.names.forEach(function(g){var s=Ss[g];jt.prototype[s.getterName]=function(){return this.tech_?this.tech_[s.getterName]():(this[s.privateName]=this[s.privateName]||new s.ListClass,this[s.privateName])}}),jt.prototype.crossorigin=jt.prototype.crossOrigin,jt.players={};var Sn=ae().navigator;jt.prototype.options_={techOrder:ji.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Sn&&(Sn.languages&&Sn.languages[0]||Sn.userLanguage||Sn.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(g){jt.prototype[g]=function(){return this.techGet_(g)}}),T.forEach(function(g){jt.prototype["handleTech"+ds(g)+"_"]=function(){return this.trigger(g)}}),nn.registerComponent("Player",jt);var Yn="plugin",Dr="activePlugins_",hr={},ao=function(s){return hr.hasOwnProperty(s)},pu=function(s){return ao(s)?hr[s]:void 0},_d=function(s,l){s[Dr]=s[Dr]||{},s[Dr][l]=!0},ch=function(s,l,u){var t=(u?"before":"")+"pluginsetup";s.trigger(t,l),s.trigger(t+":"+l.name,l)},Qu=function(s,l){return l.prototype.name=s,function(){ch(this,{name:s,plugin:l,instance:null},!0);for(var u=arguments.length,t=new Array(u),a=0;a<u;a++)t[a]=arguments[a];var h=gt(l,[this].concat(t));return this[s]=function(){return h},ch(this,h.getEventHash()),h}},zo=function(){function g(l){if(this.constructor===g)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=l,this.log||(this.log=this.player.log.createLogger(this.name)),ul(this),delete this.trigger,as(this,this.constructor.defaultState),_d(l,this.name),this.dispose=this.dispose.bind(this),l.on("dispose",this.dispose)}var s=g.prototype;return s.version=function(){return this.constructor.VERSION},s.getEventHash=function(u){return void 0===u&&(u={}),u.name=this.name,u.plugin=this.constructor,u.instance=this,u},s.trigger=function(u,t){return void 0===t&&(t={}),jr(this.eventBusEl_,u,this.getEventHash(t))},s.handleStateChanged=function(u){},s.dispose=function(){var u=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Dr][u]=!1,this.player=this.state=null,t[u]=Qu(u,hr[u])},g.isBasic=function(u){var t="string"==typeof u?pu(u):u;return"function"==typeof t&&!g.prototype.isPrototypeOf(t.prototype)},g.registerPlugin=function(u,t){if("string"!=typeof u)throw new Error('Illegal plugin name, "'+u+'", must be a string, was '+typeof u+".");if(ao(u))qt.warn('A plugin named "'+u+'" already exists. You may want to avoid re-registering plugins!');else if(jt.prototype.hasOwnProperty(u))throw new Error('Illegal plugin name, "'+u+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+u+'", must be a function, was '+typeof t+".");return hr[u]=t,u!==Yn&&(jt.prototype[u]=g.isBasic(t)?function(s,l){var u=function(){ch(this,{name:s,plugin:l,instance:null},!0);var a=l.apply(this,arguments);return _d(this,s),ch(this,{name:s,plugin:l,instance:a}),a};return Object.keys(l).forEach(function(t){u[t]=l[t]}),u}(u,t):Qu(u,t)),t},g.deregisterPlugin=function(u){if(u===Yn)throw new Error("Cannot de-register base plugin.");ao(u)&&(delete hr[u],delete jt.prototype[u])},g.getPlugins=function(u){var t;return void 0===u&&(u=Object.keys(hr)),u.forEach(function(a){var h=pu(a);h&&((t=t||{})[a]=h)}),t},g.getPluginVersion=function(u){var t=pu(u);return t&&t.VERSION||""},g}();zo.getPlugin=pu,zo.BASE_PLUGIN_NAME=Yn,zo.registerPlugin(Yn,zo),jt.prototype.usingPlugin=function(g){return!!this[Dr]&&!0===this[Dr][g]},jt.prototype.hasPlugin=function(g){return!!ao(g)};var dh=function(s){return 0===s.indexOf("#")?s.slice(1):s};function Ct(g,s,l){var u=Ct.getPlayer(g);if(u)return s&&qt.warn('Player "'+g+'" is already initialised. Options will not be applied.'),l&&u.ready(l),u;var t="string"==typeof g?Rn("#"+dh(g)):g;if(!Li(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!t.ownerDocument.defaultView||!t.ownerDocument.body.contains(t))&&qt.warn("The element supplied is not included in the DOM"),s=s||{},vo("beforesetup").forEach(function(h){var v=h(t,qi(s));Xi(v)&&!Array.isArray(v)?s=qi(s,v):qt.error("please return an object in beforesetup hooks")});var a=nn.getComponent("Player");return u=new a(t,s,l),vo("setup").forEach(function(h){return h(u)}),u}if(Ct.hooks_=ro,Ct.hooks=vo,Ct.hook=function(s,l){vo(s,l)},Ct.hookOnce=function(s,l){vo(s,[].concat(l).map(function(u){return function a(){return mu(s,a),u.apply(void 0,arguments)}}))},Ct.removeHook=mu,!0!==ae().VIDEOJS_NO_DYNAMIC_STYLE&&Ea()){var Td=Rn(".vjs-styles-defaults");if(!Td){Td=xu("vjs-styles-defaults");var xa=Rn("head");xa&&xa.insertBefore(Td,xa.firstChild),al(Td,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Za(1,Ct),Ct.VERSION="7.15.4",Ct.options=jt.prototype.options_,Ct.getPlayers=function(){return jt.players},Ct.getPlayer=function(g){var l,s=jt.players;if("string"==typeof g){var u=dh(g),t=s[u];if(t)return t;l=Rn("#"+u)}else l=g;if(Li(l)){var h=l.player,v=l.playerId;if(h||s[v])return h||s[v]}},Ct.getAllPlayers=function(){return Object.keys(jt.players).map(function(g){return jt.players[g]}).filter(Boolean)},Ct.players=jt.players,Ct.getComponent=nn.getComponent,Ct.registerComponent=function(g,s){ji.isTech(s)&&qt.warn("The "+g+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),nn.registerComponent.call(nn,g,s)},Ct.getTech=ji.getTech,Ct.registerTech=ji.registerTech,Ct.use=function Yp(g,s){Fl[g]=Fl[g]||[],Fl[g].push(s)},Object.defineProperty(Ct,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ct.middleware,"TERMINATOR",{value:ad,writeable:!1,enumerable:!0}),Ct.browser=Ic,Ct.TOUCH_ENABLED=Ta,Ct.extend=function(s,l){void 0===l&&(l={});var u=function(){s.apply(this,arguments)},t={};for(var a in"object"==typeof l?(l.constructor!==Object.prototype.constructor&&(u=l.constructor),t=l):"function"==typeof l&&(u=l),function kt(g,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(s&&s.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),s&&Me(g,s)}(u,s),s&&(u.super_=s),t)t.hasOwnProperty(a)&&(u.prototype[a]=t[a]);return u},Ct.mergeOptions=qi,Ct.bind=Fi,Ct.registerPlugin=zo.registerPlugin,Ct.deregisterPlugin=zo.deregisterPlugin,Ct.plugin=function(g,s){return qt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),zo.registerPlugin(g,s)},Ct.getPlugins=zo.getPlugins,Ct.getPlugin=zo.getPlugin,Ct.getPluginVersion=zo.getPluginVersion,Ct.addLanguage=function(g,s){var l;return g=(""+g).toLowerCase(),(Ct.options.languages=qi(Ct.options.languages,((l={})[g]=s,l)))[g]},Ct.log=qt,Ct.createLogger=Un,Ct.createTimeRange=Ct.createTimeRanges=B,Ct.formatTime=Mu,Ct.setFormatTime=function Bl(g){Nc=g},Ct.resetFormatTime=function _s(){Nc=lc},Ct.parseUrl=q,Ct.isCrossOrigin=Ke,Ct.EventTarget=oo,Ct.on=Bn,Ct.one=Fa,Ct.off=Ls,Ct.trigger=jr,Ct.xhr=st(),Ct.TextTrack=Zn,Ct.AudioTrack=fr,Ct.VideoTrack=nr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(g){Ct[g]=function(){return qt.warn("videojs."+g+"() is deprecated; use videojs.dom."+g+"() instead"),kn[g].apply(null,arguments)}}),Ct.computedStyle=Ts,Ct.dom=kn,Ct.url=Tt,Ct.defineLazyProperty=lh,Ct.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var bl=Le,ql=function(s,l,u){return s&&u&&u.responseURL&&l!==u.responseURL?u.responseURL:l},Eo=function(s){return Ct.log.debug?Ct.log.debug.bind(Ct,"VHS:",s+" >"):function(){}},hh=1/30,Tl=.1,ng=function(s,l){var t,u=[];if(s&&s.length)for(t=0;t<s.length;t++)l(s.start(t),s.end(t))&&u.push([s.start(t),s.end(t)]);return Ct.createTimeRanges(u)},Jf=function(s,l){return ng(s,function(u,t){return u-Tl<=l&&t+Tl>=l})},bm=function(s,l){return ng(s,function(u){return u-hh>=l})},Tm=function(s){var l=[];if(!s||!s.length)return"";for(var u=0;u<s.length;u++)l.push(s.start(u)+" => "+s.end(u));return l.join(", ")},Ed=function(s){for(var l=[],u=0;u<s.length;u++)l.push({start:s.start(u),end:s.end(u)});return l},qv=function(s){if(s&&s.length&&s.end)return s.end(s.length-1)},qo=Ct.createTimeRange,wm=function(s){return(s.segments||[]).reduce(function(l,u,t){return u.parts?u.parts.forEach(function(a,h){l.push({duration:a.duration,segmentIndex:t,partIndex:h,part:a,segment:u})}):l.push({duration:u.duration,segmentIndex:t,partIndex:null,segment:u,part:null}),l},[])},Wv=function(s){var l=s.segments&&s.segments.length&&s.segments[s.segments.length-1];return l&&l.parts||[]},ig=function(s){var l=s.preloadSegment;if(l){var u=l.parts;return(l.preloadHints||[]).reduce(function(h,v){return h+("PART"===v.type?1:0)},0)+(u&&u.length?u.length:0)}},Cm=function(s,l){if(l.endList)return 0;if(s&&s.suggestedPresentationDelay)return s.suggestedPresentationDelay;var u=Wv(l).length>0;return u&&l.serverControl&&l.serverControl.partHoldBack?l.serverControl.partHoldBack:u&&l.partTargetDuration?3*l.partTargetDuration:l.serverControl&&l.serverControl.holdBack?l.serverControl.holdBack:l.targetDuration?3*l.targetDuration:0},Zv=function(s,l,u){if(typeof l>"u"&&(l=s.mediaSequence+s.segments.length),l<s.mediaSequence)return 0;var t=function(s,l){var u=0,t=l-s.mediaSequence,a=s.segments[t];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;t--;){if(typeof(a=s.segments[t]).end<"u")return{result:u+a.end,precise:!0};if(u+=a.duration,typeof a.start<"u")return{result:u+a.start,precise:!0}}return{result:u,precise:!1}}(s,l);if(t.precise)return t.result;var a=function(s,l){for(var t,u=0,a=l-s.mediaSequence;a<s.segments.length;a++){if(typeof(t=s.segments[a]).start<"u")return{result:t.start-u,precise:!0};if(u+=t.duration,typeof t.end<"u")return{result:t.end-u,precise:!0}}return{result:-1,precise:!1}}(s,l);return a.precise?a.result:t.result+u},Sm=function(s,l,u){if(!s)return 0;if("number"!=typeof u&&(u=0),typeof l>"u"){if(s.totalDuration)return s.totalDuration;if(!s.endList)return ae()[1/0]}return Zv(s,l,u)},fh=function(s){var l=s.defaultDuration,u=s.durationList,t=s.startIndex,a=s.endIndex,h=0;if(t>a){var v=[a,t];t=v[0],a=v[1]}if(t<0){for(var S=t;S<Math.min(0,a);S++)h+=l;t=0}for(var P=t;P<a;P++)h+=u[P].duration;return h},a0=function(s,l,u,t){if(!s||!s.segments)return null;if(s.endList)return Sm(s);if(null===l)return null;var a=Zv(s,s.mediaSequence+s.segments.length,l=l||0);return u&&(a-=t="number"==typeof t?t:Cm(null,s)),Math.max(0,a)},rf=function(s){return s.excludeUntil&&s.excludeUntil>Date.now()},sf=function(s){return s.excludeUntil&&s.excludeUntil===1/0},ph=function(s){var l=rf(s);return!s.disabled&&!l},Qv=function(s,l){return l.attributes&&l.attributes[s]},gh=function(s,l){if(1===s.playlists.length)return!0;var u=l.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===s.playlists.filter(function(t){return!!ph(t)&&(t.attributes.BANDWIDTH||0)<u}).length},Wl=function(s,l){return!(!s&&!l||!s&&l||s&&!l||!(s===l||s.id&&l.id&&s.id===l.id||s.resolvedUri&&l.resolvedUri&&s.resolvedUri===l.resolvedUri||s.uri&&l.uri&&s.uri===l.uri))},mh=function(s,l){var u=s&&s.mediaGroups&&s.mediaGroups.AUDIO||{},t=!1;for(var a in u){for(var h in u[a])if(t=l(u[a][h]))break;if(t)break}return!!t},Xu=function(s){if(!s||!s.playlists||!s.playlists.length)return mh(s,function(h){return h.playlists&&h.playlists.length||h.uri});for(var u=function(v){var S=s.playlists[v],P=S.attributes&&S.attributes.CODECS;return P&&P.split(",").every(function(Y){return zr(Y)})||mh(s,function(Y){return Wl(S,Y)})?"continue":{v:!1}},t=0;t<s.playlists.length;t++){var a=u(t);if("continue"!==a&&"object"==typeof a)return a.v}return!0},Va={liveEdgeDelay:Cm,duration:Sm,seekable:function(s,l,u){var a=l||0,h=a0(s,l,!0,u);return null===h?qo():qo(a,h)},getMediaInfoForTime:function(s){for(var l=s.playlist,u=s.currentTime,t=s.startingSegmentIndex,a=s.startingPartIndex,h=s.startTime,v=s.experimentalExactManifestTimings,S=u-h,P=wm(l),H=0,Y=0;Y<P.length;Y++){var Z=P[Y];if(t===Z.segmentIndex&&("number"!=typeof a||"number"!=typeof Z.partIndex||a===Z.partIndex)){H=Y;break}}if(S<0){if(H>0)for(var we=H-1;we>=0;we--){var je=P[we];if(S+=je.duration,v){if(S<0)continue}else if(S+hh<=0)continue;return{partIndex:je.partIndex,segmentIndex:je.segmentIndex,startTime:h-fh({defaultDuration:l.targetDuration,durationList:P,startIndex:H,endIndex:we})}}return{partIndex:P[0]&&P[0].partIndex||null,segmentIndex:P[0]&&P[0].segmentIndex||0,startTime:u}}if(H<0){for(var Pe=H;Pe<0;Pe++)if((S-=l.targetDuration)<0)return{partIndex:P[0]&&P[0].partIndex||null,segmentIndex:P[0]&&P[0].segmentIndex||0,startTime:u};H=0}for(var Re=H;Re<P.length;Re++){var Bt=P[Re];if(S-=Bt.duration,v){if(S>0)continue}else if(S-hh>=0)continue;return{partIndex:Bt.partIndex,segmentIndex:Bt.segmentIndex,startTime:h+fh({defaultDuration:l.targetDuration,durationList:P,startIndex:H,endIndex:Re})}}return{segmentIndex:P[P.length-1].segmentIndex,partIndex:P[P.length-1].partIndex,startTime:u}},isEnabled:ph,isDisabled:function(s){return s.disabled},isBlacklisted:rf,isIncompatible:sf,playlistEnd:a0,isAes:function(s){for(var l=0;l<s.segments.length;l++)if(s.segments[l].key)return!0;return!1},hasAttribute:Qv,estimateSegmentRequestTime:function(s,l,u,t){return void 0===t&&(t=0),Qv("BANDWIDTH",u)?(s*u.attributes.BANDWIDTH-8*t)/l:NaN},isLowestEnabledRendition:gh,isAudioOnly:Xu,playlistMatch:Wl},ep=Ct.log,af=function(s,l){return s+"-"+l},El=function(s,l){!s.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(u){if(s.mediaGroups[u])for(var t in s.mediaGroups[u])for(var a in s.mediaGroups[u][t])l(s.mediaGroups[u][t][a],u,t,a)})},xm=function(s){var l=s.playlist,u=s.uri;l.id=s.id,l.playlistErrors_=0,u&&(l.uri=u),l.attributes=l.attributes||{}},vh=function(s,l){s.uri=l;for(var u=0;u<s.playlists.length;u++)s.playlists[u].uri||(s.playlists[u].uri="placeholder-uri-"+u);var a=Xu(s);El(s,function(h,v,S,P){var H="placeholder-uri-"+v+"-"+S+"-"+P;if(!h.playlists||!h.playlists.length){if(a&&"AUDIO"===v&&!h.uri)for(var Y=0;Y<s.playlists.length;Y++){var Z=s.playlists[Y];if(Z.attributes&&Z.attributes.AUDIO&&Z.attributes.AUDIO===S)return}h.playlists=[De({},h)]}h.playlists.forEach(function(we,je){var Pe=af(je,H);we.uri?we.resolvedUri=we.resolvedUri||bl(s.uri,we.uri):(we.uri=0===je?H:Pe,we.resolvedUri=we.uri),we.id=we.id||Pe,we.attributes=we.attributes||{},s.playlists[we.id]=we,s.playlists[we.uri]=we})}),function(s){for(var l=s.playlists.length;l--;){var u=s.playlists[l];xm({playlist:u,id:af(l,u.uri)}),u.resolvedUri=bl(s.uri,u.uri),s.playlists[u.id]=u,s.playlists[u.uri]=u,u.attributes.BANDWIDTH||ep.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(s),function(s){El(s,function(l){l.uri&&(l.resolvedUri=bl(s.uri,l.uri))})}(s)},Kl=Ct.mergeOptions,og=function(s,l){if(!s)return l;var u=Kl(s,l);if(s.preloadHints&&!l.preloadHints&&delete u.preloadHints,s.parts&&!l.parts)delete u.parts;else if(s.parts&&l.parts)for(var t=0;t<l.parts.length;t++)s.parts&&s.parts[t]&&(u.parts[t]=Kl(s.parts[t],l.parts[t]));return!s.skipped&&l.skipped&&(u.skipped=!1),s.preload&&!l.preload&&(u.preload=!1),u},ey=function(s,l){!s.resolvedUri&&s.uri&&(s.resolvedUri=bl(l,s.uri)),s.key&&!s.key.resolvedUri&&(s.key.resolvedUri=bl(l,s.key.uri)),s.map&&!s.map.resolvedUri&&(s.map.resolvedUri=bl(l,s.map.uri)),s.map&&s.map.key&&!s.map.key.resolvedUri&&(s.map.key.resolvedUri=bl(l,s.map.key.uri)),s.parts&&s.parts.length&&s.parts.forEach(function(u){u.resolvedUri||(u.resolvedUri=bl(l,u.uri))}),s.preloadHints&&s.preloadHints.length&&s.preloadHints.forEach(function(u){u.resolvedUri||(u.resolvedUri=bl(l,u.uri))})},Im=function(s){var l=s.segments||[],u=s.preloadSegment;if(u&&u.parts&&u.parts.length){if(u.preloadHints)for(var t=0;t<u.preloadHints.length;t++)if("MAP"===u.preloadHints[t].type)return l;u.duration=s.targetDuration,u.preload=!0,l.push(u)}return l},Zl=function(s,l){return s===l||s.segments&&l.segments&&s.segments.length===l.segments.length&&s.endList===l.endList&&s.mediaSequence===l.mediaSequence},Hc=function(s,l,u){void 0===u&&(u=Zl);var t=Kl(s,{}),a=t.playlists[l.id];if(!a||u(a,l))return null;l.segments=Im(l);var h=Kl(a,l);if(h.preloadSegment&&!l.preloadSegment&&delete h.preloadSegment,a.segments){if(l.skip){l.segments=l.segments||[];for(var v=0;v<l.skip.skippedSegments;v++)l.segments.unshift({skipped:!0})}h.segments=function(s,l,u){var t=s.slice(),a=l.slice();u=u||0;for(var v,h=[],S=0;S<a.length;S++){var P=t[S+u],H=a[S];P?(v=P.map||v,h.push(og(P,H))):(v&&!H.map&&(H.map=v),h.push(H))}return h}(a.segments,l.segments,l.mediaSequence-a.mediaSequence)}h.segments.forEach(function(P){ey(P,h.resolvedUri)});for(var S=0;S<t.playlists.length;S++)t.playlists[S].id===l.id&&(t.playlists[S]=h);return t.playlists[l.id]=h,t.playlists[l.uri]=h,El(s,function(P,H,Y,Z){if(P.playlists)for(var we=0;we<P.playlists.length;we++)l.id===P.playlists[we].id&&(P.playlists[we]=l)}),t},yc=function(s,l){var u=s.segments[s.segments.length-1],t=u&&u.parts&&u.parts[u.parts.length-1],a=t&&t.duration||u&&u.duration;return l&&a?1e3*a:500*(s.partTargetDuration||s.targetDuration||10)},yh=function(g){function s(u,t,a){var h;if(void 0===a&&(a={}),h=g.call(this)||this,!u)throw new Error("A non-empty playlist URL or object is required");h.logger_=Eo("PlaylistLoader");var S=a.withCredentials,P=void 0!==S&&S,H=a.handleManifestRedirects,Y=void 0!==H&&H;h.src=u,h.vhs_=t,h.withCredentials=P,h.handleManifestRedirects=Y;var Z=t.options_;return h.customTagParsers=Z&&Z.customTagParsers||[],h.customTagMappers=Z&&Z.customTagMappers||[],h.experimentalLLHLS=Z&&Z.experimentalLLHLS||!1,h.state="HAVE_NOTHING",h.handleMediaupdatetimeout_=h.handleMediaupdatetimeout_.bind(Ee(h)),h.on("mediaupdatetimeout",h.handleMediaupdatetimeout_),h}$e(s,g);var l=s.prototype;return l.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var a=this.media(),h=bl(this.master.uri,a.uri);this.experimentalLLHLS&&(h=function(s,l){if(l.endList)return s;var u=[];if(l.serverControl&&l.serverControl.canBlockReload){var t=l.preloadSegment,a=l.mediaSequence+l.segments.length;if(t){var h=t.parts||[],v=ig(l)-1;v>-1&&v!==h.length-1&&u.push("_HLS_part="+v),(v>-1||h.length)&&a--}u.unshift("_HLS_msn="+a)}return l.serverControl&&l.serverControl.canSkipUntil&&u.unshift("_HLS_skip="+(l.serverControl.canSkipDateranges?"v2":"YES")),u.forEach(function(S,P){s+=(0===P?"?":"&")+S}),s}(h,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:h,withCredentials:this.withCredentials},function(v,S){if(t.request){if(v)return t.playlistRequestError(t.request,t.media(),"HAVE_METADATA");t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}})}},l.playlistRequestError=function(t,a,h){var v=a.uri,S=a.id;this.request=null,h&&(this.state=h),this.error={playlist:this.master.playlists[S],status:t.status,message:"HLS playlist request error at URL: "+v+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},l.parseManifest_=function(t){var a=this,h=t.url;return function(s){var l=s.onwarn,u=s.oninfo,t=s.manifestString,a=s.customTagParsers,h=void 0===a?[]:a,v=s.customTagMappers,S=void 0===v?[]:v,P=s.experimentalLLHLS,H=new hn;l&&H.on("warn",l),u&&H.on("info",u),h.forEach(function(Pe){return H.addParser(Pe)}),S.forEach(function(Pe){return H.addTagMapper(Pe)}),H.push(t),H.end();var Y=H.manifest;if(P||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(Pe){Y.hasOwnProperty(Pe)&&delete Y[Pe]}),Y.segments&&Y.segments.forEach(function(Pe){["parts","preloadHints"].forEach(function(Re){Pe.hasOwnProperty(Re)&&delete Pe[Re]})})),!Y.targetDuration){var Z=10;Y.segments&&Y.segments.length&&(Z=Y.segments.reduce(function(Pe,Re){return Math.max(Pe,Re.duration)},0)),l&&l("manifest has no targetDuration defaulting to "+Z),Y.targetDuration=Z}var we=Wv(Y);if(we.length&&!Y.partTargetDuration){var je=we.reduce(function(Pe,Re){return Math.max(Pe,Re.duration)},0);l&&(l("manifest has no partTargetDuration defaulting to "+je),ep.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),Y.partTargetDuration=je}return Y}({onwarn:function(P){return a.logger_("m3u8-parser warn for "+h+": "+P.message)},oninfo:function(P){return a.logger_("m3u8-parser info for "+h+": "+P.message)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},l.haveMetadata=function(t){var a=t.playlistString,h=t.playlistObject,v=t.url,S=t.id;this.request=null,this.state="HAVE_METADATA";var P=h||this.parseManifest_({url:v,manifestString:a});P.lastRequest=Date.now(),xm({playlist:P,uri:v,id:S});var H=Hc(this.master,P);this.targetDuration=P.partTargetDuration||P.targetDuration,H?(this.master=H,this.media_=this.master.playlists[S]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(yc(this.media(),!!H)),this.trigger("loadedplaylist")},l.dispose=function(){this.trigger("dispose"),this.stopRequest(),ae().clearTimeout(this.mediaUpdateTimeout),ae().clearTimeout(this.finalRenditionTimeout),this.off()},l.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},l.media=function(t,a){var h=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(ae().clearTimeout(this.finalRenditionTimeout),a){var v=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=ae().setTimeout(this.media.bind(this,t,!1),v)}else{var S=this.state,P=!this.media_||t.id!==this.media_.id,H=this.master.playlists[t.id];if(H&&H.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(P&&(this.trigger("mediachanging"),this.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(yc(t,!0)),P){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(Y,Z){if(h.request){if(t.lastRequest=Date.now(),t.resolvedUri=ql(h.handleManifestRedirects,t.resolvedUri,Z),Y)return h.playlistRequestError(h.request,t,S);h.haveMetadata({playlistString:Z.responseText,url:t.uri,id:t.id}),h.trigger("HAVE_MASTER"===S?"loadedmetadata":"mediachange")}})}}},l.pause=function(){this.mediaUpdateTimeout&&(ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},l.load=function(t){var a=this;this.mediaUpdateTimeout&&(ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var h=this.media();if(t){var v=h?(h.partTargetDuration||h.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ae().setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},v)}else this.started?this.trigger(h&&!h.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()},l.updateMediaUpdateTimeout_=function(t){var a=this;this.mediaUpdateTimeout&&(ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=ae().setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(t)},t))},l.start=function(){var t=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=ae().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){t.setupInitialPlaylist(t.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,h){if(t.request){if(t.request=null,a)return t.error={status:h.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:h.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=ql(t.handleManifestRedirects,t.src,h);var v=t.parseManifest_({manifestString:h.responseText,url:t.src});t.setupInitialPlaylist(v)}})},l.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},l.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,vh(this.master,this.srcUri()),t.playlists.forEach(function(h){h.segments=Im(h),h.segments.forEach(function(v){ey(v,h.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var a=this.srcUri()||ae().location.href;this.master=function(s,l){var u=af(0,l),t={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ae().location.href,resolvedUri:ae().location.href,playlists:[{uri:l,id:u,resolvedUri:l,attributes:{}}]};return t.playlists[u]=t.playlists[0],t.playlists[l]=t.playlists[0],t}(0,a),this.haveMetadata({playlistObject:t,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},s}(Ct.EventTarget),Pm=Ct.xhr,ty=Ct.mergeOptions,ag=function(s,l,u,t){var a="arraybuffer"===s.responseType?s.response:s.responseText;!l&&a&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=a.byteLength||a.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),u.headers&&(s.responseHeaders=u.headers),l&&"ETIMEDOUT"===l.code&&(s.timedout=!0),!l&&!s.aborted&&200!==u.statusCode&&206!==u.statusCode&&0!==u.statusCode&&(l=new Error("XHR Failed with a response of: "+(s&&(a||s.responseText)))),t(l,s)},ug=function(){var s=function l(u,t){u=ty({timeout:45e3},u);var a=l.beforeRequest||Ct.Vhs.xhr.beforeRequest;if(a&&"function"==typeof a){var h=a(u);h&&(u=h)}var S=(!0===Ct.Vhs.xhr.original?Pm:Ct.Vhs.xhr)(u,function(H,Y){return ag(S,H,Y,t)}),P=S.abort;return S.abort=function(){return S.aborted=!0,P.apply(S,arguments)},S.uri=u.uri,S.requestTime=Date.now(),S};return s.original=!0,s},km=function(s){var l={};return s.byterange&&(l.Range=function(s){return"bytes="+s.offset+"-"+(s.offset+s.length-1)}(s.byterange)),l},Mm=function(s,l){return s.start(l)+"-"+s.end(l)},_h=function(s,l){var u=s.toString(16);return"00".substring(0,2-u.length)+u+(l%2?" ":"")},ny=function(s){return s>=32&&s<126?String.fromCharCode(s):"."},_c=function(s){var l={};return Object.keys(s).forEach(function(u){var t=s[u];l[u]=ArrayBuffer.isView(t)?{bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:t}),l},wd=function(s){var l=s.byterange||{length:1/0,offset:0};return[l.length,l.offset,s.resolvedUri].join(",")},cg=function(s){return s.resolvedUri},uf=function(s){for(var l=Array.prototype.slice.call(s),u=16,t="",v=0;v<l.length/u;v++)t+=l.slice(v*u,v*u+u).map(_h).join("")+" "+l.slice(v*u,v*u+u).map(ny).join("")+"\n";return t},np=Object.freeze({__proto__:null,createTransferableMessage:_c,initSegmentId:wd,segmentKeyId:cg,hexDump:uf,tagDump:function(s){return uf(s.bytes)},textRanges:function(s){var u,l="";for(u=0;u<s.length;u++)l+=Mm(s,u)+" ";return l}}),iy=function g(s){var l=s.programTime,u=s.playlist,t=s.retryCount,a=void 0===t?2:t,h=s.seekTo,v=s.pauseAfterSeek,S=void 0===v||v,P=s.tech,H=s.callback;if(!H)throw new Error("seekToProgramTime: callback must be provided");if(typeof l>"u"||!u||!h)return H({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!u.endList&&!P.hasStarted_)return H({message:"player must be playing a live stream to start buffering"});if(!function(s){if(!s.segments||0===s.segments.length)return!1;for(var l=0;l<s.segments.length;l++)if(!s.segments[l].dateTimeObject)return!1;return!0}(u))return H({message:"programDateTime tags must be provided in the manifest "+u.resolvedUri});var Y=function(s,l){var u;try{u=new Date(s)}catch{return null}if(!l||!l.segments||0===l.segments.length)return null;var t=l.segments[0];if(u<t.dateTimeObject)return null;for(var a=0;a<l.segments.length-1&&(t=l.segments[a],!(u<l.segments[a+1].dateTimeObject));a++);var v=l.segments[l.segments.length-1],S=v.dateTimeObject,P=v.videoTimingInfo?function(s){return s.transmuxedPresentationEnd-s.transmuxedPresentationStart-s.transmuxerPrependedSeconds}(v.videoTimingInfo):v.duration+.25*v.duration;return u>new Date(S.getTime()+1e3*P)?null:(u>S&&(t=v),{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:Va.duration(l,l.mediaSequence+l.segments.indexOf(t)),type:t.videoTimingInfo?"accurate":"estimate"})}(l,u);if(!Y)return H({message:l+" was not found in the stream"});var Z=Y.segment,we=function(s,l){var u,t;try{u=new Date(s),t=new Date(l)}catch{}var a=u.getTime();return(t.getTime()-a)/1e3}(Z.dateTimeObject,l);if("estimate"===Y.type)return 0===a?H({message:l+" is not buffered yet. Try again"}):(h(Y.estimatedStart+we),void P.one("seeked",function(){g({programTime:l,playlist:u,retryCount:a-1,seekTo:h,pauseAfterSeek:S,tech:P,callback:H})}));var je=Z.start+we;P.one("seeked",function(){return H(null,P.currentTime())}),S&&P.pause(),h(je)},bc=function(s,l){if(4===s.readyState)return l()},Sd=Ct.mergeOptions,oy=function(s,l){if(!Zl(s,l)||s.sidx&&l.sidx&&(s.sidx.offset!==l.sidx.offset||s.sidx.length!==l.sidx.length))return!1;if(!s.sidx&&l.sidx||s.sidx&&!l.sidx||s.segments&&!l.segments||!s.segments&&l.segments)return!1;if(!s.segments&&!l.segments)return!0;for(var u=0;u<s.segments.length;u++){var t=s.segments[u],a=l.segments[u];if(t.uri!==a.uri)return!1;if(t.byterange||a.byterange){var h=t.byterange,v=a.byterange;if(h&&!v||!h&&v||h.offset!==v.offset||h.length!==v.length)return!1}}return!0},Dd=function(s,l){return(Boolean(!s.map&&!l.map)||Boolean(s.map&&l.map&&s.map.byterange.offset===l.map.byterange.offset&&s.map.byterange.length===l.map.byterange.length))&&s.uri===l.uri&&s.byterange.offset===l.byterange.offset&&s.byterange.length===l.byterange.length},Om=function(s,l){var u={};for(var t in s){var h=s[t].sidx;if(h){var v=$n(h);if(!l[v])break;Dd(l[v].sidxInfo,h)&&(u[v]=l[v])}}return u},ay=function(g){function s(u,t,a,h){var v;void 0===a&&(a={}),(v=g.call(this)||this).masterPlaylistLoader_=h||Ee(v),h||(v.isMaster_=!0);var P=a.withCredentials,H=void 0!==P&&P,Y=a.handleManifestRedirects,Z=void 0!==Y&&Y;if(v.vhs_=t,v.withCredentials=H,v.handleManifestRedirects=Z,!u)throw new Error("A non-empty playlist URL or object is required");return v.on("minimumUpdatePeriod",function(){v.refreshXml_()}),v.on("mediaupdatetimeout",function(){v.refreshMedia_(v.media().id)}),v.state="HAVE_NOTHING",v.loadedPlaylists_={},v.logger_=Eo("DashPlaylistLoader"),v.isMaster_?(v.masterPlaylistLoader_.srcUrl=u,v.masterPlaylistLoader_.sidxMapping_={}):v.childPlaylist_=u,v}$e(s,g);var l=s.prototype;return l.requestErrored_=function(t,a,h){return!this.request||(this.request=null,t?(this.error="object"!=typeof t||t instanceof Error?{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2}:t,h&&(this.state=h),this.trigger("error"),!0):void 0)},l.addSidxSegments_=function(t,a,h){var v=this,S=t.sidx&&$n(t.sidx);if(t.sidx&&S&&!this.masterPlaylistLoader_.sidxMapping_[S]){var P=ql(this.handleManifestRedirects,t.sidx.resolvedUri),H=function(Z,we){if(!v.requestErrored_(Z,we,a)){var Pe,je=v.masterPlaylistLoader_.sidxMapping_;try{Pe=wu()(vn(we.response).subarray(8))}catch(Re){return void v.requestErrored_(Re,we,a)}return je[S]={sidxInfo:t.sidx,sidx:Pe},er(t,Pe,t.sidx.resolvedUri),h(!0)}};this.request=function(s,l,u){var a,t=[],h=!1,v=function(Z,we,je,Pe){return we.abort(),h=!0,u(Z,we,je,Pe)},S=function(Z,we){if(!h){if(Z)return v(Z,we,"",t);var je=we.responseText.substring(t&&t.byteLength||0,we.responseText.length);if(t=function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if((l=l.filter(function(v){return v&&(v.byteLength||v.length)&&"string"!=typeof v})).length<=1)return vn(l[0]);var t=l.reduce(function(v,S,P){return v+(S.byteLength||S.length)},0),a=new Uint8Array(t),h=0;return l.forEach(function(v){v=vn(v),a.set(v,h),h+=v.byteLength}),a}(t,gs(je,!0)),a=a||Lo(t),t.length<10||a&&t.length<a+2)return bc(we,function(){return v(Z,we,"",t)});var Pe=ea(t);return"ts"===Pe&&t.length<188||!Pe&&t.length<376?bc(we,function(){return v(Z,we,"",t)}):v(null,we,Pe,t)}},H=l({uri:s,beforeSend:function(Z){Z.overrideMimeType("text/plain; charset=x-user-defined"),Z.addEventListener("progress",function(we){return ag(Z,null,{statusCode:Z.status},S)})}},function(Y,Z){return ag(H,Y,Z,S)});return H}(P,this.vhs_.xhr,function(Y,Z,we,je){if(Y)return H(Y,Z);if(!we||"mp4"!==we)return H({status:Z.status,message:"Unsupported "+(we||"unknown")+" container type for sidx segment at URL: "+P,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},Z);var Pe=t.sidx.byterange,Re=Pe.offset,Bt=Pe.length;if(je.length>=Bt+Re)return H(Y,{response:je.subarray(Re,Re+Bt),status:Z.status,uri:Z.uri});v.request=v.vhs_.xhr({uri:P,responseType:"arraybuffer",headers:km({byterange:t.sidx.byterange})},H)})}else this.mediaRequest_=ae().setTimeout(function(){return h(!1)},0)},l.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ae().clearTimeout(this.minimumUpdatePeriodTimeout_),ae().clearTimeout(this.mediaRequest_),ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},l.hasPendingRequest=function(){return this.request||this.mediaRequest_},l.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},l.media=function(t){var a=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var h=this.state;if("string"==typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var v=!this.media_||t.id!==this.media_.id;if(v&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(v&&(this.trigger("mediachanging"),this.trigger("mediachange")));!v||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,h,function(S){a.haveMetadata({startingState:h,playlist:t})}))},l.haveMetadata=function(t){var a=t.startingState,h=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[h.id]=h,this.mediaRequest_=null,this.refreshMedia_(h.id),this.trigger("HAVE_MASTER"===a?"loadedmetadata":"mediachange")},l.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(ae().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},l.load=function(t){var a=this;ae().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var h=this.media();if(t){var v=h?h.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ae().setTimeout(function(){return a.load()},v)}else this.started?h&&!h.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},l.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_(function(a,h){t.haveMaster_(),!t.hasPendingRequest()&&!t.media_&&t.media(t.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=ae().setTimeout(function(){return t.haveMaster_()},0)},l.requestMaster_=function(t){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(h,v){if(!a.requestErrored_(h,v)){var S=v.responseText!==a.masterPlaylistLoader_.masterXml_;return a.masterPlaylistLoader_.masterXml_=v.responseText,a.masterLoaded_=v.responseHeaders&&v.responseHeaders.date?Date.parse(v.responseHeaders.date):Date.now(),a.masterPlaylistLoader_.srcUrl=ql(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,v),S?(a.handleMaster_(),void a.syncClientServerClock_(function(){return t(v,S)})):t(v,S)}"HAVE_NOTHING"===a.state&&(a.started=!1)})},l.syncClientServerClock_=function(t){var a=this,h=function(s){return function(s){var l=Lr(s,"UTCTiming")[0];if(!l)return null;var u=Rr(l);switch(u.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":u.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":u.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":u.method="DIRECT",u.value=Date.parse(u.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return u}(vi(s))}(this.masterPlaylistLoader_.masterXml_);return null===h?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===h.method?(this.masterPlaylistLoader_.clientOffset_=h.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:bl(this.masterPlaylistLoader_.srcUrl,h.value),method:h.method,withCredentials:this.withCredentials},function(v,S){if(a.request){if(v)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),t();var P;P="HEAD"===h.method?S.responseHeaders&&S.responseHeaders.date?Date.parse(S.responseHeaders.date):a.masterLoaded_:Date.parse(S.responseText),a.masterPlaylistLoader_.clientOffset_=P-Date.now(),t()}}))},l.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},l.handleMaster_=function(){this.mediaRequest_=null;var t=function(s){var u=s.srcUrl,h=Cr(s.masterXml,{manifestUri:u,clientOffset:s.clientOffset,sidxMapping:s.sidxMapping});return vh(h,u),h}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),a=this.masterPlaylistLoader_.master;a&&(t=function(s,l,u){for(var t=!0,a=Sd(s,{duration:l.duration,minimumUpdatePeriod:l.minimumUpdatePeriod}),h=0;h<l.playlists.length;h++){var v=l.playlists[h];if(v.sidx){var S=$n(v.sidx);u&&u[S]&&u[S].sidx&&er(v,u[S].sidx,v.sidx.resolvedUri)}var P=Hc(a,v,oy);P&&(a=P,t=!1)}return El(l,function(H,Y,Z,we){if(H.playlists&&H.playlists.length){var je=H.playlists[0].id,Pe=Hc(a,H.playlists[0],oy);Pe&&((a=Pe).mediaGroups[Y][Z][we].playlists[0]=a.playlists[je],t=!1)}}),l.minimumUpdatePeriod!==s.minimumUpdatePeriod&&(t=!1),t?null:a}(a,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||a;var h=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return h&&h!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=h),(!a||t&&t.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},l.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(ae().clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var a=t.master&&t.master.minimumUpdatePeriod;0===a&&(t.media()?a=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!=typeof a||a<=0?a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout"):this.createMUPTimeout_(a)},l.createMUPTimeout_=function(t){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=ae().setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(t)},t)},l.refreshXml_=function(){var t=this;this.requestMaster_(function(a,h){!h||(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=function(s,l){var t=Om(s.playlists,l);return El(s,function(a,h,v,S){a.playlists&&a.playlists.length&&(t=Sd(t,Om(a.playlists,l)))}),t}(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(v){t.refreshMedia_(t.media().id)}))})},l.refreshMedia_=function(t){var a=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var h=this.masterPlaylistLoader_.master.playlists,v=!this.media_||this.media_!==h[t];v?this.media_=h[t]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function P(){a.media().endList||(a.mediaUpdateTimeout=ae().setTimeout(function(){a.trigger("mediaupdatetimeout"),P()},yc(a.media(),Boolean(v))))}(),this.trigger("loadedplaylist")},s}(Ct.EventTarget),Aa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},hf=function(s){return s.on=s.addEventListener,s.off=s.removeEventListener,s},uy=function(s){return function(){var l=function(s){try{return URL.createObjectURL(new Blob([s],{type:"application/javascript"}))}catch{var l=new BlobBuilder;return l.append(s),URL.createObjectURL(l.getBlob())}}(s),u=hf(new Worker(l));u.objURL=l;var t=u.terminate;return u.on=u.addEventListener,u.off=u.removeEventListener,u.terminate=function(){return URL.revokeObjectURL(l),t.call(this)},u}},gg=function(s){return"var browserWorkerPolyFill = "+hf.toString()+";\nbrowserWorkerPolyFill(self);\n"+s},ly=function(s){return s.toString().replace(/^function.+?{/,"").slice(0,-1)},cy=gg(ly(function(){var g=function(){this.init=function(){var I={};this.on=function(j,U){I[j]||(I[j]=[]),I[j]=I[j].concat(U)},this.off=function(j,U){var z;return!!I[j]&&(z=I[j].indexOf(U),I[j]=I[j].slice(),I[j].splice(z,1),z>-1)},this.trigger=function(j){var U,z,se,he;if(U=I[j])if(2===arguments.length)for(se=U.length,z=0;z<se;++z)U[z].call(this,arguments[1]);else{for(he=[],z=arguments.length,z=1;z<arguments.length;++z)he.push(arguments[z]);for(se=U.length,z=0;z<se;++z)U[z].apply(this,he)}},this.dispose=function(){I={}}}};g.prototype.pipe=function(_e){return this.on("data",function(I){_e.push(I)}),this.on("done",function(I){_e.flush(I)}),this.on("partialdone",function(I){_e.partialFlush(I)}),this.on("endedtimeline",function(I){_e.endTimeline(I)}),this.on("reset",function(I){_e.reset(I)}),_e},g.prototype.push=function(_e){this.trigger("data",_e)},g.prototype.flush=function(_e){this.trigger("done",_e)},g.prototype.partialFlush=function(_e){this.trigger("partialdone",_e)},g.prototype.endTimeline=function(_e){this.trigger("endedtimeline",_e)},g.prototype.reset=function(_e){this.trigger("reset",_e)};var u,t,a,h,v,S,P,H,Y,Z,we,je,Pe,Re,Bt,It,tn,on,Kt,jn,Hn,gn,Xt,Ln,hs,Zo,Kr,Eu,Fs,Gs,$a,Al,Il,ec,Mh,Ud,_e,I,s=g,l=Math.pow(2,32)-1;(function(){var _e;if(Xt={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(_e in Xt)Xt.hasOwnProperty(_e)&&(Xt[_e]=[_e.charCodeAt(0),_e.charCodeAt(1),_e.charCodeAt(2),_e.charCodeAt(3)]);Ln=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Zo=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),hs=new Uint8Array([0,0,0,1]),Kr=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Eu=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Fs={video:Kr,audio:Eu},Al=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$a=new Uint8Array([0,0,0,0,0,0,0,0]),Il=new Uint8Array([0,0,0,0,0,0,0,0]),ec=Il,Mh=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ud=Il,Gs=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),u=function(I){var z,se,j=[],U=0;for(z=1;z<arguments.length;z++)j.push(arguments[z]);for(z=j.length;z--;)U+=j[z].byteLength;for(se=new Uint8Array(U+8),new DataView(se.buffer,se.byteOffset,se.byteLength).setUint32(0,se.byteLength),se.set(I,4),z=0,U=8;z<j.length;z++)se.set(j[z],U),U+=j[z].byteLength;return se},t=function(){return u(Xt.dinf,u(Xt.dref,Al))},a=function(I){return u(Xt.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,I.audioobjecttype<<3|I.samplingfrequencyindex>>>1,I.samplingfrequencyindex<<7|I.channelcount<<3,6,1,2]))},h=function(){return u(Xt.ftyp,Ln,hs,Ln,Zo)},It=function(I){return u(Xt.hdlr,Fs[I])},v=function(I){return u(Xt.mdat,I)},Bt=function(I){var j=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,I.duration>>>24&255,I.duration>>>16&255,I.duration>>>8&255,255&I.duration,85,196,0,0]);return I.samplerate&&(j[12]=I.samplerate>>>24&255,j[13]=I.samplerate>>>16&255,j[14]=I.samplerate>>>8&255,j[15]=255&I.samplerate),u(Xt.mdhd,j)},Re=function(I){return u(Xt.mdia,Bt(I),It(I.type),P(I))},S=function(I){return u(Xt.mfhd,new Uint8Array([0,0,0,0,(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I]))},P=function(I){return u(Xt.minf,"video"===I.type?u(Xt.vmhd,Gs):u(Xt.smhd,$a),t(),on(I))},H=function(I,j){for(var U=[],z=j.length;z--;)U[z]=jn(j[z]);return u.apply(null,[Xt.moof,S(I)].concat(U))},Y=function(I){for(var j=I.length,U=[];j--;)U[j]=je(I[j]);return u.apply(null,[Xt.moov,we(4294967295)].concat(U).concat(Z(I)))},Z=function(I){for(var j=I.length,U=[];j--;)U[j]=Hn(I[j]);return u.apply(null,[Xt.mvex].concat(U))},we=function(I){var j=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(Xt.mvhd,j)},tn=function(I){var z,se,j=I.samples||[],U=new Uint8Array(4+j.length);for(se=0;se<j.length;se++)U[se+4]=(z=j[se].flags).dependsOn<<4|z.isDependedOn<<2|z.hasRedundancy;return u(Xt.sdtp,U)},on=function(I){return u(Xt.stbl,Kt(I),u(Xt.stts,Ud),u(Xt.stsc,ec),u(Xt.stsz,Mh),u(Xt.stco,Il))},Kt=function(U){return u(Xt.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===U.type?_e(U):I(U))},_e=function(U){var Ze,ct,z=U.sps||[],se=U.pps||[],he=[],Ue=[];for(Ze=0;Ze<z.length;Ze++)he.push((65280&z[Ze].byteLength)>>>8),he.push(255&z[Ze].byteLength),he=he.concat(Array.prototype.slice.call(z[Ze]));for(Ze=0;Ze<se.length;Ze++)Ue.push((65280&se[Ze].byteLength)>>>8),Ue.push(255&se[Ze].byteLength),Ue=Ue.concat(Array.prototype.slice.call(se[Ze]));if(ct=[Xt.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&U.width)>>8,255&U.width,(65280&U.height)>>8,255&U.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(Xt.avcC,new Uint8Array([1,U.profileIdc,U.profileCompatibility,U.levelIdc,255].concat([z.length],he,[se.length],Ue))),u(Xt.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],U.sarRatio){var it=U.sarRatio[0],yt=U.sarRatio[1];ct.push(u(Xt.pasp,new Uint8Array([(4278190080&it)>>24,(16711680&it)>>16,(65280&it)>>8,255&it,(4278190080&yt)>>24,(16711680&yt)>>16,(65280&yt)>>8,255&yt])))}return u.apply(null,ct)},I=function(U){return u(Xt.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&U.channelcount)>>8,255&U.channelcount,(65280&U.samplesize)>>8,255&U.samplesize,0,0,0,0,(65280&U.samplerate)>>8,255&U.samplerate,0,0]),a(U))},Pe=function(I){var j=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&I.id)>>24,(16711680&I.id)>>16,(65280&I.id)>>8,255&I.id,0,0,0,0,(4278190080&I.duration)>>24,(16711680&I.duration)>>16,(65280&I.duration)>>8,255&I.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&I.width)>>8,255&I.width,0,0,(65280&I.height)>>8,255&I.height,0,0]);return u(Xt.tkhd,j)},jn=function(I){var j,U,z,se,Ue,Ze;return j=u(Xt.tfhd,new Uint8Array([0,0,0,58,(4278190080&I.id)>>24,(16711680&I.id)>>16,(65280&I.id)>>8,255&I.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Ue=Math.floor(I.baseMediaDecodeTime/(l+1)),Ze=Math.floor(I.baseMediaDecodeTime%(l+1)),U=u(Xt.tfdt,new Uint8Array([1,0,0,0,Ue>>>24&255,Ue>>>16&255,Ue>>>8&255,255&Ue,Ze>>>24&255,Ze>>>16&255,Ze>>>8&255,255&Ze])),"audio"===I.type?(z=gn(I,92),u(Xt.traf,j,U,z)):(se=tn(I),z=gn(I,se.length+92),u(Xt.traf,j,U,z,se))},je=function(I){return I.duration=I.duration||4294967295,u(Xt.trak,Pe(I),Re(I))},Hn=function(I){var j=new Uint8Array([0,0,0,0,(4278190080&I.id)>>24,(16711680&I.id)>>16,(65280&I.id)>>8,255&I.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==I.type&&(j[j.length-1]=0),u(Xt.trex,j)},function(){var _e,I,j;j=function(z,se){var he=0,Ue=0,Ze=0,ct=0;return z.length&&(void 0!==z[0].duration&&(he=1),void 0!==z[0].size&&(Ue=2),void 0!==z[0].flags&&(Ze=4),void 0!==z[0].compositionTimeOffset&&(ct=8)),[0,0,he|Ue|Ze|ct,1,(4278190080&z.length)>>>24,(16711680&z.length)>>>16,(65280&z.length)>>>8,255&z.length,(4278190080&se)>>>24,(16711680&se)>>>16,(65280&se)>>>8,255&se]},I=function(z,se){var he,Ue,Ze,ct,it,yt;for(Ze=j(ct=z.samples||[],se+=20+16*ct.length),(Ue=new Uint8Array(Ze.length+16*ct.length)).set(Ze),he=Ze.length,yt=0;yt<ct.length;yt++)Ue[he++]=(4278190080&(it=ct[yt]).duration)>>>24,Ue[he++]=(16711680&it.duration)>>>16,Ue[he++]=(65280&it.duration)>>>8,Ue[he++]=255&it.duration,Ue[he++]=(4278190080&it.size)>>>24,Ue[he++]=(16711680&it.size)>>>16,Ue[he++]=(65280&it.size)>>>8,Ue[he++]=255&it.size,Ue[he++]=it.flags.isLeading<<2|it.flags.dependsOn,Ue[he++]=it.flags.isDependedOn<<6|it.flags.hasRedundancy<<4|it.flags.paddingValue<<1|it.flags.isNonSyncSample,Ue[he++]=61440&it.flags.degradationPriority,Ue[he++]=15&it.flags.degradationPriority,Ue[he++]=(4278190080&it.compositionTimeOffset)>>>24,Ue[he++]=(16711680&it.compositionTimeOffset)>>>16,Ue[he++]=(65280&it.compositionTimeOffset)>>>8,Ue[he++]=255&it.compositionTimeOffset;return u(Xt.trun,Ue)},_e=function(z,se){var he,Ue,Ze,ct,it,yt;for(Ze=j(ct=z.samples||[],se+=20+8*ct.length),(he=new Uint8Array(Ze.length+8*ct.length)).set(Ze),Ue=Ze.length,yt=0;yt<ct.length;yt++)he[Ue++]=(4278190080&(it=ct[yt]).duration)>>>24,he[Ue++]=(16711680&it.duration)>>>16,he[Ue++]=(65280&it.duration)>>>8,he[Ue++]=255&it.duration,he[Ue++]=(4278190080&it.size)>>>24,he[Ue++]=(16711680&it.size)>>>16,he[Ue++]=(65280&it.size)>>>8,he[Ue++]=255&it.size;return u(Xt.trun,he)},gn=function(z,se){return"audio"===z.type?_e(z,se):I(z,se)}}();var Hd,Rh,Nh,Af,If,kp,Vy,Tv,Qc_mdat=v,Qc_moof=H,_v=function(I,j){var U={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return U.dataOffset=j,U.compositionTimeOffset=I.pts-I.dts,U.duration=I.duration,U.size=4*I.length,U.size+=I.byteLength,I.keyFrame&&(U.flags.dependsOn=2,U.flags.isNonSyncSample=0),U},Vd=[33,16,5,32,164,27],bv=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ks=function(I){for(var j=[];I--;)j.push(0);return j};Rh=function(I){return 9e4*I},Nh=function(I,j){return I*j},Af=function(I){return I/9e4},If=function(I,j){return I/j},kp=function(I,j){return Rh(If(I,j))},Vy=function(I,j){return Nh(Af(I),j)},Tv=function(I,j,U){return Af(U?I:I-j)};var us_secondsToVideoTs=Rh,us_videoTsToSeconds=Af,us_audioTsToVideoTs=kp,us_videoTsToAudioTs=Vy,us_metadataTsToSeconds=Tv,Lh_prefixWithSilence=function(I,j,U,z){var se,it,yt,un,he=0,Ue=0,Ze=0,ct=0;if(j.length&&(se=us_audioTsToVideoTs(I.baseMediaDecodeTime,I.samplerate),he=Math.ceil(9e4/(I.samplerate/1024)),U&&z&&(Ue=se-Math.max(U,z),ct=(Ze=Math.floor(Ue/he))*he),!(Ze<1||ct>45e3))){for((it=function(){if(!Hd){var I={96e3:[Vd,[227,64],ks(154),[56]],88200:[Vd,[231],ks(170),[56]],64e3:[Vd,[248,192],ks(240),[56]],48e3:[Vd,[255,192],ks(268),[55,148,128],ks(54),[112]],44100:[Vd,[255,192],ks(268),[55,163,128],ks(84),[112]],32e3:[Vd,[255,192],ks(268),[55,234],ks(226),[112]],24e3:[Vd,[255,192],ks(268),[55,255,128],ks(268),[111,112],ks(126),[224]],16e3:[Vd,[255,192],ks(268),[55,255,128],ks(268),[111,255],ks(269),[223,108],ks(195),[1,192]],12e3:[bv,ks(268),[3,127,248],ks(268),[6,255,240],ks(268),[13,255,224],ks(268),[27,253,128],ks(259),[56]],11025:[bv,ks(268),[3,127,248],ks(268),[6,255,240],ks(268),[13,255,224],ks(268),[27,255,192],ks(268),[55,175,128],ks(108),[112]],8e3:[bv,ks(268),[3,121,16],ks(47),[7]]};Hd=function(I){return Object.keys(I).reduce(function(j,U){return j[U]=new Uint8Array(I[U].reduce(function(z,se){return z.concat(se)},[])),j},{})}(I)}return Hd}()[I.samplerate])||(it=j[0].data),yt=0;yt<Ze;yt++)j.splice(0,0,{data:it,dts:(un=j[0]).dts-he,pts:un.pts-he});return I.baseMediaDecodeTime-=Math.floor(us_videoTsToAudioTs(ct,I.samplerate)),ct}},Pl_clearDtsInfo=function(I){delete I.minSegmentDts,delete I.maxSegmentDts,delete I.minSegmentPts,delete I.maxSegmentPts},Pl_calculateTrackBaseMediaDecodeTime=function(I,j){var U,se=I.minSegmentDts;return j||(se-=I.timelineStartInfo.dts),U=I.timelineStartInfo.baseMediaDecodeTime,U+=se,U=Math.max(0,U),"audio"===I.type&&(U*=I.samplerate/9e4,U=Math.floor(U)),U},Pl_collectDtsInfo=function(I,j){"number"==typeof j.pts&&(void 0===I.timelineStartInfo.pts&&(I.timelineStartInfo.pts=j.pts),I.minSegmentPts=void 0===I.minSegmentPts?j.pts:Math.min(I.minSegmentPts,j.pts),I.maxSegmentPts=void 0===I.maxSegmentPts?j.pts:Math.max(I.maxSegmentPts,j.pts)),"number"==typeof j.dts&&(void 0===I.timelineStartInfo.dts&&(I.timelineStartInfo.dts=j.dts),I.minSegmentDts=void 0===I.minSegmentDts?j.dts:Math.min(I.minSegmentDts,j.dts),I.maxSegmentDts=void 0===I.maxSegmentDts?j.dts:Math.max(I.maxSegmentDts,j.dts))},nu=function _e(I){I=I||{},_e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof I.parse708captions||I.parse708captions,this.captionPackets_=[],this.ccStreams_=[new wo(0,0),new wo(0,1),new wo(1,0),new wo(1,1)],this.parse708captions_&&(this.cc708Stream_=new uo),this.reset(),this.ccStreams_.forEach(function(j){j.on("data",this.trigger.bind(this,"data")),j.on("partialdone",this.trigger.bind(this,"partialdone")),j.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(nu.prototype=new s).push=function(_e){var I,j,U;if("sei_rbsp"===_e.nalUnitType&&(I=function(I){for(var j=0,U={payloadType:-1,payloadSize:0},z=0,se=0;j<I.byteLength&&128!==I[j];){for(;255===I[j];)z+=255,j++;for(z+=I[j++];255===I[j];)se+=255,j++;if(se+=I[j++],!U.payload&&4===z){if("GA94"===String.fromCharCode(I[j+3],I[j+4],I[j+5],I[j+6])){U.payloadType=z,U.payloadSize=se,U.payload=I.subarray(j,j+se);break}U.payload=void 0}j+=se,z=0,se=0}return U}(_e.escapedRBSP)).payload&&4===I.payloadType&&(j=function(I){return 181!==I.payload[0]||49!=(I.payload[1]<<8|I.payload[2])||"GA94"!==String.fromCharCode(I.payload[3],I.payload[4],I.payload[5],I.payload[6])||3!==I.payload[7]?null:I.payload.subarray(8,I.payload.length-1)}(I))){if(_e.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(_e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));U=function(I,j){var z,se,he,Ue,U=[];if(!(64&j[0]))return U;for(se=31&j[0],z=0;z<se;z++)Ue={type:3&j[2+(he=3*z)],pts:I},4&j[he+2]&&(Ue.ccData=j[he+3]<<8|j[he+4],U.push(Ue));return U}(_e.pts,j),this.captionPackets_=this.captionPackets_.concat(U),this.latestDts_!==_e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=_e.dts}},nu.prototype.flushCCStreams=function(_e){this.ccStreams_.forEach(function(I){return"flush"===_e?I.flush():I.partialFlush()},this)},nu.prototype.flushStream=function(_e){this.captionPackets_.length?(this.captionPackets_.forEach(function(I,j){I.presortIndex=j}),this.captionPackets_.sort(function(I,j){return I.pts===j.pts?I.presortIndex-j.presortIndex:I.pts-j.pts}),this.captionPackets_.forEach(function(I){I.type<2?this.dispatchCea608Packet(I):this.dispatchCea708Packet(I)},this),this.captionPackets_.length=0,this.flushCCStreams(_e)):this.flushCCStreams(_e)},nu.prototype.flush=function(){return this.flushStream("flush")},nu.prototype.partialFlush=function(){return this.flushStream("partialFlush")},nu.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(_e){_e.reset()})},nu.prototype.dispatchCea608Packet=function(_e){this.setsTextOrXDSActive(_e)?this.activeCea608Channel_[_e.type]=null:this.setsChannel1Active(_e)?this.activeCea608Channel_[_e.type]=0:this.setsChannel2Active(_e)&&(this.activeCea608Channel_[_e.type]=1),null!==this.activeCea608Channel_[_e.type]&&this.ccStreams_[(_e.type<<1)+this.activeCea608Channel_[_e.type]].push(_e)},nu.prototype.setsChannel1Active=function(_e){return 4096==(30720&_e.ccData)},nu.prototype.setsChannel2Active=function(_e){return 6144==(30720&_e.ccData)},nu.prototype.setsTextOrXDSActive=function(_e){return 256==(28928&_e.ccData)||4138==(30974&_e.ccData)||6186==(30974&_e.ccData)},nu.prototype.dispatchCea708Packet=function(_e){this.parse708captions_&&this.cc708Stream_.push(_e)};var x0={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},A0=function(I){return 32<=I&&I<=127||160<=I&&I<=255},Gd=function(I){this.windowNum=I,this.reset()};Gd.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Gd.prototype.getText=function(){return this.rows.join("\n")},Gd.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Gd.prototype.newLine=function(_e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(_e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Gd.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Gd.prototype.addText=function(_e){this.rows[this.rowIdx]+=_e},Gd.prototype.backspace=function(){if(!this.isEmpty()){var _e=this.rows[this.rowIdx];this.rows[this.rowIdx]=_e.substr(0,_e.length-1)}};var Fp=function(I){this.serviceNum=I,this.text="",this.currentWindow=new Gd(-1),this.windows=[]};Fp.prototype.init=function(_e,I){this.startPts=_e;for(var j=0;j<8;j++)this.windows[j]=new Gd(j),"function"==typeof I&&(this.windows[j].beforeRowOverflow=I)},Fp.prototype.setCurrentWindow=function(_e){this.currentWindow=this.windows[_e]};var uo=function _e(){_e.prototype.init.call(this);var I=this;this.current708Packet=null,this.services={},this.push=function(j){3===j.type?(I.new708Packet(),I.add708Bytes(j)):(null===I.current708Packet&&I.new708Packet(),I.add708Bytes(j))}};uo.prototype=new s,uo.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},uo.prototype.add708Bytes=function(_e){var I=_e.ccData,j=I>>>8,U=255&I;this.current708Packet.ptsVals.push(_e.pts),this.current708Packet.data.push(j),this.current708Packet.data.push(U)},uo.prototype.push708Packet=function(){var _e=this.current708Packet,I=_e.data,j=null,U=null,z=0,se=I[z++];for(_e.seq=se>>6,_e.sizeCode=63&se;z<I.length;z++)U=31&(se=I[z++]),7==(j=se>>5)&&U>0&&(j=se=I[z++]),this.pushServiceBlock(j,z,U),U>0&&(z+=U-1)},uo.prototype.pushServiceBlock=function(_e,I,j){var U,z=I,se=this.current708Packet.data,he=this.services[_e];for(he||(he=this.initService(_e,z));z<I+j&&z<se.length;z++)A0(U=se[z])?z=this.handleText(z,he):16===U?z=this.extendedCommands(z,he):128<=U&&U<=135?z=this.setCurrentWindow(z,he):152<=U&&U<=159?z=this.defineWindow(z,he):136===U?z=this.clearWindows(z,he):140===U?z=this.deleteWindows(z,he):137===U?z=this.displayWindows(z,he):138===U?z=this.hideWindows(z,he):139===U?z=this.toggleWindows(z,he):151===U?z=this.setWindowAttributes(z,he):144===U?z=this.setPenAttributes(z,he):145===U?z=this.setPenColor(z,he):146===U?z=this.setPenLocation(z,he):143===U?he=this.reset(z,he):8===U?he.currentWindow.backspace():12===U?he.currentWindow.clearText():13===U?he.currentWindow.pendingNewLine=!0:14===U?he.currentWindow.clearText():141===U&&z++},uo.prototype.extendedCommands=function(_e,I){var U=this.current708Packet.data[++_e];return A0(U)&&(_e=this.handleText(_e,I,!0)),_e},uo.prototype.getPts=function(_e){return this.current708Packet.ptsVals[Math.floor(_e/2)]},uo.prototype.initService=function(_e,I){var j=this;return this.services[_e]=new Fp(_e),this.services[_e].init(this.getPts(I),function(U){j.flushDisplayed(U,j.services[_e])}),this.services[_e]},uo.prototype.handleText=function(_e,I,j){var he=function(I){var j=x0[I]||I;return 4096&I&&I===j?"":String.fromCharCode(j)}((j?4096:0)|this.current708Packet.data[_e]),Ue=I.currentWindow;return Ue.pendingNewLine&&!Ue.isEmpty()&&Ue.newLine(this.getPts(_e)),Ue.pendingNewLine=!1,Ue.addText(he),_e},uo.prototype.setCurrentWindow=function(_e,I){return I.setCurrentWindow(7&this.current708Packet.data[_e]),_e},uo.prototype.defineWindow=function(_e,I){var j=this.current708Packet.data,U=j[_e];I.setCurrentWindow(7&U);var se=I.currentWindow;return U=j[++_e],se.visible=(32&U)>>5,se.rowLock=(16&U)>>4,se.columnLock=(8&U)>>3,se.priority=7&U,U=j[++_e],se.relativePositioning=(128&U)>>7,se.anchorVertical=127&U,U=j[++_e],se.anchorHorizontal=U,U=j[++_e],se.anchorPoint=(240&U)>>4,se.rowCount=15&U,U=j[++_e],se.columnCount=63&U,U=j[++_e],se.windowStyle=(56&U)>>3,se.penStyle=7&U,se.virtualRowCount=se.rowCount+1,_e},uo.prototype.setWindowAttributes=function(_e,I){var j=this.current708Packet.data,U=j[_e],z=I.currentWindow.winAttr;return U=j[++_e],z.fillOpacity=(192&U)>>6,z.fillRed=(48&U)>>4,z.fillGreen=(12&U)>>2,z.fillBlue=3&U,U=j[++_e],z.borderType=(192&U)>>6,z.borderRed=(48&U)>>4,z.borderGreen=(12&U)>>2,z.borderBlue=3&U,U=j[++_e],z.borderType+=(128&U)>>5,z.wordWrap=(64&U)>>6,z.printDirection=(48&U)>>4,z.scrollDirection=(12&U)>>2,z.justify=3&U,U=j[++_e],z.effectSpeed=(240&U)>>4,z.effectDirection=(12&U)>>2,z.displayEffect=3&U,_e},uo.prototype.flushDisplayed=function(_e,I){for(var j=[],U=0;U<8;U++)I.windows[U].visible&&!I.windows[U].isEmpty()&&j.push(I.windows[U].getText());I.endPts=_e,I.text=j.join("\n\n"),this.pushCaption(I),I.startPts=_e},uo.prototype.pushCaption=function(_e){""!==_e.text&&(this.trigger("data",{startPts:_e.startPts,endPts:_e.endPts,text:_e.text,stream:"cc708_"+_e.serviceNum}),_e.text="",_e.startPts=_e.endPts)},uo.prototype.displayWindows=function(_e,I){var U=this.current708Packet.data[++_e],z=this.getPts(_e);this.flushDisplayed(z,I);for(var se=0;se<8;se++)U&1<<se&&(I.windows[se].visible=1);return _e},uo.prototype.hideWindows=function(_e,I){var U=this.current708Packet.data[++_e],z=this.getPts(_e);this.flushDisplayed(z,I);for(var se=0;se<8;se++)U&1<<se&&(I.windows[se].visible=0);return _e},uo.prototype.toggleWindows=function(_e,I){var U=this.current708Packet.data[++_e],z=this.getPts(_e);this.flushDisplayed(z,I);for(var se=0;se<8;se++)U&1<<se&&(I.windows[se].visible^=1);return _e},uo.prototype.clearWindows=function(_e,I){var U=this.current708Packet.data[++_e],z=this.getPts(_e);this.flushDisplayed(z,I);for(var se=0;se<8;se++)U&1<<se&&I.windows[se].clearText();return _e},uo.prototype.deleteWindows=function(_e,I){var U=this.current708Packet.data[++_e],z=this.getPts(_e);this.flushDisplayed(z,I);for(var se=0;se<8;se++)U&1<<se&&I.windows[se].reset();return _e},uo.prototype.setPenAttributes=function(_e,I){var j=this.current708Packet.data,U=j[_e],z=I.currentWindow.penAttr;return U=j[++_e],z.textTag=(240&U)>>4,z.offset=(12&U)>>2,z.penSize=3&U,U=j[++_e],z.italics=(128&U)>>7,z.underline=(64&U)>>6,z.edgeType=(56&U)>>3,z.fontStyle=7&U,_e},uo.prototype.setPenColor=function(_e,I){var j=this.current708Packet.data,U=j[_e],z=I.currentWindow.penColor;return U=j[++_e],z.fgOpacity=(192&U)>>6,z.fgRed=(48&U)>>4,z.fgGreen=(12&U)>>2,z.fgBlue=3&U,U=j[++_e],z.bgOpacity=(192&U)>>6,z.bgRed=(48&U)>>4,z.bgGreen=(12&U)>>2,z.bgBlue=3&U,U=j[++_e],z.edgeRed=(48&U)>>4,z.edgeGreen=(12&U)>>2,z.edgeBlue=3&U,_e},uo.prototype.setPenLocation=function(_e,I){var j=this.current708Packet.data,U=j[_e],z=I.currentWindow.penLoc;return I.currentWindow.pendingNewLine=!0,U=j[++_e],z.row=15&U,U=j[++_e],z.column=63&U,_e},uo.prototype.reset=function(_e,I){var j=this.getPts(_e);return this.flushDisplayed(j,I),this.initService(I.serviceNum,_e)};var Zg={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Yg=function(I){return null===I?"":(I=Zg[I]||I,String.fromCharCode(I))},jp=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],$d=function(){for(var I=[],j=15;j--;)I.push("");return I},wo=function _e(I,j){_e.prototype.init.call(this),this.field_=I||0,this.dataChannel_=j||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(U){var z,se,he,Ue,Ze;if((z=32639&U.ccData)!==this.lastControlCode_){if(4096==(61440&z)?this.lastControlCode_=z:z!==this.PADDING_&&(this.lastControlCode_=null),he=z>>>8,Ue=255&z,z!==this.PADDING_)if(z===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(z===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(U.pts),this.flushDisplayed(U.pts),se=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=se,this.startPts_=U.pts;else if(z===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(U.pts);else if(z===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(U.pts);else if(z===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(U.pts);else if(z===this.CARRIAGE_RETURN_)this.clearFormatting(U.pts),this.flushDisplayed(U.pts),this.shiftRowsUp_(),this.startPts_=U.pts;else if(z===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(z===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(U.pts),this.displayed_=$d();else if(z===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=$d();else if(z===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(U.pts),this.displayed_=$d()),this.mode_="paintOn",this.startPts_=U.pts;else if(this.isSpecialCharacter(he,Ue))Ze=Yg((he=(3&he)<<8)|Ue),this[this.mode_](U.pts,Ze),this.column_++;else if(this.isExtCharacter(he,Ue))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),Ze=Yg((he=(3&he)<<8)|Ue),this[this.mode_](U.pts,Ze),this.column_++;else if(this.isMidRowCode(he,Ue))this.clearFormatting(U.pts),this[this.mode_](U.pts," "),this.column_++,14==(14&Ue)&&this.addFormatting(U.pts,["i"]),1==(1&Ue)&&this.addFormatting(U.pts,["u"]);else if(this.isOffsetControlCode(he,Ue))this.column_+=3&Ue;else if(this.isPAC(he,Ue)){var ct=jp.indexOf(7968&z);"rollUp"===this.mode_&&(ct-this.rollUpRows_+1<0&&(ct=this.rollUpRows_-1),this.setRollUp(U.pts,ct)),ct!==this.row_&&(this.clearFormatting(U.pts),this.row_=ct),1&Ue&&-1===this.formatting_.indexOf("u")&&this.addFormatting(U.pts,["u"]),16==(16&z)&&(this.column_=4*((14&z)>>1)),this.isColorPAC(Ue)&&14==(14&Ue)&&this.addFormatting(U.pts,["i"])}else this.isNormalChar(he)&&(0===Ue&&(Ue=null),Ze=Yg(he),Ze+=Yg(Ue),this[this.mode_](U.pts,Ze),this.column_+=Ze.length)}else this.lastControlCode_=null}};wo.prototype=new s,wo.prototype.flushDisplayed=function(_e){var I=this.displayed_.map(function(j,U){try{return j.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+U+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");I.length&&this.trigger("data",{startPts:this.startPts_,endPts:_e,text:I,stream:this.name_})},wo.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=$d(),this.nonDisplayed_=$d(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},wo.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},wo.prototype.isSpecialCharacter=function(_e,I){return _e===this.EXT_&&I>=48&&I<=63},wo.prototype.isExtCharacter=function(_e,I){return(_e===this.EXT_+1||_e===this.EXT_+2)&&I>=32&&I<=63},wo.prototype.isMidRowCode=function(_e,I){return _e===this.EXT_&&I>=32&&I<=47},wo.prototype.isOffsetControlCode=function(_e,I){return _e===this.OFFSET_&&I>=33&&I<=35},wo.prototype.isPAC=function(_e,I){return _e>=this.BASE_&&_e<this.BASE_+8&&I>=64&&I<=127},wo.prototype.isColorPAC=function(_e){return _e>=64&&_e<=79||_e>=96&&_e<=127},wo.prototype.isNormalChar=function(_e){return _e>=32&&_e<=127},wo.prototype.setRollUp=function(_e,I){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(_e),this.nonDisplayed_=$d(),this.displayed_=$d()),void 0!==I&&I!==this.row_)for(var j=0;j<this.rollUpRows_;j++)this.displayed_[I-j]=this.displayed_[this.row_-j],this.displayed_[this.row_-j]="";void 0===I&&(I=this.row_),this.topRow_=I-this.rollUpRows_+1},wo.prototype.addFormatting=function(_e,I){this.formatting_=this.formatting_.concat(I);var j=I.reduce(function(U,z){return U+"<"+z+">"},"");this[this.mode_](_e,j)},wo.prototype.clearFormatting=function(_e){if(this.formatting_.length){var I=this.formatting_.reverse().reduce(function(j,U){return j+"</"+U+">"},"");this.formatting_=[],this[this.mode_](_e,I)}},wo.prototype.popOn=function(_e,I){var j=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=j+=I},wo.prototype.rollUp=function(_e,I){var j=this.displayed_[this.row_];this.displayed_[this.row_]=j+=I},wo.prototype.shiftRowsUp_=function(){var _e;for(_e=0;_e<this.topRow_;_e++)this.displayed_[_e]="";for(_e=this.row_+1;_e<15;_e++)this.displayed_[_e]="";for(_e=this.topRow_;_e<this.row_;_e++)this.displayed_[_e]=this.displayed_[_e+1];this.displayed_[this.row_]=""},wo.prototype.paintOn=function(_e,I){var j=this.displayed_[this.row_];this.displayed_[this.row_]=j+=I};var zd={CaptionStream:nu,Cea608Stream:wo,Cea708Stream:uo},za={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Up=function(I,j){var U=1;for(I>j&&(U=-1);Math.abs(j-I)>4294967296;)I+=8589934592*U;return I},Jg=function _e(I){var j,U;_e.prototype.init.call(this),this.type_=I||"shared",this.push=function(z){"shared"!==this.type_&&z.type!==this.type_||(void 0===U&&(U=z.dts),z.dts=Up(z.dts,U),z.pts=Up(z.pts,U),j=z.dts,this.trigger("data",z))},this.flush=function(){U=j,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){U=void 0,j=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Jg.prototype=new s;var Uu,em_TimestampRolloverStream=Jg,em_handleRollover=Up,td=function(I,j,U){var z,se="";for(z=j;z<U;z++)se+="%"+("00"+I[z].toString(16)).slice(-2);return se},Mf=function(I,j,U){return decodeURIComponent(td(I,j,U))},tm=function(I,j,U){return unescape(td(I,j,U))},nd=function(I){return I[0]<<21|I[1]<<14|I[2]<<7|I[3]},Fh={TXXX:function(I){var j;if(3===I.data[0]){for(j=1;j<I.data.length;j++)if(0===I.data[j]){I.description=Mf(I.data,1,j),I.value=Mf(I.data,j+1,I.data.length).replace(/\0*$/,"");break}I.data=I.value}},WXXX:function(I){var j;if(3===I.data[0])for(j=1;j<I.data.length;j++)if(0===I.data[j]){I.description=Mf(I.data,1,j),I.url=Mf(I.data,j+1,I.data.length);break}},PRIV:function(I){var j;for(j=0;j<I.data.length;j++)if(0===I.data[j]){I.owner=tm(I.data,0,j);break}I.privateData=I.data.subarray(j+1),I.data=I.privateData}};Uu=function(I){var he,j={descriptor:I&&I.descriptor},U=0,z=[],se=0;if(Uu.prototype.init.call(this),this.dispatchType=za.METADATA_STREAM_TYPE.toString(16),j.descriptor)for(he=0;he<j.descriptor.length;he++)this.dispatchType+=("00"+j.descriptor[he].toString(16)).slice(-2);this.push=function(Ue){var Ze,ct,it,yt,un;if("timed-metadata"===Ue.type){if(Ue.dataAlignmentIndicator&&(se=0,z.length=0),0===z.length&&(Ue.data.length<10||Ue.data[0]!=="I".charCodeAt(0)||Ue.data[1]!=="D".charCodeAt(0)||Ue.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(z.push(Ue),se+=Ue.data.byteLength,1===z.length&&(U=nd(Ue.data.subarray(6,10)),U+=10),!(se<U)){for(Ze={data:new Uint8Array(U),frames:[],pts:z[0].pts,dts:z[0].dts},un=0;un<U;)Ze.data.set(z[0].data.subarray(0,U-un),un),un+=z[0].data.byteLength,se-=z[0].data.byteLength,z.shift();ct=10,64&Ze.data[5]&&(ct+=4,ct+=nd(Ze.data.subarray(10,14)),U-=nd(Ze.data.subarray(16,20)));do{if((it=nd(Ze.data.subarray(ct+4,ct+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((yt={id:String.fromCharCode(Ze.data[ct],Ze.data[ct+1],Ze.data[ct+2],Ze.data[ct+3]),data:Ze.data.subarray(ct+10,ct+it+10)}).key=yt.id,Fh[yt.id]&&(Fh[yt.id](yt),"com.apple.streaming.transportStreamTimestamp"===yt.owner)){var gr=yt.data,An=(1&gr[3])<<30|gr[4]<<22|gr[5]<<14|gr[6]<<6|gr[7]>>>2;An*=4,yt.timeStamp=An+=3&gr[7],void 0===Ze.pts&&void 0===Ze.dts&&(Ze.pts=yt.timeStamp,Ze.dts=yt.timeStamp),this.trigger("timestamp",yt)}Ze.frames.push(yt),ct+=10,ct+=it}while(ct<U);this.trigger("data",Ze)}}}},Uu.prototype=new s;var Bp,Vp,Ur,nm=Uu,rd=em_TimestampRolloverStream;Bp=function(){var I=new Uint8Array(188),j=0;Bp.prototype.init.call(this),this.push=function(U){var he,z=0,se=188;for(j?((he=new Uint8Array(U.byteLength+j)).set(I.subarray(0,j)),he.set(U,j),j=0):he=U;se<he.byteLength;)71!==he[z]||71!==he[se]?(z++,se++):(this.trigger("data",he.subarray(z,se)),z+=188,se+=188);z<he.byteLength&&(I.set(he.subarray(z),0),j=he.byteLength-z)},this.flush=function(){188===j&&71===I[0]&&(this.trigger("data",I),j=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){j=0,this.trigger("reset")}},Bp.prototype=new s,Vp=function(){var I,j,U,z;Vp.prototype.init.call(this),z=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,I=function(he,Ue){var Ze=0;Ue.payloadUnitStartIndicator&&(Ze+=he[Ze]+1),"pat"===Ue.type?j(he.subarray(Ze),Ue):U(he.subarray(Ze),Ue)},j=function(he,Ue){Ue.section_number=he[7],Ue.last_section_number=he[8],z.pmtPid=(31&he[10])<<8|he[11],Ue.pmtPid=z.pmtPid},U=function(he,Ue){var ct,yt;if(1&he[5]){for(z.programMapTable={video:null,audio:null,"timed-metadata":{}},ct=3+((15&he[1])<<8|he[2])-4,yt=12+((15&he[10])<<8|he[11]);yt<ct;){var un=he[yt],Gn=(31&he[yt+1])<<8|he[yt+2];un===za.H264_STREAM_TYPE&&null===z.programMapTable.video?z.programMapTable.video=Gn:un===za.ADTS_STREAM_TYPE&&null===z.programMapTable.audio?z.programMapTable.audio=Gn:un===za.METADATA_STREAM_TYPE&&(z.programMapTable["timed-metadata"][Gn]=un),yt+=5+((15&he[yt+3])<<8|he[yt+4])}Ue.programMapTable=z.programMapTable}},this.push=function(se){var he={},Ue=4;if(he.payloadUnitStartIndicator=!!(64&se[1]),he.pid=31&se[1],he.pid<<=8,he.pid|=se[2],(48&se[3])>>>4>1&&(Ue+=se[Ue]+1),0===he.pid)he.type="pat",I(se.subarray(Ue),he),this.trigger("data",he);else if(he.pid===this.pmtPid)for(he.type="pmt",I(se.subarray(Ue),he),this.trigger("data",he);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([se,Ue,he]):this.processPes_(se,Ue,he)},this.processPes_=function(se,he,Ue){Ue.streamType=Ue.pid===this.programMapTable.video?za.H264_STREAM_TYPE:Ue.pid===this.programMapTable.audio?za.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][Ue.pid],Ue.type="pes",Ue.data=se.subarray(he),this.trigger("data",Ue)}},Vp.prototype=new s,Vp.STREAM_TYPES={h264:27,adts:15},Ur=function(){var he,I=this,j=!1,U={data:[],size:0},z={data:[],size:0},se={data:[],size:0},Ze=function(it,yt,un){var Bu,Gn=new Uint8Array(it.size),gr={type:yt},An=0,ei=0,iu=!1;if(it.data.length&&!(it.size<9)){for(gr.trackId=it.data[0].pid,An=0;An<it.data.length;An++)Gn.set((Bu=it.data[An]).data,ei),ei+=Bu.data.byteLength;(function(it,yt){var un,Gn=it[0]<<16|it[1]<<8|it[2];yt.data=new Uint8Array,1===Gn&&(yt.packetLength=6+(it[4]<<8|it[5]),yt.dataAlignmentIndicator=0!=(4&it[6]),192&(un=it[7])&&(yt.pts=(14&it[9])<<27|(255&it[10])<<20|(254&it[11])<<12|(255&it[12])<<5|(254&it[13])>>>3,yt.pts*=4,yt.pts+=(6&it[13])>>>1,yt.dts=yt.pts,64&un&&(yt.dts=(14&it[14])<<27|(255&it[15])<<20|(254&it[16])<<12|(255&it[17])<<5|(254&it[18])>>>3,yt.dts*=4,yt.dts+=(6&it[18])>>>1)),yt.data=it.subarray(9+it[8]))})(Gn,gr),iu="video"===yt||gr.packetLength<=it.size,(un||iu)&&(it.size=0,it.data.length=0),iu&&I.trigger("data",gr)}};Ur.prototype.init.call(this),this.push=function(ct){({pat:function(){},pes:function(){var yt,un;switch(ct.streamType){case za.H264_STREAM_TYPE:yt=U,un="video";break;case za.ADTS_STREAM_TYPE:yt=z,un="audio";break;case za.METADATA_STREAM_TYPE:yt=se,un="timed-metadata";break;default:return}ct.payloadUnitStartIndicator&&Ze(yt,un,!0),yt.data.push(ct),yt.size+=ct.data.byteLength},pmt:function(){var yt={type:"metadata",tracks:[]};null!==(he=ct.programMapTable).video&&yt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+he.video,codec:"avc",type:"video"}),null!==he.audio&&yt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+he.audio,codec:"adts",type:"audio"}),j=!0,I.trigger("data",yt)}})[ct.type]()},this.reset=function(){U.size=0,U.data.length=0,z.size=0,z.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Ze(U,"video"),Ze(z,"audio"),Ze(se,"timed-metadata")},this.flush=function(){if(!j&&he){var ct={type:"metadata",tracks:[]};null!==he.video&&ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+he.video,codec:"avc",type:"video"}),null!==he.audio&&ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+he.audio,codec:"adts",type:"audio"}),I.trigger("data",ct)}j=!1,this.flushStreams_(),this.trigger("done")}},Ur.prototype=new s;var zy={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Bp,TransportParseStream:Vp,ElementaryStream:Ur,TimestampRolloverStream:rd,CaptionStream:zd.CaptionStream,Cea608Stream:zd.Cea608Stream,Cea708Stream:zd.Cea708Stream,MetadataStream:nm};for(var qd in za)za.hasOwnProperty(qd)&&(zy[qd]=za[qd]);var Wd,id=zy,Co=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Wd=function(I){var j,U=0;Wd.prototype.init.call(this),this.skipWarn_=function(z,se){this.trigger("log",{level:"warn",message:"adts skiping bytes "+z+" to "+se+" in frame "+U+" outside syncword"})},this.push=function(z){var he,Ue,Ze,ct,it,se=0;if(I||(U=0),"audio"===z.type){j&&j.length?(Ze=j,(j=new Uint8Array(Ze.byteLength+z.data.byteLength)).set(Ze),j.set(z.data,Ze.byteLength)):j=z.data;for(var yt;se+7<j.length;)if(255===j[se]&&240==(246&j[se+1])){if("number"==typeof yt&&(this.skipWarn_(yt,se),yt=null),Ue=2*(1&~j[se+1]),it=9e4*(ct=1024*(1+(3&j[se+6])))/Co[(60&j[se+2])>>>2],j.byteLength-se<(he=(3&j[se+3])<<11|j[se+4]<<3|(224&j[se+5])>>5))break;this.trigger("data",{pts:z.pts+U*it,dts:z.dts+U*it,sampleCount:ct,audioobjecttype:1+(j[se+2]>>>6&3),channelcount:(1&j[se+2])<<2|(192&j[se+3])>>>6,samplerate:Co[(60&j[se+2])>>>2],samplingfrequencyindex:(60&j[se+2])>>>2,samplesize:16,data:j.subarray(se+7+Ue,se+he)}),U++,se+=he}else"number"!=typeof yt&&(yt=se),se++;"number"==typeof yt&&(this.skipWarn_(yt,se),yt=null),j=j.subarray(se)}},this.flush=function(){U=0,this.trigger("done")},this.reset=function(){j=void 0,this.trigger("reset")},this.endTimeline=function(){j=void 0,this.trigger("endedtimeline")}},Wd.prototype=new s;var xv,I0=Wd;xv=function(I){var j=I.byteLength,U=0,z=0;this.length=function(){return 8*j},this.bitsAvailable=function(){return 8*j+z},this.loadWord=function(){var se=I.byteLength-j,he=new Uint8Array(4),Ue=Math.min(4,j);if(0===Ue)throw new Error("no bytes available");he.set(I.subarray(se,se+Ue)),U=new DataView(he.buffer).getUint32(0),z=8*Ue,j-=Ue},this.skipBits=function(se){var he;z>se?(U<<=se,z-=se):(se-=z,se-=8*(he=Math.floor(se/8)),j-=he,this.loadWord(),U<<=se,z-=se)},this.readBits=function(se){var he=Math.min(z,se),Ue=U>>>32-he;return(z-=he)>0?U<<=he:j>0&&this.loadWord(),(he=se-he)>0?Ue<<he|this.readBits(he):Ue},this.skipLeadingZeros=function(){var se;for(se=0;se<z;++se)if(0!=(U&2147483648>>>se))return U<<=se,z-=se,se;return this.loadWord(),se+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var se=this.skipLeadingZeros();return this.readBits(se+1)-1},this.readExpGolomb=function(){var se=this.readUnsignedExpGolomb();return 1&se?1+se>>>1:-1*(se>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var im,tc,Hp,Av=xv;tc=function(){var j,U,I=0;tc.prototype.init.call(this),this.push=function(z){var se;U?((se=new Uint8Array(U.byteLength+z.data.byteLength)).set(U),se.set(z.data,U.byteLength),U=se):U=z.data;for(var he=U.byteLength;I<he-3;I++)if(1===U[I+2]){j=I+5;break}for(;j<he;)switch(U[j]){case 0:if(0!==U[j-1]){j+=2;break}if(0!==U[j-2]){j++;break}I+3!==j-2&&this.trigger("data",U.subarray(I+3,j-2));do{j++}while(1!==U[j]&&j<he);I=j-2,j+=3;break;case 1:if(0!==U[j-1]||0!==U[j-2]){j+=3;break}this.trigger("data",U.subarray(I+3,j-2)),I=j-2,j+=3;break;default:j+=3}U=U.subarray(I),j-=I,I=0},this.reset=function(){U=null,I=0,this.trigger("reset")},this.flush=function(){U&&U.byteLength>3&&this.trigger("data",U.subarray(I+3)),U=null,I=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},tc.prototype=new s,Hp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},im=function(){var j,U,z,se,he,Ue,Ze,I=new tc;im.prototype.init.call(this),j=this,this.push=function(ct){"video"===ct.type&&(U=ct.trackId,z=ct.pts,se=ct.dts,I.push(ct))},I.on("data",function(ct){var it={trackId:U,pts:z,dts:se,data:ct,nalUnitTypeCode:31&ct[0]};switch(it.nalUnitTypeCode){case 5:it.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:it.nalUnitType="sei_rbsp",it.escapedRBSP=he(ct.subarray(1));break;case 7:it.nalUnitType="seq_parameter_set_rbsp",it.escapedRBSP=he(ct.subarray(1)),it.config=Ue(it.escapedRBSP);break;case 8:it.nalUnitType="pic_parameter_set_rbsp";break;case 9:it.nalUnitType="access_unit_delimiter_rbsp"}j.trigger("data",it)}),I.on("done",function(){j.trigger("done")}),I.on("partialdone",function(){j.trigger("partialdone")}),I.on("reset",function(){j.trigger("reset")}),I.on("endedtimeline",function(){j.trigger("endedtimeline")}),this.flush=function(){I.flush()},this.partialFlush=function(){I.partialFlush()},this.reset=function(){I.reset()},this.endTimeline=function(){I.endTimeline()},Ze=function(it,yt){var gr,un=8,Gn=8;for(gr=0;gr<it;gr++)0!==Gn&&(Gn=(un+yt.readExpGolomb()+256)%256),un=0===Gn?un:Gn},he=function(it){for(var gr,An,yt=it.byteLength,un=[],Gn=1;Gn<yt-2;)0===it[Gn]&&0===it[Gn+1]&&3===it[Gn+2]?(un.push(Gn+2),Gn+=2):Gn++;if(0===un.length)return it;gr=yt-un.length,An=new Uint8Array(gr);var ei=0;for(Gn=0;Gn<gr;ei++,Gn++)ei===un[0]&&(ei++,un.shift()),An[Gn]=it[ei];return An},Ue=function(it){var An,ei,iu,Bu,vm,e0,e_,t_,p_,H0,n_,Uf,yt=0,un=0,Gn=0,gr=0,ma=[1,1];if(ei=(An=new Av(it)).readUnsignedByte(),Bu=An.readUnsignedByte(),iu=An.readUnsignedByte(),An.skipUnsignedExpGolomb(),Hp[ei]&&(3===(vm=An.readUnsignedExpGolomb())&&An.skipBits(1),An.skipUnsignedExpGolomb(),An.skipUnsignedExpGolomb(),An.skipBits(1),An.readBoolean()))for(n_=3!==vm?8:12,Uf=0;Uf<n_;Uf++)An.readBoolean()&&Ze(Uf<6?16:64,An);if(An.skipUnsignedExpGolomb(),0===(e0=An.readUnsignedExpGolomb()))An.readUnsignedExpGolomb();else if(1===e0)for(An.skipBits(1),An.skipExpGolomb(),An.skipExpGolomb(),e_=An.readUnsignedExpGolomb(),Uf=0;Uf<e_;Uf++)An.skipExpGolomb();if(An.skipUnsignedExpGolomb(),An.skipBits(1),t_=An.readUnsignedExpGolomb(),p_=An.readUnsignedExpGolomb(),0===(H0=An.readBits(1))&&An.skipBits(1),An.skipBits(1),An.readBoolean()&&(yt=An.readUnsignedExpGolomb(),un=An.readUnsignedExpGolomb(),Gn=An.readUnsignedExpGolomb(),gr=An.readUnsignedExpGolomb()),An.readBoolean()&&An.readBoolean())switch(An.readUnsignedByte()){case 1:ma=[1,1];break;case 2:ma=[12,11];break;case 3:ma=[10,11];break;case 4:ma=[16,11];break;case 5:ma=[40,33];break;case 6:ma=[24,11];break;case 7:ma=[20,11];break;case 8:ma=[32,11];break;case 9:ma=[80,33];break;case 10:ma=[18,11];break;case 11:ma=[15,11];break;case 12:ma=[64,33];break;case 13:ma=[160,99];break;case 14:ma=[4,3];break;case 15:ma=[3,2];break;case 16:ma=[2,1];break;case 255:ma=[An.readUnsignedByte()<<8|An.readUnsignedByte(),An.readUnsignedByte()<<8|An.readUnsignedByte()]}return{profileIdc:ei,levelIdc:iu,profileCompatibility:Bu,width:16*(t_+1)-2*yt-2*un,height:(2-H0)*(p_+1)*16-2*Gn-2*gr,sarRatio:ma}}},im.prototype=new s;var Iv,P0={H264Stream:im,NalByteStream:tc},k0=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],qy=function(I,j){var U=I[j+6]<<21|I[j+7]<<14|I[j+8]<<7|I[j+9];return U=U>=0?U:0,(16&I[j+5])>>4?U+20:U+10},Wy=function _e(I,j){return I.length-j<10||I[j]!=="I".charCodeAt(0)||I[j+1]!=="D".charCodeAt(0)||I[j+2]!=="3".charCodeAt(0)?j:_e(I,j+=qy(I,j))},Of=function(I){return I[0]<<21|I[1]<<14|I[2]<<7|I[3]},O0=function(I,j,U){return unescape(function(I,j,U){var z,se="";for(z=j;z<U;z++)se+="%"+("00"+I[z].toString(16)).slice(-2);return se}(I,j,U))},om={isLikelyAacData:function(I){var j=Wy(I,0);return I.length>=j+2&&255==(255&I[j])&&240==(240&I[j+1])&&16==(22&I[j+1])},parseId3TagSize:qy,parseAdtsSize:function(I,j){return 6144&I[j+3]|I[j+4]<<3|(224&I[j+5])>>5},parseType:function(I,j){return I[j]==="I".charCodeAt(0)&&I[j+1]==="D".charCodeAt(0)&&I[j+2]==="3".charCodeAt(0)?"timed-metadata":!0&I[j]&&240==(240&I[j+1])?"audio":null},parseSampleRate:function(I){for(var j=0;j+5<I.length;){if(255===I[j]&&240==(246&I[j+1]))return k0[(60&I[j+2])>>>2];j++}return null},parseAacTimestamp:function(I){var j,U,z;j=10,64&I[5]&&(j+=4,j+=Of(I.subarray(10,14)));do{if((U=Of(I.subarray(j+4,j+8)))<1)return null;if("PRIV"===String.fromCharCode(I[j],I[j+1],I[j+2],I[j+3])){z=I.subarray(j+10,j+U+10);for(var he=0;he<z.byteLength;he++)if(0===z[he]){if("com.apple.streaming.transportStreamTimestamp"===O0(z,0,he)){var Ze=z.subarray(he+1),ct=(1&Ze[3])<<30|Ze[4]<<22|Ze[5]<<14|Ze[6]<<6|Ze[7]>>>2;return(ct*=4)+(3&Ze[7])}break}}j+=10,j+=U}while(j<I.byteLength);return null}};Iv=function(){var I=new Uint8Array,j=0;Iv.prototype.init.call(this),this.setTimestamp=function(U){j=U},this.push=function(U){var Ue,Ze,ct,z=0,se=0;for(I.length?(ct=I.length,(I=new Uint8Array(U.byteLength+ct)).set(I.subarray(0,ct)),I.set(U,ct)):I=U;I.length-se>=3;)if(I[se]!=="I".charCodeAt(0)||I[se+1]!=="D".charCodeAt(0)||I[se+2]!=="3".charCodeAt(0))if(255!=(255&I[se])||240!=(240&I[se+1]))se++;else{if(I.length-se<7||se+(z=om.parseAdtsSize(I,se))>I.length)break;Ze={type:"audio",data:I.subarray(se,se+z),pts:j,dts:j},this.trigger("data",Ze),se+=z}else{if(I.length-se<10||se+(z=om.parseId3TagSize(I,se))>I.length)break;Ue={type:"timed-metadata",data:I.subarray(se,se+z)},this.trigger("data",Ue),se+=z}I=I.length-se>0?I.subarray(se):new Uint8Array},this.reset=function(){I=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){I=new Uint8Array,this.trigger("endedtimeline")}},Iv.prototype=new s;var $p,jh,zp,Ac,Rf=Iv,Pv=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],am=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Mv=P0.H264Stream,Nf=om.isLikelyAacData,N0=function(I,j){var U;if(I.length!==j.length)return!1;for(U=0;U<I.length;U++)if(I[U]!==j[U])return!1;return!0},Ov=function(I,j,U,z,se,he){return{start:{dts:I,pts:I+(U-j)},end:{dts:I+(z-j),pts:I+(se-U)},prependedContentDuration:he,baseMediaDecodeTime:I}};jh=function(I,j){var z,U=[],se=0,he=0,Ue=1/0;z=(j=j||{}).firstSequenceNumber||0,jh.prototype.init.call(this),this.push=function(Ze){Pl_collectDtsInfo(I,Ze),I&&Pv.forEach(function(ct){I[ct]=Ze[ct]}),U.push(Ze)},this.setEarliestDts=function(Ze){se=Ze},this.setVideoBaseMediaDecodeTime=function(Ze){Ue=Ze},this.setAudioAppendStart=function(Ze){he=Ze},this.flush=function(){var Ze,ct,it,yt,un,Gn,gr;0!==U.length?(Ze=function(I,j,U){return j.minSegmentDts>=U?I:(j.minSegmentDts=1/0,I.filter(function(z){return z.dts>=U&&(j.minSegmentDts=Math.min(j.minSegmentDts,z.dts),j.minSegmentPts=j.minSegmentDts,!0)}))}(U,I,se),I.baseMediaDecodeTime=Pl_calculateTrackBaseMediaDecodeTime(I,j.keepOriginalTimestamps),gr=Lh_prefixWithSilence(I,Ze,he,Ue),I.samples=function(I){var j,z=[];for(j=0;j<I.length;j++)z.push({size:I[j].data.byteLength,duration:1024});return z}(Ze),it=Qc_mdat(function(I){var j,U,z=0,se=new Uint8Array(function(I){var j,z=0;for(j=0;j<I.length;j++)z+=I[j].data.byteLength;return z}(I));for(j=0;j<I.length;j++)se.set((U=I[j]).data,z),z+=U.data.byteLength;return se}(Ze)),U=[],ct=Qc_moof(z,[I]),yt=new Uint8Array(ct.byteLength+it.byteLength),z++,yt.set(ct),yt.set(it,ct.byteLength),Pl_clearDtsInfo(I),un=Math.ceil(9216e4/I.samplerate),Ze.length&&(Gn=Ze.length*un,this.trigger("segmentTimingInfo",Ov(us_audioTsToVideoTs(I.baseMediaDecodeTime,I.samplerate),Ze[0].dts,Ze[0].pts,Ze[0].dts+Gn,Ze[0].pts+Gn,gr||0)),this.trigger("timingInfo",{start:Ze[0].pts,end:Ze[0].pts+Gn})),this.trigger("data",{track:I,boxes:yt}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Pl_clearDtsInfo(I),U=[],this.trigger("reset")}},jh.prototype=new s,$p=function(I,j){var U,he,Ue,z=[],se=[];U=(j=j||{}).firstSequenceNumber||0,$p.prototype.init.call(this),delete I.minPTS,this.gopCache_=[],this.push=function(Ze){Pl_collectDtsInfo(I,Ze),"seq_parameter_set_rbsp"===Ze.nalUnitType&&!he&&(he=Ze.config,I.sps=[Ze.data],am.forEach(function(ct){I[ct]=he[ct]},this)),"pic_parameter_set_rbsp"===Ze.nalUnitType&&!Ue&&(Ue=Ze.data,I.pps=[Ze.data]),z.push(Ze)},this.flush=function(){for(var Ze,ct,it,yt,un,Gn,An,ei,gr=0;z.length&&"access_unit_delimiter_rbsp"!==z[0].nalUnitType;)z.shift();if(0===z.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(Ze=function(I){var j,U,z=[],se=[];for(se.byteLength=0,se.nalCount=0,se.duration=0,z.byteLength=0,j=0;j<I.length;j++)"access_unit_delimiter_rbsp"===(U=I[j]).nalUnitType?(z.length&&(z.duration=U.dts-z.dts,se.byteLength+=z.byteLength,se.nalCount+=z.length,se.duration+=z.duration,se.push(z)),(z=[U]).byteLength=U.data.byteLength,z.pts=U.pts,z.dts=U.dts):("slice_layer_without_partitioning_rbsp_idr"===U.nalUnitType&&(z.keyFrame=!0),z.duration=U.dts-z.dts,z.byteLength+=U.data.byteLength,z.push(U));return se.length&&(!z.duration||z.duration<=0)&&(z.duration=se[se.length-1].duration),se.byteLength+=z.byteLength,se.nalCount+=z.length,se.duration+=z.duration,se.push(z),se}(z),(it=function(I){var j,U,z=[],se=[];for(z.byteLength=0,z.nalCount=0,z.duration=0,z.pts=I[0].pts,z.dts=I[0].dts,se.byteLength=0,se.nalCount=0,se.duration=0,se.pts=I[0].pts,se.dts=I[0].dts,j=0;j<I.length;j++)(U=I[j]).keyFrame?(z.length&&(se.push(z),se.byteLength+=z.byteLength,se.nalCount+=z.nalCount,se.duration+=z.duration),(z=[U]).nalCount=U.length,z.byteLength=U.byteLength,z.pts=U.pts,z.dts=U.dts,z.duration=U.duration):(z.duration+=U.duration,z.nalCount+=U.length,z.byteLength+=U.byteLength,z.push(U));return se.length&&z.duration<=0&&(z.duration=se[se.length-1].duration),se.byteLength+=z.byteLength,se.nalCount+=z.nalCount,se.duration+=z.duration,se.push(z),se}(Ze))[0][0].keyFrame||((ct=this.getGopForFusion_(z[0],I))?(gr=ct.duration,it.unshift(ct),it.byteLength+=ct.byteLength,it.nalCount+=ct.nalCount,it.pts=ct.pts,it.dts=ct.dts,it.duration+=ct.duration):it=function(I){var j;return!I[0][0].keyFrame&&I.length>1&&(j=I.shift(),I.byteLength-=j.byteLength,I.nalCount-=j.nalCount,I[0][0].dts=j.dts,I[0][0].pts=j.pts,I[0][0].duration+=j.duration),I}(it)),se.length){var iu;if(!(iu=j.alignGopsAtEnd?this.alignGopsAtEnd_(it):this.alignGopsAtStart_(it)))return this.gopCache_.unshift({gop:it.pop(),pps:I.pps,sps:I.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),z=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Pl_clearDtsInfo(I),it=iu}Pl_collectDtsInfo(I,it),I.samples=function(I,j){var U,z,se,he,Ze=j||0,ct=[];for(U=0;U<I.length;U++)for(he=I[U],z=0;z<he.length;z++)Ze+=(se=_v(he[z],Ze)).size,ct.push(se);return ct}(it),un=Qc_mdat(function(I){var j,U,z,se,he,Ue,Ze=0,un=new Uint8Array(I.byteLength+4*I.nalCount),Gn=new DataView(un.buffer);for(j=0;j<I.length;j++)for(se=I[j],U=0;U<se.length;U++)for(he=se[U],z=0;z<he.length;z++)Gn.setUint32(Ze,(Ue=he[z]).data.byteLength),un.set(Ue.data,Ze+=4),Ze+=Ue.data.byteLength;return un}(it)),I.baseMediaDecodeTime=Pl_calculateTrackBaseMediaDecodeTime(I,j.keepOriginalTimestamps),this.trigger("processedGopsInfo",it.map(function(Bu){return{pts:Bu.pts,dts:Bu.dts,byteLength:Bu.byteLength}})),this.trigger("segmentTimingInfo",Ov(I.baseMediaDecodeTime,(An=it[0]).dts,An.pts,(ei=it[it.length-1]).dts+ei.duration,ei.pts+ei.duration,gr)),this.trigger("timingInfo",{start:it[0].pts,end:it[it.length-1].pts+it[it.length-1].duration}),this.gopCache_.unshift({gop:it.pop(),pps:I.pps,sps:I.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),z=[],this.trigger("baseMediaDecodeTime",I.baseMediaDecodeTime),this.trigger("timelineStartInfo",I.timelineStartInfo),yt=Qc_moof(U,[I]),Gn=new Uint8Array(yt.byteLength+un.byteLength),U++,Gn.set(yt),Gn.set(un,yt.byteLength),this.trigger("data",{track:I,boxes:Gn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),z=[],this.gopCache_.length=0,se.length=0,this.trigger("reset")},this.resetStream_=function(){Pl_clearDtsInfo(I),he=void 0,Ue=void 0},this.getGopForFusion_=function(Ze){var un,Gn,gr,An,ei,yt=1/0;for(ei=0;ei<this.gopCache_.length;ei++)gr=(An=this.gopCache_[ei]).gop,I.pps&&N0(I.pps[0],An.pps[0])&&I.sps&&N0(I.sps[0],An.sps[0])&&(gr.dts<I.timelineStartInfo.dts||(un=Ze.dts-gr.dts-gr.duration)>=-1e4&&un<=45e3&&(!Gn||yt>un)&&(Gn=An,yt=un));return Gn?Gn.gop:null},this.alignGopsAtStart_=function(Ze){var ct,it,yt,un,Gn,gr,An,ei;for(Gn=Ze.byteLength,gr=Ze.nalCount,An=Ze.duration,ct=it=0;ct<se.length&&it<Ze.length&&(yt=se[ct]).pts!==(un=Ze[it]).pts;)un.pts>yt.pts?ct++:(it++,Gn-=un.byteLength,gr-=un.nalCount,An-=un.duration);return 0===it?Ze:it===Ze.length?null:((ei=Ze.slice(it)).byteLength=Gn,ei.duration=An,ei.nalCount=gr,ei.pts=ei[0].pts,ei.dts=ei[0].dts,ei)},this.alignGopsAtEnd_=function(Ze){var ct,it,yt,un,Gn,gr,An;for(ct=se.length-1,it=Ze.length-1,Gn=null,gr=!1;ct>=0&&it>=0;){if((yt=se[ct]).pts===(un=Ze[it]).pts){gr=!0;break}yt.pts>un.pts?ct--:(ct===se.length-1&&(Gn=it),it--)}if(!gr&&null===Gn)return null;if(0===(An=gr?it:Gn))return Ze;var ei=Ze.slice(An),iu=ei.reduce(function(Bu,vm){return Bu.byteLength+=vm.byteLength,Bu.duration+=vm.duration,Bu.nalCount+=vm.nalCount,Bu},{byteLength:0,duration:0,nalCount:0});return ei.byteLength=iu.byteLength,ei.duration=iu.duration,ei.nalCount=iu.nalCount,ei.pts=ei[0].pts,ei.dts=ei[0].dts,ei},this.alignGopsWith=function(Ze){se=Ze}},$p.prototype=new s,Ac=function(I,j){this.numberOfTracks=0,this.metadataStream=j,this.remuxTracks=!(typeof(I=I||{}).remux<"u"&&!I.remux),this.keepOriginalTimestamps="boolean"==typeof I.keepOriginalTimestamps&&I.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Ac.prototype.init.call(this),this.push=function(U){return U.text?this.pendingCaptions.push(U):U.frames?this.pendingMetadata.push(U):(this.pendingTracks.push(U.track),this.pendingBytes+=U.boxes.byteLength,"video"===U.track.type&&(this.videoTrack=U.track,this.pendingBoxes.push(U.boxes)),void("audio"===U.track.type&&(this.audioTrack=U.track,this.pendingBoxes.unshift(U.boxes))))}},Ac.prototype=new s,Ac.prototype.flush=function(_e){var U,z,se,Ue,I=0,j={captions:[],captionStreams:{},metadata:[],info:{}},he=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==_e&&"AudioSegmentStream"!==_e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(he=this.videoTrack.timelineStartInfo.pts,am.forEach(function(Ze){j.info[Ze]=this.videoTrack[Ze]},this)):this.audioTrack&&(he=this.audioTrack.timelineStartInfo.pts,Pv.forEach(function(Ze){j.info[Ze]=this.audioTrack[Ze]},this)),this.videoTrack||this.audioTrack){for(j.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,se=function(I){var z,j=h(),U=Y(I);return(z=new Uint8Array(j.byteLength+U.byteLength)).set(j),z.set(U,j.byteLength),z}(this.pendingTracks),j.initSegment=new Uint8Array(se.byteLength),j.initSegment.set(se),j.data=new Uint8Array(this.pendingBytes),Ue=0;Ue<this.pendingBoxes.length;Ue++)j.data.set(this.pendingBoxes[Ue],I),I+=this.pendingBoxes[Ue].byteLength;for(Ue=0;Ue<this.pendingCaptions.length;Ue++)(U=this.pendingCaptions[Ue]).startTime=us_metadataTsToSeconds(U.startPts,he,this.keepOriginalTimestamps),U.endTime=us_metadataTsToSeconds(U.endPts,he,this.keepOriginalTimestamps),j.captionStreams[U.stream]=!0,j.captions.push(U);for(Ue=0;Ue<this.pendingMetadata.length;Ue++)(z=this.pendingMetadata[Ue]).cueTime=us_metadataTsToSeconds(z.pts,he,this.keepOriginalTimestamps),j.metadata.push(z);for(j.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",j),Ue=0;Ue<j.captions.length;Ue++)this.trigger("caption",U=j.captions[Ue]);for(Ue=0;Ue<j.metadata.length;Ue++)this.trigger("id3Frame",z=j.metadata[Ue])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Ac.prototype.setRemux=function(_e){this.remuxTracks=_e},zp=function(I){var z,se,j=this,U=!0;zp.prototype.init.call(this),this.baseMediaDecodeTime=(I=I||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var he={};this.transmuxPipeline_=he,he.type="aac",he.metadataStream=new id.MetadataStream,he.aacStream=new Rf,he.audioTimestampRolloverStream=new id.TimestampRolloverStream("audio"),he.timedMetadataTimestampRolloverStream=new id.TimestampRolloverStream("timed-metadata"),he.adtsStream=new I0,he.coalesceStream=new Ac(I,he.metadataStream),he.headOfPipeline=he.aacStream,he.aacStream.pipe(he.audioTimestampRolloverStream).pipe(he.adtsStream),he.aacStream.pipe(he.timedMetadataTimestampRolloverStream).pipe(he.metadataStream).pipe(he.coalesceStream),he.metadataStream.on("timestamp",function(Ue){he.aacStream.setTimestamp(Ue.timeStamp)}),he.aacStream.on("data",function(Ue){"timed-metadata"!==Ue.type&&"audio"!==Ue.type||he.audioSegmentStream||(se=se||{timelineStartInfo:{baseMediaDecodeTime:j.baseMediaDecodeTime},codec:"adts",type:"audio"},he.coalesceStream.numberOfTracks++,he.audioSegmentStream=new jh(se,I),he.audioSegmentStream.on("log",j.getLogTrigger_("audioSegmentStream")),he.audioSegmentStream.on("timingInfo",j.trigger.bind(j,"audioTimingInfo")),he.adtsStream.pipe(he.audioSegmentStream).pipe(he.coalesceStream),j.trigger("trackinfo",{hasAudio:!!se,hasVideo:!!z}))}),he.coalesceStream.on("data",this.trigger.bind(this,"data")),he.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var he={};this.transmuxPipeline_=he,he.type="ts",he.metadataStream=new id.MetadataStream,he.packetStream=new id.TransportPacketStream,he.parseStream=new id.TransportParseStream,he.elementaryStream=new id.ElementaryStream,he.timestampRolloverStream=new id.TimestampRolloverStream,he.adtsStream=new I0,he.h264Stream=new Mv,he.captionStream=new id.CaptionStream(I),he.coalesceStream=new Ac(I,he.metadataStream),he.headOfPipeline=he.packetStream,he.packetStream.pipe(he.parseStream).pipe(he.elementaryStream).pipe(he.timestampRolloverStream),he.timestampRolloverStream.pipe(he.h264Stream),he.timestampRolloverStream.pipe(he.adtsStream),he.timestampRolloverStream.pipe(he.metadataStream).pipe(he.coalesceStream),he.h264Stream.pipe(he.captionStream).pipe(he.coalesceStream),he.elementaryStream.on("data",function(Ue){var Ze;if("metadata"===Ue.type){for(Ze=Ue.tracks.length;Ze--;)z||"video"!==Ue.tracks[Ze].type?!se&&"audio"===Ue.tracks[Ze].type&&((se=Ue.tracks[Ze]).timelineStartInfo.baseMediaDecodeTime=j.baseMediaDecodeTime):(z=Ue.tracks[Ze]).timelineStartInfo.baseMediaDecodeTime=j.baseMediaDecodeTime;z&&!he.videoSegmentStream&&(he.coalesceStream.numberOfTracks++,he.videoSegmentStream=new $p(z,I),he.videoSegmentStream.on("log",j.getLogTrigger_("videoSegmentStream")),he.videoSegmentStream.on("timelineStartInfo",function(ct){se&&!I.keepOriginalTimestamps&&(se.timelineStartInfo=ct,he.audioSegmentStream.setEarliestDts(ct.dts-j.baseMediaDecodeTime))}),he.videoSegmentStream.on("processedGopsInfo",j.trigger.bind(j,"gopInfo")),he.videoSegmentStream.on("segmentTimingInfo",j.trigger.bind(j,"videoSegmentTimingInfo")),he.videoSegmentStream.on("baseMediaDecodeTime",function(ct){se&&he.audioSegmentStream.setVideoBaseMediaDecodeTime(ct)}),he.videoSegmentStream.on("timingInfo",j.trigger.bind(j,"videoTimingInfo")),he.h264Stream.pipe(he.videoSegmentStream).pipe(he.coalesceStream)),se&&!he.audioSegmentStream&&(he.coalesceStream.numberOfTracks++,he.audioSegmentStream=new jh(se,I),he.audioSegmentStream.on("log",j.getLogTrigger_("audioSegmentStream")),he.audioSegmentStream.on("timingInfo",j.trigger.bind(j,"audioTimingInfo")),he.audioSegmentStream.on("segmentTimingInfo",j.trigger.bind(j,"audioSegmentTimingInfo")),he.adtsStream.pipe(he.audioSegmentStream).pipe(he.coalesceStream)),j.trigger("trackinfo",{hasAudio:!!se,hasVideo:!!z})}}),he.coalesceStream.on("data",this.trigger.bind(this,"data")),he.coalesceStream.on("id3Frame",function(Ue){Ue.dispatchType=he.metadataStream.dispatchType,j.trigger("id3Frame",Ue)}),he.coalesceStream.on("caption",this.trigger.bind(this,"caption")),he.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(he){var Ue=this.transmuxPipeline_;I.keepOriginalTimestamps||(this.baseMediaDecodeTime=he),se&&(se.timelineStartInfo.dts=void 0,se.timelineStartInfo.pts=void 0,Pl_clearDtsInfo(se),Ue.audioTimestampRolloverStream&&Ue.audioTimestampRolloverStream.discontinuity()),z&&(Ue.videoSegmentStream&&(Ue.videoSegmentStream.gopCache_=[]),z.timelineStartInfo.dts=void 0,z.timelineStartInfo.pts=void 0,Pl_clearDtsInfo(z),Ue.captionStream.reset()),Ue.timestampRolloverStream&&Ue.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(he){se&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(he)},this.setRemux=function(he){var Ue=this.transmuxPipeline_;I.remux=he,Ue&&Ue.coalesceStream&&Ue.coalesceStream.setRemux(he)},this.alignGopsWith=function(he){z&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(he)},this.getLogTrigger_=function(he){var Ue=this;return function(Ze){Ze.stream=he,Ue.trigger("log",Ze)}},this.push=function(he){if(U){var Ue=Nf(he);if(Ue&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!Ue&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),this.transmuxPipeline_)for(var Ze=Object.keys(this.transmuxPipeline_),ct=0;ct<Ze.length;ct++){var it=Ze[ct];"headOfPipeline"===it||!this.transmuxPipeline_[it].on||this.transmuxPipeline_[it].on("log",this.getLogTrigger_(it))}U=!1}this.transmuxPipeline_.headOfPipeline.push(he)},this.flush=function(){U=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},zp.prototype=new s;var Uv,fm,pm,L0={Transmuxer:zp,VideoSegmentStream:$p,AudioSegmentStream:jh,AUDIO_PROPERTIES:Pv,VIDEO_PROPERTIES:am,generateSegmentTimingInfo:Ov},ru_toUnsigned=function(I){return I>>>0},rc=function(I){var j="";return j+=String.fromCharCode(I[0]),j+=String.fromCharCode(I[1]),(j+=String.fromCharCode(I[2]))+String.fromCharCode(I[3])},qp=ru_toUnsigned,Pi=function _e(I,j){var z,se,he,Ue,Ze,U=[];if(!j.length)return null;for(z=0;z<I.byteLength;)se=qp(I[z]<<24|I[z+1]<<16|I[z+2]<<8|I[z+3]),he=rc(I.subarray(z+4,z+8)),Ue=se>1?z+se:I.byteLength,he===j[0]&&(1===j.length?U.push(I.subarray(z+8,Ue)):(Ze=_e(I.subarray(z+8,Ue),j.slice(1))).length&&(U=U.concat(Ze))),z=Ue;return U},Ff=ru_toUnsigned,lm=function(I){return{isLeading:(12&I[0])>>>2,dependsOn:3&I[0],isDependedOn:(192&I[1])>>>6,hasRedundancy:(48&I[1])>>>4,paddingValue:(14&I[1])>>>1,isNonSyncSample:1&I[1],degradationPriority:I[2]<<8|I[3]}},Ml=function(I){for(var se,he,j=I.byteLength,U=[],z=1;z<j-2;)0===I[z]&&0===I[z+1]&&3===I[z+2]?(U.push(z+2),z+=2):z++;if(0===U.length)return I;se=j-U.length,he=new Uint8Array(se);var Ue=0;for(z=0;z<se;Ue++,z++)Ue===U[0]&&(Ue++,U.shift()),he[z]=I[Ue];return he},j0=zd.CaptionStream,Qy=function(I,j){for(var U=I,z=0;z<j.length;z++){var se=j[z];if(U<se.size)return se;U-=se.size}return null},B0=function(I,j){var U=Pi(I,["moof","traf"]),z=Pi(I,["mdat"]),se={},he=[];return z.forEach(function(Ue,Ze){he.push({mdat:Ue,traf:U[Ze]})}),he.forEach(function(Ue){var ei,iu,Ze=Ue.mdat,ct=Ue.traf,yt=function(I){var yt,j=new DataView(I.buffer,I.byteOffset,I.byteLength),U={version:I[0],flags:new Uint8Array(I.subarray(1,4)),trackId:j.getUint32(4)},z=1&U.flags[2],se=2&U.flags[2],he=8&U.flags[2],Ue=16&U.flags[2],Ze=32&U.flags[2],ct=65536&U.flags[0],it=131072&U.flags[0];return yt=8,z&&(yt+=4,U.baseDataOffset=j.getUint32(12),yt+=4),se&&(U.sampleDescriptionIndex=j.getUint32(yt),yt+=4),he&&(U.defaultSampleDuration=j.getUint32(yt),yt+=4),Ue&&(U.defaultSampleSize=j.getUint32(yt),yt+=4),Ze&&(U.defaultSampleFlags=j.getUint32(yt)),ct&&(U.durationIsEmpty=!0),!z&&it&&(U.baseDataOffsetIsMoof=!0),U}(Pi(ct,["tfhd"])[0]),un=yt.trackId,Gn=Pi(ct,["tfdt"]),gr=Gn.length>0?function(I){var j={version:I[0],flags:new Uint8Array(I.subarray(1,4)),baseMediaDecodeTime:Ff(I[4]<<24|I[5]<<16|I[6]<<8|I[7])};return 1===j.version&&(j.baseMediaDecodeTime*=Math.pow(2,32),j.baseMediaDecodeTime+=Ff(I[8]<<24|I[9]<<16|I[10]<<8|I[11])),j}(Gn[0]).baseMediaDecodeTime:0,An=Pi(ct,["trun"]);j===un&&An.length>0&&(ei=function(I,j,U){var z=j,se=U.defaultSampleDuration||0,he=U.defaultSampleSize||0,Ue=U.trackId,Ze=[];return I.forEach(function(ct){var yt=function(I){var un,j={version:I[0],flags:new Uint8Array(I.subarray(1,4)),samples:[]},U=new DataView(I.buffer,I.byteOffset,I.byteLength),z=1&j.flags[2],se=4&j.flags[2],he=1&j.flags[1],Ue=2&j.flags[1],Ze=4&j.flags[1],ct=8&j.flags[1],it=U.getUint32(4),yt=8;for(z&&(j.dataOffset=U.getInt32(yt),yt+=4),se&&it&&(un={flags:lm(I.subarray(yt,yt+4))},yt+=4,he&&(un.duration=U.getUint32(yt),yt+=4),Ue&&(un.size=U.getUint32(yt),yt+=4),ct&&(un.compositionTimeOffset=1===j.version?U.getInt32(yt):U.getUint32(yt),yt+=4),j.samples.push(un),it--);it--;)un={},he&&(un.duration=U.getUint32(yt),yt+=4),Ue&&(un.size=U.getUint32(yt),yt+=4),Ze&&(un.flags=lm(I.subarray(yt,yt+4)),yt+=4),ct&&(un.compositionTimeOffset=1===j.version?U.getInt32(yt):U.getUint32(yt),yt+=4),j.samples.push(un);return j}(ct).samples;yt.forEach(function(un){void 0===un.duration&&(un.duration=se),void 0===un.size&&(un.size=he),un.trackId=Ue,un.dts=z,void 0===un.compositionTimeOffset&&(un.compositionTimeOffset=0),un.pts=z+un.compositionTimeOffset,z+=un.duration}),Ze=Ze.concat(yt)}),Ze}(An,gr,yt),iu=function(I,j,U){var he,Ue,Ze,ct,z=new DataView(I.buffer,I.byteOffset,I.byteLength),se={logs:[],seiNals:[]};for(Ue=0;Ue+4<I.length;Ue+=Ze)if(Ze=z.getUint32(Ue),Ue+=4,!(Ze<=0))switch(31&I[Ue]){case 6:var it=I.subarray(Ue+1,Ue+1+Ze),yt=Qy(Ue,j);if(he={nalUnitType:"sei_rbsp",size:Ze,data:it,escapedRBSP:Ml(it),trackId:U},yt)he.pts=yt.pts,he.dts=yt.dts,ct=yt;else{if(!ct){se.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Ue+" for trackId "+U+". See mux.js#223."});break}he.pts=ct.pts,he.dts=ct.dts}se.seiNals.push(he)}return se}(Ze,ei,un),se[un]||(se[un]={seiNals:[],logs:[]}),se[un].seiNals=se[un].seiNals.concat(iu.seiNals),se[un].logs=se[un].logs.concat(iu.logs))}),se},hm=function(){var j,U,z,se,he,Ue,I=!1;this.isInitialized=function(){return I},this.init=function(Ze){j=new j0,I=!0,Ue=!!Ze&&Ze.isPartial,j.on("data",function(ct){ct.startTime=ct.startPts/se,ct.endTime=ct.endPts/se,he.captions.push(ct),he.captionStreams[ct.stream]=!0}),j.on("log",function(ct){he.logs.push(ct)})},this.isNewInit=function(Ze,ct){return!(Ze&&0===Ze.length||ct&&"object"==typeof ct&&0===Object.keys(ct).length||z===Ze[0]&&se===ct[z])},this.parse=function(Ze,ct,it){var yt;if(!this.isInitialized())return null;if(!ct||!it)return null;if(this.isNewInit(ct,it))se=it[z=ct[0]];else if(null===z||!se)return U.push(Ze),null;for(;U.length>0;){var un=U.shift();this.parse(un,ct,it)}return yt=function(I,j,U){if(null===j)return null;var se=B0(I,j)[j]||{};return{seiNals:se.seiNals,logs:se.logs,timescale:U}}(Ze,z,se),yt&&yt.logs&&(he.logs=he.logs.concat(yt.logs)),null!==yt&&yt.seiNals?(this.pushNals(yt.seiNals),this.flushStream(),he):he.logs.length?{logs:he.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(Ze){if(!this.isInitialized()||!Ze||0===Ze.length)return null;Ze.forEach(function(ct){j.push(ct)})},this.flushStream=function(){if(!this.isInitialized())return null;Ue?j.partialFlush():j.flush()},this.clearParsedCaptions=function(){he.captions=[],he.captionStreams={},he.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;j.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){U=[],z=null,se=null,he?this.clearParsedCaptions():he={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},jf=ru_toUnsigned,Zd=function(I){return("00"+I.toString(16)).slice(-2)};Uv=function(I,j){var U,z,se;return U=Pi(j,["moof","traf"]),z=[].concat.apply([],U.map(function(he){return Pi(he,["tfhd"]).map(function(Ue){var Ze,ct,it;return Ze=jf(Ue[4]<<24|Ue[5]<<16|Ue[6]<<8|Ue[7]),ct=I[Ze]||9e4,(it="number"!=typeof(it=Pi(he,["tfdt"]).map(function(yt){var un,Gn;return un=yt[0],Gn=jf(yt[4]<<24|yt[5]<<16|yt[6]<<8|yt[7]),1===un&&(Gn*=Math.pow(2,32),Gn+=jf(yt[8]<<24|yt[9]<<16|yt[10]<<8|yt[11])),Gn})[0])||isNaN(it)?1/0:it)/ct})})),se=Math.min.apply(null,z),isFinite(se)?se:0},pm=function(I){var U=0===I[0]?12:20;return jf(I[U]<<24|I[U+1]<<16|I[U+2]<<8|I[U+3])},fm=function(I){var j=Pi(I,["moov","trak"]),U=[];return j.forEach(function(z){var Ue,Ze,se={},he=Pi(z,["tkhd"])[0];he&&(Ze=(Ue=new DataView(he.buffer,he.byteOffset,he.byteLength)).getUint8(0),se.id=Ue.getUint32(0===Ze?12:20));var ct=Pi(z,["mdia","hdlr"])[0];if(ct){var it=rc(ct.subarray(8,12));se.type="vide"===it?"video":"soun"===it?"audio":it}var yt=Pi(z,["mdia","minf","stbl","stsd"])[0];if(yt){var un=yt.subarray(8);se.codec=rc(un.subarray(4,8));var gr,Gn=Pi(un,[se.codec])[0];Gn&&(/^[a-z]vc[1-9]$/i.test(se.codec)?(gr=Gn.subarray(78),"avcC"===rc(gr.subarray(4,8))&&gr.length>11?(se.codec+=".",se.codec+=Zd(gr[9]),se.codec+=Zd(gr[10]),se.codec+=Zd(gr[11])):se.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(se.codec)?(gr=Gn.subarray(28),"esds"===rc(gr.subarray(4,8))&&gr.length>20&&0!==gr[19]?(se.codec+="."+Zd(gr[19]),se.codec+="."+Zd(gr[20]>>>2&63).replace(/^0/,"")):se.codec="mp4a.40.2"):se.codec=se.codec.toLowerCase())}var ei=Pi(z,["mdia","mdhd"])[0];ei&&(se.timescale=pm(ei)),U.push(se)}),U};var gm_startTime=Uv,gm_tracks=fm,Xy=function(I){var j=31&I[1];return(j<<=8)|I[2]},mm=function(I){return!!(64&I[1])},Kp=function(I){var j=0;return(48&I[3])>>>4>1&&(j+=I[4]+1),j},c=function(I){switch(I){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},_={parseType:function(I,j){var U=Xy(I);return 0===U?"pat":U===j?"pmt":j?"pes":null},parsePat:function(I){var j=mm(I),U=4+Kp(I);return j&&(U+=I[U]+1),(31&I[U+10])<<8|I[U+11]},parsePmt:function(I){var j={},U=mm(I),z=4+Kp(I);if(U&&(z+=I[z]+1),1&I[z+5]){var he;he=3+((15&I[z+1])<<8|I[z+2])-4;for(var Ze=12+((15&I[z+10])<<8|I[z+11]);Ze<he;){var ct=z+Ze;j[(31&I[ct+1])<<8|I[ct+2]]=I[ct],Ze+=5+((15&I[ct+3])<<8|I[ct+4])}return j}},parsePayloadUnitStartIndicator:mm,parsePesType:function(I,j){switch(j[Xy(I)]){case za.H264_STREAM_TYPE:return"video";case za.ADTS_STREAM_TYPE:return"audio";case za.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(I){if(!mm(I))return null;var U=4+Kp(I);if(U>=I.byteLength)return null;var se,z=null;return 192&(se=I[U+7])&&((z={}).pts=(14&I[U+9])<<27|(255&I[U+10])<<20|(254&I[U+11])<<12|(255&I[U+12])<<5|(254&I[U+13])>>>3,z.pts*=4,z.pts+=(6&I[U+13])>>>1,z.dts=z.pts,64&se&&(z.dts=(14&I[U+14])<<27|(255&I[U+15])<<20|(254&I[U+16])<<12|(255&I[U+17])<<5|(254&I[U+18])>>>3,z.dts*=4,z.dts+=(6&I[U+18])>>>1)),z},videoPacketContainsKeyFrame:function(I){for(var j=4+Kp(I),U=I.subarray(j),z=0,se=0,he=!1;se<U.byteLength-3;se++)if(1===U[se+2]){z=se+5;break}for(;z<U.byteLength;)switch(U[z]){case 0:if(0!==U[z-1]){z+=2;break}if(0!==U[z-2]){z++;break}se+3!==z-2&&"slice_layer_without_partitioning_rbsp_idr"===c(31&U[se+3])&&(he=!0);do{z++}while(1!==U[z]&&z<U.length);se=z-2,z+=3;break;case 1:if(0!==U[z-1]||0!==U[z-2]){z+=3;break}"slice_layer_without_partitioning_rbsp_idr"===c(31&U[se+3])&&(he=!0),se=z-2,z+=3;break;default:z+=3}return U=U.subarray(se),z-=se,se=0,U&&U.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===c(31&U[se+3])&&(he=!0),he}},C=em_handleRollover,N={};N.ts=_,N.aac=om;var ee=9e4,fe=188,Pt=function(I,j,U){for(var he,Ze,ct,it,z=0,se=fe,yt=!1;se<=I.byteLength;)if(71!==I[z]||71!==I[se]&&se!==I.byteLength)z++,se++;else{if("pes"===(he=I.subarray(z,se),N.ts.parseType(he,j.pid))&&(Ze=N.ts.parsePesType(he,j.table),ct=N.ts.parsePayloadUnitStartIndicator(he),"audio"===Ze&&ct&&(it=N.ts.parsePesTime(he))&&(it.type="audio",U.audio.push(it),yt=!0)),yt)break;z+=fe,se+=fe}for(z=(se=I.byteLength)-fe,yt=!1;z>=0;)if(71!==I[z]||71!==I[se]&&se!==I.byteLength)z--,se--;else{if("pes"===(he=I.subarray(z,se),N.ts.parseType(he,j.pid))&&(Ze=N.ts.parsePesType(he,j.table),ct=N.ts.parsePayloadUnitStartIndicator(he),"audio"===Ze&&ct&&(it=N.ts.parsePesTime(he))&&(it.type="audio",U.audio.push(it),yt=!0)),yt)break;z-=fe,se-=fe}},rn=function(I,j,U){for(var he,Ze,ct,it,yt,un,Gn,z=0,se=fe,gr=!1,An={data:[],size:0};se<I.byteLength;)if(71!==I[z]||71!==I[se])z++,se++;else{if("pes"===(he=I.subarray(z,se),N.ts.parseType(he,j.pid))&&(Ze=N.ts.parsePesType(he,j.table),ct=N.ts.parsePayloadUnitStartIndicator(he),"video"===Ze&&(ct&&!gr&&(it=N.ts.parsePesTime(he))&&(it.type="video",U.video.push(it),gr=!0),!U.firstKeyFrame))){if(ct&&0!==An.size){for(yt=new Uint8Array(An.size),un=0;An.data.length;)Gn=An.data.shift(),yt.set(Gn,un),un+=Gn.byteLength;if(N.ts.videoPacketContainsKeyFrame(yt)){var ei=N.ts.parsePesTime(yt);ei?(U.firstKeyFrame=ei,U.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}An.size=0}An.data.push(he),An.size+=he.byteLength}if(gr&&U.firstKeyFrame)break;z+=fe,se+=fe}for(z=(se=I.byteLength)-fe,gr=!1;z>=0;)if(71!==I[z]||71!==I[se])z--,se--;else{if("pes"===(he=I.subarray(z,se),N.ts.parseType(he,j.pid))&&(Ze=N.ts.parsePesType(he,j.table),ct=N.ts.parsePayloadUnitStartIndicator(he),"video"===Ze&&ct&&(it=N.ts.parsePesTime(he))&&(it.type="video",U.video.push(it),gr=!0)),gr)break;z-=fe,se-=fe}},So_inspect=function(I,j){var z;return z=N.aac.isLikelyAacData(I)?function(I){for(var Ze,j=!1,U=0,z=null,se=null,he=0,Ue=0;I.length-Ue>=3;){switch(N.aac.parseType(I,Ue)){case"timed-metadata":if(I.length-Ue<10){j=!0;break}if((he=N.aac.parseId3TagSize(I,Ue))>I.length){j=!0;break}null===se&&(Ze=I.subarray(Ue,Ue+he),se=N.aac.parseAacTimestamp(Ze)),Ue+=he;break;case"audio":if(I.length-Ue<7){j=!0;break}if((he=N.aac.parseAdtsSize(I,Ue))>I.length){j=!0;break}null===z&&(Ze=I.subarray(Ue,Ue+he),z=N.aac.parseSampleRate(Ze)),U++,Ue+=he;break;default:Ue++}if(j)return null}if(null===z||null===se)return null;var it=ee/z;return{audio:[{type:"audio",dts:se,pts:se},{type:"audio",dts:se+1024*U*it,pts:se+1024*U*it}]}}(I):function(I){var j={pid:null,table:null},U={};for(var z in function(I,j){for(var se,U=0,z=fe;z<I.byteLength;)if(71!==I[U]||71!==I[z])U++,z++;else{switch(se=I.subarray(U,z),N.ts.parseType(se,j.pid)){case"pat":j.pid=N.ts.parsePat(se);break;case"pmt":var Ue=N.ts.parsePmt(se);j.table=j.table||{},Object.keys(Ue).forEach(function(Ze){j.table[Ze]=Ue[Ze]})}U+=fe,z+=fe}}(I,j),j.table)if(j.table.hasOwnProperty(z))switch(j.table[z]){case za.H264_STREAM_TYPE:U.video=[],rn(I,j,U),0===U.video.length&&delete U.video;break;case za.ADTS_STREAM_TYPE:U.audio=[],Pt(I,j,U),0===U.audio.length&&delete U.audio}return U}(I),z&&(z.audio||z.video)?(function(I,j){if(I.audio&&I.audio.length){var U=j;(typeof U>"u"||isNaN(U))&&(U=I.audio[0].dts),I.audio.forEach(function(he){he.dts=C(he.dts,U),he.pts=C(he.pts,U),he.dtsTime=he.dts/ee,he.ptsTime=he.pts/ee})}if(I.video&&I.video.length){var z=j;if((typeof z>"u"||isNaN(z))&&(z=I.video[0].dts),I.video.forEach(function(he){he.dts=C(he.dts,z),he.pts=C(he.pts,z),he.dtsTime=he.dts/ee,he.ptsTime=he.pts/ee}),I.firstKeyFrame){var se=I.firstKeyFrame;se.dts=C(se.dts,z),se.pts=C(se.pts,z),se.dtsTime=se.dts/ee,se.ptsTime=se.pts/ee}}}(z,j),z):null},$s=function(){function _e(j,U){this.options=U||{},this.self=j,this.init()}var I=_e.prototype;return I.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new L0.Transmuxer(this.options),function(I,j){j.on("data",function(U){var z=U.initSegment;U.initSegment={data:z.buffer,byteOffset:z.byteOffset,byteLength:z.byteLength};var se=U.data;U.data=se.buffer,I.postMessage({action:"data",segment:U,byteOffset:se.byteOffset,byteLength:se.byteLength},[U.data])}),j.on("done",function(U){I.postMessage({action:"done"})}),j.on("gopInfo",function(U){I.postMessage({action:"gopInfo",gopInfo:U})}),j.on("videoSegmentTimingInfo",function(U){var z={start:{decode:us_videoTsToSeconds(U.start.dts),presentation:us_videoTsToSeconds(U.start.pts)},end:{decode:us_videoTsToSeconds(U.end.dts),presentation:us_videoTsToSeconds(U.end.pts)},baseMediaDecodeTime:us_videoTsToSeconds(U.baseMediaDecodeTime)};U.prependedContentDuration&&(z.prependedContentDuration=us_videoTsToSeconds(U.prependedContentDuration)),I.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:z})}),j.on("audioSegmentTimingInfo",function(U){var z={start:{decode:us_videoTsToSeconds(U.start.dts),presentation:us_videoTsToSeconds(U.start.pts)},end:{decode:us_videoTsToSeconds(U.end.dts),presentation:us_videoTsToSeconds(U.end.pts)},baseMediaDecodeTime:us_videoTsToSeconds(U.baseMediaDecodeTime)};U.prependedContentDuration&&(z.prependedContentDuration=us_videoTsToSeconds(U.prependedContentDuration)),I.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:z})}),j.on("id3Frame",function(U){I.postMessage({action:"id3Frame",id3Frame:U})}),j.on("caption",function(U){I.postMessage({action:"caption",caption:U})}),j.on("trackinfo",function(U){I.postMessage({action:"trackinfo",trackInfo:U})}),j.on("audioTimingInfo",function(U){I.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:us_videoTsToSeconds(U.start),end:us_videoTsToSeconds(U.end)}})}),j.on("videoTimingInfo",function(U){I.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:us_videoTsToSeconds(U.start),end:us_videoTsToSeconds(U.end)}})}),j.on("log",function(U){I.postMessage({action:"log",log:U})})}(this.self,this.transmuxer)},I.pushMp4Captions=function(U){this.captionParser||(this.captionParser=new hm,this.captionParser.init());var z=new Uint8Array(U.data,U.byteOffset,U.byteLength),se=this.captionParser.parse(z,U.trackIds,U.timescales);this.self.postMessage({action:"mp4Captions",captions:se&&se.captions||[],logs:se&&se.logs||[],data:z.buffer},[z.buffer])},I.probeMp4StartTime=function(U){var se=U.data,he=gm_startTime(U.timescales,se);this.self.postMessage({action:"probeMp4StartTime",startTime:he,data:se},[se.buffer])},I.probeMp4Tracks=function(U){var z=U.data,se=gm_tracks(z);this.self.postMessage({action:"probeMp4Tracks",tracks:se,data:z},[z.buffer])},I.probeTs=function(U){var z=U.data,se=U.baseStartTime,he="number"!=typeof se||isNaN(se)?void 0:9e4*se,Ue=So_inspect(z,he),Ze=null;Ue&&((Ze={hasVideo:Ue.video&&2===Ue.video.length||!1,hasAudio:Ue.audio&&2===Ue.audio.length||!1}).hasVideo&&(Ze.videoStart=Ue.video[0].ptsTime),Ze.hasAudio&&(Ze.audioStart=Ue.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:Ze,data:z},[z.buffer])},I.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},I.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},I.push=function(U){var z=new Uint8Array(U.data,U.byteOffset,U.byteLength);this.transmuxer.push(z)},I.reset=function(){this.transmuxer.reset()},I.setTimestampOffset=function(U){this.transmuxer.setBaseMediaDecodeTime(Math.round(us_secondsToVideoTs(U.timestampOffset||0)))},I.setAudioAppendStart=function(U){this.transmuxer.setAudioAppendStart(Math.ceil(us_secondsToVideoTs(U.appendStart)))},I.setRemux=function(U){this.transmuxer.setRemux(U.remux)},I.flush=function(U){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},I.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},I.alignGopsWith=function(U){this.transmuxer.alignGopsWith(U.gopsToAlignWith.slice())},_e}();self.onmessage=function(_e){"init"===_e.data.action&&_e.data.options?this.messageHandlers=new $s(self,_e.data.options):(this.messageHandlers||(this.messageHandlers=new $s(self)),_e.data&&_e.data.action&&"init"!==_e.data.action&&this.messageHandlers[_e.data.action]&&this.messageHandlers[_e.data.action](_e.data))}})),eu=uy(cy),hy=function(s){var l=s.transmuxer,u=s.bytes,t=s.audioAppendStart,a=s.gopsToAlignWith,h=s.remux,v=s.onData,S=s.onTrackInfo,P=s.onAudioTimingInfo,H=s.onVideoTimingInfo,Y=s.onVideoSegmentTimingInfo,Z=s.onAudioSegmentTimingInfo,we=s.onId3,je=s.onCaptions,Pe=s.onDone,Re=s.onEndedTimeline,Bt=s.onTransmuxerLog,It=s.isEndOfTimeline,tn={buffer:[]},on=It;if(l.onmessage=function(Xt){l.currentTransmux===s&&("data"===Xt.data.action&&function(s,l,u){var t=s.data.segment,a=t.type,h=t.initSegment,H=t.videoFrameDtsTime,Y=t.videoFramePtsTime;l.buffer.push({captions:t.captions,captionStreams:t.captionStreams,metadata:t.metadata});var Z=s.data.segment.boxes||{data:s.data.segment.data},we={type:a,data:new Uint8Array(Z.data,Z.data.byteOffset,Z.data.byteLength),initSegment:new Uint8Array(h.data,h.byteOffset,h.byteLength)};typeof H<"u"&&(we.videoFrameDtsTime=H),typeof Y<"u"&&(we.videoFramePtsTime=Y),u(we)}(Xt,tn,v),"trackinfo"===Xt.data.action&&S(Xt.data.trackInfo),"gopInfo"===Xt.data.action&&function(s,l){l.gopInfo=s.data.gopInfo}(Xt,tn),"audioTimingInfo"===Xt.data.action&&P(Xt.data.audioTimingInfo),"videoTimingInfo"===Xt.data.action&&H(Xt.data.videoTimingInfo),"videoSegmentTimingInfo"===Xt.data.action&&Y(Xt.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===Xt.data.action&&Z(Xt.data.audioSegmentTimingInfo),"id3Frame"===Xt.data.action&&we([Xt.data.id3Frame],Xt.data.id3Frame.dispatchType),"caption"===Xt.data.action&&je(Xt.data.caption),"endedtimeline"===Xt.data.action&&(on=!1,Re()),"log"===Xt.data.action&&Bt(Xt.data.log),"transmuxed"===Xt.data.type&&(on||(l.onmessage=null,function(s){var l=s.transmuxedData,u=s.callback;l.buffer=[],u(l)}({transmuxedData:tn,callback:Pe}),Lm(l))))},t&&l.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(a)&&l.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof h<"u"&&l.postMessage({action:"setRemux",remux:h}),u.byteLength){var jn=u instanceof ArrayBuffer?u:u.buffer,Hn=u instanceof ArrayBuffer?0:u.byteOffset;l.postMessage({action:"push",data:jn,byteOffset:Hn,byteLength:u.byteLength},[jn])}It&&l.postMessage({action:"endTimeline"}),l.postMessage({action:"flush"})},Lm=function(s){s.currentTransmux=null,s.transmuxQueue.length&&(s.currentTransmux=s.transmuxQueue.shift(),"function"==typeof s.currentTransmux?s.currentTransmux():hy(s.currentTransmux))},fy=function(s,l){s.postMessage({action:l}),Lm(s)},mg_reset=function(s){!function(s,l){if(!l.currentTransmux)return l.currentTransmux=s,void fy(l,s);l.transmuxQueue.push(fy.bind(null,l,s))}("reset",s)},ip=function(s){var l=s.transmuxer,u=s.endAction||s.action,t=s.callback,a=De({},s,{endAction:null,transmuxer:null,callback:null});if(l.addEventListener("message",function P(H){H.data.action===u&&(l.removeEventListener("message",P),H.data.data&&(H.data.data=new Uint8Array(H.data.data,s.byteOffset||0,s.byteLength||H.data.data.byteLength),s.data&&(s.data=H.data.data)),t(H.data))}),s.data){var v=s.data instanceof ArrayBuffer;a.byteOffset=v?0:s.data.byteOffset,a.byteLength=s.data.byteLength,l.postMessage(a,[v?s.data:s.data.buffer])}else l.postMessage(a)},Um=function(s){s.forEach(function(l){l.abort()})},yg=function(s,l){return l.timedout?{status:l.status,message:"HLS request timed-out at URL: "+l.uri,code:-101,xhr:l}:l.aborted?{status:l.status,message:"HLS request aborted at URL: "+l.uri,code:-102,xhr:l}:s?{status:l.status,message:"HLS request errored at URL: "+l.uri,code:2,xhr:l}:"arraybuffer"===l.responseType&&0===l.response.byteLength?{status:l.status,message:"Empty HLS response at URL: "+l.uri,code:2,xhr:l}:null},sp=function(s,l,u){return function(t,a){var h=a.response,v=yg(t,a);if(v)return u(v,s);if(16!==h.byteLength)return u({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:2,xhr:a},s);for(var S=new DataView(h),P=new Uint32Array([S.getUint32(0),S.getUint32(4),S.getUint32(8),S.getUint32(12)]),H=0;H<l.length;H++)l[H].bytes=P;return u(null,s)}},_g=function(s,l){var u=ea(s.map.bytes);if("mp4"!==u)return l({internal:!0,message:"Found unsupported "+(u||"unknown")+" container for initialization segment at URL: "+(s.map.resolvedUri||s.map.uri),code:2});ip({action:"probeMp4Tracks",data:s.map.bytes,transmuxer:s.transmuxer,callback:function(h){var v=h.tracks;return s.map.bytes=h.data,v.forEach(function(P){s.map.tracks=s.map.tracks||{},!s.map.tracks[P.type]&&(s.map.tracks[P.type]=P,"number"==typeof P.id&&P.timescale&&(s.map.timescales=s.map.timescales||{},s.map.timescales[P.id]=P.timescale))}),l(null)}})},bg=function(s){var l=s.segment,u=s.bytes,t=s.trackInfoFn,a=s.timingInfoFn,h=s.videoSegmentTimingInfoFn,v=s.audioSegmentTimingInfoFn,S=s.id3Fn,P=s.captionsFn,H=s.isEndOfTimeline,Y=s.endedTimelineFn,Z=s.dataFn,we=s.doneFn,je=s.onTransmuxerLog,Pe=l.map&&l.map.tracks||{},Re=Boolean(Pe.audio&&Pe.video),Bt=a.bind(null,l,"audio","start"),It=a.bind(null,l,"audio","end"),tn=a.bind(null,l,"video","start"),on=a.bind(null,l,"video","end");ip({action:"probeTs",transmuxer:l.transmuxer,data:u,baseStartTime:l.baseStartTime,callback:function(Hn){l.bytes=u=Hn.data;var gn=Hn.result;gn&&(t(l,{hasAudio:gn.hasAudio,hasVideo:gn.hasVideo,isMuxed:Re}),t=null,gn.hasAudio&&!Re&&Bt(gn.audioStart),gn.hasVideo&&tn(gn.videoStart),Bt=null,tn=null),function(s){if(!s.transmuxer.currentTransmux)return s.transmuxer.currentTransmux=s,void hy(s);s.transmuxer.transmuxQueue.push(s)}({bytes:u,transmuxer:l.transmuxer,audioAppendStart:l.audioAppendStart,gopsToAlignWith:l.gopsToAlignWith,remux:Re,onData:function(gn){gn.type="combined"===gn.type?"video":gn.type,Z(l,gn)},onTrackInfo:function(gn){t&&(Re&&(gn.isMuxed=!0),t(l,gn))},onAudioTimingInfo:function(gn){Bt&&typeof gn.start<"u"&&(Bt(gn.start),Bt=null),It&&typeof gn.end<"u"&&It(gn.end)},onVideoTimingInfo:function(gn){tn&&typeof gn.start<"u"&&(tn(gn.start),tn=null),on&&typeof gn.end<"u"&&on(gn.end)},onVideoSegmentTimingInfo:function(gn){h(gn)},onAudioSegmentTimingInfo:function(gn){v(gn)},onId3:function(gn,Xt){S(l,gn,Xt)},onCaptions:function(gn){P(l,[gn])},isEndOfTimeline:H,onEndedTimeline:function(){Y()},onTransmuxerLog:je,onDone:function(gn){!we||(gn.type="combined"===gn.type?"video":gn.type,we(null,l,gn))}})}})},ap=function(s){var l=s.segment,u=s.bytes,t=s.trackInfoFn,a=s.timingInfoFn,h=s.videoSegmentTimingInfoFn,v=s.audioSegmentTimingInfoFn,S=s.id3Fn,P=s.captionsFn,H=s.isEndOfTimeline,Y=s.endedTimelineFn,Z=s.dataFn,we=s.doneFn,je=s.onTransmuxerLog,Pe=new Uint8Array(u);if(function(s){return Us(s,["moof"]).length>0}(Pe)){l.isFmp4=!0;var Re=l.map.tracks,Bt={isFmp4:!0,hasVideo:!!Re.video,hasAudio:!!Re.audio};Re.audio&&Re.audio.codec&&"enca"!==Re.audio.codec&&(Bt.audioCodec=Re.audio.codec),Re.video&&Re.video.codec&&"encv"!==Re.video.codec&&(Bt.videoCodec=Re.video.codec),Re.video&&Re.audio&&(Bt.isMuxed=!0),t(l,Bt);var It=function(on){Z(l,{data:Pe,type:Bt.hasAudio&&!Bt.isMuxed?"audio":"video"}),on&&on.length&&P(l,on),we(null,l,{})};ip({action:"probeMp4StartTime",timescales:l.map.timescales,data:Pe,transmuxer:l.transmuxer,callback:function(on){var Kt=on.data,jn=on.startTime;u=Kt.buffer,l.bytes=Pe=Kt,Bt.hasAudio&&!Bt.isMuxed&&a(l,"audio","start",jn),Bt.hasVideo&&a(l,"video","start",jn),Re.video&&Kt.byteLength&&l.transmuxer?ip({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:l.transmuxer,data:Pe,timescales:l.map.timescales,trackIds:[Re.video.id],callback:function(gn){u=gn.data.buffer,l.bytes=Pe=gn.data,gn.logs.forEach(function(Xt){je(Ct.mergeOptions(Xt,{stream:"mp4CaptionParser"}))}),It(gn.captions)}}):It()}})}else{if(l.transmuxer)return typeof l.container>"u"&&(l.container=ea(Pe)),"ts"!==l.container&&"aac"!==l.container?(t(l,{hasAudio:!1,hasVideo:!1}),void we(null,l,{})):void bg({segment:l,bytes:u,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:P,isEndOfTimeline:H,endedTimelineFn:Y,dataFn:Z,doneFn:we,onTransmuxerLog:je});we(null,l,{})}},Gc=function(s,l){var S,u=s.id,t=s.key,a=s.encryptedBytes,h=s.decryptionWorker;h.addEventListener("message",function P(H){if(H.data.source===u){h.removeEventListener("message",P);var Y=H.data.decrypted;l(new Uint8Array(Y.bytes,Y.byteOffset,Y.byteLength))}}),S=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),h.postMessage(_c({source:u,encrypted:a,key:S,iv:t.iv}),[a.buffer,S.buffer])},Y0=function(s){var l=s.xhr,u=s.xhrOptions,a=s.segment,h=s.abortFn,v=s.progressFn,S=s.trackInfoFn,P=s.timingInfoFn,H=s.videoSegmentTimingInfoFn,Y=s.audioSegmentTimingInfoFn,Z=s.id3Fn,we=s.captionsFn,je=s.isEndOfTimeline,Pe=s.endedTimelineFn,Re=s.dataFn,tn=[],on=function(s){var l=s.activeXhrs,u=s.decryptionWorker,t=s.trackInfoFn,a=s.timingInfoFn,h=s.videoSegmentTimingInfoFn,v=s.audioSegmentTimingInfoFn,S=s.id3Fn,P=s.captionsFn,H=s.isEndOfTimeline,Y=s.endedTimelineFn,Z=s.dataFn,we=s.doneFn,je=s.onTransmuxerLog,Pe=0,Re=!1;return function(Bt,It){if(!Re){if(Bt)return Re=!0,Um(l),we(Bt,It);if((Pe+=1)===l.length){var tn=function(){if(It.encryptedBytes)return function(s){var u=s.segment,t=s.trackInfoFn,a=s.timingInfoFn,h=s.videoSegmentTimingInfoFn,v=s.audioSegmentTimingInfoFn,S=s.id3Fn,P=s.captionsFn,H=s.isEndOfTimeline,Y=s.endedTimelineFn,Z=s.dataFn,we=s.doneFn,je=s.onTransmuxerLog;Gc({id:u.requestId,key:u.key,encryptedBytes:u.encryptedBytes,decryptionWorker:s.decryptionWorker},function(Pe){u.bytes=Pe,ap({segment:u,bytes:u.bytes,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:P,isEndOfTimeline:H,endedTimelineFn:Y,dataFn:Z,doneFn:we,onTransmuxerLog:je})})}({decryptionWorker:u,segment:It,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:P,isEndOfTimeline:H,endedTimelineFn:Y,dataFn:Z,doneFn:we,onTransmuxerLog:je});ap({segment:It,bytes:It.bytes,trackInfoFn:t,timingInfoFn:a,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:v,id3Fn:S,captionsFn:P,isEndOfTimeline:H,endedTimelineFn:Y,dataFn:Z,doneFn:we,onTransmuxerLog:je})};if(It.endOfAllRequests=Date.now(),It.map&&It.map.encryptedBytes&&!It.map.bytes)return Gc({decryptionWorker:u,id:It.requestId+"-init",encryptedBytes:It.map.encryptedBytes,key:It.map.key},function(on){It.map.bytes=on,_g(It,function(Kt){if(Kt)return Um(l),we(Kt,It);tn()})});tn()}}}}({activeXhrs:tn,decryptionWorker:s.decryptionWorker,trackInfoFn:S,timingInfoFn:P,videoSegmentTimingInfoFn:H,audioSegmentTimingInfoFn:Y,id3Fn:Z,captionsFn:we,isEndOfTimeline:je,endedTimelineFn:Pe,dataFn:Re,doneFn:s.doneFn,onTransmuxerLog:s.onTransmuxerLog});if(a.key&&!a.key.bytes){var Kt=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&Kt.push(a.map.key);var gn=l(Ct.mergeOptions(u,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),sp(a,Kt,on));tn.push(gn)}if(a.map&&!a.map.bytes){if(a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri)){var Zo=l(Ct.mergeOptions(u,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),sp(a,[a.map.key],on));tn.push(Zo)}var Kr=Ct.mergeOptions(u,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:km(a.map)}),Eu=function(s){var l=s.segment,u=s.finishProcessingFn;return function(t,a){var h=yg(t,a);if(h)return u(h,l);var v=new Uint8Array(a.response);if(l.map.key)return l.map.encryptedBytes=v,u(null,l);l.map.bytes=v,_g(l,function(S){if(S)return S.xhr=a,S.status=a.status,u(S,l);u(null,l)})}}({segment:a,finishProcessingFn:on}),Fs=l(Kr,Eu);tn.push(Fs)}var Gs=Ct.mergeOptions(u,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:km(a)}),Al=l(Gs,function(s){var l=s.segment,u=s.finishProcessingFn,t=s.responseType;return function(a,h){var v=yg(a,h);if(v)return u(v,l);var S="arraybuffer"!==t&&h.responseText?function(s){for(var l=new Uint8Array(new ArrayBuffer(s.length)),u=0;u<s.length;u++)l[u]=s.charCodeAt(u);return l.buffer}(h.responseText.substring(l.lastReachedChar||0)):h.response;return l.stats=function(s){return{bandwidth:s.bandwidth,bytesReceived:s.bytesReceived||0,roundTripTime:s.roundTripTime||0}}(h),l.key?l.encryptedBytes=new Uint8Array(S):l.bytes=new Uint8Array(S),u(null,l)}}({segment:a,finishProcessingFn:on,responseType:Gs.responseType}));Al.addEventListener("progress",function(s){var l=s.segment,u=s.progressFn;return function(t){if(!t.target.aborted)return l.stats=Ct.mergeOptions(l.stats,function(s){var l=s.target,t={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-l.requestTime||0};return t.bytesReceived=s.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t}(t)),!l.stats.firstBytesReceivedAt&&l.stats.bytesReceived&&(l.stats.firstBytesReceivedAt=Date.now()),u(t,l)}}({segment:a,progressFn:v,trackInfoFn:S,timingInfoFn:P,videoSegmentTimingInfoFn:H,audioSegmentTimingInfoFn:Y,id3Fn:Z,captionsFn:we,isEndOfTimeline:je,endedTimelineFn:Pe,dataFn:Re})),tn.push(Al);var Il={};return tn.forEach(function(ec){ec.addEventListener("loadend",function(s){var l=s.loadendState,u=s.abortFn;return function(t){t.target.aborted&&u&&!l.calledAbortFn&&(u(),l.calledAbortFn=!0)}}({loadendState:Il,abortFn:h}))}),function(){return Um(tn)}},h0=Eo("CodecUtils"),Hm=function(s,l){var u=l.attributes||{};return s&&s.mediaGroups&&s.mediaGroups.AUDIO&&u.AUDIO&&s.mediaGroups.AUDIO[u.AUDIO]},xd=function(s){var l={};return s.forEach(function(u){var t=u.mediaType,a=u.type,h=u.details;l[t]=l[t]||[],l[t].push(Er(""+a+h))}),Object.keys(l).forEach(function(u){if(l[u].length>1)return h0("multiple "+u+" codecs found as attributes: "+l[u].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(l[u]=null);l[u]=l[u][0]}),l},bh=function(s){var l=0;return s.audio&&l++,s.video&&l++,l},Cl=function(s,l){var u=l.attributes||{},t=xd(function(s){var l=s.attributes||{};if(l.CODECS)return or(l.CODECS)}(l)||[]);if(Hm(s,l)&&!t.audio&&!function(s,l){if(!Hm(s,l))return!0;var t=s.mediaGroups.AUDIO[(l.attributes||{}).AUDIO];for(var a in t)if(!t[a].uri&&!t[a].playlists)return!0;return!1}(s,l)){var a=xd(function(s,l){if(!s.mediaGroups.AUDIO||!l)return null;var u=s.mediaGroups.AUDIO[l];if(!u)return null;for(var t in u){var a=u[t];if(a.default&&a.playlists)return or(a.playlists[0].attributes.CODECS)}return null}(s,u.AUDIO)||[]);a.audio&&(t.audio=a.audio)}return t},Th=Eo("PlaylistSelector"),wg=function(s){if(s&&s.playlist){var l=s.playlist;return JSON.stringify({id:l.id,bandwidth:s.bandwidth,width:s.width,height:s.height,codecs:l.attributes&&l.attributes.CODECS||""})}},Ad=function(s,l){if(!s)return"";var u=ae().getComputedStyle(s);return u?u[l]:""},Eh=function(s,l){var u=s.slice();s.sort(function(t,a){var h=l(t,a);return 0===h?u.indexOf(t)-u.indexOf(a):h})},Cg=function(s,l){var u,t;return s.attributes.BANDWIDTH&&(u=s.attributes.BANDWIDTH),u=u||ae().Number.MAX_VALUE,l.attributes.BANDWIDTH&&(t=l.attributes.BANDWIDTH),u-(t||ae().Number.MAX_VALUE)},vy=function(s,l,u,t,a,h){if(s){var v={bandwidth:l,width:u,height:t,limitRenditionByPlayerDimensions:a},S=s.playlists;Va.isAudioOnly(s)&&(S=h.getAudioTrackPlaylists_(),v.audioOnly=!0);var P=S.map(function(Ln){var Zo=Ln.attributes&&Ln.attributes.RESOLUTION&&Ln.attributes.RESOLUTION.width,Kr=Ln.attributes&&Ln.attributes.RESOLUTION&&Ln.attributes.RESOLUTION.height;return{bandwidth:Ln.attributes&&Ln.attributes.BANDWIDTH||ae().Number.MAX_VALUE,width:Zo,height:Kr,playlist:Ln}});Eh(P,function(Ln,hs){return Ln.bandwidth-hs.bandwidth});var H=(P=P.filter(function(Ln){return!Va.isIncompatible(Ln.playlist)})).filter(function(Ln){return Va.isEnabled(Ln.playlist)});H.length||(H=P.filter(function(Ln){return!Va.isDisabled(Ln.playlist)}));var Y=H.filter(function(Ln){return Ln.bandwidth*Aa.BANDWIDTH_VARIANCE<l}),Z=Y[Y.length-1],we=Y.filter(function(Ln){return Ln.bandwidth===Z.bandwidth})[0];if(!1===a){var je=we||H[0]||P[0];if(je&&je.playlist){var Pe="sortedPlaylistReps";return we&&(Pe="bandwidthBestRep"),H[0]&&(Pe="enabledPlaylistReps"),Th("choosing "+wg(je)+" using "+Pe+" with options",v),je.playlist}return Th("could not choose a playlist with options",v),null}var Re=Y.filter(function(Ln){return Ln.width&&Ln.height});Eh(Re,function(Ln,hs){return Ln.width-hs.width});var Bt=Re.filter(function(Ln){return Ln.width===u&&Ln.height===t});Z=Bt[Bt.length-1];var tn,on,Kt,jn,It=Bt.filter(function(Ln){return Ln.bandwidth===Z.bandwidth})[0];if(It||(on=(tn=Re.filter(function(Ln){return Ln.width>u||Ln.height>t})).filter(function(Ln){return Ln.width===tn[0].width&&Ln.height===tn[0].height}),Z=on[on.length-1],Kt=on.filter(function(Ln){return Ln.bandwidth===Z.bandwidth})[0]),h.experimentalLeastPixelDiffSelector){var Hn=Re.map(function(Ln){return Ln.pixelDiff=Math.abs(Ln.width-u)+Math.abs(Ln.height-t),Ln});Eh(Hn,function(Ln,hs){return Ln.pixelDiff===hs.pixelDiff?hs.bandwidth-Ln.bandwidth:Ln.pixelDiff-hs.pixelDiff}),jn=Hn[0]}var gn=jn||Kt||It||we||H[0]||P[0];if(gn&&gn.playlist){var Xt="sortedPlaylistReps";return jn?Xt="leastPixelDiffRep":Kt?Xt="resolutionPlusOneRep":It?Xt="resolutionBestRep":we?Xt="bandwidthBestRep":H[0]&&(Xt="enabledPlaylistReps"),Th("choosing "+wg(gn)+" using "+Xt+" with options",v),gn.playlist}return Th("could not choose a playlist with options",v),null}},Sg=function(){var s=this.useDevicePixelRatio&&ae().devicePixelRatio||1;return vy(this.playlists.master,this.systemBandwidth,parseInt(Ad(this.tech_.el(),"width"),10)*s,parseInt(Ad(this.tech_.el(),"height"),10)*s,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},pf=function(s,l,u){var t,a;if(u&&u.cues)for(t=u.cues.length;t--;)(a=u.cues[t]).startTime>=s&&a.endTime<=l&&u.removeCue(a)},dp=function(s){return"number"==typeof s&&isFinite(s)},Pd=1/60,gf=function(s){var l=s.startOfSegment,u=s.duration,t=s.segment,a=s.part,h=s.playlist,v=h.mediaSequence,S=h.id,P=h.segments,Y=s.mediaIndex,Z=s.partIndex,we=s.timeline,je=(void 0===P?[]:P).length-1,Pe="mediaIndex/partIndex increment";s.getMediaInfoForTime?Pe="getMediaInfoForTime ("+s.getMediaInfoForTime+")":s.isSyncRequest&&(Pe="getSyncSegmentCandidate (isSyncRequest)");var Re="number"==typeof Z,Bt=s.segment.uri?"segment":"pre-segment",It=Re?ig({preloadSegment:t})-1:0;return Bt+" ["+(v+Y)+"/"+(v+je)+"]"+(Re?" part ["+Z+"/"+It+"]":"")+" segment start/end ["+t.start+" => "+t.end+"]"+(Re?" part start/end ["+a.start+" => "+a.end+"]":"")+" startOfSegment ["+l+"] duration ["+u+"] timeline ["+we+"] selected by ["+Pe+"] playlist ["+S+"]"},mf=function(s){return s+"TimingInfo"},Pg=function(s){var l=s.timelineChangeController,t=s.segmentTimeline,a=s.loaderType,h=s.audioDisabled;if(s.currentTimeline===t)return!1;if("audio"===a){var v=l.lastTimelineChange({type:"main"});return!v||v.to!==t}if("main"===a&&h){var S=l.pendingTimelineChange({type:"audio"});return!(S&&S.to===t)}return!1},yf=function(s){var l=s.segmentDuration,u=s.maxDuration;return!!l&&Math.round(l)>u+hh},hp=function(g){function s(u,t){var a;if(a=g.call(this)||this,!u)throw new TypeError("Initialization settings are required");if("function"!=typeof u.currentTime)throw new TypeError("No currentTime getter specified");if(!u.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=u.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=u.hasPlayed,a.currentTime_=u.currentTime,a.seekable_=u.seekable,a.seeking_=u.seeking,a.duration_=u.duration,a.mediaSource_=u.mediaSource,a.vhs_=u.vhs,a.loaderType_=u.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=u.segmentMetadataTrack,a.goalBufferLength_=u.goalBufferLength,a.sourceType_=u.sourceType,a.sourceUpdater_=u.sourceUpdater,a.inbandTextTracks_=u.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=u.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=u.parse708captions,a.experimentalExactManifestTimings=u.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=Ct.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=u.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=u.decrypter,a.syncController_=u.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=Eo("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(Ee(a),"state",{get:function(){return this.state_},set:function(v){v!==this.state_&&(this.logger_(this.state_+" -> "+v),this.state_=v,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),"main"===a.loaderType_&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),"audio"===a.loaderType_&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}$e(s,g);var l=s.prototype;return l.createTransmuxer_=function(){return function(s){var l=new eu;l.currentTransmux=null,l.transmuxQueue=[];var u=l.terminate;return l.terminate=function(){return l.currentTransmux=null,l.transmuxQueue.length=0,u.call(l)},l.postMessage({action:"init",options:s}),l}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},l.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},l.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ae().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},l.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},l.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},l.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ae().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},l.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},l.error=function(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},l.endOfStream=function(){this.ended_=!0,this.transmuxer_&&mg_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},l.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return Ct.createTimeRanges();if("main"===this.loaderType_){var h=t.hasVideo;if(h&&t.hasAudio&&!this.audioDisabled_&&!t.isMuxed)return this.sourceUpdater_.buffered();if(h)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},l.initSegmentForMap=function(t,a){if(void 0===a&&(a=!1),!t)return null;var h=wd(t),v=this.initSegments_[h];return a&&!v&&t.bytes&&(this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),v||t},l.segmentKey=function(t,a){if(void 0===a&&(a=!1),!t)return null;var h=cg(t),v=this.keyCache_[h];this.cacheEncryptionKeys_&&a&&!v&&t.bytes&&(this.keyCache_[h]=v={resolvedUri:t.resolvedUri,bytes:t.bytes});var S={resolvedUri:(v||t).resolvedUri};return v&&(S.bytes=v.bytes),S},l.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},l.load=function(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}},l.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},l.playlist=function(t,a){if(void 0===a&&(a={}),t){var h=this.playlist_,v=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=a,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var S=null;if(h&&(h.id?S=h.id:h.uri&&(S=h.uri)),this.logger_("playlist update ["+S+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!h||h.uri!==t.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var P=t.mediaSequence-h.mediaSequence;if(this.logger_("live window shift ["+P+"]"),null!==this.mediaIndex)if(this.mediaIndex-=P,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var H=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!H.parts||!H.parts.length||!H.parts[this.partIndex])){var Y=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=Y}}v&&(v.mediaIndex-=P,v.mediaIndex<0?(v.mediaIndex=null,v.partIndex=null):(v.mediaIndex>=0&&(v.segment=t.segments[v.mediaIndex]),v.partIndex>=0&&v.segment.parts&&(v.part=v.segment.parts[v.partIndex]))),this.syncController_.saveExpiredSegmentInfo(h,t)}},l.pause=function(){this.checkBufferTimeout_&&(ae().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},l.paused=function(){return null===this.checkBufferTimeout_},l.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},l.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},l.resyncLoader=function(){this.transmuxer_&&mg_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},l.remove=function(t,a,h,v){if(void 0===h&&(h=function(){}),void 0===v&&(v=!1),a===1/0&&(a=this.duration_()),a<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var S=1,P=function(){0==--S&&h()};for(var H in(v||!this.audioDisabled_)&&(S++,this.sourceUpdater_.removeAudio(t,a,P)),(v||"main"===this.loaderType_)&&(this.gopBuffer_=function(s,l,u,t){for(var a=Math.ceil((l-t)*go.ONE_SECOND_IN_TS),h=Math.ceil((u-t)*go.ONE_SECOND_IN_TS),v=s.slice(),S=s.length;S--&&!(s[S].pts<=h););if(-1===S)return v;for(var P=S+1;P--&&!(s[P].pts<=a););return P=Math.max(P,0),v.splice(P,S-P+1),v}(this.gopBuffer_,t,a,this.timeMapping_),S++,this.sourceUpdater_.removeVideo(t,a,P)),this.inbandTextTracks_)pf(t,a,this.inbandTextTracks_[H]);pf(t,a,this.segmentMetadataTrack_),P()}else this.logger_("skipping remove because no source updater or starting media info")},l.monitorBuffer_=function(){this.checkBufferTimeout_&&ae().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ae().setTimeout(this.monitorBufferTick_.bind(this),1)},l.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&ae().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ae().setTimeout(this.monitorBufferTick_.bind(this),500)},l.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();!t||("number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},l.isEndOfStream_=function(t,a,h){if(void 0===t&&(t=this.mediaIndex),void 0===a&&(a=this.playlist_),void 0===h&&(h=this.partIndex),!a||!this.mediaSource_)return!1;var v="number"==typeof t&&a.segments[t];return a.endList&&"open"===this.mediaSource_.readyState&&t+1===a.segments.length&&(!v||!v.parts||h+1===v.parts.length)},l.chooseNextRequest_=function(){var t=qv(this.buffered_())||0,a=Math.max(0,t-this.currentTime_()),h=!this.hasPlayed_()&&a>=1,v=a>=this.goalBufferLength_(),S=this.playlist_.segments;if(!S.length||h||v)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var P={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(P.isSyncRequest)P.mediaIndex=function(s,l,u){l=l||[];for(var t=[],a=0,h=0;h<l.length;h++){var v=l[h];if(s===v.timeline&&(t.push(h),(a+=v.duration)>u))return h}return 0===t.length?0:t[t.length-1]}(this.currentTimeline_,S,t);else if(null!==this.mediaIndex){var H=S[this.mediaIndex],Y="number"==typeof this.partIndex?this.partIndex:-1;P.startOfSegment=H.end?H.end:t,H.parts&&H.parts[Y+1]?(P.mediaIndex=this.mediaIndex,P.partIndex=Y+1):P.mediaIndex=this.mediaIndex+1}else{var Z=Va.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),we=Z.segmentIndex,je=Z.startTime,Pe=Z.partIndex;P.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",P.mediaIndex=we,P.startOfSegment=je,P.partIndex=Pe}var Re=S[P.mediaIndex];return Re&&("number"!=typeof P.partIndex||Re&&"number"==typeof P.partIndex&&Re.parts&&Re.parts[P.partIndex])?("number"!=typeof P.partIndex&&Re.parts&&(P.partIndex=0),P.mediaIndex>=S.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(P)):null},l.generateSegmentInfo_=function(t){var a=t.playlist,h=t.mediaIndex,v=t.startOfSegment,S=t.isSyncRequest,P=t.partIndex,H=t.forceTimestampOffset,Y=t.getMediaInfoForTime,Z=a.segments[h],we="number"==typeof P&&Z.parts[P],je={requestId:"segment-loader-"+Math.random(),uri:we&&we.resolvedUri||Z.resolvedUri,mediaIndex:h,partIndex:we?P:null,isSyncRequest:S,startOfSegment:v,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:Z.timeline,duration:we&&we.duration||Z.duration,segment:Z,part:we,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:Y},Pe=typeof H<"u"?H:this.isPendingTimestampOffset_;je.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:Z.timeline,currentTimeline:this.currentTimeline_,startOfSegment:v,buffered:this.buffered_(),overrideCheck:Pe});var Re=qv(this.sourceUpdater_.audioBuffered());return"number"==typeof Re&&(je.audioAppendStart=Re-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(je.gopsToAlignWith=function(s,l,u){if(typeof l>"u"||null===l||!s.length)return[];var a,t=Math.ceil((l-u+3)*go.ONE_SECOND_IN_TS);for(a=0;a<s.length&&!(s[a].pts>t);a++);return s.slice(a)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),je},l.timestampOffsetForSegment_=function(t){return function(s){var l=s.segmentTimeline,u=s.currentTimeline,t=s.startOfSegment,a=s.buffered;return s.overrideCheck||l!==u?l<u?t:a.length?a.end(a.length-1):t:null}(t)},l.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),h=t.bandwidth,v=this.pendingSegment_.duration,S=Va.estimateSegmentRequestTime(v,h,this.playlist_,t.bytesReceived),P=function(s,l,u){return void 0===u&&(u=1),((s.length?s.end(s.length-1):0)-l)/u}(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(S<=P)){var H=function(s){var u=s.currentTime,t=s.bandwidth,a=s.duration,h=s.segmentDuration,v=s.timeUntilRebuffer,S=s.currentTimeline,P=s.syncController,H=s.master.playlists.filter(function(Pe){return!Va.isIncompatible(Pe)}),Y=H.filter(Va.isEnabled);Y.length||(Y=H.filter(function(Pe){return!Va.isDisabled(Pe)}));var we=Y.filter(Va.hasAttribute.bind(null,"BANDWIDTH")).map(function(Pe){var Bt=P.getSyncPoint(Pe,a,S,u)?1:2;return{playlist:Pe,rebufferingImpact:Va.estimateSegmentRequestTime(h,t,Pe)*Bt-v}}),je=we.filter(function(Pe){return Pe.rebufferingImpact<=0});return Eh(je,function(Pe,Re){return Cg(Re.playlist,Pe.playlist)}),je.length?je[0]:(Eh(we,function(Pe,Re){return Pe.rebufferingImpact-Re.rebufferingImpact}),we[0]||null)}({master:this.vhs_.playlists.master,currentTime:a,bandwidth:h,duration:this.duration_(),segmentDuration:v,timeUntilRebuffer:P,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(H){var we=.5;P<=hh&&(we=1),H.playlist&&H.playlist.uri!==this.playlist_.uri&&!(S-P-H.rebufferingImpact<we)&&(this.bandwidth=H.playlist.attributes.BANDWIDTH*Aa.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},l.handleAbort_=function(t){this.logger_("Aborting "+gf(t)),this.mediaRequestsAborted+=1},l.handleProgress_=function(t,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},l.handleTrackInfo_=function(t,a){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(a)||(function(s,l){if(!s&&!l||!s&&l||s&&!l)return!1;if(s===l)return!0;var u=Object.keys(s).sort(),t=Object.keys(l).sort();if(u.length!==t.length)return!1;for(var a=0;a<u.length;a++){var h=u[a];if(h!==t[a]||s[h]!==l[h])return!1}return!0}(this.currentMediaInfo_,a=a||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},l.handleTimingInfo_=function(t,a,h,v){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var S=this.pendingSegment_,P=mf(a);S[P]=S[P]||{},S[P][h]=v,this.logger_("timinginfo: "+a+" - "+h+" - "+v),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},l.handleCaptions_=function(t,a){var h=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(0===a.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,a));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),P={};a.forEach(function(H){P[H.stream]=P[H.stream]||{startTime:1/0,captions:[],endTime:0};var Y=P[H.stream];Y.startTime=Math.min(Y.startTime,H.startTime+S),Y.endTime=Math.max(Y.endTime,H.endTime+S),Y.captions.push(H)}),Object.keys(P).forEach(function(H){var Y=P[H],Z=Y.startTime,we=Y.endTime,je=Y.captions,Pe=h.inbandTextTracks_;h.logger_("adding cues from "+Z+" -> "+we+" for "+H),function(s,l,u){if(!s[u]){l.trigger({type:"usage",name:"vhs-608"}),l.trigger({type:"usage",name:"hls-608"});var t=u;/^cc708_/.test(u)&&(t="SERVICE"+u.split("_")[1]);var a=l.textTracks().getTrackById(t);if(a)s[u]=a;else{var v=u,S=u,P=!1,H=(l.options_.vhs&&l.options_.vhs.captionServices||{})[t];H&&(v=H.label,S=H.language,P=H.default),s[u]=l.addRemoteTextTrack({kind:"captions",id:t,default:P,label:v,language:S},!1).track}}}(Pe,h.vhs_.tech_,H),pf(Z,we,Pe[H]),function(s){var l=s.inbandTextTracks,u=s.captionArray,t=s.timestampOffset;if(u){var a=ae().WebKitDataCue||ae().VTTCue;u.forEach(function(h){l[h.stream].addCue(new a(h.startTime+t,h.endTime+t,h.text))})}}({captionArray:je,inbandTextTracks:Pe,timestampOffset:S})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},l.handleId3_=function(t,a,h){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,a,h));var S=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();(function(s,l,u){s.metadataTrack_||(s.metadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,s.metadataTrack_.inBandMetadataTrackDispatchType=l)})(this.inbandTextTracks_,h,this.vhs_.tech_),function(s){var l=s.inbandTextTracks,u=s.metadataArray,t=s.timestampOffset,a=s.videoDuration;if(u){var h=ae().WebKitDataCue||ae().VTTCue,v=l.metadataTrack_;if(v&&(u.forEach(function(we){var je=we.cueTime+t;"number"!=typeof je||ae().isNaN(je)||je<0||!(je<1/0)||we.frames.forEach(function(Pe){var Re=new h(je,je,Pe.value||Pe.url||Pe.data||"");Re.frame=Pe,Re.value=Pe,function(s){Object.defineProperties(s.frame,{id:{get:function(){return Ct.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),s.value.key}},value:{get:function(){return Ct.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),s.value.data}},privateData:{get:function(){return Ct.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),s.value.data}}})}(Re),v.addCue(Re)})}),v.cues&&v.cues.length)){for(var S=v.cues,P=[],H=0;H<S.length;H++)S[H]&&P.push(S[H]);var Y=P.reduce(function(we,je){var Pe=we[je.startTime]||[];return Pe.push(je),we[je.startTime]=Pe,we},{}),Z=Object.keys(Y).sort(function(we,je){return Number(we)-Number(je)});Z.forEach(function(we,je){var Pe=Y[we],Re=Number(Z[je+1])||a;Pe.forEach(function(Bt){Bt.endTime=Re})})}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:S,videoDuration:this.duration_()})}},l.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},l.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(a){return a()})},l.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(a){return a()})},l.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!(!t||this.getCurrentMediaInfo_()&&Pg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},l.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},l.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},l.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,a=this.getCurrentMediaInfo_();return!(!t||!a||a.hasVideo&&!t.videoTimingInfo||a.hasAudio&&!this.audioDisabled_&&!a.isMuxed&&!t.audioTimingInfo||Pg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},l.handleData_=function(t,a){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,t,a));var h=this.pendingSegment_;if(this.setTimeMapping_(h.timeline),this.updateMediaSecondsLoaded_(h.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),h.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),h.isFmp4=t.isFmp4,h.timingInfo=h.timingInfo||{},h.isFmp4)this.trigger("fmp4"),h.timingInfo.start=h[mf(a.type)].start;else{var P,v=this.getCurrentMediaInfo_(),S="main"===this.loaderType_&&v&&v.hasVideo;S&&(P=h.videoTimingInfo.start),h.timingInfo.start=this.trueSegmentStart_({currentStart:h.timingInfo.start,playlist:h.playlist,mediaIndex:h.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:S,firstVideoFrameTimeForData:P,videoTimingInfo:h.videoTimingInfo,audioTimingInfo:h.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(h,a.type),this.updateSourceBufferTimestampOffset_(h),h.isSyncRequest){this.updateTimingInfoEnd_(h),this.syncController_.saveSegmentTimingInfo({segmentInfo:h,shouldSaveTimelineMapping:"main"===this.loaderType_});var H=this.chooseNextRequest_();if(H.mediaIndex!==h.mediaIndex||H.partIndex!==h.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}h.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(h,a)}}},l.updateAppendInitSegmentStatus=function(t,a){"main"===this.loaderType_&&"number"==typeof t.timestampOffset&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==t.playlist&&(this.appendInitSegment_[a]=!0)},l.getInitSegmentAndUpdateState_=function(t){var a=t.type,h=t.initSegment,v=t.map,S=t.playlist;if(v){var P=wd(v);if(this.activeInitSegmentId_===P)return null;h=this.initSegmentForMap(v,!0).bytes,this.activeInitSegmentId_=P}return h&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=S,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,h):null},l.handleQuotaExceededError_=function(t,a){var h=this,v=t.segmentInfo,S=t.type,P=t.bytes,H=this.sourceUpdater_.audioBuffered(),Y=this.sourceUpdater_.videoBuffered();H.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Ed(H).join(", ")),Y.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Ed(Y).join(", "));var Z=H.length?H.start(0):0,we=H.length?H.end(H.length-1):0,je=Y.length?Y.start(0):0,Pe=Y.length?Y.end(Y.length-1):0;if(we-Z<=1&&Pe-je<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+P.byteLength+", audio buffer: "+Ed(H).join(", ")+", video buffer: "+Ed(Y).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:v,type:S,bytes:P}));var Bt=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+Bt),this.remove(0,Bt,function(){h.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),h.waitingOnRemove_=!1,h.quotaExceededErrorRetryTimeout_=ae().setTimeout(function(){h.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),h.quotaExceededErrorRetryTimeout_=null,h.processCallQueue_()},1e3)},!0)},l.handleAppendError_=function(t,a){var h=t.segmentInfo,v=t.type,S=t.bytes;if(a){if(22===a.code)return void this.handleQuotaExceededError_({segmentInfo:h,type:v,bytes:S});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(v+" append of "+S.length+"b failed for segment #"+h.mediaIndex+" in playlist "+h.playlist.id),this.trigger("appenderror")}},l.appendToSourceBuffer_=function(t){var a=t.segmentInfo,h=t.type,v=t.initSegment,S=t.data,P=t.bytes;if(!P){var H=[S],Y=S.byteLength;v&&(H.unshift(v),Y+=v.byteLength),P=function(s){var u,l=0;return s.bytes&&(u=new Uint8Array(s.bytes),s.segments.forEach(function(t){u.set(t,l),l+=t.byteLength})),u}({bytes:Y,segments:H})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:h,bytes:P},this.handleAppendError_.bind(this,{segmentInfo:a,type:h,bytes:P}))},l.handleSegmentTimingInfo_=function(t,a,h){if(this.pendingSegment_&&a===this.pendingSegment_.requestId){var v=this.pendingSegment_.segment,S=t+"TimingInfo";v[S]||(v[S]={}),v[S].transmuxerPrependedSeconds=h.prependedContentDuration||0,v[S].transmuxedPresentationStart=h.start.presentation,v[S].transmuxedDecodeStart=h.start.decode,v[S].transmuxedPresentationEnd=h.end.presentation,v[S].transmuxedDecodeEnd=h.end.decode,v[S].baseMediaDecodeTime=h.baseMediaDecodeTime}},l.appendData_=function(t,a){var h=a.type,v=a.data;if(v&&v.byteLength&&("audio"!==h||!this.audioDisabled_)){var S=this.getInitSegmentAndUpdateState_({type:h,initSegment:a.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:h,initSegment:S,data:v})}},l.loadSegment_=function(t){var a=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"==typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push(function(){var h=De({},t,{forceTimestampOffset:!0});De(t,a.generateSegmentInfo_(h)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(t)})},l.updateTransmuxerAndRequestSegment_=function(t){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var h=this.createSimplifiedSegmentObj_(t),H=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)||null!==this.mediaIndex&&t.timeline!==this.currentTimeline_&&t.timeline>0;this.logger_("Requesting "+gf(t)),h.map&&!h.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Y0({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:h,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:H,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(Z){var we=Z.message,je=Z.level,Pe=Z.stream;a.logger_(gf(t)+" logged from transmuxer stream "+Pe+" as a "+je+": "+we)}})},l.trimBackBuffer_=function(t){var a=function(s,l,u){var t=l-Aa.BACK_BUFFER_LENGTH;return s.length&&(t=Math.max(t,s.start(0))),Math.min(l-u,t)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},l.createSimplifiedSegmentObj_=function(t){var a=t.segment,h=t.part,v={resolvedUri:h?h.resolvedUri:a.resolvedUri,byterange:h?h.byterange:a.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},S=t.playlist.segments[t.mediaIndex-1];if(S&&S.timeline===a.timeline&&(S.videoTimingInfo?v.baseStartTime=S.videoTimingInfo.transmuxedDecodeEnd:S.audioTimingInfo&&(v.baseStartTime=S.audioTimingInfo.transmuxedDecodeEnd)),a.key){var P=a.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);v.key=this.segmentKey(a.key),v.key.iv=P}return a.map&&(v.map=this.initSegmentForMap(a.map)),v},l.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},l.saveBandwidthRelatedStats_=function(t,a){this.pendingSegment_.byteLength=a.bytesReceived,t<Pd?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record "+Pd):(this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime)},l.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},l.segmentRequestFinished_=function(t,a,h){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,a,h));else if(this.saveTransferStats_(a.stats),this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",-102===t.code)return;return this.pause(),-101===t.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var v=this.pendingSegment_;this.saveBandwidthRelatedStats_(v.duration,a.stats),v.endOfAllRequests=a.endOfAllRequests,h.gopInfo&&(this.gopBuffer_=function(s,l,u){if(!l.length)return s;if(u)return l.slice();for(var t=l[0].pts,a=0;a<s.length&&!(s[a].pts>=t);a++);return s.slice(0,a).concat(l)}(this.gopBuffer_,h.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(v)}},l.setTimeMapping_=function(t){var a=this.syncController_.mappingForTimeline(t);null!==a&&(this.timeMapping_=a)},l.updateMediaSecondsLoaded_=function(t){this.mediaSecondsLoaded+="number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:t.duration},l.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},l.trueSegmentStart_=function(t){var a=t.currentStart,v=t.mediaIndex,S=t.firstVideoFrameTimeForData;if(typeof a<"u")return a;if(!t.useVideoTimingInfo)return t.audioTimingInfo.start;var we=t.playlist.segments[v-1];return 0===v||!we||typeof we.start>"u"||we.end!==S+t.currentVideoTimestampOffset?S:t.videoTimingInfo.start},l.waitForAppendsToComplete_=function(t){var a=this.getCurrentMediaInfo_(t);if(!a)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var P="main"===this.loaderType_&&a.hasVideo,H=!this.audioDisabled_&&a.hasAudio&&!a.isMuxed;if(t.waitingOnAppends=0,!t.hasAppendedData_)return!t.timingInfo&&"number"==typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);P&&t.waitingOnAppends++,H&&t.waitingOnAppends++,P&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),H&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},l.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},l.checkForIllegalMediaSwitch=function(t){var a=function(s,l,u){return"main"===s&&l&&u?u.hasAudio||u.hasVideo?l.hasVideo&&!u.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!l.hasVideo&&u.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!a&&(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0)},l.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"==typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var a=!1;t.timestampOffset-=t.timingInfo.start,t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),a=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},l.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var a=this.getMediaInfo_(),v="main"===this.loaderType_&&a&&a.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;!v||(t.timingInfo.end="number"==typeof v.end?v.end:v.start+t.duration)},l.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var a=function(s,l){if("hls"!==l)return null;var u=function(s,l){return Math.max(s&&"number"==typeof s.start&&"number"==typeof s.end?s.end-s.start:0,l&&"number"==typeof l.start&&"number"==typeof l.end?l.end-l.start:0)}(s.audioTimingInfo,s.videoTimingInfo);if(!u)return null;var t=s.playlist.targetDuration,a=yf({segmentDuration:u,maxDuration:2*t}),h=yf({segmentDuration:u,maxDuration:t});return a||h?{severity:a?"warn":"info",message:"Segment with index "+s.mediaIndex+" from playlist "+s.playlist.id+" has a duration of "+u+" when the reported duration is "+s.duration+" and the target duration is "+t+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1"}:null}(t,this.sourceType_);if(a&&("warn"===a.severity?Ct.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+gf(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var h=t.segment;h.end&&this.currentTime_()-h.end>3*t.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())}else this.logger_("Throwing away un-appended sync request "+gf(t))},l.recordThroughput_=function(t){if(t.duration<Pd)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record "+Pd);else{var a=this.throughput.rate,h=Date.now()-t.endOfAllRequests+1,v=Math.floor(t.byteLength/h*8*1e3);this.throughput.rate+=(v-a)/++this.throughput.count}},l.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var a=t.segment,h=a.start,v=a.end;if(dp(h)&&dp(v)){pf(h,v,this.segmentMetadataTrack_);var S=ae().WebKitDataCue||ae().VTTCue,P={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:h,end:v},Y=new S(h,v,JSON.stringify(P));Y.value=P,this.segmentMetadataTrack_.addCue(Y)}}},s}(Ct.EventTarget);function el(){}var nl,bf=function(s){return"string"!=typeof s?s:s.replace(/./,function(l){return l.toUpperCase()})},kg=["video","audio"],fp=function(s,l){var u=l[s+"Buffer"];return u&&u.updating||l.queuePending[s]},pp=function g(s,l){if(0!==l.queue.length){var u=0,t=l.queue[u];if("mediaSource"===t.type)return void(!l.updating()&&"closed"!==l.mediaSource.readyState&&(l.queue.shift(),t.action(l),t.doneFn&&t.doneFn(),g("audio",l),g("video",l)));if("mediaSource"!==s&&l.ready()&&"closed"!==l.mediaSource.readyState&&!fp(s,l)){if(t.type!==s){if(u=function(s,l){for(var u=0;u<l.length;u++){var t=l[u];if("mediaSource"===t.type)return null;if(t.type===s)return u}return null}(s,l.queue),null===u)return;t=l.queue[u]}if(l.queue.splice(u,1),l.queuePending[s]=t,t.action(s,l),!t.doneFn)return l.queuePending[s]=null,void g(s,l)}}},Ko=function(s,l){var u=l[s+"Buffer"],t=bf(s);!u||(u.removeEventListener("updateend",l["on"+t+"UpdateEnd_"]),u.removeEventListener("error",l["on"+t+"Error_"]),l.codecs[s]=null,l[s+"Buffer"]=null)},Dl=function(s,l){return s&&l&&-1!==Array.prototype.indexOf.call(s.sourceBuffers,l)},tl_appendBuffer=function(s,l,u){return function(t,a){var h=a[t+"Buffer"];if(Dl(a.mediaSource,h)){a.logger_("Appending segment "+l.mediaIndex+"'s "+s.length+" bytes to "+t+"Buffer");try{h.appendBuffer(s)}catch(v){a.logger_("Error with code "+v.code+" "+(22===v.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+l.mediaIndex+" to "+t+"Buffer"),a.queuePending[t]=null,u(v)}}}},tl_remove=function(s,l){return function(u,t){var a=t[u+"Buffer"];if(Dl(t.mediaSource,a)){t.logger_("Removing "+s+" to "+l+" from "+u+"Buffer");try{a.remove(s,l)}catch{t.logger_("Remove "+s+" to "+l+" from "+u+"Buffer failed")}}}},tl_timestampOffset=function(s){return function(l,u){var t=u[l+"Buffer"];!Dl(u.mediaSource,t)||(u.logger_("Setting "+l+"timestampOffset to "+s),t.timestampOffset=s)}},tl_callback=function(s){return function(l,u){s()}},tl_endOfStream=function(s){return function(l){if("open"===l.mediaSource.readyState){l.logger_("Calling mediaSource endOfStream("+(s||"")+")");try{l.mediaSource.endOfStream(s)}catch(u){Ct.log.warn("Failed to call media source endOfStream",u)}}}},tl_duration=function(s){return function(l){l.logger_("Setting mediaSource duration to "+s);try{l.mediaSource.duration=s}catch(u){Ct.log.warn("Failed to set media source duration",u)}}},tl_addSourceBuffer=function(s,l){return function(u){var t=bf(s),a=xn(l);u.logger_("Adding "+s+"Buffer with codec "+l+" to mediaSource");var h=u.mediaSource.addSourceBuffer(a);h.addEventListener("updateend",u["on"+t+"UpdateEnd_"]),h.addEventListener("error",u["on"+t+"Error_"]),u.codecs[s]=l,u[s+"Buffer"]=h}},tl_removeSourceBuffer=function(s){return function(l){var u=l[s+"Buffer"];if(Ko(s,l),Dl(l.mediaSource,u)){l.logger_("Removing "+s+"Buffer with codec "+l.codecs[s]+" from mediaSource");try{l.mediaSource.removeSourceBuffer(u)}catch(t){Ct.log.warn("Failed to removeSourceBuffer "+s+"Buffer",t)}}}},tl_changeType=function(s){return function(l,u){var t=u[l+"Buffer"],a=xn(s);!Dl(u.mediaSource,t)||u.codecs[l]!==s&&(u.logger_("changing "+l+"Buffer codec from "+u.codecs[l]+" to "+s),t.changeType(a),u.codecs[l]=s)}},Lu=function(s){var l=s.type,u=s.sourceUpdater;u.queue.push({type:l,action:s.action,doneFn:s.doneFn,name:s.name}),pp(l,u)},Mg=function(s,l){return function(u){if(l.queuePending[s]){var t=l.queuePending[s].doneFn;l.queuePending[s]=null,t&&t(l[s+"Error_"])}pp(s,l)}},gp=function(g){function s(u){var t;return(t=g.call(this)||this).mediaSource=u,t.sourceopenListener_=function(){return pp("mediaSource",Ee(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=Eo("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=Mg("video",Ee(t)),t.onAudioUpdateEnd_=Mg("audio",Ee(t)),t.onVideoError_=function(a){t.videoError_=a},t.onAudioError_=function(a){t.audioError_=a},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}$e(s,g);var l=s.prototype;return l.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},l.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},l.hasInitializedAnyEme=function(){return this.initializedEme_},l.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},l.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},l.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},l.addSourceBuffer=function(t,a){Lu({type:"mediaSource",sourceUpdater:this,action:tl_addSourceBuffer(t,a),name:"addSourceBuffer"})},l.abort=function(t){Lu({type:t,sourceUpdater:this,action:function(s,l){if("open"===l.mediaSource.readyState){var u=l[s+"Buffer"];if(Dl(l.mediaSource,u)){l.logger_("calling abort on "+s+"Buffer");try{u.abort()}catch(t){Ct.log.warn("Failed to abort on "+s+"Buffer",t)}}}},name:"abort"})},l.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?Lu({type:"mediaSource",sourceUpdater:this,action:tl_removeSourceBuffer(t),name:"removeSourceBuffer"}):Ct.log.error("removeSourceBuffer is not supported!")},l.canRemoveSourceBuffer=function(){return!Ct.browser.IE_VERSION&&!Ct.browser.IS_FIREFOX&&ae().MediaSource&&ae().MediaSource.prototype&&"function"==typeof ae().MediaSource.prototype.removeSourceBuffer},s.canChangeType=function(){return ae().SourceBuffer&&ae().SourceBuffer.prototype&&"function"==typeof ae().SourceBuffer.prototype.changeType},l.canChangeType=function(){return this.constructor.canChangeType()},l.changeType=function(t,a){this.canChangeType()?Lu({type:t,sourceUpdater:this,action:tl_changeType(a),name:"changeType"}):Ct.log.error("changeType is not supported!")},l.addOrChangeSourceBuffers=function(t){var a=this;if(!t||"object"!=typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(h){var v=t[h];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(h,v);a.canChangeType()&&a.changeType(h,v)})},l.appendBuffer=function(t,a){var h=this,v=t.segmentInfo,S=t.type,P=t.bytes;if(this.processedAppend_=!0,"audio"===S&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,a]),void this.logger_("delayed audio append of "+P.length+" until video append");if(Lu({type:S,sourceUpdater:this,action:tl_appendBuffer(P,v||{mediaIndex:-1},a),doneFn:a,name:"appendBuffer"}),"video"===S){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var Y=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+Y.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,Y.forEach(function(Z){h.appendBuffer.apply(h,Z)})}},l.audioBuffered=function(){return Dl(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Ct.createTimeRange()},l.videoBuffered=function(){return Dl(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Ct.createTimeRange()},l.buffered=function(){var t=Dl(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Dl(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!t?this.audioBuffered():t&&!a?this.videoBuffered():function(s,l){var u=null,t=null,a=0,h=[],v=[];if(!(s&&s.length&&l&&l.length))return Ct.createTimeRange();for(var S=s.length;S--;)h.push({time:s.start(S),type:"start"}),h.push({time:s.end(S),type:"end"});for(S=l.length;S--;)h.push({time:l.start(S),type:"start"}),h.push({time:l.end(S),type:"end"});for(h.sort(function(P,H){return P.time-H.time}),S=0;S<h.length;S++)"start"===h[S].type?2==++a&&(u=h[S].time):"end"===h[S].type&&1==--a&&(t=h[S].time),null!==u&&null!==t&&(v.push([u,t]),u=null,t=null);return Ct.createTimeRanges(v)}(this.audioBuffered(),this.videoBuffered())},l.setDuration=function(t,a){void 0===a&&(a=el),Lu({type:"mediaSource",sourceUpdater:this,action:tl_duration(t),name:"duration",doneFn:a})},l.endOfStream=function(t,a){void 0===t&&(t=null),void 0===a&&(a=el),"string"!=typeof t&&(t=void 0),Lu({type:"mediaSource",sourceUpdater:this,action:tl_endOfStream(t),name:"endOfStream",doneFn:a})},l.removeAudio=function(t,a,h){void 0===h&&(h=el),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Lu({type:"audio",sourceUpdater:this,action:tl_remove(t,a),doneFn:h,name:"remove"}):h()},l.removeVideo=function(t,a,h){void 0===h&&(h=el),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Lu({type:"video",sourceUpdater:this,action:tl_remove(t,a),doneFn:h,name:"remove"}):h()},l.updating=function(){return!(!fp("audio",this)&&!fp("video",this))},l.audioTimestampOffset=function(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Lu({type:"audio",sourceUpdater:this,action:tl_timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},l.videoTimestampOffset=function(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(Lu({type:"video",sourceUpdater:this,action:tl_timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},l.audioQueueCallback=function(t){!this.audioBuffer||Lu({type:"audio",sourceUpdater:this,action:tl_callback(t),name:"callback"})},l.videoQueueCallback=function(t){!this.videoBuffer||Lu({type:"video",sourceUpdater:this,action:tl_callback(t),name:"callback"})},l.dispose=function(){var t=this;this.trigger("dispose"),kg.forEach(function(a){t.abort(a),t.canRemoveSourceBuffer()?t.removeSourceBuffer(a):t[a+"QueueCallback"](function(){return Ko(a,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},s}(Ct.EventTarget),wy=function(s){return decodeURIComponent(escape(String.fromCharCode.apply(null,s)))},Og=new Uint8Array("\n\n".split("").map(function(g){return g.charCodeAt(0)})),Rg=function(g){function s(u,t){var a;return void 0===t&&(t={}),(a=g.call(this,u,t)||this).mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=u.featuresNativeTextTracks,a.shouldSaveSegmentTimingInfo_=!1,a}$e(s,g);var l=s.prototype;return l.createTransmuxer_=function(){return null},l.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Ct.createTimeRanges();var t=this.subtitlesTrack_.cues;return Ct.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])},l.initSegmentForMap=function(t,a){if(void 0===a&&(a=!1),!t)return null;var h=wd(t),v=this.initSegments_[h];if(a&&!v&&t.bytes){var P=new Uint8Array(Og.byteLength+t.bytes.byteLength);P.set(t.bytes),P.set(Og,t.bytes.byteLength),this.initSegments_[h]=v={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:P}}return v||t},l.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},l.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},l.track=function(t){return typeof t>"u"||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},l.remove=function(t,a){pf(t,a,this.subtitlesTrack_)},l.fillBuffer_=function(){var t=this,a=this.chooseNextRequest_();if(a){if(null===this.syncController_.timestampOffsetForTimeline(a.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(a)}},l.timestampOffsetForSegment_=function(){return null},l.chooseNextRequest_=function(){return this.skipEmptySegments_(g.prototype.chooseNextRequest_.call(this))},l.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},l.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},l.segmentRequestFinished_=function(t,a,h){var v=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(a.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return-101===t.code&&this.handleTimeout_(),-102===t.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var S=this.pendingSegment_;this.saveBandwidthRelatedStats_(S.duration,a.stats),this.state="APPENDING",this.trigger("appending");var P=S.segment;if(P.map&&(P.map.bytes=a.map.bytes),S.bytes=a.bytes,"function"!=typeof ae().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var H,Y=function(){v.subtitlesTrack_.tech_.off("vttjsloaded",H),v.stopForError({message:"Error loading vtt.js"})};return H=function(){v.subtitlesTrack_.tech_.off("vttjserror",Y),v.segmentRequestFinished_(t,a,h)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",H),void this.subtitlesTrack_.tech_.one("vttjserror",Y)}P.requested=!0;try{this.parseVTTCues_(S)}catch(Z){return void this.stopForError({message:Z.message})}if(this.updateTimeMapping_(S,this.syncController_.timelines[S.timeline],this.playlist_),S.timingInfo=S.cues.length?{start:S.cues[0].startTime,end:S.cues[S.cues.length-1].endTime}:{start:S.startOfSegment,end:S.startOfSegment+S.duration},S.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");S.byteLength=S.bytes.byteLength,this.mediaSecondsLoaded+=P.duration,S.cues.forEach(function(Z){v.subtitlesTrack_.addCue(v.featuresNativeTextTracks_?new(ae().VTTCue)(Z.startTime,Z.endTime,Z.text):Z)}),function(s){var l=s.cues;if(l)for(var u=0;u<l.length;u++){for(var t=[],a=0,h=0;h<l.length;h++)l[u].startTime===l[h].startTime&&l[u].endTime===l[h].endTime&&l[u].text===l[h].text&&++a>1&&t.push(l[h]);t.length&&t.forEach(function(v){return s.removeCue(v)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},l.handleData_=function(){},l.updateTimingInfoEnd_=function(){},l.parseVTTCues_=function(t){var a,h=!1;"function"==typeof ae().TextDecoder?a=new(ae().TextDecoder)("utf8"):(a=ae().WebVTT.StringDecoder(),h=!0);var v=new(ae().WebVTT.Parser)(ae(),ae().vttjs,a);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},v.oncue=t.cues.push.bind(t.cues),v.ontimestampmap=function(H){t.timestampmap=H},v.onparsingerror=function(H){Ct.log.warn("Error encountered when parsing cues: "+H.message)},t.segment.map){var S=t.segment.map.bytes;h&&(S=wy(S)),v.parse(S)}var P=t.bytes;h&&(P=wy(P)),v.parse(P),v.flush()},l.updateTimeMapping_=function(t,a,h){var v=t.segment;if(a){if(!t.cues.length)return void(v.empty=!0);var S=t.timestampmap,P=S.MPEGTS/go.ONE_SECOND_IN_TS-S.LOCAL+a.mapping;t.cues.forEach(function(Z){Z.startTime+=P,Z.endTime+=P}),h.syncInfo||(h.syncInfo={mediaSequence:h.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-v.duration)})}},s}(hp),Ng=function(s,l){for(var u=s.cues,t=0;t<u.length;t++){var a=u[t];if(l>=a.adStartTime&&l<=a.adEndTime)return a}return null},Ch=[{name:"VOD",run:function(s,l,u,t,a){return u!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(s,l,u,t,a){if(!Object.keys(s.timelineToDatetimeMappings).length)return null;var h=null,v=null,S=wm(l);a=a||0;for(var P=0;P<S.length;P++){var Y=S[l.endList||0===a?P:S.length-(P+1)],Z=Y.segment,we=s.timelineToDatetimeMappings[Z.timeline];if(we&&Z.dateTimeObject){var Pe=Z.dateTimeObject.getTime()/1e3+we;if(Z.parts&&"number"==typeof Y.partIndex)for(var Re=0;Re<Y.partIndex;Re++)Pe+=Z.parts[Re].duration;var Bt=Math.abs(a-Pe);if(null!==v&&(0===Bt||v<Bt))break;v=Bt,h={time:Pe,segmentIndex:Y.segmentIndex,partIndex:Y.partIndex}}}return h}},{name:"Segment",run:function(s,l,u,t,a){var h=null,v=null;a=a||0;for(var S=wm(l),P=0;P<S.length;P++){var Y=S[l.endList||0===a?P:S.length-(P+1)],Z=Y.segment,we=Y.part&&Y.part.start||Z&&Z.start;if(Z.timeline===t&&typeof we<"u"){var je=Math.abs(a-we);if(null!==v&&v<je)break;(!h||null===v||v>=je)&&(v=je,h={time:we,segmentIndex:Y.segmentIndex,partIndex:Y.partIndex})}}return h}},{name:"Discontinuity",run:function(s,l,u,t,a){var h=null;if(a=a||0,l.discontinuityStarts&&l.discontinuityStarts.length)for(var v=null,S=0;S<l.discontinuityStarts.length;S++){var P=l.discontinuityStarts[S],Y=s.discontinuities[l.discontinuitySequence+S+1];if(Y){var Z=Math.abs(a-Y.time);if(null!==v&&v<Z)break;(!h||null===v||v>=Z)&&(v=Z,h={time:Y.time,segmentIndex:P,partIndex:null})}}return h}},{name:"Playlist",run:function(s,l,u,t,a){return l.syncInfo?{time:l.syncInfo.time,segmentIndex:l.syncInfo.mediaSequence-l.mediaSequence,partIndex:null}:null}}],mp=function(g){function s(u){var t;return(t=g.call(this)||this).timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=Eo("SyncController"),t}$e(s,g);var l=s.prototype;return l.getSyncPoint=function(t,a,h,v){var S=this.runStrategies_(t,a,h,v);return S.length?this.selectSyncPoint_(S,{key:"time",value:v}):null},l.getExpiredTime=function(t,a){if(!t||!t.segments)return null;var h=this.runStrategies_(t,a,t.discontinuitySequence,0);if(!h.length)return null;var v=this.selectSyncPoint_(h,{key:"segmentIndex",value:0});return v.segmentIndex>0&&(v.time*=-1),Math.abs(v.time+fh({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:v.segmentIndex,endIndex:0}))},l.runStrategies_=function(t,a,h,v){for(var S=[],P=0;P<Ch.length;P++){var H=Ch[P],Y=H.run(this,t,a,h,v);Y&&(Y.strategy=H.name,S.push({strategy:H.name,syncPoint:Y}))}return S},l.selectSyncPoint_=function(t,a){for(var h=t[0].syncPoint,v=Math.abs(t[0].syncPoint[a.key]-a.value),S=t[0].strategy,P=1;P<t.length;P++){var H=Math.abs(t[P].syncPoint[a.key]-a.value);H<v&&(v=H,h=t[P].syncPoint,S=t[P].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy ["+S+"]: [time:"+h.time+", segmentIndex:"+h.segmentIndex+("number"==typeof h.partIndex?",partIndex:"+h.partIndex:"")+"]"),h},l.saveExpiredSegmentInfo=function(t,a){for(var v=a.mediaSequence-t.mediaSequence-1;v>=0;v--){var S=t.segments[v];if(S&&typeof S.start<"u"){a.syncInfo={mediaSequence:t.mediaSequence+v,time:S.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+", mediaSequence: "+a.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},l.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var a=t.segments[0],h=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-h}},l.saveSegmentTimingInfo=function(t){var a=t.segmentInfo,h=t.shouldSaveTimelineMapping,v=this.calculateSegmentTimeMapping_(a,a.timingInfo,h),S=a.segment;v&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:S.start}));var P=S.dateTimeObject;S.discontinuity&&h&&P&&(this.timelineToDatetimeMappings[S.timeline]=-P.getTime()/1e3)},l.timestampOffsetForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time},l.mappingForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping},l.calculateSegmentTimeMapping_=function(t,a,h){var H,Y,v=t.segment,S=t.part,P=this.timelines[t.timeline];if("number"==typeof t.timestampOffset)P={time:t.startOfSegment,mapping:t.startOfSegment-a.start},h&&(this.timelines[t.timeline]=P,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+P.time+"] [mapping: "+P.mapping+"]")),H=t.startOfSegment,Y=a.end+P.mapping;else{if(!P)return!1;H=a.start+P.mapping,Y=a.end+P.mapping}return S&&(S.start=H,S.end=Y),(!v.start||H<v.start)&&(v.start=H),v.end=Y,!0},l.saveDiscontinuitySyncInfo_=function(t){var a=t.playlist,h=t.segment;if(h.discontinuity)this.discontinuities[h.timeline]={time:h.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var v=0;v<a.discontinuityStarts.length;v++){var S=a.discontinuityStarts[v],P=a.discontinuitySequence+v+1,H=S-t.mediaIndex,Y=Math.abs(H);if(!this.discontinuities[P]||this.discontinuities[P].accuracy>Y){var Z;Z=H<0?h.start-fh({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex,endIndex:S}):h.end+fh({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:t.mediaIndex+1,endIndex:S}),this.discontinuities[P]={time:Z,accuracy:Y}}}},l.dispose=function(){this.trigger("dispose"),this.off()},s}(Ct.EventTarget),p0=function(g){function s(){var u;return(u=g.call(this)||this).pendingTimelineChanges_={},u.lastTimelineChanges_={},u}$e(s,g);var l=s.prototype;return l.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},l.pendingTimelineChange=function(t){var a=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.pendingTimelineChanges_[a]={type:a,from:h,to:v},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},l.lastTimelineChange=function(t){var a=t.type,h=t.from,v=t.to;return"number"==typeof h&&"number"==typeof v&&(this.lastTimelineChanges_[a]={type:a,from:h,to:v},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},l.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},s}(Ct.EventTarget),g0=gg(ly(function(){function g(Pe,Re,Bt){return Pe(Bt={path:Re,exports:{},require:function(tn,on){return function s(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},Bt.exports),Bt.exports}var l=g(function(Pe){function Re(It,tn){for(var on=0;on<tn.length;on++){var Kt=tn[on];Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(It,Kt.key,Kt)}}Pe.exports=function Bt(It,tn,on){return tn&&Re(It.prototype,tn),on&&Re(It,on),It},Pe.exports.default=Pe.exports,Pe.exports.__esModule=!0}),u=g(function(Pe){function Re(Bt,It){return Pe.exports=Re=Object.setPrototypeOf||function(on,Kt){return on.__proto__=Kt,on},Pe.exports.default=Pe.exports,Pe.exports.__esModule=!0,Re(Bt,It)}Pe.exports=Re,Pe.exports.default=Pe.exports,Pe.exports.__esModule=!0}),t=g(function(Pe){Pe.exports=function Re(Bt,It){Bt.prototype=Object.create(It.prototype),Bt.prototype.constructor=Bt,u(Bt,It)},Pe.exports.default=Pe.exports,Pe.exports.__esModule=!0}),a=function(){function Pe(){this.listeners={}}var Re=Pe.prototype;return Re.on=function(It,tn){this.listeners[It]||(this.listeners[It]=[]),this.listeners[It].push(tn)},Re.off=function(It,tn){if(!this.listeners[It])return!1;var on=this.listeners[It].indexOf(tn);return this.listeners[It]=this.listeners[It].slice(0),this.listeners[It].splice(on,1),on>-1},Re.trigger=function(It){var tn=this.listeners[It];if(tn)if(2===arguments.length)for(var on=tn.length,Kt=0;Kt<on;++Kt)tn[Kt].call(this,arguments[1]);else for(var jn=Array.prototype.slice.call(arguments,1),Hn=tn.length,gn=0;gn<Hn;++gn)tn[gn].apply(this,jn)},Re.dispose=function(){this.listeners={}},Re.pipe=function(It){this.on("data",function(tn){It.push(tn)})},Pe}(),S=null,P=function(){function Pe(Bt){S||(S=function(){var Kt,jn,Hn,Ln,hs,Kr,Eu,Fs,Re=[[[],[],[],[],[]],[[],[],[],[],[]]],Bt=Re[0],It=Re[1],tn=Bt[4],on=It[4],gn=[],Xt=[];for(Kt=0;Kt<256;Kt++)Xt[(gn[Kt]=Kt<<1^283*(Kt>>7))^Kt]=Kt;for(jn=Hn=0;!tn[jn];jn^=Ln||1,Hn=Xt[Hn]||1)for(tn[jn]=Kr=(Kr=Hn^Hn<<1^Hn<<2^Hn<<3^Hn<<4)>>8^255&Kr^99,on[Kr]=jn,Fs=16843009*gn[hs=gn[Ln=gn[jn]]]^65537*hs^257*Ln^16843008*jn,Eu=257*gn[Kr]^16843008*Kr,Kt=0;Kt<4;Kt++)Bt[Kt][jn]=Eu=Eu<<24^Eu>>>8,It[Kt][Kr]=Fs=Fs<<24^Fs>>>8;for(Kt=0;Kt<5;Kt++)Bt[Kt]=Bt[Kt].slice(0),It[Kt]=It[Kt].slice(0);return Re}()),this._tables=[[S[0][0].slice(),S[0][1].slice(),S[0][2].slice(),S[0][3].slice(),S[0][4].slice()],[S[1][0].slice(),S[1][1].slice(),S[1][2].slice(),S[1][3].slice(),S[1][4].slice()]];var It,tn,on,Kt=this._tables[0][4],jn=this._tables[1],Hn=Bt.length,gn=1;if(4!==Hn&&6!==Hn&&8!==Hn)throw new Error("Invalid aes key size");var Xt=Bt.slice(0),Ln=[];for(this._key=[Xt,Ln],It=Hn;It<4*Hn+28;It++)on=Xt[It-1],(It%Hn==0||8===Hn&&It%Hn==4)&&(on=Kt[on>>>24]<<24^Kt[on>>16&255]<<16^Kt[on>>8&255]<<8^Kt[255&on],It%Hn==0&&(on=on<<8^on>>>24^gn<<24,gn=gn<<1^283*(gn>>7))),Xt[It]=Xt[It-Hn]^on;for(tn=0;It;tn++,It--)on=Xt[3&tn?It:It-4],Ln[tn]=It<=4||tn<4?on:jn[0][Kt[on>>>24]]^jn[1][Kt[on>>16&255]]^jn[2][Kt[on>>8&255]]^jn[3][Kt[255&on]]}return Pe.prototype.decrypt=function(It,tn,on,Kt,jn,Hn){var Kr,Eu,Fs,$a,gn=this._key[1],Xt=It^gn[0],Ln=Kt^gn[1],hs=on^gn[2],Zo=tn^gn[3],Gs=gn.length/4-2,Al=4,Il=this._tables[1],ec=Il[0],Mh=Il[1],Ud=Il[2],Qc=Il[3],Oh=Il[4];for($a=0;$a<Gs;$a++)Kr=ec[Xt>>>24]^Mh[Ln>>16&255]^Ud[hs>>8&255]^Qc[255&Zo]^gn[Al],Eu=ec[Ln>>>24]^Mh[hs>>16&255]^Ud[Zo>>8&255]^Qc[255&Xt]^gn[Al+1],Fs=ec[hs>>>24]^Mh[Zo>>16&255]^Ud[Xt>>8&255]^Qc[255&Ln]^gn[Al+2],Zo=ec[Zo>>>24]^Mh[Xt>>16&255]^Ud[Ln>>8&255]^Qc[255&hs]^gn[Al+3],Al+=4,Xt=Kr,Ln=Eu,hs=Fs;for($a=0;$a<4;$a++)jn[(3&-$a)+Hn]=Oh[Xt>>>24]<<24^Oh[Ln>>16&255]<<16^Oh[hs>>8&255]<<8^Oh[255&Zo]^gn[Al++],Kr=Xt,Xt=Ln,Ln=hs,hs=Zo,Zo=Kr},Pe}(),H=function(Pe){function Re(){var It;return(It=Pe.call(this,a)||this).jobs=[],It.delay=1,It.timeout_=null,It}t(Re,Pe);var Bt=Re.prototype;return Bt.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},Bt.push=function(tn){this.jobs.push(tn),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},Re}(a),Y=function(Re){return Re<<24|(65280&Re)<<8|(16711680&Re)>>8|Re>>>24},we=function(){function Pe(Bt,It,tn,on){var Kt=Pe.STEP,jn=new Int32Array(Bt.buffer),Hn=new Uint8Array(Bt.byteLength),gn=0;for(this.asyncStream_=new H,this.asyncStream_.push(this.decryptChunk_(jn.subarray(gn,gn+Kt),It,tn,Hn)),gn=Kt;gn<jn.length;gn+=Kt)tn=new Uint32Array([Y(jn[gn-4]),Y(jn[gn-3]),Y(jn[gn-2]),Y(jn[gn-1])]),this.asyncStream_.push(this.decryptChunk_(jn.subarray(gn,gn+Kt),It,tn,Hn));this.asyncStream_.push(function(){on(null,function h(Pe){return Pe.subarray(0,Pe.byteLength-Pe[Pe.byteLength-1])}(Hn))})}return Pe.prototype.decryptChunk_=function(It,tn,on,Kt){return function(){var jn=function(Re,Bt,It){var Hn,gn,Xt,Ln,hs,Zo,Kr,Eu,Fs,tn=new Int32Array(Re.buffer,Re.byteOffset,Re.byteLength>>2),on=new P(Array.prototype.slice.call(Bt)),Kt=new Uint8Array(Re.byteLength),jn=new Int32Array(Kt.buffer);for(Hn=It[0],gn=It[1],Xt=It[2],Ln=It[3],Fs=0;Fs<tn.length;Fs+=4)hs=Y(tn[Fs]),Zo=Y(tn[Fs+1]),Kr=Y(tn[Fs+2]),Eu=Y(tn[Fs+3]),on.decrypt(hs,Zo,Kr,Eu,jn,Fs),jn[Fs]=Y(jn[Fs]^Hn),jn[Fs+1]=Y(jn[Fs+1]^gn),jn[Fs+2]=Y(jn[Fs+2]^Xt),jn[Fs+3]=Y(jn[Fs+3]^Ln),Hn=hs,gn=Zo,Xt=Kr,Ln=Eu;return Kt}(It,tn,on);Kt.set(jn,It.byteOffset)}},l(Pe,null,[{key:"STEP",get:function(){return 32e3}}]),Pe}();self.onmessage=function(Pe){var Re=Pe.data,Bt=new Uint8Array(Re.encrypted.bytes,Re.encrypted.byteOffset,Re.encrypted.byteLength),It=new Uint32Array(Re.key.bytes,Re.key.byteOffset,Re.key.byteLength/4),tn=new Uint32Array(Re.iv.bytes,Re.iv.byteOffset,Re.iv.byteLength/4);new we(Bt,It,tn,function(on,Kt){self.postMessage(function(Re){var Bt={};return Object.keys(Re).forEach(function(It){var tn=Re[It];Bt[It]=ArrayBuffer.isView(tn)?{bytes:tn.buffer,byteOffset:tn.byteOffset,byteLength:tn.byteLength}:tn}),Bt}({source:Re.source,decrypted:Kt}),[Kt.buffer])})}})),Sy=uy(g0),Dy=function(s){var l=s.default?"main":"alternative";return s.characteristics&&s.characteristics.indexOf("public.accessibility.describes-video")>=0&&(l="main-desc"),l},Lg=function(s,l){s.abort(),s.pause(),l&&l.activePlaylistLoader&&(l.activePlaylistLoader.pause(),l.activePlaylistLoader=null)},Fu=function(s,l){l.activePlaylistLoader=s,s.load()},Sh={AUDIO:function(s,l){return function(){var t=l.mediaTypes[s],a=l.blacklistCurrentPlaylist;Lg(l.segmentLoaders[s],t);var h=t.activeTrack(),v=t.activeGroup(),S=(v.filter(function(Y){return Y.default})[0]||v[0]).id,P=t.tracks[S];if(h!==P){for(var H in Ct.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[H].enabled=t.tracks[H]===P;t.onTrackChanged()}else a({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(s,l){return function(){var u=l.segmentLoaders[s],t=l.mediaTypes[s];Ct.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Lg(u,t);var a=t.activeTrack();a&&(a.mode="disabled"),t.onTrackChanged()}}},xy={AUDIO:function(s,l,u){if(l){var t=u.tech,a=u.requestOptions,h=u.segmentLoaders[s];l.on("loadedmetadata",function(){var v=l.media();h.playlist(v,a),(!t.paused()||v.endList&&"none"!==t.preload())&&h.load()}),l.on("loadedplaylist",function(){h.playlist(l.media(),a),t.paused()||h.load()}),l.on("error",Sh[s](s,u))}},SUBTITLES:function(s,l,u){var t=u.tech,a=u.requestOptions,h=u.segmentLoaders[s],v=u.mediaTypes[s];l.on("loadedmetadata",function(){var S=l.media();h.playlist(S,a),h.track(v.activeTrack()),(!t.paused()||S.endList&&"none"!==t.preload())&&h.load()}),l.on("loadedplaylist",function(){h.playlist(l.media(),a),t.paused()||h.load()}),l.on("error",Sh[s](s,u))}},Ym={AUDIO:function(s,l){var u=l.vhs,t=l.sourceType,a=l.segmentLoaders[s],h=l.requestOptions,v=l.master.mediaGroups,S=l.mediaTypes[s],P=S.groups,H=S.tracks,Y=S.logger_,Z=l.masterPlaylistLoader,we=Xu(Z.master);for(var je in(!v[s]||0===Object.keys(v[s]).length)&&(v[s]={main:{default:{default:!0}}},we&&(v[s].main.default.playlists=Z.master.playlists)),v[s])for(var Pe in P[je]||(P[je]=[]),v[s][je]){var Re=v[s][je][Pe],Bt=void 0;if(we?(Y("AUDIO group '"+je+"' label '"+Pe+"' is a master playlist"),Re.isMasterPlaylist=!0,Bt=null):Bt="vhs-json"===t&&Re.playlists?new yh(Re.playlists[0],u,h):Re.resolvedUri?new yh(Re.resolvedUri,u,h):Re.playlists&&"dash"===t?new ay(Re.playlists[0],u,h,Z):null,Re=Ct.mergeOptions({id:Pe,playlistLoader:Bt},Re),xy[s](s,Re.playlistLoader,l),P[je].push(Re),typeof H[Pe]>"u"){var It=new Ct.AudioTrack({id:Pe,kind:Dy(Re),enabled:!1,language:Re.language,default:Re.default,label:Pe});H[Pe]=It}}a.on("error",Sh[s](s,l))},SUBTITLES:function(s,l){var u=l.tech,t=l.vhs,a=l.sourceType,h=l.segmentLoaders[s],v=l.requestOptions,S=l.master.mediaGroups,P=l.mediaTypes[s],H=P.groups,Y=P.tracks,Z=l.masterPlaylistLoader;for(var we in S[s])for(var je in H[we]||(H[we]=[]),S[s][we])if(!S[s][we][je].forced){var Pe=S[s][we][je],Re=void 0;if("hls"===a)Re=new yh(Pe.resolvedUri,t,v);else if("dash"===a){if(!Pe.playlists.filter(function(tn){return tn.excludeUntil!==1/0}).length)return;Re=new ay(Pe.playlists[0],t,v,Z)}else"vhs-json"===a&&(Re=new yh(Pe.playlists?Pe.playlists[0]:Pe.resolvedUri,t,v));if(Pe=Ct.mergeOptions({id:je,playlistLoader:Re},Pe),xy[s](s,Pe.playlistLoader,l),H[we].push(Pe),typeof Y[je]>"u"){var It=u.addRemoteTextTrack({id:je,kind:"subtitles",default:Pe.default&&Pe.autoselect,language:Pe.language,label:je},!1).track;Y[je]=It}}h.on("error",Sh[s](s,l))},"CLOSED-CAPTIONS":function(s,l){var u=l.tech,t=l.master.mediaGroups,a=l.mediaTypes[s],h=a.groups,v=a.tracks;for(var S in t[s])for(var P in h[S]||(h[S]=[]),t[s][S]){var H=t[s][S][P];if(/^(?:CC|SERVICE)/.test(H.instreamId)){var Y=u.options_.vhs&&u.options_.vhs.captionServices||{},Z={label:P,language:H.language,instreamId:H.instreamId,default:H.default&&H.autoselect};if(Y[Z.instreamId]&&(Z=Ct.mergeOptions(Z,Y[Z.instreamId])),void 0===Z.default&&delete Z.default,h[S].push(Ct.mergeOptions({id:P},H)),typeof v[P]>"u"){var we=u.addRemoteTextTrack({id:Z.instreamId,kind:"captions",default:Z.default,language:Z.language,label:Z.label},!1).track;v[P]=we}}}}},Ay=function g(s,l){for(var u=0;u<s.length;u++)if(Wl(l,s[u])||s[u].playlists&&g(s[u].playlists,l))return!0;return!1},Qm={AUDIO:function(s,l){return function(){var u=l.mediaTypes[s].tracks;for(var t in u)if(u[t].enabled)return u[t];return null}},SUBTITLES:function(s,l){return function(){var u=l.mediaTypes[s].tracks;for(var t in u)if("showing"===u[t].mode||"hidden"===u[t].mode)return u[t];return null}}},kd=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],v0=function(s){return this.audioSegmentLoader_[s]+this.mainSegmentLoader_[s]},Iy=function(g){function s(u){var t;t=g.call(this)||this;var a=u.src,h=u.handleManifestRedirects,v=u.withCredentials,S=u.tech,P=u.bandwidth,H=u.externVhs,Y=u.useCueTags,Z=u.blacklistDuration,we=u.enableLowInitialPlaylist,je=u.sourceType,Pe=u.cacheEncryptionKeys,Re=u.experimentalBufferBasedABR,Bt=u.experimentalLeastPixelDiffSelector;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var It=u.maxPlaylistRetries;(null===It||typeof It>"u")&&(It=1/0),nl=H,t.experimentalBufferBasedABR=Boolean(Re),t.experimentalLeastPixelDiffSelector=Boolean(Bt),t.withCredentials=v,t.tech_=S,t.vhs_=S.vhs,t.sourceType_=je,t.useCueTags_=Y,t.blacklistDuration=Z,t.maxPlaylistRetries=It,t.enableLowInitialPlaylist=we,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:v,handleManifestRedirects:h,maxPlaylistRetries:It,timeout:null},t.on("error",t.pauseLoading),t.mediaTypes_=function(){var s={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(l){s[l]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:el,activeTrack:el,getActiveGroup:el,onGroupChanged:el,onTrackChanged:el,lastTrack_:null,logger_:Eo("MediaGroups["+l+"]")}}),s}(),t.mediaSource=new(ae().MediaSource),t.handleDurationChange_=t.handleDurationChange_.bind(Ee(t)),t.handleSourceOpen_=t.handleSourceOpen_.bind(Ee(t)),t.handleSourceEnded_=t.handleSourceEnded_.bind(Ee(t)),t.mediaSource.addEventListener("durationchange",t.handleDurationChange_),t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_),t.mediaSource.addEventListener("sourceended",t.handleSourceEnded_),t.seekable_=Ct.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new mp(u),t.segmentMetadataTrack_=S.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new Sy,t.sourceUpdater_=new gp(t.mediaSource),t.inbandTextTracks_={},t.timelineChangeController_=new p0;var tn={vhs:t.vhs_,parse708captions:u.parse708captions,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.duration()},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:P,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:Pe,sourceUpdater:t.sourceUpdater_,timelineChangeController:t.timelineChangeController_,experimentalExactManifestTimings:u.experimentalExactManifestTimings};t.masterPlaylistLoader_="dash"===t.sourceType_?new ay(a,t.vhs_,t.requestOptions_):new yh(a,t.vhs_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new hp(Ct.mergeOptions(tn,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),u),t.audioSegmentLoader_=new hp(Ct.mergeOptions(tn,{loaderType:"audio"}),u),t.subtitleSegmentLoader_=new Rg(Ct.mergeOptions(tn,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks}),u),t.setupSegmentLoaderListeners_(),t.experimentalBufferBasedABR&&(t.masterPlaylistLoader_.one("loadedplaylist",function(){return t.startABRTimer_()}),t.tech_.on("pause",function(){return t.stopABRTimer_()}),t.tech_.on("play",function(){return t.startABRTimer_()})),kd.forEach(function(Kt){t[Kt+"_"]=v0.bind(Ee(t),Kt)}),t.logger_=Eo("MPC"),t.triggeredFmp4Usage=!1,"none"===t.tech_.preload()?(t.loadOnPlay_=function(){t.loadOnPlay_=null,t.masterPlaylistLoader_.load()},t.tech_.one("play",t.loadOnPlay_)):t.masterPlaylistLoader_.load(),t.timeToLoadedData__=-1,t.mainAppendsToLoadedData__=-1,t.audioAppendsToLoadedData__=-1;var on="none"===t.tech_.preload()?"play":"loadstart";return t.tech_.one(on,function(){var Kt=Date.now();t.tech_.one("loadeddata",function(){t.timeToLoadedData__=Date.now()-Kt,t.mainAppendsToLoadedData__=t.mainSegmentLoader_.mediaAppends,t.audioAppendsToLoadedData__=t.audioSegmentLoader_.mediaAppends})}),t}$e(s,g);var l=s.prototype;return l.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},l.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},l.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return-1===t||-1===a?-1:t+a},l.timeToLoadedData_=function(){return this.timeToLoadedData__},l.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},l.switchMedia_=function(t,a,h){var v=this.media(),S=v&&(v.id||v.uri),P=t.id||t.uri;S&&S!==P&&(this.logger_("switch media "+S+" -> "+P+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(t,h)},l.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=ae().setInterval(function(){return t.checkABR_()},250)},l.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ae().clearInterval(this.abrTimer_),this.abrTimer_=null)},l.getAudioTrackPlaylists_=function(){var t=this.master(),a=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return a;var S,h=t.mediaGroups.AUDIO,v=Object.keys(h);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)S=this.mediaTypes_.AUDIO.activeTrack();else{var P=h.main||v.length&&h[v[0]];for(var H in P)if(P[H].default){S={label:H};break}}if(!S)return a;var Y=[];for(var Z in h)if(h[Z][S.label]){var we=h[Z][S.label];if(we.playlists&&we.playlists.length)Y.push.apply(Y,we.playlists);else if(we.uri)Y.push(we);else if(t.playlists.length)for(var je=0;je<t.playlists.length;je++){var Pe=t.playlists[je];Pe.attributes&&Pe.attributes.AUDIO&&Pe.attributes.AUDIO===Z&&Y.push(Pe)}}return Y.length?Y:a},l.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=t.masterPlaylistLoader_.media(),h=1.5*a.targetDuration*1e3;t.requestOptions_.timeout=gh(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,a.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(a,t.requestOptions_),t.mainSegmentLoader_.load()),function(s){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(je){Ym[je](je,s)});var l=s.mediaTypes,u=s.masterPlaylistLoader,t=s.tech,a=s.vhs,h=s.segmentLoaders,v=h.AUDIO,S=h.main;["AUDIO","SUBTITLES"].forEach(function(je){l[je].activeGroup=function(s,l){return function(u){var a=l.mediaTypes[s].groups,h=l.masterPlaylistLoader.media();if(!h)return null;var v=null;h.attributes[s]&&(v=a[h.attributes[s]]);var S=Object.keys(a);if(!v)if("AUDIO"===s&&S.length>1&&Xu(l.master))for(var P=0;P<S.length;P++){var H=a[S[P]];if(Ay(H,h)){v=H;break}}else a.main?v=a.main:1===S.length&&(v=a[S[0]]);return typeof u>"u"?v:null!==u&&v&&v.filter(function(Y){return Y.id===u.id})[0]||null}}(je,s),l[je].activeTrack=Qm[je](je,s),l[je].onGroupChanged=function(s,l){return function(){var u=l.segmentLoaders,t=u[s],a=u.main,h=l.mediaTypes[s],v=h.activeTrack(),S=h.getActiveGroup(),P=h.activePlaylistLoader,H=h.lastGroup_;if((!S||!H||S.id!==H.id)&&(h.lastGroup_=S,h.lastTrack_=v,Lg(t,h),S&&!S.isMasterPlaylist)){if(!S.playlistLoader)return void(P&&a.resetEverything());t.resyncLoader(),Fu(S.playlistLoader,h)}}}(je,s),l[je].onGroupChanging=function(s,l){return function(){var u=l.segmentLoaders[s];l.mediaTypes[s].lastGroup_=null,u.abort(),u.pause()}}(je,s),l[je].onTrackChanged=function(s,l){return function(){var u=l.masterPlaylistLoader,t=l.segmentLoaders,a=t[s],h=t.main,v=l.mediaTypes[s],S=v.activeTrack(),P=v.getActiveGroup(),H=v.activePlaylistLoader,Y=v.lastTrack_;if((!Y||!S||Y.id!==S.id)&&(v.lastGroup_=P,v.lastTrack_=S,Lg(a,v),P)){if(P.isMasterPlaylist){if(!S||!Y||S.id===Y.id)return;var Z=l.vhs.masterPlaylistController_,we=Z.selectPlaylist();if(Z.media()===we)return;return v.logger_("track change. Switching master audio from "+Y.id+" to "+S.id),u.pause(),h.resetEverything(),void Z.fastQualityChange_(we)}if("AUDIO"===s){if(!P.playlistLoader)return h.setAudio(!0),void h.resetEverything();a.setAudio(!0),h.setAudio(!1)}if(H===P.playlistLoader)return void Fu(P.playlistLoader,v);a.track&&a.track(S),a.resetEverything(),Fu(P.playlistLoader,v)}}}(je,s),l[je].getActiveGroup=function(s,l){var u=l.mediaTypes;return function(){var t=u[s].activeTrack();return t?u[s].activeGroup(t):null}}(je,s)});var P=l.AUDIO.activeGroup();if(P){var H=(P.filter(function(je){return je.default})[0]||P[0]).id;l.AUDIO.tracks[H].enabled=!0,l.AUDIO.onGroupChanged(),l.AUDIO.onTrackChanged(),l.AUDIO.getActiveGroup().playlistLoader?(S.setAudio(!1),v.setAudio(!0)):S.setAudio(!0)}u.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(je){return l[je].onGroupChanged()})}),u.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(je){return l[je].onGroupChanging()})});var Z=function(){l.AUDIO.onTrackChanged(),t.trigger({type:"usage",name:"vhs-audio-change"}),t.trigger({type:"usage",name:"hls-audio-change"})};for(var we in t.audioTracks().addEventListener("change",Z),t.remoteTextTracks().addEventListener("change",l.SUBTITLES.onTrackChanged),a.on("dispose",function(){t.audioTracks().removeEventListener("change",Z),t.remoteTextTracks().removeEventListener("change",l.SUBTITLES.onTrackChanged)}),t.clearTracks("audio"),l.AUDIO.tracks)t.audioTracks().addTrack(l.AUDIO.tracks[we])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),a),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var a=t.masterPlaylistLoader_.media();if(!a){var h;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(h=t.selectInitialPlaylist()),h||(h=t.selectPlaylist()),!h||!t.shouldSwitchToMedia_(h))return;if(t.initialMedia_=h,t.switchMedia_(t.initialMedia_,"initial"),"vhs-json"!==t.sourceType_||!t.initialMedia_.segments)return;a=t.initialMedia_}t.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=t.masterPlaylistLoader_.media(),h=1.5*a.targetDuration*1e3;t.requestOptions_.timeout=gh(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:h,t.mainSegmentLoader_.playlist(a,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=t.masterPlaylistLoader_.media();"playlist-unchanged"!==a.lastExcludeReason_&&t.stuckAtPlaylistEnd_(a)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},l.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},l.triggerPresenceUsage_=function(t,a){var h=t.mediaGroups||{},v=!0,S=Object.keys(h.AUDIO);for(var P in h.AUDIO)for(var H in h.AUDIO[P])h.AUDIO[P][H].uri||(v=!1);v&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(h.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),nl.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),S.length&&Object.keys(h.AUDIO[S[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},l.shouldSwitchToMedia_=function(t){var a=this.masterPlaylistLoader_.media(),h=this.tech_.buffered();return function(s){var l=s.currentPlaylist,u=s.nextPlaylist,t=s.forwardBuffer,a=s.bufferLowWaterLine,h=s.bufferHighWaterLine,v=s.duration,S=s.experimentalBufferBasedABR,P=s.log;if(!u)return Ct.log.warn("We received no playlist to switch to. Please check your stream."),!1;var H="allowing switch "+(l&&l.id||"null")+" -> "+u.id;if(!l)return P(H+" as current playlist is not set"),!0;if(u.id===l.id)return!1;if(!l.endList)return P(H+" as current playlist is live"),!0;var Y=S?Aa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Aa.MAX_BUFFER_LOW_WATER_LINE;if(v<Y)return P(H+" as duration < max low water line ("+v+" < "+Y+")"),!0;var Z=u.attributes.BANDWIDTH,we=l.attributes.BANDWIDTH;if(Z<we&&(!S||t<h)){var je=H+" as next bandwidth < current bandwidth ("+Z+" < "+we+")";return S&&(je+=" and forwardBuffer < bufferHighWaterLine ("+t+" < "+h+")"),P(je),!0}if((!S||Z>we)&&t>=a){var Pe=H+" as forwardBuffer >= bufferLowWaterLine ("+t+" >= "+a+")";return S&&(Pe+=" and next bandwidth > current bandwidth ("+Z+" > "+we+")"),P(Pe),!0}return P("not "+H+" as no switching criteria met"),!1}({currentPlaylist:a,nextPlaylist:t,forwardBuffer:h.length?h.end(h.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},l.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var h=t.selectPlaylist();t.shouldSwitchToMedia_(h)&&t.switchMedia_(h,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(h){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var a=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var v=t.getCodecsOrExclude_();!v||t.sourceUpdater_.addOrChangeSourceBuffers(v)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},l.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},l.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},l.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},l.fastQualityChange_=function(t){var a=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){a.tech_.setCurrentTime(Ct.browser.IE_VERSION||Ct.browser.IS_EDGE?a.tech_.currentTime()+.04:a.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},l.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}},l.setupFirstPlay=function(){var t=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var h=this.seekable();if(!h.length)return!1;if(Ct.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(h.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(h.end(0))}return this.hasPlayed_=!0,this.load(),!0},l.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();typeof t<"u"&&"function"==typeof t.then&&t.then(null,function(a){})}this.trigger("sourceopen")},l.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var a=this.duration();t[t.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},l.handleDurationChange_=function(){this.tech_.trigger("durationchange")},l.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!a||a.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}!t||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},l.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var h=this.syncController_.getExpiredTime(t,this.duration());if(null===h)return!1;var v=nl.Playlist.playlistEnd(t,h),S=this.tech_.currentTime(),P=this.tech_.buffered();if(!P.length)return v-S<=Tl;var H=P.end(P.length-1);return H-S<=Tl&&v-H<=Tl},l.blacklistCurrentPlaylist=function(t,a){void 0===t&&(t={});var h=t.playlist||this.masterPlaylistLoader_.media();if(a=a||t.blacklistDuration||this.blacklistDuration,!h)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));h.playlistErrors_++;var Y,v=this.masterPlaylistLoader_.master.playlists,S=v.filter(ph),P=1===S.length&&S[0]===h;if(1===v.length&&a!==1/0)return Ct.log.warn("Problem encountered with playlist "+h.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(P);if(P){var H=!1;v.forEach(function(Bt){if(Bt!==h){var It=Bt.excludeUntil;typeof It<"u"&&It!==1/0&&(H=!0,delete Bt.excludeUntil)}}),H&&(Ct.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}Y=h.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*a,h.excludeUntil=Y,t.reason&&(h.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var Z=this.selectPlaylist();if(!Z)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:Ct.log.warn)((t.internal?"Internal problem":"Problem")+" encountered with playlist "+h.id+"."+(t.message?" "+t.message:"")+" Switching to playlist "+Z.id+"."),Z.attributes.AUDIO!==h.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),Z.attributes.SUBTITLES!==h.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var Pe=Z.targetDuration/2*1e3||5e3,Re="number"==typeof Z.lastRequest&&Date.now()-Z.lastRequest<=Pe;return this.switchMedia_(Z,"exclude",P||Re)},l.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},l.delegateLoaders_=function(t,a){var h=this,v=[],S="all"===t;(S||"main"===t)&&v.push(this.masterPlaylistLoader_);var P=[];(S||"audio"===t)&&P.push("AUDIO"),(S||"subtitle"===t)&&(P.push("CLOSED-CAPTIONS"),P.push("SUBTITLES")),P.forEach(function(H){var Y=h.mediaTypes_[H]&&h.mediaTypes_[H].activePlaylistLoader;Y&&v.push(Y)}),["main","audio","subtitle"].forEach(function(H){var Y=h[H+"SegmentLoader_"];Y&&(t===H||"all"===t)&&v.push(Y)}),v.forEach(function(H){return a.forEach(function(Y){"function"==typeof H[Y]&&H[Y]()})})},l.setCurrentTime=function(t){var a=Jf(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?a&&a.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},l.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:nl.Playlist.duration(t):1/0:0},l.seekable=function(){return this.seekable_},l.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var h=this.syncController_.getExpiredTime(a,this.duration());if(null!==h){var P,H,v=this.masterPlaylistLoader_.master,S=nl.Playlist.seekable(a,h,nl.Playlist.liveEdgeDelay(v,a));0===S.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(h=this.syncController_.getExpiredTime(a,this.duration()))||0===(t=nl.Playlist.seekable(a,h,nl.Playlist.liveEdgeDelay(v,a))).length)||(this.seekable_&&this.seekable_.length&&(P=this.seekable_.end(0),H=this.seekable_.start(0)),this.seekable_=t?t.start(0)>S.end(0)||S.start(0)>t.end(0)?S:Ct.createTimeRanges([[t.start(0)>S.start(0)?t.start(0):S.start(0),t.end(0)<S.end(0)?t.end(0):S.end(0)]]):S,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==P||this.seekable_.start(0)!==H)&&(this.logger_("seekable updated ["+Tm(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")))}}}},l.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1))}else{var h=this.tech_.buffered(),v=nl.Playlist.duration(this.masterPlaylistLoader_.media());h.length>0&&(v=Math.max(v,h.end(h.length-1))),this.mediaSource.duration!==v&&this.sourceUpdater_.setDuration(v)}},l.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var h=t.mediaTypes_[a].groups;for(var v in h)h[v].forEach(function(S){S.playlistLoader&&S.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},l.master=function(){return this.masterPlaylistLoader_.master},l.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},l.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),h=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!a||!h)},l.getCodecsOrExclude_=function(){var t=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};a.video=a.main;var h=Cl(this.master(),this.media()),v={},S=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(v.video=h.video||a.main.videoCodec||"avc1.4d400d"),a.main.isMuxed&&(v.video+=","+(h.audio||a.main.audioCodec||xi)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||S)&&(v.audio=h.audio||a.main.audioCodec||a.audio.audioCodec||xi,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),v.audio||v.video){var Y,H={};if(["video","audio"].forEach(function(Pe){if(v.hasOwnProperty(Pe)&&!function(Re,Bt){return Re?mr(Bt):yn(Bt)}(a[Pe].isFmp4,v[Pe])){var Re=a[Pe].isFmp4?"browser":"muxer";H[Re]=H[Re]||[],H[Re].push(v[Pe]),"audio"===Pe&&(Y=Re)}}),S&&Y&&this.media().attributes.AUDIO){var Z=this.media().attributes.AUDIO;this.master().playlists.forEach(function(Pe){(Pe.attributes&&Pe.attributes.AUDIO)===Z&&Pe!==t.media()&&(Pe.excludeUntil=1/0)}),this.logger_("excluding audio group "+Z+" as "+Y+' does not support codec(s): "'+v.audio+'"')}if(!Object.keys(H).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var je=[];if(["video","audio"].forEach(function(Pe){var Re=(or(t.sourceUpdater_.codecs[Pe]||"")[0]||{}).type,Bt=(or(v[Pe]||"")[0]||{}).type;Re&&Bt&&Re.toLowerCase()!==Bt.toLowerCase()&&je.push('"'+t.sourceUpdater_.codecs[Pe]+'" -> "'+v[Pe]+'"')}),je.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+je.join(", ")+".",blacklistDuration:1/0,internal:!0})}return v}var we=Object.keys(H).reduce(function(Pe,Re){return Pe&&(Pe+=", "),Pe+(Re+' does not support codec(s): "')+H[Re].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:we,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},l.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var a=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},l.excludeUnsupportedVariants_=function(){var t=this,a=this.master().playlists,h=[];Object.keys(a).forEach(function(v){var S=a[v];if(-1===h.indexOf(S.id)){h.push(S.id);var P=Cl(t.master,S),H=[];P.audio&&!yn(P.audio)&&!mr(P.audio)&&H.push("audio codec "+P.audio),P.video&&!yn(P.video)&&!mr(P.video)&&H.push("video codec "+P.video),P.text&&"stpp.ttml.im1t"===P.text&&H.push("text codec "+P.text),H.length&&(S.excludeUntil=1/0,t.logger_("excluding "+S.id+" for unsupported: "+H.join(", ")))}})},l.excludeIncompatibleVariants_=function(t){var a=this,h=[],v=this.master().playlists,S=xd(or(t)),P=bh(S),H=S.video&&or(S.video)[0]||null,Y=S.audio&&or(S.audio)[0]||null;Object.keys(v).forEach(function(Z){var we=v[Z];if(-1===h.indexOf(we.id)&&we.excludeUntil!==1/0){h.push(we.id);var je=[],Pe=Cl(a.masterPlaylistLoader_.master,we),Re=bh(Pe);if(Pe.audio||Pe.video){if(Re!==P&&je.push('codec count "'+Re+'" !== "'+P+'"'),!a.sourceUpdater_.canChangeType()){var Bt=Pe.video&&or(Pe.video)[0]||null,It=Pe.audio&&or(Pe.audio)[0]||null;Bt&&H&&Bt.type.toLowerCase()!==H.type.toLowerCase()&&je.push('video codec "'+Bt.type+'" !== "'+H.type+'"'),It&&Y&&It.type.toLowerCase()!==Y.type.toLowerCase()&&je.push('audio codec "'+It.type+'" !== "'+Y.type+'"')}je.length&&(we.excludeUntil=1/0,a.logger_("blacklisting "+we.id+": "+je.join(" && ")))}}})},l.updateAdCues_=function(t){var a=0,h=this.seekable();h.length&&(a=h.start(0)),function(s,l,u){if(void 0===u&&(u=0),s.segments)for(var a,t=u,h=0;h<s.segments.length;h++){var v=s.segments[h];if(a||(a=Ng(l,t+v.duration/2)),a){if("cueIn"in v){a.endTime=t,a.adEndTime=t,t+=v.duration,a=null;continue}if(t<a.endTime){t+=v.duration;continue}a.endTime+=v.duration}else if("cueOut"in v&&((a=new(ae().VTTCue)(t,t+v.duration,v.cueOut)).adStartTime=t,a.adEndTime=t+parseFloat(v.cueOut),l.addCue(a)),"cueOutCont"in v){var S=v.cueOutCont.split("/").map(parseFloat),P=S[0],H=S[1];(a=new(ae().VTTCue)(t,t+v.duration,"")).adStartTime=t-P,a.adEndTime=a.adStartTime+H,l.addCue(a)}t+=v.duration}}(t,this.cueTagsTrack_,a)},l.goalBufferLength=function(){var t=this.tech_.currentTime(),a=Aa.GOAL_BUFFER_LENGTH,h=Aa.GOAL_BUFFER_LENGTH_RATE,v=Math.max(a,Aa.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+t*h,v)},l.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),a=Aa.BUFFER_LOW_WATER_LINE,h=Aa.BUFFER_LOW_WATER_LINE_RATE,v=Math.max(a,Aa.MAX_BUFFER_LOW_WATER_LINE),S=Math.max(a,Aa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+t*h,this.experimentalBufferBasedABR?S:v)},l.bufferHighWaterLine=function(){return Aa.BUFFER_HIGH_WATER_LINE},s}(Ct.EventTarget),Fg=function(s,l,u){var t=s.masterPlaylistController_,v=t[(s.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(t);if(l.attributes){var S=l.attributes.RESOLUTION;this.width=S&&S.width,this.height=S&&S.height,this.bandwidth=l.attributes.BANDWIDTH}this.codecs=Cl(t.master(),l),this.playlist=l,this.id=u,this.enabled=function(s,l,u){return function(t){var a=s.master.playlists[l],h=sf(a),v=ph(a);return typeof t>"u"?v:(t?delete a.disabled:a.disabled=!0,t!==v&&!h&&(u(),s.trigger(t?"renditionenabled":"renditiondisabled")),t)}}(s.playlists,l.id,v)},xl=["seeking","seeked","pause","playing","error"],jg=function(){function g(l){var u=this;this.masterPlaylistController_=l.masterPlaylistController,this.tech_=l.tech,this.seekable=l.seekable,this.allowSeeksWithinUnsafeLiveWindow=l.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=l.liveRangeSafeTimeDelta,this.media=l.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Eo("PlaybackWatcher"),this.logger_("initialize");var t=function(){return u.monitorCurrentTime_()},a=function(){return u.monitorCurrentTime_()},h=function(){return u.techWaiting_()},v=function(){return u.cancelTimer_()},S=function(){return u.fixesBadSeeks_()},P=this.masterPlaylistController_,H=["main","subtitle","audio"],Y={};H.forEach(function(Z){Y[Z]={reset:function(){return u.resetSegmentDownloads_(Z)},updateend:function(){return u.checkSegmentDownloads_(Z)}},P[Z+"SegmentLoader_"].on("appendsdone",Y[Z].updateend),P[Z+"SegmentLoader_"].on("playlistupdate",Y[Z].reset),u.tech_.on(["seeked","seeking"],Y[Z].reset)}),this.tech_.on("seekablechanged",S),this.tech_.on("waiting",h),this.tech_.on(xl,v),this.tech_.on("canplay",a),this.tech_.one("play",t),this.dispose=function(){u.logger_("dispose"),u.tech_.off("seekablechanged",S),u.tech_.off("waiting",h),u.tech_.off(xl,v),u.tech_.off("canplay",a),u.tech_.off("play",t),H.forEach(function(Z){P[Z+"SegmentLoader_"].off("appendsdone",Y[Z].updateend),P[Z+"SegmentLoader_"].off("playlistupdate",Y[Z].reset),u.tech_.off(["seeked","seeking"],Y[Z].reset)}),u.checkCurrentTimeTimeout_&&ae().clearTimeout(u.checkCurrentTimeTimeout_),u.cancelTimer_()}}var s=g.prototype;return s.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ae().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ae().setTimeout(this.monitorCurrentTime_.bind(this),250)},s.resetSegmentDownloads_=function(u){var t=this.masterPlaylistController_[u+"SegmentLoader_"];this[u+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+u+" loader"),this[u+"StalledDownloads_"]=0,this[u+"Buffered_"]=t.buffered_()},s.checkSegmentDownloads_=function(u){var t=this.masterPlaylistController_,a=t[u+"SegmentLoader_"],h=a.buffered_(),v=function(s,l){if(s===l)return!1;if(!s&&l||!l&&s||s.length!==l.length)return!0;for(var u=0;u<s.length;u++)if(s.start(u)!==l.start(u)||s.end(u)!==l.end(u))return!0;return!1}(this[u+"Buffered_"],h);this[u+"Buffered_"]=h,v?this.resetSegmentDownloads_(u):(this[u+"StalledDownloads_"]++,this.logger_("found #"+this[u+"StalledDownloads_"]+" "+u+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:Ed(h)}),!(this[u+"StalledDownloads_"]<10)&&(this.logger_(u+" loader stalled download exclusion"),this.resetSegmentDownloads_(u),this.tech_.trigger({type:"usage",name:"vhs-"+u+"-download-exclusion"}),"subtitle"!==u&&t.blacklistCurrentPlaylist({message:"Excessive "+u+" segment downloading detected."},1/0)))},s.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var u=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===u&&(!t.length||u+Tl>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&u===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):u===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=u)}},s.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},s.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var v,t=this.seekable(),a=this.tech_.currentTime();if(this.afterSeekableWindow_(t,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(v=t.end(t.length-1)),this.beforeSeekableWindow_(t,a)){var P=t.start(0);v=P+(P===t.end(0)?0:Tl)}if(typeof v<"u")return this.logger_("Trying to seek outside of seekable at time "+a+" with seekable range "+Tm(t)+". Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0;var H=this.tech_.buffered();return!!function(s){var l=s.buffered,u=s.targetDuration,t=s.currentTime;return!(!l.length||l.end(0)-l.start(0)<2*u||t>l.start(0))&&l.start(0)-t<u}({buffered:H,targetDuration:this.media().targetDuration,currentTime:a})&&(v=H.start(0)+Tl,this.logger_("Buffered region starts ("+H.start(0)+")  just beyond seek point ("+a+"). Seeking to "+v+"."),this.tech_.setCurrentTime(v),!0)},s.waiting_=function(){if(!this.techWaiting_()){var u=this.tech_.currentTime(),t=this.tech_.buffered(),a=Jf(t,u);if(a.length&&u+3<=a.end(0))return this.cancelTimer_(),this.tech_.setCurrentTime(u),this.logger_("Stopped at "+u+" while inside a buffered region ["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})}},s.techWaiting_=function(){var u=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(u,t)){var a=u.end(u.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+a),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var h=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:h.audioBuffered(),videoBuffered:h.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var P=bm(v,t);if(P.length>0){var H=P.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+H+", seeking to "+P.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*H,t),!0}return!1},s.afterSeekableWindow_=function(u,t,a,h){if(void 0===h&&(h=!1),!u.length)return!1;var v=u.end(u.length-1)+Tl;return!a.endList&&h&&(v=u.end(u.length-1)+3*a.targetDuration),t>v},s.beforeSeekableWindow_=function(u,t){return!!(u.length&&u.start(0)>0&&t<u.start(0)-this.liveRangeSafeTimeDelta)},s.videoUnderflow_=function(u){var t=u.videoBuffered,a=u.audioBuffered,h=u.currentTime;if(t){var v;if(t.length&&a.length){var S=Jf(t,h-3),P=Jf(t,h),H=Jf(a,h);H.length&&!P.length&&S.length&&(v={start:S.end(0),end:H.end(0)})}else bm(t,h).length||(v=this.gapFromVideoUnderflow_(t,h));return!!v&&(this.logger_("Encountered a gap in video from "+v.start+" to "+v.end+". Seeking to current time "+h),!0)}},s.skipTheGap_=function(u){var t=this.tech_.buffered(),a=this.tech_.currentTime(),h=bm(t,a);this.cancelTimer_(),0!==h.length&&a===u&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",u,"nextRange start:",h.start(0)),this.tech_.setCurrentTime(h.start(0)+hh),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},s.gapFromVideoUnderflow_=function(u,t){for(var a=function(s){if(s.length<2)return Ct.createTimeRanges();for(var l=[],u=1;u<s.length;u++){var t=s.end(u-1),a=s.start(u);l.push([t,a])}return Ct.createTimeRanges(l)}(u),h=0;h<a.length;h++){var v=a.start(h),S=a.end(h);if(t-v<4&&t-v>2)return{start:v,end:S}}return null},g}(),_p={errorInterval:30,getSource:function(s){return s(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Jm=function g(s,l){var u=0,t=0,a=Ct.mergeOptions(_p,l);s.ready(function(){s.trigger({type:"usage",name:"vhs-error-reload-initialized"}),s.trigger({type:"usage",name:"hls-error-reload-initialized"})});var h=function(){t&&s.currentTime(t)},v=function(Z){null!=Z&&(t=s.duration()!==1/0&&s.currentTime()||0,s.one("loadedmetadata",h),s.src(Z),s.trigger({type:"usage",name:"vhs-error-reload"}),s.trigger({type:"usage",name:"hls-error-reload"}),s.play())},S=function(){return Date.now()-u<1e3*a.errorInterval?(s.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void s.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(u=Date.now(),a.getSource.call(s,v)):void Ct.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},P=function Y(){s.off("loadedmetadata",h),s.off("error",S),s.off("dispose",Y)};s.on("error",S),s.on("dispose",P),s.reloadSourceOnError=function(Z){P(),g(s,Z)}},bp=function(s){Jm(this,s)},tu={PlaylistLoader:yh,Playlist:Va,utils:np,STANDARD_PLAYLIST_SELECTOR:Sg,INITIAL_PLAYLIST_SELECTOR:function(){var s=this,l=this.playlists.master.playlists.filter(Va.isEnabled);return Eh(l,function(t,a){return Cg(t,a)}),l.filter(function(t){return!!Cl(s.playlists.master,t).video})[0]||null},lastBandwidthSelector:Sg,movingAverageBandwidthSelector:function(s){var l=-1,u=-1;if(s<0||s>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&ae().devicePixelRatio||1;return l<0&&(l=this.systemBandwidth,u=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==u&&(l=s*this.systemBandwidth+(1-s)*l,u=this.systemBandwidth),vy(this.playlists.master,l,parseInt(Ad(this.tech_.el(),"width"),10)*t,parseInt(Ad(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Cg,comparePlaylistResolution:function(s,l){var u,t;return s.attributes.RESOLUTION&&s.attributes.RESOLUTION.width&&(u=s.attributes.RESOLUTION.width),u=u||ae().Number.MAX_VALUE,l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width&&(t=l.attributes.RESOLUTION.width),u===(t=t||ae().Number.MAX_VALUE)&&s.attributes.BANDWIDTH&&l.attributes.BANDWIDTH?s.attributes.BANDWIDTH-l.attributes.BANDWIDTH:u-t},xhr:ug()};Object.keys(Aa).forEach(function(g){Object.defineProperty(tu,g,{get:function(){return Ct.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),Aa[g]},set:function(l){Ct.log.warn("using Vhs."+g+" is UNSAFE be sure you know what you are doing"),"number"!=typeof l||l<0?Ct.log.warn("value of Vhs."+g+" must be greater than or equal to 0"):Aa[g]=l}})});var tv="videojs-vhs",Oy=function(s,l){for(var u=l.media(),t=-1,a=0;a<s.length;a++)if(s[a].id===u.id){t=a;break}s.selectedIndex_=t,s.trigger({selectedIndex:t,type:"change"})};tu.canPlaySource=function(){return Ct.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Tp=function(){if(!ae().localStorage)return null;var s=ae().localStorage.getItem(tv);if(!s)return null;try{return JSON.parse(s)}catch{return null}};tu.supportsNativeHls=function(){if(!Ae()||!Ae().createElement)return!1;var g=Ae().createElement("video");return!!Ct.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(l){return/maybe|probably/i.test(g.canPlayType(l))})}(),tu.supportsNativeDash=!!(Ae()&&Ae().createElement&&Ct.getTech("Html5").isSupported())&&/maybe|probably/i.test(Ae().createElement("video").canPlayType("application/dash+xml")),tu.supportsTypeNatively=function(g){return"hls"===g?tu.supportsNativeHls:"dash"===g&&tu.supportsNativeDash},tu.isSupported=function(){return Ct.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ep=function(g){function s(u,t,a){var h;if(h=g.call(this,t,Ct.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&Ct.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof a.initialBandwidth&&(h.options_.bandwidth=a.initialBandwidth),h.logger_=Eo("VhsHandler"),t.options_&&t.options_.playerId){var v=Ct(t.options_.playerId);v.hasOwnProperty("hls")||Object.defineProperty(v,"hls",{get:function(){return Ct.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),Ee(h)},configurable:!0}),v.hasOwnProperty("vhs")||Object.defineProperty(v,"vhs",{get:function(){return Ct.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),Ee(h)},configurable:!0}),v.hasOwnProperty("dash")||Object.defineProperty(v,"dash",{get:function(){return Ct.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ee(h)},configurable:!0}),h.player_=v}if(h.tech_=t,h.source_=u,h.stats={},h.ignoreNextSeekingEvent_=!1,h.setOptions_(),h.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(h.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return h.on(Ae(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(S){var P=Ae().fullscreenElement||Ae().webkitFullscreenElement||Ae().mozFullScreenElement||Ae().msFullscreenElement;P&&P.contains(h.tech_.el())?h.masterPlaylistController_.fastQualityChange_():h.masterPlaylistController_.checkABR_()}),h.on(h.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),h.on(h.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),h.on(h.tech_,"play",h.play),h}$e(s,g);var l=s.prototype;return l.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var a=Tp();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Aa.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Aa.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(h){typeof t.source_[h]<"u"&&(t.options_[h]=t.source_[h])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},l.src=function(t,a){var h=this;if(t){this.setOptions_(),this.options_.src=function(s){return 0===s.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(s.substring(s.indexOf(",")+1)):s}(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=tu,this.options_.sourceType=Ei(a),this.options_.seekTo=function(P){h.tech_.setCurrentTime(P)},this.options_.smoothQualityChange&&Ct.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Iy(this.options_);var v=Ct.mergeOptions({liveRangeSafeTimeDelta:Tl},this.options_,{seekable:function(){return h.seekable()},media:function(){return h.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new jg(v),this.masterPlaylistController_.on("error",function(){var P=Ct.players[h.tech_.options_.playerId],H=h.masterPlaylistController_.error;"object"!=typeof H||H.code?"string"==typeof H&&(H={message:H,code:3}):H.code=3,P.error(H)});var S=this.options_.experimentalBufferBasedABR?tu.movingAverageBandwidthSelector(.55):tu.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.bind(this),this.masterPlaylistController_.selectInitialPlaylist=tu.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(H){this.masterPlaylistController_.selectPlaylist=H.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(H){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=H,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(H){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=H,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){Ct.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return h.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return h.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return h.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return h.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return h.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return h.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return h.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return h.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return h.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return h.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return h.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return h.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Ed(h.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return h.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return h.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return h.tech_.name_},enumerable:!0},duration:{get:function(){return h.tech_.duration()},enumerable:!0},master:{get:function(){return h.playlists.master},enumerable:!0},playerDimensions:{get:function(){return h.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Ed(h.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return h.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){h.options_.useBandwidthFromLocalStorage&&function(s){if(!ae().localStorage)return!1;var l=Tp();l=l?Ct.mergeOptions(l,s):s;try{ae().localStorage.setItem(tv,JSON.stringify(l))}catch{return!1}}({bandwidth:h.bandwidth,throughput:Math.round(h.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(s){s.representations=function(){var l=s.masterPlaylistController_.master(),u=Xu(l)?s.masterPlaylistController_.getAudioTrackPlaylists_():l.playlists;return u?u.filter(function(t){return!sf(t)}).map(function(t,a){return new Fg(s,t,t.id)}):[]}}(h)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){h.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ae().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},l.setupEme_=function(){var t=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,h=function(s){var l=s.player,h=function(s,l,u){if(!s)return s;var t={};l&&l.attributes&&l.attributes.CODECS&&(t=xd(or(l.attributes.CODECS))),u&&u.attributes&&u.attributes.CODECS&&(t.audio=u.attributes.CODECS);var a=xn(t.video),h=xn(t.audio),v={};for(var S in s)v[S]={},h&&(v[S].audioContentType=h),a&&(v[S].videoContentType=a),l.contentProtection&&l.contentProtection[S]&&l.contentProtection[S].pssh&&(v[S].pssh=l.contentProtection[S].pssh),"string"==typeof s[S]&&(v[S].url=s[S]);return Ct.mergeOptions(s,v)}(s.sourceKeySystems,s.media,s.audioMedia);return!(!h||(l.currentSource().keySystems=h,h&&!l.eme&&(Ct.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))}({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});this.player_.tech_.on("keystatuschange",function(v){"output-restricted"===v.status&&t.masterPlaylistController_.blacklistCurrentPlaylist({playlist:t.masterPlaylistController_.media(),message:"DRM keystatus changed to "+v.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),11!==Ct.browser.IE_VERSION&&h?(this.logger_("waiting for EME key session creation"),function(s){var l=s.player,u=s.sourceKeySystems,t=s.audioMedia,a=s.mainPlaylists;if(!l.eme.initializeMediaKeys)return Promise.resolve();var v=function(s,l){return s.reduce(function(u,t){if(!t.contentProtection)return u;var a=l.reduce(function(h,v){var S=t.contentProtection[v];return S&&S.pssh&&(h[v]={pssh:S.pssh}),h},{});return Object.keys(a).length&&u.push(a),u},[])}(t?a.concat([t]):a,Object.keys(u)),S=[],P=[];return v.forEach(function(H){P.push(new Promise(function(Y,Z){l.tech_.one("keysessioncreated",Y)})),S.push(new Promise(function(Y,Z){l.eme.initializeMediaKeys({keySystems:H},function(we){we?Z(we):Y()})}))}),Promise.race([Promise.all(S),Promise.race(P)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(v){t.logger_("error while creating EME key session",v),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},l.setupQualityLevels_=function(){var t=this,a=Ct.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(s,l){l.representations().forEach(function(u){s.addQualityLevel(u)}),Oy(s,l.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){Oy(t.qualityLevels_,t.playlists)}))},s.version=function(){return{"@videojs/http-streaming":"2.10.2","mux.js":"5.13.0","mpd-parser":"0.19.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},l.version=function(){return this.constructor.version()},l.canChangeType=function(){return gp.canChangeType()},l.play=function(){this.masterPlaylistController_.play()},l.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},l.duration=function(){return this.masterPlaylistController_.duration()},l.seekable=function(){return this.masterPlaylistController_.seekable()},l.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&ae().URL.revokeObjectURL&&(ae().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),g.prototype.dispose.call(this)},l.convertToProgramTime=function(t,a){return function(s){var l=s.playlist,u=s.time,t=void 0===u?void 0:u,a=s.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!l||void 0===t)return a({message:"getProgramTime: playlist and time must be provided"});var h=function(s,l){if(!l||!l.segments||0===l.segments.length)return null;for(var t,u=0,a=0;a<l.segments.length&&!(s<=(u=(t=l.segments[a]).videoTimingInfo?t.videoTimingInfo.transmuxedPresentationEnd:u+t.duration));a++);var h=l.segments[l.segments.length-1];if(h.videoTimingInfo&&h.videoTimingInfo.transmuxedPresentationEnd<s)return null;if(s>u){if(s>u+.25*h.duration)return null;t=h}return{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:u-t.duration,type:t.videoTimingInfo?"accurate":"estimate"}}(t,l);if(!h)return a({message:"valid programTime was not found"});if("estimate"===h.type)return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:h.estimatedStart});var v={mediaSeconds:t},S=function(s,l){if(!l.dateTimeObject)return null;var h=s-(l.videoTimingInfo.transmuxedPresentationStart+l.videoTimingInfo.transmuxerPrependedSeconds);return new Date(l.dateTimeObject.getTime()+1e3*h)}(t,h.segment);return S&&(v.programDateTime=S.toISOString()),a(null,v)}({playlist:this.masterPlaylistController_.media(),time:t,callback:a})},l.seekToProgramTime=function(t,a,h,v){return void 0===h&&(h=!0),void 0===v&&(v=2),iy({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:v,pauseAfterSeek:h,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},s}(Ct.getComponent("Component")),wp={name:"videojs-http-streaming",VERSION:"2.10.2",canHandleSource:function(s,l){void 0===l&&(l={});var u=Ct.mergeOptions(Ct.options,l);return wp.canPlayType(s.type,u)},handleSource:function(s,l,u){void 0===u&&(u={});var t=Ct.mergeOptions(Ct.options,u);return l.vhs=new Ep(s,l,t),Ct.hasOwnProperty("hls")||Object.defineProperty(l,"hls",{get:function(){return Ct.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),l.vhs},configurable:!0}),l.vhs.xhr=ug(),l.vhs.src(s.src,s.type),l.vhs},canPlayType:function(s,l){void 0===l&&(l={});var t=Ct.mergeOptions(Ct.options,l).vhs.overrideNative,a=void 0===t?!Ct.browser.IS_ANY_SAFARI:t,h=Ei(s);return!h||tu.supportsTypeNatively(h)&&!a?"":"maybe"}};mr("avc1.4d400d,mp4a.40.2")&&Ct.getTech("Html5").registerSourceHandler(wp,0),Ct.VhsHandler=Ep,Object.defineProperty(Ct,"HlsHandler",{get:function(){return Ct.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Ep},configurable:!0}),Ct.VhsSourceHandler=wp,Object.defineProperty(Ct,"HlsSourceHandler",{get:function(){return Ct.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),wp},configurable:!0}),Ct.Vhs=tu,Object.defineProperty(Ct,"Hls",{get:function(){return Ct.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),tu},configurable:!0}),Ct.use||(Ct.registerComponent("Hls",tu),Ct.registerComponent("Vhs",tu)),Ct.options.vhs=Ct.options.vhs||{},Ct.options.hls=Ct.options.hls||{},Ct.registerPlugin?Ct.registerPlugin("reloadSourceOnError",bp):Ct.plugin("reloadSourceOnError",bp);const Ry=Ct;var rl=W(6895);class Md{constructor(s){this.datePipe=s}transform(s){if(!s)return"";const l=s.toDate();return this.datePipe.transform(l,"mediumDate")}}Md.\u0275fac=function(s){return new(s||Md)(F.Y36(rl.uU,16))},Md.\u0275pipe=F.Yjl({name:"fbTimestamp",type:Md,pure:!0});const E0=["videoPlayer"];class Od{constructor(s){this.route=s}ngOnInit(){this.player=Ry(this.target?.nativeElement),this.route.data.subscribe(s=>{this.clip=s.clip,this.player?.src({src:this.clip.url,type:"video/mp4"})})}}Od.\u0275fac=function(s){return new(s||Od)(F.Y36(ne.gz))},Od.\u0275cmp=F.Xpm({type:Od,selectors:[["app-clip"]],viewQuery:function(s,l){if(1&s&&F.Gf(E0,7),2&s){let u;F.iGM(u=F.CRH())&&(l.target=u.first)}},features:[F._Bn([rl.uU])],decls:58,vars:5,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-w-16","aspect-h-9"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["routerLink","/clip/b",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(s,l){1&s&&(F.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),F._uU(3),F.qZA(),F.TgZ(4,"div",3),F._uU(5),F.TgZ(6,"span"),F._uU(7),F.ALo(8,"fbTimestamp"),F.qZA()(),F.TgZ(9,"div",4),F._UZ(10,"video",5,6),F.qZA()()(),F.TgZ(12,"div",7)(13,"h2",8),F._uU(14,"More Clips"),F.qZA(),F.TgZ(15,"div",9)(16,"a",10),F._UZ(17,"img",11),F.TgZ(18,"div",12)(19,"div",13)(20,"div",14),F.O4$(),F.TgZ(21,"svg",15),F._UZ(22,"path",16),F.qZA()()()(),F.kcU(),F.TgZ(23,"div",17)(24,"h2",18),F._uU(25," Game Highlighting Clip "),F.qZA(),F.TgZ(26,"p",19),F._uU(27," Luis Ramirez \xb7 "),F.TgZ(28,"span",20),F._uU(29,"March 31, 2020"),F.qZA()()()(),F.TgZ(30,"a",21),F._UZ(31,"img",22),F.TgZ(32,"div",12)(33,"div",13)(34,"div",14),F.O4$(),F.TgZ(35,"svg",15),F._UZ(36,"path",16),F.qZA()()()(),F.kcU(),F.TgZ(37,"div",17)(38,"h2",18),F._uU(39," Game Highlighting Clip "),F.qZA(),F.TgZ(40,"p",19),F._uU(41," Luis Ramirez \xb7 "),F.TgZ(42,"span",20),F._uU(43,"March 31, 2020"),F.qZA()()()(),F.TgZ(44,"a",21),F._UZ(45,"img",23),F.TgZ(46,"div",12)(47,"div",13)(48,"div",14),F.O4$(),F.TgZ(49,"svg",15),F._UZ(50,"path",16),F.qZA()()()(),F.kcU(),F.TgZ(51,"div",17)(52,"h2",18),F._uU(53," Game Highlighting Clip "),F.qZA(),F.TgZ(54,"p",19),F._uU(55," Luis Ramirez \xb7 "),F.TgZ(56,"span",20),F._uU(57,"March 31, 2020"),F.qZA()()()()()()),2&s&&(F.xp6(3),F.hij(" ",null==l.clip?null:l.clip.title," "),F.xp6(2),F.hij(" Uploaded By ",null==l.clip?null:l.clip.displayName," on "),F.xp6(2),F.Oqu(F.lcZ(8,3,null==l.clip?null:l.clip.timestamp)))},dependencies:[ne.rH,Md],styles:['@charset "UTF-8";.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%;height:0}.video-js.vjs-16-9{padding-top:56.25%}.video-js.vjs-4-3{padding-top:75%}.video-js.vjs-9-16{padding-top:177.7777777778%}.video-js.vjs-1-1{padding-top:100%}.video-js.vjs-fill{width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js .vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster{display:block}.vjs-using-native-controls .vjs-poster{display:none}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control,.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-chapters-button,.video-js.vjs-layout-small .vjs-descriptions-button,.video-js.vjs-layout-small .vjs-captions-button,.video-js.vjs-layout-small .vjs-subtitles-button,.video-js.vjs-layout-small .vjs-audio-button,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-chapters-button,.video-js.vjs-layout-x-small .vjs-descriptions-button,.video-js.vjs-layout-x-small .vjs-captions-button,.video-js.vjs-layout-x-small .vjs-subtitles-button,.video-js.vjs-layout-x-small .vjs-audio-button,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-chapters-button,.video-js.vjs-layout-tiny .vjs-descriptions-button,.video-js.vjs-layout-tiny .vjs-captions-button,.video-js.vjs-layout-tiny .vjs-subtitles-button,.video-js.vjs-layout-tiny .vjs-audio-button,.video-js.vjs-layout-tiny .vjs-volume-control{display:none!important}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:auto;width:initial}.video-js.vjs-layout-x-small:not(.vjs-liveui) .vjs-subs-caps-button,.video-js.vjs-layout-x-small:not(.vjs-live) .vjs-subs-caps-button,.video-js.vjs-layout-tiny .vjs-subs-caps-button{display:none}.video-js.vjs-layout-x-small.vjs-liveui .vjs-custom-control-spacer,.video-js.vjs-layout-tiny .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-liveui.vjs-no-flex .vjs-custom-control-spacer,.video-js.vjs-layout-tiny.vjs-no-flex .vjs-custom-control-spacer{width:auto}.video-js.vjs-layout-x-small.vjs-liveui .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}.vjs-theme-forest{--vjs-theme-forest--primary: rgb(129,140,248)}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23818cf8\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.video-js{position:initial}.video-js .vjs-control-bar{height:6em}.vjs-button>.vjs-icon-placeholder:before{font-size:3.8em}.video-js .vjs-button{width:6em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:8em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:8em;height:6em;margin-right:0}.vjs-theme-forest .vjs-volume-bar:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-volume-level:before{border-left-width:8em;border-bottom-width:5em}.vjs-theme-forest .vjs-progress-holder{height:2em}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{font-size:2em}.video-js .vjs-time-tooltip{top:-2em}.video-js .vjs-time-control{font-size:2em}\n'],encapsulation:2});var uv=W(8293);const lv=function(g){return["/","clip",g]};function J0(g,s){if(1&g&&(F.TgZ(0,"a",2),F._UZ(1,"img",3),F.TgZ(2,"div",4)(3,"div",5)(4,"div",6),F.O4$(),F.TgZ(5,"svg",7),F._UZ(6,"path",8),F.qZA()()()(),F.kcU(),F.TgZ(7,"div",9)(8,"h2",10),F._uU(9),F.qZA(),F.TgZ(10,"p",11),F._uU(11),F.TgZ(12,"span",12),F._uU(13),F.ALo(14,"fbTimestamp"),F.qZA()()()()),2&g){const l=s.$implicit;F.Q6J("routerLink",F.VKq(7,lv,l.docId)),F.xp6(1),F.Q6J("src",l.screenshotUrl,F.LSH),F.xp6(8),F.hij(" ",l.title," "),F.xp6(2),F.hij(" ",l.displayName," \xb7 "),F.xp6(2),F.Oqu(F.lcZ(14,5,l.timestamp))}}class Rd{constructor(s){this.clipService=s,this.handleScroll=()=>{const{scrollTop:l,offsetHeight:u}=document.documentElement,{innerHeight:t}=window;Math.round(l)+t===u&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){window.removeEventListener("scroll",this.handleScroll)}}Rd.\u0275fac=function(s){return new(s||Rd)(F.Y36(uv.Y))},Rd.\u0275cmp=F.Xpm({type:Rd,selectors:[["app-clips-list"]],features:[F._Bn([rl.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(s,l){1&s&&(F.TgZ(0,"div",0),F.YNc(1,J0,15,9,"a",1),F.qZA()),2&s&&(F.xp6(1),F.Q6J("ngForOf",l.clipService.pageClips))},dependencies:[rl.sg,ne.rH,Md]});class wc{}wc.\u0275fac=function(s){return new(s||wc)},wc.\u0275cmp=F.Xpm({type:wc,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(s,l){1&s&&(F.TgZ(0,"section",0)(1,"video",1),F._UZ(2,"source",2),F.qZA(),F._UZ(3,"div",3),F.TgZ(4,"div",4),F._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),F.qZA(),F.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),F._uU(13,"Clip it and ship it!"),F.qZA(),F.TgZ(14,"p"),F._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),F.qZA()()()(),F.TgZ(16,"section",9)(17,"h1",10),F._uU(18,"Latest"),F.qZA(),F._UZ(19,"app-clips-list"),F.qZA())},dependencies:[Rd]});class il{}il.\u0275fac=function(s){return new(s||il)},il.\u0275cmp=F.Xpm({type:il,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(s,l){1&s&&(F.TgZ(0,"div",0)(1,"span",1),F._uU(2,"404"),F.qZA(),F._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),F.qZA(),F.TgZ(15,"div",14)(16,"h2",15),F._uU(17,"Page not found"),F.qZA(),F.TgZ(18,"p"),F._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),F.qZA()())}});const Cp=[{path:"",component:wc},{path:"about",component:Ne},{path:"clip/:id",component:Od,resolve:{clip:uv.Y}},{path:"",loadChildren:function(){var g=(0,ie.Z)(function*(){return(yield W.e(829).then(W.bind(W,1829))).VideoModule});return function(){return g.apply(this,arguments)}}()},{path:"**",component:il}];class Ql{}Ql.\u0275fac=function(s){return new(s||Ql)},Ql.\u0275mod=F.oAB({type:Ql}),Ql.\u0275inj=F.cJS({imports:[ne.Bz.forRoot(Cp),ne.Bz]});var cv=W(9646),Ny=W(4004),Cf=W(4986),zc=W(7272),sl=W(5698),Sp=W(4482),Ga=W(5403),xh=W(5032),ju=W(9718),dv=W(5577);function qc(g,s){return s?l=>(0,zc.z)(s.pipe((0,sl.q)(1),function Ug(){return(0,Sp.e)((g,s)=>{g.subscribe((0,Ga.x)(s,xh.Z))})}()),l.pipe(qc(g))):(0,dv.z)((l,u)=>g(l,u).pipe((0,sl.q)(1),(0,ju.h)(l)))}var Sf=W(9751),Nd=W(3532);var Fd=W(9300),Ih=W(3900),Wc=W(1205),hv=W(2095);class Xl{constructor(s,l,u,t){this.auth=s,this.db=l,this.router=u,this.route=t,this.redirect=!1,this.usersCollection=l.collection("users"),this.isAuthenticated$=s.user.pipe((0,Ny.U)(a=>!!a)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function Ah(g,s=Cf.z){const l=function Ld(g=0,s,l=Cf.P){let u=-1;return null!=s&&((0,Nd.K)(s)?l=s:u=s),new Sf.y(t=>{let a=function Df(g){return g instanceof Date&&!isNaN(g)}(g)?+g-l.now():g;a<0&&(a=0);let h=0;return l.schedule(function(){t.closed||(t.next(h++),0<=u?this.schedule(void 0,u):t.complete())},a)})}(g,s);return qc(()=>l)}(1e3)),this.router.events.pipe((0,Fd.h)(a=>a instanceof ne.m2),(0,Ny.U)(a=>this.route.firstChild),(0,Ih.w)(a=>a?.data??(0,cv.of)({authOnly:!1}))).subscribe(a=>{this.redirect=a.authOnly})}createUser(s){var l=this;return(0,ie.Z)(function*(){if(!s.password)throw new Error("Password not provided!");const u=yield l.auth.createUserWithEmailAndPassword(s.email,s.password);if(!u.user)throw new Error("User cannot be null");yield l.db.collection("users").doc(u.user.uid).set({name:s.name,email:s.email,age:s.age,phoneNumber:s.phoneNumber}),yield u.user.updateProfile({displayName:s.name})})()}logout(s){var l=this;return(0,ie.Z)(function*(){s&&s.preventDefault(),yield l.auth.signOut(),l.redirect&&(yield l.router.navigateByUrl("/"))})()}}Xl.\u0275fac=function(s){return new(s||Xl)(F.LFG(Wc.zQ),F.LFG(hv.ST),F.LFG(ne.F0),F.LFG(ne.gz))},Xl.\u0275prov=F.Yz7({token:Xl,factory:Xl.\u0275fac,providedIn:"root"});var fv=W(1609),Bg=W(3446);class Kc{constructor(){this.tabTitle="",this.active=!1}}Kc.\u0275fac=function(s){return new(s||Kc)},Kc.\u0275cmp=F.Xpm({type:Kc,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:["*"],decls:2,vars:2,template:function(s,l){1&s&&(F.F$t(),F.TgZ(0,"div"),F.Hsn(1),F.qZA()),2&s&&F.ekj("hidden",!l.active)}});const Ly=function(g,s){return{"hover:text-indigo-400":g,"hover:text-white text-white bg-indigo-400":s}};function pv(g,s){if(1&g){const l=F.EpF();F.TgZ(0,"li",2)(1,"a",3),F.NdJ("click",function(){const a=F.CHM(l).$implicit,h=F.oxw();return F.KtG(h.selectTab(a))}),F._uU(2),F.qZA()()}if(2&g){const l=s.$implicit;F.xp6(1),F.Q6J("ngClass",F.WLB(2,Ly,!l.active,l.active)),F.xp6(1),F.hij(" ",l.tabTitle,"")}}class Dp{constructor(){this.tabs=new F.n_E}ngAfterContentInit(){const s=this.tabs.filter(l=>l.active);(!s||0===s.length)&&this.selectTab(this.tabs?.first)}selectTab(s){return this.tabs?.forEach(l=>{l.active=!1}),s.active=!0,!1}}Dp.\u0275fac=function(s){return new(s||Dp)},Dp.\u0275cmp=F.Xpm({type:Dp,selectors:[["app-tabs-container"]],contentQueries:function(s,l,u){if(1&s&&F.Suo(u,Kc,4),2&s){let t;F.iGM(t=F.CRH())&&(l.tabs=t)}},ngContentSelectors:["*"],decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-indigo-400",3,"ngClass","click"]],template:function(s,l){1&s&&(F.F$t(),F.TgZ(0,"ul",0),F.YNc(1,pv,3,5,"li",1),F.qZA(),F.Hsn(2)),2&s&&(F.xp6(1),F.Q6J("ngForOf",l.tabs))},dependencies:[rl.mk,rl.sg]});var Hg=W(8549),Ki=W(4006);function Fy(g,s){if(1&g&&(F.TgZ(0,"app-alert",11),F._uU(1),F.qZA()),2&g){const l=F.oxw();F.Q6J("color",l.alertColor),F.xp6(1),F.hij(" ",l.alertMsg," ")}}function mv(g,s){1&g&&(F.TgZ(0,"p",12),F._uU(1," Email is invalid. "),F.qZA())}function Gg(g,s){1&g&&(F.TgZ(0,"p",12),F._uU(1," Password is invalid. "),F.qZA())}class Cc{constructor(s){this.auth=s,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait!. Weare logging you in.",this.alertColor="blue",this.inSubmission=!1}login(){var s=this;return(0,ie.Z)(function*(){s.showAlert=!0,s.alertMsg="Please wait!. Weare logging you in.",s.alertColor="blue",s.inSubmission=!0;try{yield s.auth.signInWithEmailAndPassword(s.credentials.email,s.credentials.password)}catch(l){return console.error(l),s.alertMsg="An Unexpected error occurred! Please try again later.",s.alertColor="red",void(s.inSubmission=!1)}s.alertMsg="Success! Your account has been created.",s.alertColor="green"})()}}Cc.\u0275fac=function(s){return new(s||Cc)(F.Y36(Wc.zQ))},Cc.\u0275cmp=F.Xpm({type:Cc,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(s,l){if(1&s&&(F.YNc(0,Fy,2,2,"app-alert",0),F.TgZ(1,"form",1,2),F.NdJ("ngSubmit",function(){return l.login()}),F.TgZ(3,"div",3)(4,"label",4),F._uU(5,"Email"),F.qZA(),F.TgZ(6,"input",5,6),F.NdJ("ngModelChange",function(t){return l.credentials.email=t}),F.qZA(),F.YNc(8,mv,2,0,"p",7),F.qZA(),F.TgZ(9,"div",3)(10,"label",4),F._uU(11,"Password"),F.qZA(),F.TgZ(12,"input",8,9),F.NdJ("ngModelChange",function(t){return l.credentials.password=t}),F.qZA(),F.YNc(14,Gg,2,0,"p",7),F.qZA(),F.TgZ(15,"button",10),F._uU(16," Submit "),F.qZA()()),2&s){const u=F.MAs(2),t=F.MAs(7),a=F.MAs(13);F.Q6J("ngIf",l.showAlert),F.xp6(6),F.Q6J("ngModel",l.credentials.email),F.xp6(2),F.Q6J("ngIf",t.errors&&t.touched&&t.dirty),F.xp6(4),F.Q6J("ngModel",l.credentials.password),F.xp6(2),F.Q6J("ngIf",a.errors&&a.touched&&a.dirty),F.xp6(1),F.Q6J("disabled",u.invalid||l.inSubmission)}},dependencies:[rl.O5,Hg.w,Ki._Y,Ki.Fj,Ki.JJ,Ki.JL,Ki.Q7,Ki.c5,Ki.On,Ki.F]});class Zi{static match(s,l){return u=>{const t=u.get(s),a=u.get(l);if(!t||!a)return console.log("Form controls can not be found in the form group."),{controlNotFound:!1};const h=t.value===a.value?null:{noMatch:!0};return a.setErrors(h),h}}}class Sc{constructor(s){this.auth=s,this.validate=l=>this.auth.fetchSignInMethodsForEmail(l.value).then(u=>u.length?{emailTaken:!0}:null)}}Sc.\u0275fac=function(s){return new(s||Sc)(F.LFG(Wc.zQ))},Sc.\u0275prov=F.Yz7({token:Sc,factory:Sc.\u0275fac,providedIn:"root"});var xp=W(235);function $g(g,s){if(1&g&&(F.TgZ(0,"app-alert",11),F._uU(1),F.qZA()),2&g){const l=F.oxw();F.Q6J("color",l.alertColor),F.xp6(1),F.hij(" ",l.alertMsg," ")}}class Zc{constructor(s,l){this.auth=s,this.emailTaken=l,this.inSubmission=!1,this.name=new Ki.NI("",[Ki.kI.required,Ki.kI.minLength(3)]),this.email=new Ki.NI("",[Ki.kI.required,Ki.kI.email],[this.emailTaken.validate]),this.age=new Ki.NI("",[Ki.kI.required,Ki.kI.min(18),Ki.kI.max(120)]),this.password=new Ki.NI("",[Ki.kI.required,Ki.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new Ki.NI("",[Ki.kI.required]),this.phoneNumber=new Ki.NI("",[Ki.kI.required,Ki.kI.minLength(10),Ki.kI.maxLength(10)]),this.registerForm=new Ki.cw({name:this.name??"",email:this.email??"",age:this.age??"",password:this.password??"",confirm_password:this.confirm_password??"",phoneNumber:this.phoneNumber??""},[Zi.match("password","confirm_password")]),this.alertMsg="Please wait! Your account is being created!",this.alertColor="blue",this.showAlert=!1}register(){var s=this;return(0,ie.Z)(function*(){s.showAlert=!0,s.alertMsg="Please wait! Your account is being created!",s.alertColor="blue",s.inSubmission=!0;try{yield s.auth.createUser(s.registerForm.value)}catch(l){return console.error(l),s.alertMsg="An Unexpected error occurred! Please try again later.",s.alertColor="red",void(s.inSubmission=!1)}s.alertMsg="Success! Your account has been created.",s.alertColor="green",s.inSubmission=!1})()}}Zc.\u0275fac=function(s){return new(s||Zc)(F.Y36(Xl),F.Y36(Sc))},Zc.\u0275cmp=F.Xpm({type:Zc,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter Name",3,"control"],["placeholder","Enter Email","type","email",3,"control"],["placeholder","Enter Number","type","number",3,"control"],["type","password","placeholder","Enter Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["placeholder","Enter Phone Number","type","number",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(s,l){1&s&&(F.YNc(0,$g,2,2,"app-alert",0),F.TgZ(1,"form",1),F.NdJ("ngSubmit",function(){return l.register()}),F.TgZ(2,"div",2)(3,"label",3),F._uU(4,"Name"),F.qZA(),F._UZ(5,"app-input",4),F.qZA(),F.TgZ(6,"div",2)(7,"label",3),F._uU(8,"Email"),F.qZA(),F._UZ(9,"app-input",5),F.qZA(),F.TgZ(10,"div",2)(11,"label",3),F._uU(12,"Age"),F.qZA(),F._UZ(13,"app-input",6),F.qZA(),F.TgZ(14,"div",2)(15,"label",3),F._uU(16,"Password"),F.qZA(),F._UZ(17,"app-input",7),F.qZA(),F.TgZ(18,"div",2)(19,"label",3),F._uU(20,"Confirm Password"),F.qZA(),F._UZ(21,"app-input",8),F.qZA(),F.TgZ(22,"div",2)(23,"label",3),F._uU(24,"Phone Number"),F.qZA(),F._UZ(25,"app-input",9),F.qZA(),F.TgZ(26,"button",10),F._uU(27," Submit "),F.qZA()()),2&s&&(F.Q6J("ngIf",l.showAlert),F.xp6(1),F.Q6J("formGroup",l.registerForm),F.xp6(4),F.Q6J("control",l.name),F.xp6(4),F.Q6J("control",l.email),F.xp6(4),F.Q6J("control",l.age),F.xp6(4),F.Q6J("control",l.password),F.xp6(4),F.Q6J("control",l.confirm_password),F.xp6(4),F.Q6J("control",l.phoneNumber),F.xp6(1),F.Q6J("disabled",l.registerForm.invalid||l.inSubmission))},dependencies:[rl.O5,xp.a,Hg.w,Ki._Y,Ki.JL,Ki.sg]});class Yc{constructor(s){this.modal=s}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}function Hs(g,s){if(1&g){const l=F.EpF();F.TgZ(0,"li")(1,"a",14),F.NdJ("click",function(t){F.CHM(l);const a=F.oxw();return F.KtG(a.openModal(t))}),F._uU(2,"Login / Register"),F.qZA()()}}Yc.\u0275fac=function(s){return new(s||Yc)(F.Y36(fv.Z))},Yc.\u0275cmp=F.Xpm({type:Yc,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(s,l){1&s&&(F.TgZ(0,"app-modal",0)(1,"p",1),F._uU(2,"Your Account"),F.qZA(),F.TgZ(3,"app-tabs-container")(4,"app-tab",2),F._UZ(5,"app-login"),F.qZA(),F.TgZ(6,"app-tab",3),F._UZ(7,"app-register"),F.qZA()()())},dependencies:[Bg.z,Dp,Kc,Cc,Zc]});const Ia=function(){return{exact:!0}},Jl=function(){return{sort:"1"}};function zg(g,s){if(1&g){const l=F.EpF();F.TgZ(0,"li")(1,"a",15),F._uU(2,"Manage"),F.qZA()(),F.TgZ(3,"li")(4,"a",16),F._uU(5,"Upload"),F.qZA()(),F.TgZ(6,"li")(7,"a",17),F.NdJ("click",function(t){F.CHM(l);const a=F.oxw();return F.KtG(a.auth.logout(t))}),F._uU(8,"Logout"),F.qZA()()}2&g&&(F.xp6(1),F.Q6J("routerLinkActiveOptions",F.DdM(3,Ia))("queryParams",F.DdM(4,Jl)),F.xp6(3),F.Q6J("routerLinkActiveOptions",F.DdM(5,Ia)))}class xf{constructor(s,l){this.modal=s,this.auth=l}openModal(s){this.modal.toggleModal("auth")}}function Ap(g,s){1&g&&F._UZ(0,"app-auth-modal")}xf.\u0275fac=function(s){return new(s||xf)(F.Y36(fv.Z),F.Y36(Xl))},xf.\u0275cmp=F.Xpm({type:xf,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"px-2",3,"click"]],template:function(s,l){if(1&s&&(F.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),F._uU(3,"Clipz"),F.qZA(),F.TgZ(4,"div",3)(5,"ul",4),F.YNc(6,Hs,3,0,"li",5),F.ALo(7,"async"),F.YNc(8,zg,9,6,"ng-template",null,6,F.W1O),F.TgZ(10,"li")(11,"a",7),F._uU(12,"About"),F.qZA()()(),F.TgZ(13,"ul",8)(14,"li")(15,"a",9),F._UZ(16,"img",10),F.TgZ(17,"span",11),F._uU(18,"English"),F.qZA()()(),F.TgZ(19,"li",12)(20,"a",9),F._UZ(21,"img",13),F.TgZ(22,"span",11),F._uU(23,"French"),F.qZA()()()()()()()),2&s){const u=F.MAs(9);F.xp6(6),F.Q6J("ngIf",!F.lcZ(7,2,l.auth.isAuthenticated$))("ngIfElse",u)}},dependencies:[rl.O5,ne.rH,ne.Od,rl.Ov]});class jd{constructor(s){this.auth=s,this.title="clips"}}jd.\u0275fac=function(s){return new(s||jd)(F.Y36(Xl))},jd.\u0275cmp=F.Xpm({type:jd,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(s,l){1&s&&(F._UZ(0,"app-nav")(1,"router-outlet"),F.YNc(2,Ap,1,0,"app-auth-modal",0),F.ALo(3,"async")),2&s&&(F.xp6(2),F.Q6J("ngIf",!F.lcZ(3,1,l.auth.isAuthenticatedWithDelay$)))},dependencies:[rl.O5,Yc,ne.lC,xf,rl.Ov]});var qg=W(4466);class Ph{}Ph.\u0275fac=function(s){return new(s||Ph)},Ph.\u0275mod=F.oAB({type:Ph}),Ph.\u0275inj=F.cJS({imports:[rl.ez,qg.m,Ki.UX,Ki.u5]});var Ip=W(2011);const vv_firebase={apiKey:"AIzaSyDYi5c3ITKR6yCPPgAcdymNc6ZeUVPdCeI",authDomain:"clips-ef9e6.firebaseapp.com",projectId:"clips-ef9e6",storageBucket:"clips-ef9e6.appspot.com",appId:"1:587450755595:web:59c7e1f6cb2d7259f1f50e"};var w0=W(377);class kh{}kh.\u0275fac=function(s){return new(s||kh)},kh.\u0275mod=F.oAB({type:kh,bootstrap:[jd]}),kh.\u0275inj=F.cJS({imports:[E.b2,Ph,Ip.hO.initializeApp(vv_firebase),Wc.ww,hv.yb,Ql,w0.TE]});var jy=W(9260);W(750),jy.Z.initializeApp(vv_firebase);let yv=!1;jy.Z.auth().onAuthStateChanged(()=>{yv||E.q6().bootstrapModule(kh).catch(g=>console.error(g)),yv=!0})},3992:(Wt,et,W)=>{"use strict";var E=W(9226);Wt.exports=function(Ne,Be){return void 0===Be&&(Be=!1),function(ae,He,Ae){if(ae)Ne(ae);else if(He.statusCode>=400&&He.statusCode<=599){var De=Ae;if(Be)if(E.TextDecoder){var Ee=function ne(F){return void 0===F&&(F=""),F.toLowerCase().split(";").reduce(function(Ne,Be){var ae=Be.split("="),Ae=ae[1];return"charset"===ae[0].trim()?Ae.trim():Ne},"utf-8")}(He.headers&&He.headers["content-type"]);try{De=new TextDecoder(Ee).decode(Ae)}catch{}}else De=String.fromCharCode.apply(null,new Uint8Array(Ae));Ne({cause:De})}else Ne(null,Ae)}}},745:(Wt,et,W)=>{"use strict";var E=W(9226),ie=W(434),ne=W(2703);function ae(Me,$e,rt){var _t=Me;return ne($e)?(rt=$e,"string"==typeof Me&&(_t={uri:Me})):_t=ie({},$e,{uri:Me}),_t.callback=rt,_t}function He(Me,$e,rt){return Ae($e=ae(Me,$e,rt))}function Ae(Me){if(typeof Me.callback>"u")throw new Error("callback argument missing");var $e=!1,rt=function(qe,dt,wt){$e||($e=!0,Me.callback(qe,dt,wt))};function St(){var Oe=void 0;if(Oe=st.response?st.response:st.responseText||function De(Me){try{if("document"===Me.responseType)return Me.responseXML;if(""===Me.responseType&&(!Me.responseXML||"parsererror"!==Me.responseXML.documentElement.nodeName))return Me.responseXML}catch{}return null}(st),ve)try{Oe=JSON.parse(Oe)}catch{}return Oe}function Fe(Oe){return clearTimeout(ge),Oe instanceof Error||(Oe=new Error(""+(Oe||"Unknown XMLHttpRequest Error"))),Oe.statusCode=0,rt(Oe,Le)}function ut(){if(!Ve){var Oe;clearTimeout(ge);var qe=Le,dt=null;return 0!==(Oe=Me.useXDR&&void 0===st.status?200:1223===st.status?204:st.status)?(qe={body:St(),statusCode:Oe,method:gt,headers:{},url:Xe,rawRequest:st},st.getAllResponseHeaders&&(qe.headers=function($e){var rt={};return $e&&$e.trim().split("\n").forEach(function(_t){var St=_t.indexOf(":"),Fe=_t.slice(0,St).trim().toLowerCase(),ut=_t.slice(St+1).trim();typeof rt[Fe]>"u"?rt[Fe]=ut:Array.isArray(rt[Fe])?rt[Fe].push(ut):rt[Fe]=[rt[Fe],ut]}),rt}(st.getAllResponseHeaders()))):dt=new Error("Internal XMLHttpRequest Error"),rt(dt,qe,qe.body)}}var st=Me.xhr||null;st||(st=Me.cors||Me.useXDR?new He.XDomainRequest:new He.XMLHttpRequest);var Et,Ve,ge,Xe=st.url=Me.uri||Me.url,gt=st.method=Me.method||"GET",kt=Me.body||Me.data,xt=st.headers=Me.headers||{},X=!!Me.sync,ve=!1,Le={body:void 0,headers:{},statusCode:0,method:gt,url:Xe,rawRequest:st};if("json"in Me&&!1!==Me.json&&(ve=!0,xt.accept||xt.Accept||(xt.Accept="application/json"),"GET"!==gt&&"HEAD"!==gt&&(xt["content-type"]||xt["Content-Type"]||(xt["Content-Type"]="application/json"),kt=JSON.stringify(!0===Me.json?kt:Me.json))),st.onreadystatechange=function _t(){4===st.readyState&&setTimeout(ut,0)},st.onload=ut,st.onerror=Fe,st.onprogress=function(){},st.onabort=function(){Ve=!0},st.ontimeout=Fe,st.open(gt,Xe,!X,Me.username,Me.password),X||(st.withCredentials=!!Me.withCredentials),!X&&Me.timeout>0&&(ge=setTimeout(function(){if(!Ve){Ve=!0,st.abort("timeout");var Oe=new Error("XMLHttpRequest timeout");Oe.code="ETIMEDOUT",Fe(Oe)}},Me.timeout)),st.setRequestHeader)for(Et in xt)xt.hasOwnProperty(Et)&&st.setRequestHeader(Et,xt[Et]);else if(Me.headers&&!function Be(Me){for(var $e in Me)if(Me.hasOwnProperty($e))return!1;return!0}(Me.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Me&&(st.responseType=Me.responseType),"beforeSend"in Me&&"function"==typeof Me.beforeSend&&Me.beforeSend(st),st.send(kt||null),st}He.httpHandler=W(3992),Wt.exports=He,Wt.exports.default=He,He.XMLHttpRequest=E.XMLHttpRequest||function Ee(){},He.XDomainRequest="withCredentials"in new He.XMLHttpRequest?He.XMLHttpRequest:E.XDomainRequest,function Ne(Me,$e){for(var rt=0;rt<Me.length;rt++)$e(Me[rt])}(["get","put","post","patch","head","delete"],function(Me){He["delete"===Me?"del":Me]=function($e,rt,_t){return(rt=ae($e,rt,_t)).method=Me.toUpperCase(),Ae(rt)}})},9401:(Wt,et)=>{"use strict";function E(F,Ne){return void 0===Ne&&(Ne=Object),Ne&&"function"==typeof Ne.freeze?Ne.freeze(F):F}var ie=E({HTML:"text/html",isHTML:function(F){return F===ie.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ne=E({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(F){return F===ne.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});et.find=function W(F,Ne,Be){if(void 0===Be&&(Be=Array.prototype),F&&"function"==typeof Be.find)return Be.find.call(F,Ne);for(var ae=0;ae<F.length;ae++)if(Object.prototype.hasOwnProperty.call(F,ae)){var He=F[ae];if(Ne.call(void 0,He,ae,F))return He}},et.freeze=E,et.MIME_TYPE=ie,et.NAMESPACE=ne},1991:(Wt,et,W)=>{var ie=W(9401),ne=W(6853),F=W(4436),Ne=W(8702),Be=ne.DOMImplementation,ae=ie.NAMESPACE,He=Ne.ParseError,Ae=Ne.XMLReader;function De(Fe){this.options=Fe||{locator:{}}}function Me(){this.cdata=!1}function $e(Fe,ut){ut.lineNumber=Fe.lineNumber,ut.columnNumber=Fe.columnNumber}function rt(Fe){if(Fe)return"\n@"+(Fe.systemId||"")+"#[line:"+Fe.lineNumber+",col:"+Fe.columnNumber+"]"}function _t(Fe,ut,st){return"string"==typeof Fe?Fe.substr(ut,st):Fe.length>=ut+st||ut?new java.lang.String(Fe,ut,st)+"":Fe}function St(Fe,ut){Fe.currentElement?Fe.currentElement.appendChild(ut):Fe.doc.appendChild(ut)}De.prototype.parseFromString=function(Fe,ut){var st=this.options,Et=new Ae,Ve=st.domBuilder||new Me,Xe=st.errorHandler,gt=st.locator,kt=st.xmlns||{},xt=/\/x?html?$/.test(ut),X=xt?F.HTML_ENTITIES:F.XML_ENTITIES;return gt&&Ve.setDocumentLocator(gt),Et.errorHandler=function Ee(Fe,ut,st){if(!Fe){if(ut instanceof Me)return ut;Fe=ut}var Et={},Ve=Fe instanceof Function;function Xe(gt){var kt=Fe[gt];!kt&&Ve&&(kt=2==Fe.length?function(xt){Fe(gt,xt)}:Fe),Et[gt]=kt&&function(xt){kt("[xmldom "+gt+"]\t"+xt+rt(st))}||function(){}}return st=st||{},Xe("warning"),Xe("error"),Xe("fatalError"),Et}(Xe,Ve,gt),Et.domBuilder=st.domBuilder||Ve,xt&&(kt[""]=ae.HTML),kt.xml=kt.xml||ae.XML,Fe&&"string"==typeof Fe?Et.parse(Fe,kt,X):Et.errorHandler.error("invalid doc source"),Ve.doc},Me.prototype={startDocument:function(){this.doc=(new Be).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Fe,ut,st,Et){var Ve=this.doc,Xe=Ve.createElementNS(Fe,st||ut),gt=Et.length;St(this,Xe),this.currentElement=Xe,this.locator&&$e(this.locator,Xe);for(var kt=0;kt<gt;kt++){Fe=Et.getURI(kt);var xt=Et.getValue(kt),X=(st=Et.getQName(kt),Ve.createAttributeNS(Fe,st));this.locator&&$e(Et.getLocator(kt),X),X.value=X.nodeValue=xt,Xe.setAttributeNode(X)}},endElement:function(Fe,ut,st){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Fe,ut){},endPrefixMapping:function(Fe){},processingInstruction:function(Fe,ut){var st=this.doc.createProcessingInstruction(Fe,ut);this.locator&&$e(this.locator,st),St(this,st)},ignorableWhitespace:function(Fe,ut,st){},characters:function(Fe,ut,st){if(Fe=_t.apply(this,arguments)){if(this.cdata)var Et=this.doc.createCDATASection(Fe);else Et=this.doc.createTextNode(Fe);this.currentElement?this.currentElement.appendChild(Et):/^\s*$/.test(Fe)&&this.doc.appendChild(Et),this.locator&&$e(this.locator,Et)}},skippedEntity:function(Fe){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Fe){(this.locator=Fe)&&(Fe.lineNumber=0)},comment:function(Fe,ut,st){Fe=_t.apply(this,arguments);var Et=this.doc.createComment(Fe);this.locator&&$e(this.locator,Et),St(this,Et)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Fe,ut,st){var Et=this.doc.implementation;if(Et&&Et.createDocumentType){var Ve=Et.createDocumentType(Fe,ut,st);this.locator&&$e(this.locator,Ve),St(this,Ve),this.doc.doctype=Ve}},warning:function(Fe){console.warn("[xmldom warning]\t"+Fe,rt(this.locator))},error:function(Fe){console.error("[xmldom error]\t"+Fe,rt(this.locator))},fatalError:function(Fe){throw new He(Fe,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Fe){Me.prototype[Fe]=function(){return null}}),et.DOMParser=De},6853:(Wt,et,W)=>{var E=W(9401),ie=E.find,ne=E.NAMESPACE;function F(pe){return""!==pe}function Be(pe,re){return pe.hasOwnProperty(re)||(pe[re]=!0),pe}function ae(pe){if(!pe)return[];var re=function Ne(pe){return pe?pe.split(/[\t\n\f\r ]+/).filter(F):[]}(pe);return Object.keys(re.reduce(Be,{}))}function Ae(pe,re){for(var de in pe)Object.prototype.hasOwnProperty.call(pe,de)&&(re[de]=pe[de])}function De(pe,re){var de=pe.prototype;if(!(de instanceof re)){let ze=function(){};ze.prototype=re.prototype,ze=new ze,Ae(de,ze),pe.prototype=de=ze}de.constructor!=pe&&("function"!=typeof pe&&console.error("unknown Class:"+pe),de.constructor=pe)}var Ee={},Me=Ee.ELEMENT_NODE=1,$e=Ee.ATTRIBUTE_NODE=2,rt=Ee.TEXT_NODE=3,_t=Ee.CDATA_SECTION_NODE=4,St=Ee.ENTITY_REFERENCE_NODE=5,Fe=Ee.ENTITY_NODE=6,ut=Ee.PROCESSING_INSTRUCTION_NODE=7,st=Ee.COMMENT_NODE=8,Et=Ee.DOCUMENT_NODE=9,Ve=Ee.DOCUMENT_TYPE_NODE=10,Xe=Ee.DOCUMENT_FRAGMENT_NODE=11,gt=Ee.NOTATION_NODE=12,kt={},xt={},ge=(kt.INDEX_SIZE_ERR=(xt[1]="Index size error",1),kt.DOMSTRING_SIZE_ERR=(xt[2]="DOMString size error",2),kt.HIERARCHY_REQUEST_ERR=(xt[3]="Hierarchy request error",3)),wt=(kt.WRONG_DOCUMENT_ERR=(xt[4]="Wrong document",4),kt.INVALID_CHARACTER_ERR=(xt[5]="Invalid character",5),kt.NO_DATA_ALLOWED_ERR=(xt[6]="No data allowed",6),kt.NO_MODIFICATION_ALLOWED_ERR=(xt[7]="No modification allowed",7),kt.NOT_FOUND_ERR=(xt[8]="Not found",8)),Mt=(kt.NOT_SUPPORTED_ERR=(xt[9]="Not supported",9),kt.INUSE_ATTRIBUTE_ERR=(xt[10]="Attribute in use",10));function Zt(pe,re){if(re instanceof Error)var de=re;else de=this,Error.call(this,xt[pe]),this.message=xt[pe],Error.captureStackTrace&&Error.captureStackTrace(this,Zt);return de.code=pe,re&&(this.message=this.message+": "+re),de}function hn(){}function Gt(pe,re){this._node=pe,this._refresh=re,rr(this)}function rr(pe){var re=pe._node._inc||pe._node.ownerDocument._inc;if(pe._inc!==re){var de=pe._refresh(pe._node);if(Br(pe,"length",de.length),!pe.$$length||de.length<pe.$$length)for(var me=de.length;me in pe;me++)Object.prototype.hasOwnProperty.call(pe,me)&&delete pe[me];Ae(de,pe),pe._inc=re}}function Wn(){}function Er(pe,re){for(var de=pe.length;de--;)if(pe[de]===re)return de}function _r(pe,re,de,me){if(me?re[Er(re,me)]=de:re[re.length++]=de,pe){de.ownerElement=pe;var ze=pe.ownerDocument;ze&&(me&&mr(ze,pe,me),function xn(pe,re,de){pe&&pe._inc++,de.namespaceURI===ne.XMLNS&&(re._nsMap[de.prefix?de.localName:""]=de.value)}(ze,pe,de))}}function yi(pe,re,de){var me=Er(re,de);if(!(me>=0))throw new Zt(wt,new Error(pe.tagName+"@"+de));for(var ze=re.length-1;me<ze;)re[me]=re[++me];if(re.length=ze,pe){var bt=pe.ownerDocument;bt&&(mr(bt,pe,de),de.ownerElement=null)}}function or(){}function Xn(){}function Hr(pe){return("<"==pe?"&lt;":">"==pe&&"&gt;")||"&"==pe&&"&amp;"||'"'==pe&&"&quot;"||"&#"+pe.charCodeAt()+";"}function zr(pe,re){if(re(pe))return!0;if(pe=pe.firstChild)do{if(zr(pe,re))return!0}while(pe=pe.nextSibling)}function pr(){this.ownerDocument=this}function mr(pe,re,de,me){pe&&pe._inc++,de.namespaceURI===ne.XMLNS&&delete re._nsMap[de.prefix?de.localName:""]}function yn(pe,re,de){if(pe&&pe._inc){pe._inc++;var me=re.childNodes;if(de)me[me.length++]=de;else{for(var ze=re.firstChild,bt=0;ze;)me[bt++]=ze,ze=ze.nextSibling;me.length=bt,delete me[me.length]}}}function xi(pe,re){var de=re.previousSibling,me=re.nextSibling;return de?de.nextSibling=me:pe.firstChild=me,me?me.previousSibling=de:pe.lastChild=de,re.parentNode=null,re.previousSibling=null,re.nextSibling=null,yn(pe.ownerDocument,pe),re}function gi(pe){return pe&&pe.nodeType===Xn.DOCUMENT_TYPE_NODE}function Ei(pe){return pe&&pe.nodeType===Xn.ELEMENT_NODE}function ur(pe){return pe&&pe.nodeType===Xn.TEXT_NODE}function zn(pe,re){var de=pe.childNodes||[];if(ie(de,Ei)||gi(re))return!1;var me=ie(de,gi);return!(re&&me&&de.indexOf(me)>de.indexOf(re))}function Jn(pe,re){var de=pe.childNodes||[];if(ie(de,function me(bt){return Ei(bt)&&bt!==re}))return!1;var ze=ie(de,gi);return!(re&&ze&&de.indexOf(ze)>de.indexOf(re))}function qr(pe,re,de){var me=pe.childNodes||[],ze=re.childNodes||[];if(re.nodeType===Xn.DOCUMENT_FRAGMENT_NODE){var bt=ze.filter(Ei);if(bt.length>1||ie(ze,ur))throw new Zt(ge,"More than one element or text in fragment");if(1===bt.length&&!zn(pe,de))throw new Zt(ge,"Element in fragment can not be inserted before doctype")}if(Ei(re)&&!zn(pe,de))throw new Zt(ge,"Only one element can be added and only after doctype");if(gi(re)){if(ie(me,gi))throw new Zt(ge,"Only one doctype is allowed");var bn=ie(me,Ei);if(de&&me.indexOf(bn)<me.indexOf(de))throw new Zt(ge,"Doctype can only be inserted before an element");if(!de&&bn)throw new Zt(ge,"Doctype can not be appended since element is present")}}function Mn(pe,re,de){var me=pe.childNodes||[],ze=re.childNodes||[];if(re.nodeType===Xn.DOCUMENT_FRAGMENT_NODE){var bt=ze.filter(Ei);if(bt.length>1||ie(ze,ur))throw new Zt(ge,"More than one element or text in fragment");if(1===bt.length&&!Jn(pe,de))throw new Zt(ge,"Element in fragment can not be inserted before doctype")}if(Ei(re)&&!Jn(pe,de))throw new Zt(ge,"Only one element can be added and only after doctype");if(gi(re)){if(ie(me,function(Nr){return gi(Nr)&&Nr!==de}))throw new Zt(ge,"Only one doctype is allowed");var bn=ie(me,Ei);if(de&&me.indexOf(bn)<me.indexOf(de))throw new Zt(ge,"Doctype can only be inserted before an element")}}function wi(pe,re,de,me){(function ui(pe,re,de){if(!function br(pe){return pe&&(pe.nodeType===Xn.DOCUMENT_NODE||pe.nodeType===Xn.DOCUMENT_FRAGMENT_NODE||pe.nodeType===Xn.ELEMENT_NODE)}(pe))throw new Zt(ge,"Unexpected parent node type "+pe.nodeType);if(de&&de.parentNode!==pe)throw new Zt(wt,"child not in parent");if(!function xr(pe){return pe&&(Ei(pe)||ur(pe)||gi(pe)||pe.nodeType===Xn.DOCUMENT_FRAGMENT_NODE||pe.nodeType===Xn.COMMENT_NODE||pe.nodeType===Xn.PROCESSING_INSTRUCTION_NODE)}(re)||gi(re)&&pe.nodeType!==Xn.DOCUMENT_NODE)throw new Zt(ge,"Unexpected node type "+re.nodeType+" for parent node type "+pe.nodeType)})(pe,re,de),pe.nodeType===Xn.DOCUMENT_NODE&&(me||qr)(pe,re,de);var ze=re.parentNode;if(ze&&ze.removeChild(re),re.nodeType===Xe){var bt=re.firstChild;if(null==bt)return re;var bn=re.lastChild}else bt=bn=re;var On=de?de.previousSibling:pe.lastChild;bt.previousSibling=On,bn.nextSibling=de,On?On.nextSibling=bt:pe.firstChild=bt,null==de?pe.lastChild=bn:de.previousSibling=bn;do{bt.parentNode=pe}while(bt!==bn&&(bt=bt.nextSibling));return yn(pe.ownerDocument||pe,pe),re.nodeType==Xe&&(re.firstChild=re.lastChild=null),re}function Ri(){this._nsMap={}}function sr(){}function li(){}function wr(){}function si(){}function Hi(){}function dn(){}function zt(){}function Cn(){}function er(){}function $n(){}function Vn(){}function Qe(){}function Ye(pe,re){var de=[],me=9==this.nodeType&&this.documentElement||this,ze=me.prefix,bt=me.namespaceURI;if(bt&&null==ze&&null==(ze=me.lookupPrefix(bt)))var bn=[{namespace:bt,prefix:null}];return Dt(this,de,pe,re,bn),de.join("")}function at(pe,re,de){var me=pe.prefix||"",ze=pe.namespaceURI;if(!ze||"xml"===me&&ze===ne.XML||ze===ne.XMLNS)return!1;for(var bt=de.length;bt--;){var bn=de[bt];if(bn.prefix===me)return bn.namespace!==ze}return!0}function Vt(pe,re,de){pe.push(" ",re,'="',de.replace(/[<&"]/g,Hr),'"')}function Dt(pe,re,de,me,ze){if(ze||(ze=[]),me){if(!(pe=me(pe)))return;if("string"==typeof pe)return void re.push(pe)}switch(pe.nodeType){case Me:var bt=pe.attributes,bn=bt.length,tr=pe.firstChild,On=pe.tagName,dr=On;if(!(de=ne.isHTML(pe.namespaceURI)||de)&&!pe.prefix&&pe.namespaceURI){for(var Nr,Ci=0;Ci<bt.length;Ci++)if("xmlns"===bt.item(Ci).name){Nr=bt.item(Ci).value;break}if(!Nr)for(var Yi=ze.length-1;Yi>=0;Yi--)if(""===(Zr=ze[Yi]).prefix&&Zr.namespace===pe.namespaceURI){Nr=Zr.namespace;break}if(Nr!==pe.namespaceURI)for(Yi=ze.length-1;Yi>=0;Yi--){var Zr;if((Zr=ze[Yi]).namespace===pe.namespaceURI){Zr.prefix&&(dr=Zr.prefix+":"+On);break}}}re.push("<",dr);for(var fs=0;fs<bn;fs++)"xmlns"==(Lr=bt.item(fs)).prefix?ze.push({prefix:Lr.localName,namespace:Lr.value}):"xmlns"==Lr.nodeName&&ze.push({prefix:"",namespace:Lr.value});for(fs=0;fs<bn;fs++){var Lr,ns,rs;at(Lr=bt.item(fs),0,ze)&&(Vt(re,(ns=Lr.prefix||"")?"xmlns:"+ns:"xmlns",rs=Lr.namespaceURI),ze.push({prefix:ns,namespace:rs})),Dt(Lr,re,de,me,ze)}if(On===dr&&at(pe,0,ze)&&(Vt(re,(ns=pe.prefix||"")?"xmlns:"+ns:"xmlns",rs=pe.namespaceURI),ze.push({prefix:ns,namespace:rs})),tr||de&&!/^(?:meta|link|img|br|hr|input)$/i.test(On)){if(re.push(">"),de&&/^script$/i.test(On))for(;tr;)tr.data?re.push(tr.data):Dt(tr,re,de,me,ze.slice()),tr=tr.nextSibling;else for(;tr;)Dt(tr,re,de,me,ze.slice()),tr=tr.nextSibling;re.push("</",dr,">")}else re.push("/>");return;case Et:case Xe:for(tr=pe.firstChild;tr;)Dt(tr,re,de,me,ze.slice()),tr=tr.nextSibling;return;case $e:return Vt(re,pe.name,pe.value);case rt:return re.push(pe.data.replace(/[<&]/g,Hr).replace(/]]>/g,"]]&gt;"));case _t:return re.push("<![CDATA[",pe.data,"]]>");case st:return re.push("\x3c!--",pe.data,"--\x3e");case Ve:var Gi=pe.publicId,Rr=pe.systemId;if(re.push("<!DOCTYPE ",pe.name),Gi)re.push(" PUBLIC ",Gi),Rr&&"."!=Rr&&re.push(" ",Rr),re.push(">");else if(Rr&&"."!=Rr)re.push(" SYSTEM ",Rr,">");else{var Mi=pe.internalSubset;Mi&&re.push(" [",Mi,"]"),re.push(">")}return;case ut:return re.push("<?",pe.target," ",pe.data,"?>");case St:return re.push("&",pe.nodeName,";");default:re.push("??",pe.nodeName)}}function Tn(pe,re,de){var me;switch(re.nodeType){case Me:(me=re.cloneNode(!1)).ownerDocument=pe;case Xe:break;case $e:de=!0}if(me||(me=re.cloneNode(!1)),me.ownerDocument=pe,me.parentNode=null,de)for(var ze=re.firstChild;ze;)me.appendChild(Tn(pe,ze,de)),ze=ze.nextSibling;return me}function cr(pe,re,de){var me=new re.constructor;for(var ze in re)if(Object.prototype.hasOwnProperty.call(re,ze)){var bt=re[ze];"object"!=typeof bt&&bt!=me[ze]&&(me[ze]=bt)}switch(re.childNodes&&(me.childNodes=new hn),me.ownerDocument=pe,me.nodeType){case Me:var bn=re.attributes,On=me.attributes=new Wn,dr=bn.length;On._ownerElement=me;for(var Nr=0;Nr<dr;Nr++)me.setAttributeNode(cr(pe,bn.item(Nr),!0));break;case $e:de=!0}if(de)for(var Ci=re.firstChild;Ci;)me.appendChild(cr(pe,Ci,de)),Ci=Ci.nextSibling;return me}function Br(pe,re,de){pe[re]=de}kt.INVALID_STATE_ERR=(xt[11]="Invalid state",11),kt.SYNTAX_ERR=(xt[12]="Syntax error",12),kt.INVALID_MODIFICATION_ERR=(xt[13]="Invalid modification",13),kt.NAMESPACE_ERR=(xt[14]="Invalid namespace",14),kt.INVALID_ACCESS_ERR=(xt[15]="Invalid access",15),Zt.prototype=Error.prototype,Ae(kt,Zt),hn.prototype={length:0,item:function(pe){return pe>=0&&pe<this.length?this[pe]:null},toString:function(pe,re){for(var de=[],me=0;me<this.length;me++)Dt(this[me],de,pe,re);return de.join("")},filter:function(pe){return Array.prototype.filter.call(this,pe)},indexOf:function(pe){return Array.prototype.indexOf.call(this,pe)}},Gt.prototype.item=function(pe){return rr(this),this[pe]||null},De(Gt,hn),Wn.prototype={length:0,item:hn.prototype.item,getNamedItem:function(pe){for(var re=this.length;re--;){var de=this[re];if(de.nodeName==pe)return de}},setNamedItem:function(pe){var re=pe.ownerElement;if(re&&re!=this._ownerElement)throw new Zt(Mt);var de=this.getNamedItem(pe.nodeName);return _r(this._ownerElement,this,pe,de),de},setNamedItemNS:function(pe){var de,re=pe.ownerElement;if(re&&re!=this._ownerElement)throw new Zt(Mt);return de=this.getNamedItemNS(pe.namespaceURI,pe.localName),_r(this._ownerElement,this,pe,de),de},removeNamedItem:function(pe){var re=this.getNamedItem(pe);return yi(this._ownerElement,this,re),re},removeNamedItemNS:function(pe,re){var de=this.getNamedItemNS(pe,re);return yi(this._ownerElement,this,de),de},getNamedItemNS:function(pe,re){for(var de=this.length;de--;){var me=this[de];if(me.localName==re&&me.namespaceURI==pe)return me}return null}},or.prototype={hasFeature:function(pe,re){return!0},createDocument:function(pe,re,de){var me=new pr;if(me.implementation=this,me.childNodes=new hn,me.doctype=de||null,de&&me.appendChild(de),re){var ze=me.createElementNS(pe,re);me.appendChild(ze)}return me},createDocumentType:function(pe,re,de){var me=new dn;return me.name=pe,me.nodeName=pe,me.publicId=re||"",me.systemId=de||"",me}},Xn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(pe,re){return wi(this,pe,re)},replaceChild:function(pe,re){wi(this,pe,re,Mn),re&&this.removeChild(re)},removeChild:function(pe){return xi(this,pe)},appendChild:function(pe){return this.insertBefore(pe,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(pe){return cr(this.ownerDocument||this,this,pe)},normalize:function(){for(var pe=this.firstChild;pe;){var re=pe.nextSibling;re&&re.nodeType==rt&&pe.nodeType==rt?(this.removeChild(re),pe.appendData(re.data)):(pe.normalize(),pe=re)}},isSupported:function(pe,re){return this.ownerDocument.implementation.hasFeature(pe,re)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(pe){for(var re=this;re;){var de=re._nsMap;if(de)for(var me in de)if(Object.prototype.hasOwnProperty.call(de,me)&&de[me]===pe)return me;re=re.nodeType==$e?re.ownerDocument:re.parentNode}return null},lookupNamespaceURI:function(pe){for(var re=this;re;){var de=re._nsMap;if(de&&pe in de&&Object.prototype.hasOwnProperty.call(de,pe))return de[pe];re=re.nodeType==$e?re.ownerDocument:re.parentNode}return null},isDefaultNamespace:function(pe){return null==this.lookupPrefix(pe)}},Ae(Ee,Xn),Ae(Ee,Xn.prototype),pr.prototype={nodeName:"#document",nodeType:Et,doctype:null,documentElement:null,_inc:1,insertBefore:function(pe,re){if(pe.nodeType==Xe){for(var de=pe.firstChild;de;){var me=de.nextSibling;this.insertBefore(de,re),de=me}return pe}return wi(this,pe,re),pe.ownerDocument=this,null===this.documentElement&&pe.nodeType===Me&&(this.documentElement=pe),pe},removeChild:function(pe){return this.documentElement==pe&&(this.documentElement=null),xi(this,pe)},replaceChild:function(pe,re){wi(this,pe,re,Mn),pe.ownerDocument=this,re&&this.removeChild(re),Ei(pe)&&(this.documentElement=pe)},importNode:function(pe,re){return Tn(this,pe,re)},getElementById:function(pe){var re=null;return zr(this.documentElement,function(de){if(de.nodeType==Me&&de.getAttribute("id")==pe)return re=de,!0}),re},getElementsByClassName:function(pe){var re=ae(pe);return new Gt(this,function(de){var me=[];return re.length>0&&zr(de.documentElement,function(ze){if(ze!==de&&ze.nodeType===Me){var bt=ze.getAttribute("class");if(bt){var bn=pe===bt;if(!bn){var On=ae(bt);bn=re.every(function He(pe){return function(re){return pe&&-1!==pe.indexOf(re)}}(On))}bn&&me.push(ze)}}}),me})},createElement:function(pe){var re=new Ri;return re.ownerDocument=this,re.nodeName=pe,re.tagName=pe,re.localName=pe,re.childNodes=new hn,(re.attributes=new Wn)._ownerElement=re,re},createDocumentFragment:function(){var pe=new $n;return pe.ownerDocument=this,pe.childNodes=new hn,pe},createTextNode:function(pe){var re=new wr;return re.ownerDocument=this,re.appendData(pe),re},createComment:function(pe){var re=new si;return re.ownerDocument=this,re.appendData(pe),re},createCDATASection:function(pe){var re=new Hi;return re.ownerDocument=this,re.appendData(pe),re},createProcessingInstruction:function(pe,re){var de=new Vn;return de.ownerDocument=this,de.tagName=de.nodeName=de.target=pe,de.nodeValue=de.data=re,de},createAttribute:function(pe){var re=new sr;return re.ownerDocument=this,re.name=pe,re.nodeName=pe,re.localName=pe,re.specified=!0,re},createEntityReference:function(pe){var re=new er;return re.ownerDocument=this,re.nodeName=pe,re},createElementNS:function(pe,re){var de=new Ri,me=re.split(":"),ze=de.attributes=new Wn;return de.childNodes=new hn,de.ownerDocument=this,de.nodeName=re,de.tagName=re,de.namespaceURI=pe,2==me.length?(de.prefix=me[0],de.localName=me[1]):de.localName=re,ze._ownerElement=de,de},createAttributeNS:function(pe,re){var de=new sr,me=re.split(":");return de.ownerDocument=this,de.nodeName=re,de.name=re,de.namespaceURI=pe,de.specified=!0,2==me.length?(de.prefix=me[0],de.localName=me[1]):de.localName=re,de}},De(pr,Xn),pr.prototype.getElementsByTagName=(Ri.prototype={nodeType:Me,hasAttribute:function(pe){return null!=this.getAttributeNode(pe)},getAttribute:function(pe){var re=this.getAttributeNode(pe);return re&&re.value||""},getAttributeNode:function(pe){return this.attributes.getNamedItem(pe)},setAttribute:function(pe,re){var de=this.ownerDocument.createAttribute(pe);de.value=de.nodeValue=""+re,this.setAttributeNode(de)},removeAttribute:function(pe){var re=this.getAttributeNode(pe);re&&this.removeAttributeNode(re)},appendChild:function(pe){return pe.nodeType===Xe?this.insertBefore(pe,null):function ki(pe,re){return re.parentNode&&re.parentNode.removeChild(re),re.parentNode=pe,re.previousSibling=pe.lastChild,re.nextSibling=null,re.previousSibling?re.previousSibling.nextSibling=re:pe.firstChild=re,pe.lastChild=re,yn(pe.ownerDocument,pe,re),re}(this,pe)},setAttributeNode:function(pe){return this.attributes.setNamedItem(pe)},setAttributeNodeNS:function(pe){return this.attributes.setNamedItemNS(pe)},removeAttributeNode:function(pe){return this.attributes.removeNamedItem(pe.nodeName)},removeAttributeNS:function(pe,re){var de=this.getAttributeNodeNS(pe,re);de&&this.removeAttributeNode(de)},hasAttributeNS:function(pe,re){return null!=this.getAttributeNodeNS(pe,re)},getAttributeNS:function(pe,re){var de=this.getAttributeNodeNS(pe,re);return de&&de.value||""},setAttributeNS:function(pe,re,de){var me=this.ownerDocument.createAttributeNS(pe,re);me.value=me.nodeValue=""+de,this.setAttributeNode(me)},getAttributeNodeNS:function(pe,re){return this.attributes.getNamedItemNS(pe,re)},getElementsByTagName:function(pe){return new Gt(this,function(re){var de=[];return zr(re,function(me){me!==re&&me.nodeType==Me&&("*"===pe||me.tagName==pe)&&de.push(me)}),de})},getElementsByTagNameNS:function(pe,re){return new Gt(this,function(de){var me=[];return zr(de,function(ze){ze!==de&&ze.nodeType===Me&&("*"===pe||ze.namespaceURI===pe)&&("*"===re||ze.localName==re)&&me.push(ze)}),me})}}).getElementsByTagName,pr.prototype.getElementsByTagNameNS=Ri.prototype.getElementsByTagNameNS,De(Ri,Xn),sr.prototype.nodeType=$e,De(sr,Xn),li.prototype={data:"",substringData:function(pe,re){return this.data.substring(pe,pe+re)},appendData:function(pe){this.nodeValue=this.data=pe=this.data+pe,this.length=pe.length},insertData:function(pe,re){this.replaceData(pe,0,re)},appendChild:function(pe){throw new Error(xt[ge])},deleteData:function(pe,re){this.replaceData(pe,re,"")},replaceData:function(pe,re,de){var me=this.data.substring(0,pe),ze=this.data.substring(pe+re);this.nodeValue=this.data=de=me+de+ze,this.length=de.length}},De(li,Xn),wr.prototype={nodeName:"#text",nodeType:rt,splitText:function(pe){var re=this.data,de=re.substring(pe);re=re.substring(0,pe),this.data=this.nodeValue=re,this.length=re.length;var me=this.ownerDocument.createTextNode(de);return this.parentNode&&this.parentNode.insertBefore(me,this.nextSibling),me}},De(wr,li),si.prototype={nodeName:"#comment",nodeType:st},De(si,li),Hi.prototype={nodeName:"#cdata-section",nodeType:_t},De(Hi,li),dn.prototype.nodeType=Ve,De(dn,Xn),zt.prototype.nodeType=gt,De(zt,Xn),Cn.prototype.nodeType=Fe,De(Cn,Xn),er.prototype.nodeType=St,De(er,Xn),$n.prototype.nodeName="#document-fragment",$n.prototype.nodeType=Xe,De($n,Xn),Vn.prototype.nodeType=ut,De(Vn,Xn),Qe.prototype.serializeToString=function(pe,re,de){return Ye.call(pe,re,de)},Xn.prototype.toString=Ye;try{if(Object.defineProperty){let pe=function(re){switch(re.nodeType){case Me:case Xe:var de=[];for(re=re.firstChild;re;)7!==re.nodeType&&8!==re.nodeType&&de.push(pe(re)),re=re.nextSibling;return de.join("");default:return re.nodeValue}};Object.defineProperty(Gt.prototype,"length",{get:function(){return rr(this),this.$$length}}),Object.defineProperty(Xn.prototype,"textContent",{get:function(){return pe(this)},set:function(re){switch(this.nodeType){case Me:case Xe:for(;this.firstChild;)this.removeChild(this.firstChild);(re||String(re))&&this.appendChild(this.ownerDocument.createTextNode(re));break;default:this.data=re,this.value=re,this.nodeValue=re}}}),Br=function(re,de,me){re["$$"+de]=me}}}catch{}et.DocumentType=dn,et.DOMException=Zt,et.DOMImplementation=or,et.Element=Ri,et.Node=Xn,et.NodeList=hn,et.XMLSerializer=Qe},4436:(Wt,et,W)=>{"use strict";var E=W(9401).freeze;et.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),et.HTML_ENTITIES=E({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),et.entityMap=et.HTML_ENTITIES},978:(Wt,et,W)=>{W(6853);et.DOMParser=W(1991).DOMParser},8702:(Wt,et,W)=>{var E=W(9401).NAMESPACE,ie=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ne=new RegExp("[\\-\\.0-9"+ie.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),F=new RegExp("^"+ie.source+ne.source+"*(?::"+ie.source+ne.source+"*)?$");function $e(X,ve){this.message=X,this.locator=ve,Error.captureStackTrace&&Error.captureStackTrace(this,$e)}function rt(){}function St(X,ve){return ve.lineNumber=X.lineNumber,ve.columnNumber=X.columnNumber,ve}function Fe(X,ve,ge,Le,Oe,qe){function dt($t,ln,Zt){ge.attributeNames.hasOwnProperty($t)&&qe.fatalError("Attribute "+$t+" redefined"),ge.addValue($t,ln,Zt)}for(var wt,Mt=++ve,Rt=0;;){var At=X.charAt(Mt);switch(At){case"=":if(1===Rt)wt=X.slice(ve,Mt),Rt=3;else{if(2!==Rt)throw new Error("attribute equal must after attrName");Rt=3}break;case"'":case'"':if(3===Rt||1===Rt){if(1===Rt&&(qe.warning('attribute value must after "="'),wt=X.slice(ve,Mt)),!((Mt=X.indexOf(At,ve=Mt+1))>0))throw new Error("attribute value no end '"+At+"' match");dt(wt,vt=X.slice(ve,Mt).replace(/&#?\w+;/g,Oe),ve-1),Rt=5}else{if(4!=Rt)throw new Error('attribute value must after "="');dt(wt,vt=X.slice(ve,Mt).replace(/&#?\w+;/g,Oe),ve),qe.warning('attribute "'+wt+'" missed start quot('+At+")!!"),ve=Mt+1,Rt=5}break;case"/":switch(Rt){case 0:ge.setTagName(X.slice(ve,Mt));case 5:case 6:case 7:Rt=7,ge.closed=!0;case 4:case 1:break;case 2:ge.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return qe.error("unexpected end of input"),0==Rt&&ge.setTagName(X.slice(ve,Mt)),Mt;case">":switch(Rt){case 0:ge.setTagName(X.slice(ve,Mt));case 5:case 6:case 7:break;case 4:case 1:"/"===(vt=X.slice(ve,Mt)).slice(-1)&&(ge.closed=!0,vt=vt.slice(0,-1));case 2:2===Rt&&(vt=wt),4==Rt?(qe.warning('attribute "'+vt+'" missed quot(")!'),dt(wt,vt.replace(/&#?\w+;/g,Oe),ve)):((!E.isHTML(Le[""])||!vt.match(/^(?:disabled|checked|selected)$/i))&&qe.warning('attribute "'+vt+'" missed value!! "'+vt+'" instead!!'),dt(vt,vt,ve));break;case 3:throw new Error("attribute value missed!!")}return Mt;case"\x80":At=" ";default:if(At<=" ")switch(Rt){case 0:ge.setTagName(X.slice(ve,Mt)),Rt=6;break;case 1:wt=X.slice(ve,Mt),Rt=2;break;case 4:var vt=X.slice(ve,Mt).replace(/&#?\w+;/g,Oe);qe.warning('attribute "'+vt+'" missed quot(")!!'),dt(wt,vt,ve);case 5:Rt=6}else switch(Rt){case 2:(!E.isHTML(Le[""])||!wt.match(/^(?:disabled|checked|selected)$/i))&&qe.warning('attribute "'+wt+'" missed value!! "'+wt+'" instead2!!'),dt(wt,wt,ve),ve=Mt,Rt=1;break;case 5:qe.warning('attribute space is required"'+wt+'"!!');case 6:Rt=1,ve=Mt;break;case 3:Rt=4,ve=Mt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Mt++}}function ut(X,ve,ge){for(var Le=X.tagName,Oe=null,At=X.length;At--;){var qe=X[At],dt=qe.qName,wt=qe.value;if((Yt=dt.indexOf(":"))>0)var vt=qe.prefix=dt.slice(0,Yt),Mt=dt.slice(Yt+1),Rt="xmlns"===vt&&Mt;else Mt=dt,vt=null,Rt="xmlns"===dt&&"";qe.localName=Mt,!1!==Rt&&(null==Oe&&(Oe={},Ve(ge,ge={})),ge[Rt]=Oe[Rt]=wt,qe.uri=E.XMLNS,ve.startPrefixMapping(Rt,wt))}for(At=X.length;At--;)(vt=(qe=X[At]).prefix)&&("xml"===vt&&(qe.uri=E.XML),"xmlns"!==vt&&(qe.uri=ge[vt||""]));var Yt;(Yt=Le.indexOf(":"))>0?(vt=X.prefix=Le.slice(0,Yt),Mt=X.localName=Le.slice(Yt+1)):(vt=null,Mt=X.localName=Le);var $t=X.uri=ge[vt||""];if(ve.startElement($t,Mt,Le,X),!X.closed)return X.currentNSMap=ge,X.localNSMap=Oe,!0;if(ve.endElement($t,Mt,Le),Oe)for(vt in Oe)Object.prototype.hasOwnProperty.call(Oe,vt)&&ve.endPrefixMapping(vt)}function st(X,ve,ge,Le,Oe){if(/^(?:script|textarea)$/i.test(ge)){var qe=X.indexOf("</"+ge+">",ve),dt=X.substring(ve+1,qe);if(/[&<]/.test(dt))return/^script$/i.test(ge)?(Oe.characters(dt,0,dt.length),qe):(dt=dt.replace(/&#?\w+;/g,Le),Oe.characters(dt,0,dt.length),qe)}return ve+1}function Et(X,ve,ge,Le){var Oe=Le[ge];return null==Oe&&((Oe=X.lastIndexOf("</"+ge+">"))<ve&&(Oe=X.lastIndexOf("</"+ge)),Le[ge]=Oe),Oe<ve}function Ve(X,ve){for(var ge in X)Object.prototype.hasOwnProperty.call(X,ge)&&(ve[ge]=X[ge])}function Xe(X,ve,ge,Le){if("-"===X.charAt(ve+2))return"-"===X.charAt(ve+3)?(qe=X.indexOf("--\x3e",ve+4))>ve?(ge.comment(X,ve+4,qe-ve-4),qe+3):(Le.error("Unclosed comment"),-1):-1;if("CDATA["==X.substr(ve+3,6)){var qe=X.indexOf("]]>",ve+9);return ge.startCDATA(),ge.characters(X,ve+9,qe-ve-9),ge.endCDATA(),qe+3}var dt=function xt(X,ve){var ge,Le=[],Oe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Oe.lastIndex=ve,Oe.exec(X);ge=Oe.exec(X);)if(Le.push(ge),ge[1])return Le}(X,ve),wt=dt.length;if(wt>1&&/!doctype/i.test(dt[0][0])){var vt=dt[1][0],Mt=!1,Rt=!1;wt>3&&(/^public$/i.test(dt[2][0])?(Mt=dt[3][0],Rt=wt>4&&dt[4][0]):/^system$/i.test(dt[2][0])&&(Rt=dt[3][0]));var At=dt[wt-1];return ge.startDTD(vt,Mt,Rt),ge.endDTD(),At.index+At[0].length}return-1}function gt(X,ve,ge){var Le=X.indexOf("?>",ve);if(Le){var Oe=X.substring(ve,Le).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Oe?(ge.processingInstruction(Oe[1],Oe[2]),Le+2):-1}return-1}function kt(){this.attributeNames={}}($e.prototype=new Error).name=$e.name,rt.prototype={parse:function(X,ve,ge){var Le=this.domBuilder;Le.startDocument(),Ve(ve,ve={}),function _t(X,ve,ge,Le,Oe){function dt(br){var xr=br.slice(1,-1);return xr in ge?ge[xr]:"#"===xr.charAt(0)?function qe(br){return br>65535?(br-=65536,String.fromCharCode(55296+(br>>10),56320+(1023&br))):String.fromCharCode(br)}(parseInt(xr.substr(1).replace("x","0x"))):(Oe.error("entity not found:"+br),br)}function wt(br){if(br>Zt){var xr=X.substring(Zt,br).replace(/&#?\w+;/g,dt);Yt&&vt(Zt),Le.characters(xr,0,br-Zt),Zt=br}}function vt(br,xr){for(;br>=Rt&&(xr=At.exec(X));)Rt=(Mt=xr.index)+xr[0].length,Yt.lineNumber++;Yt.columnNumber=br-Mt+1}for(var Mt=0,Rt=0,At=/.*(?:\r\n?|\n)|.*$/g,Yt=Le.locator,$t=[{currentNSMap:ve}],ln={},Zt=0;;){try{var hn=X.indexOf("<",Zt);if(hn<0){if(!X.substr(Zt).match(/^\s*$/)){var Gt=Le.doc,rr=Gt.createTextNode(X.substr(Zt));Gt.appendChild(rr),Le.currentElement=rr}return}switch(hn>Zt&&wt(hn),X.charAt(hn+1)){case"/":var pr=X.indexOf(">",hn+3),Wn=X.substring(hn+2,pr).replace(/[ \t\n\r]+$/g,""),Er=$t.pop();pr<0?(Wn=X.substring(hn+2).replace(/[\s<].*/,""),Oe.error("end tag name: "+Wn+" is not complete:"+Er.tagName),pr=hn+1+Wn.length):Wn.match(/\s</)&&(Wn=Wn.replace(/[\s<].*/,""),Oe.error("end tag name: "+Wn+" maybe not complete"),pr=hn+1+Wn.length);var _r=Er.localNSMap,yi=Er.tagName==Wn;if(yi||Er.tagName&&Er.tagName.toLowerCase()==Wn.toLowerCase()){if(Le.endElement(Er.uri,Er.localName,Wn),_r)for(var Xn in _r)Object.prototype.hasOwnProperty.call(_r,Xn)&&Le.endPrefixMapping(Xn);yi||Oe.fatalError("end tag name: "+Wn+" is not match the current start tagName:"+Er.tagName)}else $t.push(Er);pr++;break;case"?":Yt&&vt(hn),pr=gt(X,hn,Le);break;case"!":Yt&&vt(hn),pr=Xe(X,hn,Le,Oe);break;default:Yt&&vt(hn);var Hr=new kt,zr=$t[$t.length-1].currentNSMap,xn=(pr=Fe(X,hn,Hr,zr,dt,Oe),Hr.length);if(!Hr.closed&&Et(X,pr,Hr.tagName,ln)&&(Hr.closed=!0,ge.nbsp||Oe.warning("unclosed xml attribute")),Yt&&xn){for(var mr=St(Yt,{}),yn=0;yn<xn;yn++){var xi=Hr[yn];vt(xi.offset),xi.locator=St(Yt,{})}Le.locator=mr,ut(Hr,Le,zr)&&$t.push(Hr),Le.locator=Yt}else ut(Hr,Le,zr)&&$t.push(Hr);E.isHTML(Hr.uri)&&!Hr.closed?pr=st(X,pr,Hr.tagName,dt,Le):pr++}}catch(br){if(br instanceof $e)throw br;Oe.error("element parse error: "+br),pr=-1}pr>Zt?Zt=pr:wt(Math.max(hn,Zt)+1)}}(X,ve,ge,Le,this.errorHandler),Le.endDocument()}},kt.prototype={setTagName:function(X){if(!F.test(X))throw new Error("invalid tagName:"+X);this.tagName=X},addValue:function(X,ve,ge){if(!F.test(X))throw new Error("invalid attribute:"+X);this.attributeNames[X]=this.length,this[this.length++]={qName:X,value:ve,offset:ge}},length:0,getLocalName:function(X){return this[X].localName},getLocator:function(X){return this[X].locator},getQName:function(X){return this[X].qName},getURI:function(X){return this[X].uri},getValue:function(X){return this[X].value}},et.XMLReader=rt,et.ParseError=$e},1421:(Wt,et,W)=>{var ne,E=typeof global<"u"?global:typeof window<"u"?window:{},ie=W(5893);typeof document<"u"?ne=document:(ne=E["__GLOBAL_DOCUMENT_CACHE@4"])||(ne=E["__GLOBAL_DOCUMENT_CACHE@4"]=ie),Wt.exports=ne},9226:Wt=>{var et;et=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wt.exports=et},2703:Wt=>{Wt.exports=function W(E){if(!E)return!1;var ie=et.call(E);return"[object Function]"===ie||"function"==typeof E&&"[object RegExp]"!==ie||typeof window<"u"&&(E===window.setTimeout||E===window.alert||E===window.confirm||E===window.prompt)};var et=Object.prototype.toString},1234:(Wt,et)=>{function W(Be){if(Be&&"object"==typeof Be){var ae=Be.which||Be.keyCode||Be.charCode;ae&&(Be=ae)}if("number"==typeof Be)return F[Be];var Ae,He=String(Be);return(Ae=E[He.toLowerCase()])?Ae:(Ae=ie[He.toLowerCase()])||(1===He.length?He.charCodeAt(0):void 0)}W.isEventKey=function(ae,He){if(ae&&"object"==typeof ae){var Ae=ae.which||ae.keyCode||ae.charCode;if(null==Ae)return!1;if("string"==typeof He){var De;if(De=E[He.toLowerCase()])return De===Ae;if(De=ie[He.toLowerCase()])return De===Ae}else if("number"==typeof He)return He===Ae;return!1}};var E=(et=Wt.exports=W).code=et.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},ie=et.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(ne=97;ne<123;ne++)E[String.fromCharCode(ne)]=ne-32;for(var ne=48;ne<58;ne++)E[ne-48]=ne;for(ne=1;ne<13;ne++)E["f"+ne]=ne+111;for(ne=0;ne<10;ne++)E["numpad "+ne]=ne+96;var F=et.names=et.title={};for(ne in E)F[E[ne]]=ne;for(var Ne in ie)E[Ne]=ie[Ne]},7459:Wt=>{var et=Math.pow(2,32);Wt.exports=function(E){var ie=new DataView(E.buffer,E.byteOffset,E.byteLength),ne={version:E[0],flags:new Uint8Array(E.subarray(1,4)),references:[],referenceId:ie.getUint32(4),timescale:ie.getUint32(8)},F=12;0===ne.version?(ne.earliestPresentationTime=ie.getUint32(F),ne.firstOffset=ie.getUint32(F+4),F+=8):(ne.earliestPresentationTime=ie.getUint32(F)*et+ie.getUint32(F+4),ne.firstOffset=ie.getUint32(F+8)*et+ie.getUint32(F+12),F+=16);var Ne=ie.getUint16(F+=2);for(F+=2;Ne>0;F+=12,Ne--)ne.references.push({referenceType:(128&E[F])>>>7,referencedSize:2147483647&ie.getUint32(F),subsegmentDuration:ie.getUint32(F+4),startsWithSap:!!(128&E[F+8]),sapType:(112&E[F+8])>>>4,sapDeltaTime:268435455&ie.getUint32(F+8)});return ne}},6277:Wt=>{var W,E,ie,ne,F,Ne,Be;F=function(ae,He){return W(ne(ae,He))},Ne=function(ae,He){return E(ie(ae),He)},Be=function(ae,He,Ae){return ie(Ae?ae:ae-He)},Wt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:W=function(ae){return 9e4*ae},secondsToAudioTs:E=function(ae,He){return ae*He},videoTsToSeconds:ie=function(ae){return ae/9e4},audioTsToSeconds:ne=function(ae,He){return ae/He},audioTsToVideoTs:F,videoTsToAudioTs:Ne,metadataTsToSeconds:Be}},1135:(Wt,et,W)=>{"use strict";W.d(et,{X:()=>ie});var E=W(7579);class ie extends E.x{constructor(F){super(),this._value=F}get value(){return this.getValue()}_subscribe(F){const Ne=super._subscribe(F);return!Ne.closed&&F.next(this._value),Ne}getValue(){const{hasError:F,thrownError:Ne,_value:Be}=this;if(F)throw Ne;return this._throwIfClosed(),Be}next(F){super.next(this._value=F)}}},9751:(Wt,et,W)=>{"use strict";W.d(et,{y:()=>He});var E=W(930),ie=W(727),ne=W(8822),F=W(9635),Ne=W(2416),Be=W(576),ae=W(2806);let He=(()=>{class Me{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const _t=new Me;return _t.source=this,_t.operator=rt,_t}subscribe(rt,_t,St){const Fe=function Ee(Me){return Me&&Me instanceof E.Lv||function De(Me){return Me&&(0,Be.m)(Me.next)&&(0,Be.m)(Me.error)&&(0,Be.m)(Me.complete)}(Me)&&(0,ie.Nn)(Me)}(rt)?rt:new E.Hp(rt,_t,St);return(0,ae.x)(()=>{const{operator:ut,source:st}=this;Fe.add(ut?ut.call(Fe,st):st?this._subscribe(Fe):this._trySubscribe(Fe))}),Fe}_trySubscribe(rt){try{return this._subscribe(rt)}catch(_t){rt.error(_t)}}forEach(rt,_t){return new(_t=Ae(_t))((St,Fe)=>{const ut=new E.Hp({next:st=>{try{rt(st)}catch(Et){Fe(Et),ut.unsubscribe()}},error:Fe,complete:St});this.subscribe(ut)})}_subscribe(rt){var _t;return null===(_t=this.source)||void 0===_t?void 0:_t.subscribe(rt)}[ne.L](){return this}pipe(...rt){return(0,F.U)(rt)(this)}toPromise(rt){return new(rt=Ae(rt))((_t,St)=>{let Fe;this.subscribe(ut=>Fe=ut,ut=>St(ut),()=>_t(Fe))})}}return Me.create=$e=>new Me($e),Me})();function Ae(Me){var $e;return null!==($e=Me??Ne.v.Promise)&&void 0!==$e?$e:Promise}},7579:(Wt,et,W)=>{"use strict";W.d(et,{x:()=>ae});var E=W(9751),ie=W(727);const F=(0,W(3888).d)(Ae=>function(){Ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=W(8737),Be=W(2806);let ae=(()=>{class Ae extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ee){const Me=new He(this,this);return Me.operator=Ee,Me}_throwIfClosed(){if(this.closed)throw new F}next(Ee){(0,Be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Me of this.currentObservers)Me.next(Ee)}})}error(Ee){(0,Be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ee;const{observers:Me}=this;for(;Me.length;)Me.shift().error(Ee)}})}complete(){(0,Be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ee;return(null===(Ee=this.observers)||void 0===Ee?void 0:Ee.length)>0}_trySubscribe(Ee){return this._throwIfClosed(),super._trySubscribe(Ee)}_subscribe(Ee){return this._throwIfClosed(),this._checkFinalizedStatuses(Ee),this._innerSubscribe(Ee)}_innerSubscribe(Ee){const{hasError:Me,isStopped:$e,observers:rt}=this;return Me||$e?ie.Lc:(this.currentObservers=null,rt.push(Ee),new ie.w0(()=>{this.currentObservers=null,(0,Ne.P)(rt,Ee)}))}_checkFinalizedStatuses(Ee){const{hasError:Me,thrownError:$e,isStopped:rt}=this;Me?Ee.error($e):rt&&Ee.complete()}asObservable(){const Ee=new E.y;return Ee.source=this,Ee}}return Ae.create=(De,Ee)=>new He(De,Ee),Ae})();class He extends ae{constructor(De,Ee){super(),this.destination=De,this.source=Ee}next(De){var Ee,Me;null===(Me=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.next)||void 0===Me||Me.call(Ee,De)}error(De){var Ee,Me;null===(Me=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.error)||void 0===Me||Me.call(Ee,De)}complete(){var De,Ee;null===(Ee=null===(De=this.destination)||void 0===De?void 0:De.complete)||void 0===Ee||Ee.call(De)}_subscribe(De){var Ee,Me;return null!==(Me=null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(De))&&void 0!==Me?Me:ie.Lc}}},930:(Wt,et,W)=>{"use strict";W.d(et,{Hp:()=>St,Lv:()=>Me});var E=W(576),ie=W(727),ne=W(2416),F=W(7849),Ne=W(5032);const Be=Ae("C",void 0,void 0);function Ae(Ve,Xe,gt){return{kind:Ve,value:Xe,error:gt}}var De=W(3410),Ee=W(2806);class Me extends ie.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,ie.Nn)(Xe)&&Xe.add(this)):this.destination=Et}static create(Xe,gt,kt){return new St(Xe,gt,kt)}next(Xe){this.isStopped?st(function He(Ve){return Ae("N",Ve,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?st(function ae(Ve){return Ae("E",void 0,Ve)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?st(Be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function rt(Ve,Xe){return $e.call(Ve,Xe)}class _t{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:gt}=this;if(gt.next)try{gt.next(Xe)}catch(kt){Fe(kt)}}error(Xe){const{partialObserver:gt}=this;if(gt.error)try{gt.error(Xe)}catch(kt){Fe(kt)}else Fe(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(gt){Fe(gt)}}}class St extends Me{constructor(Xe,gt,kt){let xt;if(super(),(0,E.m)(Xe)||!Xe)xt={next:Xe??void 0,error:gt??void 0,complete:kt??void 0};else{let X;this&&ne.v.useDeprecatedNextContext?(X=Object.create(Xe),X.unsubscribe=()=>this.unsubscribe(),xt={next:Xe.next&&rt(Xe.next,X),error:Xe.error&&rt(Xe.error,X),complete:Xe.complete&&rt(Xe.complete,X)}):xt=Xe}this.destination=new _t(xt)}}function Fe(Ve){ne.v.useDeprecatedSynchronousErrorHandling?(0,Ee.O)(Ve):(0,F.h)(Ve)}function st(Ve,Xe){const{onStoppedNotification:gt}=ne.v;gt&&De.z.setTimeout(()=>gt(Ve,Xe))}const Et={closed:!0,next:Ne.Z,error:function ut(Ve){throw Ve},complete:Ne.Z}},727:(Wt,et,W)=>{"use strict";W.d(et,{Lc:()=>Be,w0:()=>Ne,Nn:()=>ae});var E=W(576);const ne=(0,W(3888).d)(Ae=>function(Ee){Ae(this),this.message=Ee?`${Ee.length} errors occurred during unsubscription:\n${Ee.map((Me,$e)=>`${$e+1}) ${Me.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ee});var F=W(8737);class Ne{constructor(De){this.initialTeardown=De,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let De;if(!this.closed){this.closed=!0;const{_parentage:Ee}=this;if(Ee)if(this._parentage=null,Array.isArray(Ee))for(const rt of Ee)rt.remove(this);else Ee.remove(this);const{initialTeardown:Me}=this;if((0,E.m)(Me))try{Me()}catch(rt){De=rt instanceof ne?rt.errors:[rt]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const rt of $e)try{He(rt)}catch(_t){De=De??[],_t instanceof ne?De=[...De,..._t.errors]:De.push(_t)}}if(De)throw new ne(De)}}add(De){var Ee;if(De&&De!==this)if(this.closed)He(De);else{if(De instanceof Ne){if(De.closed||De._hasParent(this))return;De._addParent(this)}(this._finalizers=null!==(Ee=this._finalizers)&&void 0!==Ee?Ee:[]).push(De)}}_hasParent(De){const{_parentage:Ee}=this;return Ee===De||Array.isArray(Ee)&&Ee.includes(De)}_addParent(De){const{_parentage:Ee}=this;this._parentage=Array.isArray(Ee)?(Ee.push(De),Ee):Ee?[Ee,De]:De}_removeParent(De){const{_parentage:Ee}=this;Ee===De?this._parentage=null:Array.isArray(Ee)&&(0,F.P)(Ee,De)}remove(De){const{_finalizers:Ee}=this;Ee&&(0,F.P)(Ee,De),De instanceof Ne&&De._removeParent(this)}}Ne.EMPTY=(()=>{const Ae=new Ne;return Ae.closed=!0,Ae})();const Be=Ne.EMPTY;function ae(Ae){return Ae instanceof Ne||Ae&&"closed"in Ae&&(0,E.m)(Ae.remove)&&(0,E.m)(Ae.add)&&(0,E.m)(Ae.unsubscribe)}function He(Ae){(0,E.m)(Ae)?Ae():Ae.unsubscribe()}},2416:(Wt,et,W)=>{"use strict";W.d(et,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Wt,et,W)=>{"use strict";W.d(et,{a:()=>De});var E=W(9751),ie=W(4742),ne=W(8996),F=W(4671),Ne=W(3268),Be=W(3269),ae=W(1810),He=W(5403),Ae=W(9672);function De(...$e){const rt=(0,Be.yG)($e),_t=(0,Be.jO)($e),{args:St,keys:Fe}=(0,ie.D)($e);if(0===St.length)return(0,ne.D)([],rt);const ut=new E.y(function Ee($e,rt,_t=F.y){return St=>{Me(rt,()=>{const{length:Fe}=$e,ut=new Array(Fe);let st=Fe,Et=Fe;for(let Ve=0;Ve<Fe;Ve++)Me(rt,()=>{const Xe=(0,ne.D)($e[Ve],rt);let gt=!1;Xe.subscribe((0,He.x)(St,kt=>{ut[Ve]=kt,gt||(gt=!0,Et--),Et||St.next(_t(ut.slice()))},()=>{--st||St.complete()}))},St)},St)}}(St,rt,Fe?st=>(0,ae.n)(Fe,st):F.y));return _t?ut.pipe((0,Ne.Z)(_t)):ut}function Me($e,rt,_t){$e?(0,Ae.f)(_t,$e,rt):rt()}},7272:(Wt,et,W)=>{"use strict";W.d(et,{z:()=>Ne});var E=W(8189),ne=W(3269),F=W(8996);function Ne(...Be){return function ie(){return(0,E.J)(1)}()((0,F.D)(Be,(0,ne.yG)(Be)))}},515:(Wt,et,W)=>{"use strict";W.d(et,{E:()=>ie});const ie=new(W(9751).y)(Ne=>Ne.complete())},4128:(Wt,et,W)=>{"use strict";W.d(et,{D:()=>He});var E=W(9751),ie=W(4742),ne=W(8421),F=W(3269),Ne=W(5403),Be=W(3268),ae=W(1810);function He(...Ae){const De=(0,F.jO)(Ae),{args:Ee,keys:Me}=(0,ie.D)(Ae),$e=new E.y(rt=>{const{length:_t}=Ee;if(!_t)return void rt.complete();const St=new Array(_t);let Fe=_t,ut=_t;for(let st=0;st<_t;st++){let Et=!1;(0,ne.Xf)(Ee[st]).subscribe((0,Ne.x)(rt,Ve=>{Et||(Et=!0,ut--),St[st]=Ve},()=>Fe--,void 0,()=>{(!Fe||!Et)&&(ut||rt.next(Me?(0,ae.n)(Me,St):St),rt.complete())}))}});return De?$e.pipe((0,Be.Z)(De)):$e}},8996:(Wt,et,W)=>{"use strict";W.d(et,{D:()=>Xe});var E=W(8421),ie=W(5363),ne=W(9468),Be=W(9751),He=W(2202),Ae=W(576),De=W(9672);function Me(gt,kt){if(!gt)throw new Error("Iterable cannot be null");return new Be.y(xt=>{(0,De.f)(xt,kt,()=>{const X=gt[Symbol.asyncIterator]();(0,De.f)(xt,kt,()=>{X.next().then(ve=>{ve.done?xt.complete():xt.next(ve.value)})},0,!0)})})}var $e=W(3670),rt=W(8239),_t=W(1144),St=W(6495),Fe=W(2206),ut=W(4532),st=W(3260);function Xe(gt,kt){return kt?function Ve(gt,kt){if(null!=gt){if((0,$e.c)(gt))return function F(gt,kt){return(0,E.Xf)(gt).pipe((0,ne.R)(kt),(0,ie.Q)(kt))}(gt,kt);if((0,_t.z)(gt))return function ae(gt,kt){return new Be.y(xt=>{let X=0;return kt.schedule(function(){X===gt.length?xt.complete():(xt.next(gt[X++]),xt.closed||this.schedule())})})}(gt,kt);if((0,rt.t)(gt))return function Ne(gt,kt){return(0,E.Xf)(gt).pipe((0,ne.R)(kt),(0,ie.Q)(kt))}(gt,kt);if((0,Fe.D)(gt))return Me(gt,kt);if((0,St.T)(gt))return function Ee(gt,kt){return new Be.y(xt=>{let X;return(0,De.f)(xt,kt,()=>{X=gt[He.h](),(0,De.f)(xt,kt,()=>{let ve,ge;try{({value:ve,done:ge}=X.next())}catch(Le){return void xt.error(Le)}ge?xt.complete():xt.next(ve)},0,!0)}),()=>(0,Ae.m)(X?.return)&&X.return()})}(gt,kt);if((0,st.L)(gt))return function Et(gt,kt){return Me((0,st.Q)(gt),kt)}(gt,kt)}throw(0,ut.z)(gt)}(gt,kt):(0,E.Xf)(gt)}},8421:(Wt,et,W)=>{"use strict";W.d(et,{Xf:()=>$e});var E=W(655),ie=W(1144),ne=W(8239),F=W(9751),Ne=W(3670),Be=W(2206),ae=W(4532),He=W(6495),Ae=W(3260),De=W(576),Ee=W(7849),Me=W(8822);function $e(Ve){if(Ve instanceof F.y)return Ve;if(null!=Ve){if((0,Ne.c)(Ve))return function rt(Ve){return new F.y(Xe=>{const gt=Ve[Me.L]();if((0,De.m)(gt.subscribe))return gt.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,ie.z)(Ve))return function _t(Ve){return new F.y(Xe=>{for(let gt=0;gt<Ve.length&&!Xe.closed;gt++)Xe.next(Ve[gt]);Xe.complete()})}(Ve);if((0,ne.t)(Ve))return function St(Ve){return new F.y(Xe=>{Ve.then(gt=>{Xe.closed||(Xe.next(gt),Xe.complete())},gt=>Xe.error(gt)).then(null,Ee.h)})}(Ve);if((0,Be.D)(Ve))return ut(Ve);if((0,He.T)(Ve))return function Fe(Ve){return new F.y(Xe=>{for(const gt of Ve)if(Xe.next(gt),Xe.closed)return;Xe.complete()})}(Ve);if((0,Ae.L)(Ve))return function st(Ve){return ut((0,Ae.Q)(Ve))}(Ve)}throw(0,ae.z)(Ve)}function ut(Ve){return new F.y(Xe=>{(function Et(Ve,Xe){var gt,kt,xt,X;return(0,E.mG)(this,void 0,void 0,function*(){try{for(gt=(0,E.KL)(Ve);!(kt=yield gt.next()).done;)if(Xe.next(kt.value),Xe.closed)return}catch(ve){xt={error:ve}}finally{try{kt&&!kt.done&&(X=gt.return)&&(yield X.call(gt))}finally{if(xt)throw xt.error}}Xe.complete()})})(Ve,Xe).catch(gt=>Xe.error(gt))})}},6451:(Wt,et,W)=>{"use strict";W.d(et,{T:()=>Be});var E=W(8189),ie=W(8421),ne=W(515),F=W(3269),Ne=W(8996);function Be(...ae){const He=(0,F.yG)(ae),Ae=(0,F._6)(ae,1/0),De=ae;return De.length?1===De.length?(0,ie.Xf)(De[0]):(0,E.J)(Ae)((0,Ne.D)(De,He)):ne.E}},9646:(Wt,et,W)=>{"use strict";W.d(et,{of:()=>ne});var E=W(3269),ie=W(8996);function ne(...F){const Ne=(0,E.yG)(F);return(0,ie.D)(F,Ne)}},5403:(Wt,et,W)=>{"use strict";W.d(et,{x:()=>ie});var E=W(930);function ie(F,Ne,Be,ae,He){return new ne(F,Ne,Be,ae,He)}class ne extends E.Lv{constructor(Ne,Be,ae,He,Ae,De){super(Ne),this.onFinalize=Ae,this.shouldUnsubscribe=De,this._next=Be?function(Ee){try{Be(Ee)}catch(Me){Ne.error(Me)}}:super._next,this._error=He?function(Ee){try{He(Ee)}catch(Me){Ne.error(Me)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(Ee){Ne.error(Ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Be}=this;super.unsubscribe(),!Be&&(null===(Ne=this.onFinalize)||void 0===Ne||Ne.call(this))}}}},6590:(Wt,et,W)=>{"use strict";W.d(et,{d:()=>ne});var E=W(4482),ie=W(5403);function ne(F){return(0,E.e)((Ne,Be)=>{let ae=!1;Ne.subscribe((0,ie.x)(Be,He=>{ae=!0,Be.next(He)},()=>{ae||Be.next(F),Be.complete()}))})}},9300:(Wt,et,W)=>{"use strict";W.d(et,{h:()=>ne});var E=W(4482),ie=W(5403);function ne(F,Ne){return(0,E.e)((Be,ae)=>{let He=0;Be.subscribe((0,ie.x)(ae,Ae=>F.call(Ne,Ae,He++)&&ae.next(Ae)))})}},590:(Wt,et,W)=>{"use strict";W.d(et,{P:()=>ae});var E=W(6805),ie=W(9300),ne=W(5698),F=W(6590),Ne=W(8068),Be=W(4671);function ae(He,Ae){const De=arguments.length>=2;return Ee=>Ee.pipe(He?(0,ie.h)((Me,$e)=>He(Me,$e,Ee)):Be.y,(0,ne.q)(1),De?(0,F.d)(Ae):(0,Ne.T)(()=>new E.K))}},4004:(Wt,et,W)=>{"use strict";W.d(et,{U:()=>ne});var E=W(4482),ie=W(5403);function ne(F,Ne){return(0,E.e)((Be,ae)=>{let He=0;Be.subscribe((0,ie.x)(ae,Ae=>{ae.next(F.call(Ne,Ae,He++))}))})}},9718:(Wt,et,W)=>{"use strict";W.d(et,{h:()=>ie});var E=W(4004);function ie(ne){return(0,E.U)(()=>ne)}},8189:(Wt,et,W)=>{"use strict";W.d(et,{J:()=>ne});var E=W(5577),ie=W(4671);function ne(F=1/0){return(0,E.z)(ie.y,F)}},5577:(Wt,et,W)=>{"use strict";W.d(et,{z:()=>He});var E=W(4004),ie=W(8421),ne=W(4482),F=W(9672),Ne=W(5403),ae=W(576);function He(Ae,De,Ee=1/0){return(0,ae.m)(De)?He((Me,$e)=>(0,E.U)((rt,_t)=>De(Me,rt,$e,_t))((0,ie.Xf)(Ae(Me,$e))),Ee):("number"==typeof De&&(Ee=De),(0,ne.e)((Me,$e)=>function Be(Ae,De,Ee,Me,$e,rt,_t,St){const Fe=[];let ut=0,st=0,Et=!1;const Ve=()=>{Et&&!Fe.length&&!ut&&De.complete()},Xe=kt=>ut<Me?gt(kt):Fe.push(kt),gt=kt=>{rt&&De.next(kt),ut++;let xt=!1;(0,ie.Xf)(Ee(kt,st++)).subscribe((0,Ne.x)(De,X=>{$e?.(X),rt?Xe(X):De.next(X)},()=>{xt=!0},void 0,()=>{if(xt)try{for(ut--;Fe.length&&ut<Me;){const X=Fe.shift();_t?(0,F.f)(De,_t,()=>gt(X)):gt(X)}Ve()}catch(X){De.error(X)}}))};return Ae.subscribe((0,Ne.x)(De,Xe,()=>{Et=!0,Ve()})),()=>{St?.()}}(Me,$e,Ae,Ee)))}},5363:(Wt,et,W)=>{"use strict";W.d(et,{Q:()=>F});var E=W(9672),ie=W(4482),ne=W(5403);function F(Ne,Be=0){return(0,ie.e)((ae,He)=>{ae.subscribe((0,ne.x)(He,Ae=>(0,E.f)(He,Ne,()=>He.next(Ae),Be),()=>(0,E.f)(He,Ne,()=>He.complete(),Be),Ae=>(0,E.f)(He,Ne,()=>He.error(Ae),Be)))})}},5026:(Wt,et,W)=>{"use strict";W.d(et,{R:()=>F});var E=W(4482),ie=W(5403);function ne(Ne,Be,ae,He,Ae){return(De,Ee)=>{let Me=ae,$e=Be,rt=0;De.subscribe((0,ie.x)(Ee,_t=>{const St=rt++;$e=Me?Ne($e,_t,St):(Me=!0,_t),He&&Ee.next($e)},Ae&&(()=>{Me&&Ee.next($e),Ee.complete()})))}}function F(Ne,Be){return(0,E.e)(ne(Ne,Be,arguments.length>=2,!0))}},3099:(Wt,et,W)=>{"use strict";W.d(et,{B:()=>Ne});var E=W(8421),ie=W(7579),ne=W(930),F=W(4482);function Ne(ae={}){const{connector:He=(()=>new ie.x),resetOnError:Ae=!0,resetOnComplete:De=!0,resetOnRefCountZero:Ee=!0}=ae;return Me=>{let $e,rt,_t,St=0,Fe=!1,ut=!1;const st=()=>{rt?.unsubscribe(),rt=void 0},Et=()=>{st(),$e=_t=void 0,Fe=ut=!1},Ve=()=>{const Xe=$e;Et(),Xe?.unsubscribe()};return(0,F.e)((Xe,gt)=>{St++,!ut&&!Fe&&st();const kt=_t=_t??He();gt.add(()=>{St--,0===St&&!ut&&!Fe&&(rt=Be(Ve,Ee))}),kt.subscribe(gt),!$e&&St>0&&($e=new ne.Hp({next:xt=>kt.next(xt),error:xt=>{ut=!0,st(),rt=Be(Et,Ae,xt),kt.error(xt)},complete:()=>{Fe=!0,st(),rt=Be(Et,De),kt.complete()}}),(0,E.Xf)(Xe).subscribe($e))})(Me)}}function Be(ae,He,...Ae){if(!0===He)return void ae();if(!1===He)return;const De=new ne.Hp({next:()=>{De.unsubscribe(),ae()}});return He(...Ae).subscribe(De)}},8675:(Wt,et,W)=>{"use strict";W.d(et,{O:()=>F});var E=W(7272),ie=W(3269),ne=W(4482);function F(...Ne){const Be=(0,ie.yG)(Ne);return(0,ne.e)((ae,He)=>{(Be?(0,E.z)(Ne,ae,Be):(0,E.z)(Ne,ae)).subscribe(He)})}},9468:(Wt,et,W)=>{"use strict";W.d(et,{R:()=>ie});var E=W(4482);function ie(ne,F=0){return(0,E.e)((Ne,Be)=>{Be.add(ne.schedule(()=>Ne.subscribe(Be),F))})}},3900:(Wt,et,W)=>{"use strict";W.d(et,{w:()=>F});var E=W(8421),ie=W(4482),ne=W(5403);function F(Ne,Be){return(0,ie.e)((ae,He)=>{let Ae=null,De=0,Ee=!1;const Me=()=>Ee&&!Ae&&He.complete();ae.subscribe((0,ne.x)(He,$e=>{Ae?.unsubscribe();let rt=0;const _t=De++;(0,E.Xf)(Ne($e,_t)).subscribe(Ae=(0,ne.x)(He,St=>He.next(Be?Be($e,St,_t,rt++):St),()=>{Ae=null,Me()}))},()=>{Ee=!0,Me()}))})}},5698:(Wt,et,W)=>{"use strict";W.d(et,{q:()=>F});var E=W(515),ie=W(4482),ne=W(5403);function F(Ne){return Ne<=0?()=>E.E:(0,ie.e)((Be,ae)=>{let He=0;Be.subscribe((0,ne.x)(ae,Ae=>{++He<=Ne&&(ae.next(Ae),Ne<=He&&ae.complete())}))})}},8505:(Wt,et,W)=>{"use strict";W.d(et,{b:()=>Ne});var E=W(576),ie=W(4482),ne=W(5403),F=W(4671);function Ne(Be,ae,He){const Ae=(0,E.m)(Be)||ae||He?{next:Be,error:ae,complete:He}:Be;return Ae?(0,ie.e)((De,Ee)=>{var Me;null===(Me=Ae.subscribe)||void 0===Me||Me.call(Ae);let $e=!0;De.subscribe((0,ne.x)(Ee,rt=>{var _t;null===(_t=Ae.next)||void 0===_t||_t.call(Ae,rt),Ee.next(rt)},()=>{var rt;$e=!1,null===(rt=Ae.complete)||void 0===rt||rt.call(Ae),Ee.complete()},rt=>{var _t;$e=!1,null===(_t=Ae.error)||void 0===_t||_t.call(Ae,rt),Ee.error(rt)},()=>{var rt,_t;$e&&(null===(rt=Ae.unsubscribe)||void 0===rt||rt.call(Ae)),null===(_t=Ae.finalize)||void 0===_t||_t.call(Ae)}))}):F.y}},8068:(Wt,et,W)=>{"use strict";W.d(et,{T:()=>F});var E=W(6805),ie=W(4482),ne=W(5403);function F(Be=Ne){return(0,ie.e)((ae,He)=>{let Ae=!1;ae.subscribe((0,ne.x)(He,De=>{Ae=!0,He.next(De)},()=>Ae?He.complete():He.error(Be())))})}function Ne(){return new E.K}},4408:(Wt,et,W)=>{"use strict";W.d(et,{o:()=>Ne});var E=W(727);class ie extends E.w0{constructor(ae,He){super()}schedule(ae,He=0){return this}}const ne={setInterval(Be,ae,...He){const{delegate:Ae}=ne;return Ae?.setInterval?Ae.setInterval(Be,ae,...He):setInterval(Be,ae,...He)},clearInterval(Be){const{delegate:ae}=ne;return(ae?.clearInterval||clearInterval)(Be)},delegate:void 0};var F=W(8737);class Ne extends ie{constructor(ae,He){super(ae,He),this.scheduler=ae,this.work=He,this.pending=!1}schedule(ae,He=0){var Ae;if(this.closed)return this;this.state=ae;const De=this.id,Ee=this.scheduler;return null!=De&&(this.id=this.recycleAsyncId(Ee,De,He)),this.pending=!0,this.delay=He,this.id=null!==(Ae=this.id)&&void 0!==Ae?Ae:this.requestAsyncId(Ee,this.id,He),this}requestAsyncId(ae,He,Ae=0){return ne.setInterval(ae.flush.bind(ae,this),Ae)}recycleAsyncId(ae,He,Ae=0){if(null!=Ae&&this.delay===Ae&&!1===this.pending)return He;null!=He&&ne.clearInterval(He)}execute(ae,He){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(ae,He);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,He){let De,Ae=!1;try{this.work(ae)}catch(Ee){Ae=!0,De=Ee||new Error("Scheduled action threw falsy error")}if(Ae)return this.unsubscribe(),De}unsubscribe(){if(!this.closed){const{id:ae,scheduler:He}=this,{actions:Ae}=He;this.work=this.state=this.scheduler=null,this.pending=!1,(0,F.P)(Ae,this),null!=ae&&(this.id=this.recycleAsyncId(He,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wt,et,W)=>{"use strict";W.d(et,{v:()=>ne});var E=W(6063);class ie{constructor(Ne,Be=ie.now){this.schedulerActionCtor=Ne,this.now=Be}schedule(Ne,Be=0,ae){return new this.schedulerActionCtor(this,Ne).schedule(ae,Be)}}ie.now=E.l.now;class ne extends ie{constructor(Ne,Be=ie.now){super(Ne,Be),this.actions=[],this._active=!1}flush(Ne){const{actions:Be}=this;if(this._active)return void Be.push(Ne);let ae;this._active=!0;do{if(ae=Ne.execute(Ne.state,Ne.delay))break}while(Ne=Be.shift());if(this._active=!1,ae){for(;Ne=Be.shift();)Ne.unsubscribe();throw ae}}}},4986:(Wt,et,W)=>{"use strict";W.d(et,{P:()=>F,z:()=>ne});var E=W(4408);const ne=new(W(7565).v)(E.o),F=ne},6063:(Wt,et,W)=>{"use strict";W.d(et,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(Wt,et,W)=>{"use strict";W.d(et,{z:()=>E});const E={setTimeout(ie,ne,...F){const{delegate:Ne}=E;return Ne?.setTimeout?Ne.setTimeout(ie,ne,...F):setTimeout(ie,ne,...F)},clearTimeout(ie){const{delegate:ne}=E;return(ne?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},2202:(Wt,et,W)=>{"use strict";W.d(et,{h:()=>ie});const ie=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wt,et,W)=>{"use strict";W.d(et,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Wt,et,W)=>{"use strict";W.d(et,{K:()=>ie});const ie=(0,W(3888).d)(ne=>function(){ne(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Wt,et,W)=>{"use strict";W.d(et,{_6:()=>Be,jO:()=>F,yG:()=>Ne});var E=W(576),ie=W(3532);function ne(ae){return ae[ae.length-1]}function F(ae){return(0,E.m)(ne(ae))?ae.pop():void 0}function Ne(ae){return(0,ie.K)(ne(ae))?ae.pop():void 0}function Be(ae,He){return"number"==typeof ne(ae)?ae.pop():He}},4742:(Wt,et,W)=>{"use strict";W.d(et,{D:()=>Ne});const{isArray:E}=Array,{getPrototypeOf:ie,prototype:ne,keys:F}=Object;function Ne(ae){if(1===ae.length){const He=ae[0];if(E(He))return{args:He,keys:null};if(function Be(ae){return ae&&"object"==typeof ae&&ie(ae)===ne}(He)){const Ae=F(He);return{args:Ae.map(De=>He[De]),keys:Ae}}}return{args:ae,keys:null}}},8737:(Wt,et,W)=>{"use strict";function E(ie,ne){if(ie){const F=ie.indexOf(ne);0<=F&&ie.splice(F,1)}}W.d(et,{P:()=>E})},3888:(Wt,et,W)=>{"use strict";function E(ie){const F=ie(Ne=>{Error.call(Ne),Ne.stack=(new Error).stack});return F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F}W.d(et,{d:()=>E})},1810:(Wt,et,W)=>{"use strict";function E(ie,ne){return ie.reduce((F,Ne,Be)=>(F[Ne]=ne[Be],F),{})}W.d(et,{n:()=>E})},2806:(Wt,et,W)=>{"use strict";W.d(et,{O:()=>F,x:()=>ne});var E=W(2416);let ie=null;function ne(Ne){if(E.v.useDeprecatedSynchronousErrorHandling){const Be=!ie;if(Be&&(ie={errorThrown:!1,error:null}),Ne(),Be){const{errorThrown:ae,error:He}=ie;if(ie=null,ae)throw He}}else Ne()}function F(Ne){E.v.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=Ne)}},9672:(Wt,et,W)=>{"use strict";function E(ie,ne,F,Ne=0,Be=!1){const ae=ne.schedule(function(){F(),Be?ie.add(this.schedule(null,Ne)):this.unsubscribe()},Ne);if(ie.add(ae),!Be)return ae}W.d(et,{f:()=>E})},4671:(Wt,et,W)=>{"use strict";function E(ie){return ie}W.d(et,{y:()=>E})},1144:(Wt,et,W)=>{"use strict";W.d(et,{z:()=>E});const E=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},2206:(Wt,et,W)=>{"use strict";W.d(et,{D:()=>ie});var E=W(576);function ie(ne){return Symbol.asyncIterator&&(0,E.m)(ne?.[Symbol.asyncIterator])}},576:(Wt,et,W)=>{"use strict";function E(ie){return"function"==typeof ie}W.d(et,{m:()=>E})},3670:(Wt,et,W)=>{"use strict";W.d(et,{c:()=>ne});var E=W(8822),ie=W(576);function ne(F){return(0,ie.m)(F[E.L])}},6495:(Wt,et,W)=>{"use strict";W.d(et,{T:()=>ne});var E=W(2202),ie=W(576);function ne(F){return(0,ie.m)(F?.[E.h])}},8239:(Wt,et,W)=>{"use strict";W.d(et,{t:()=>ie});var E=W(576);function ie(ne){return(0,E.m)(ne?.then)}},3260:(Wt,et,W)=>{"use strict";W.d(et,{L:()=>F,Q:()=>ne});var E=W(655),ie=W(576);function ne(Ne){return(0,E.FC)(this,arguments,function*(){const ae=Ne.getReader();try{for(;;){const{value:He,done:Ae}=yield(0,E.qq)(ae.read());if(Ae)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(He)}}finally{ae.releaseLock()}})}function F(Ne){return(0,ie.m)(Ne?.getReader)}},3532:(Wt,et,W)=>{"use strict";W.d(et,{K:()=>ie});var E=W(576);function ie(ne){return ne&&(0,E.m)(ne.schedule)}},4482:(Wt,et,W)=>{"use strict";W.d(et,{A:()=>ie,e:()=>ne});var E=W(576);function ie(F){return(0,E.m)(F?.lift)}function ne(F){return Ne=>{if(ie(Ne))return Ne.lift(function(Be){try{return F(Be,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Wt,et,W)=>{"use strict";W.d(et,{Z:()=>F});var E=W(4004);const{isArray:ie}=Array;function F(Ne){return(0,E.U)(Be=>function ne(Ne,Be){return ie(Be)?Ne(...Be):Ne(Be)}(Ne,Be))}},5032:(Wt,et,W)=>{"use strict";function E(){}W.d(et,{Z:()=>E})},9635:(Wt,et,W)=>{"use strict";W.d(et,{U:()=>ne,z:()=>ie});var E=W(4671);function ie(...F){return ne(F)}function ne(F){return 0===F.length?E.y:1===F.length?F[0]:function(Be){return F.reduce((ae,He)=>He(ae),Be)}}},7849:(Wt,et,W)=>{"use strict";W.d(et,{h:()=>ne});var E=W(2416),ie=W(3410);function ne(F){ie.z.setTimeout(()=>{const{onUnhandledError:Ne}=E.v;if(!Ne)throw F;Ne(F)})}},4532:(Wt,et,W)=>{"use strict";function E(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(et,{z:()=>E})},8099:Wt=>{Wt.exports=function et(W,E){var ie,ne=null;try{ie=JSON.parse(W,E)}catch(F){ne=F}return[ne,ie]}},3871:function(Wt){var W,E,ie,ne,F;W=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,E=/^(?=([^\/?#]*))\1([^]*)$/,ie=/(?:\/|^)\.(?=\/)/g,ne=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,Wt.exports=F={buildAbsoluteURL:function(Ne,Be,ae){if(ae=ae||{},Ne=Ne.trim(),!(Be=Be.trim())){if(!ae.alwaysNormalize)return Ne;var He=F.parseURL(Ne);if(!He)throw new Error("Error trying to parse base URL.");return He.path=F.normalizePath(He.path),F.buildURLFromParts(He)}var Ae=F.parseURL(Be);if(!Ae)throw new Error("Error trying to parse relative URL.");if(Ae.scheme)return ae.alwaysNormalize?(Ae.path=F.normalizePath(Ae.path),F.buildURLFromParts(Ae)):Be;var De=F.parseURL(Ne);if(!De)throw new Error("Error trying to parse base URL.");if(!De.netLoc&&De.path&&"/"!==De.path[0]){var Ee=E.exec(De.path);De.netLoc=Ee[1],De.path=Ee[2]}De.netLoc&&!De.path&&(De.path="/");var Me={scheme:De.scheme,netLoc:Ae.netLoc,path:null,params:Ae.params,query:Ae.query,fragment:Ae.fragment};if(!Ae.netLoc&&(Me.netLoc=De.netLoc,"/"!==Ae.path[0]))if(Ae.path){var $e=De.path,rt=$e.substring(0,$e.lastIndexOf("/")+1)+Ae.path;Me.path=F.normalizePath(rt)}else Me.path=De.path,Ae.params||(Me.params=De.params,Ae.query||(Me.query=De.query));return null===Me.path&&(Me.path=ae.alwaysNormalize?F.normalizePath(Ae.path):Ae.path),F.buildURLFromParts(Me)},parseURL:function(Ne){var Be=W.exec(Ne);return Be?{scheme:Be[1]||"",netLoc:Be[2]||"",path:Be[3]||"",params:Be[4]||"",query:Be[5]||"",fragment:Be[6]||""}:null},normalizePath:function(Ne){for(Ne=Ne.split("").reverse().join("").replace(ie,"");Ne.length!==(Ne=Ne.replace(ne,"")).length;);return Ne.split("").reverse().join("")},buildURLFromParts:function(Ne){return Ne.scheme+Ne.netLoc+Ne.path+Ne.params+Ne.query+Ne.fragment}}},3629:(Wt,et,W)=>{var E=W(9226),ie=Wt.exports={WebVTT:W(8318),VTTCue:W(5713),VTTRegion:W(3872)};E.vttjs=ie,E.WebVTT=ie.WebVTT;var ne=ie.VTTCue,F=ie.VTTRegion,Ne=E.VTTCue,Be=E.VTTRegion;ie.shim=function(){E.VTTCue=ne,E.VTTRegion=F},ie.restore=function(){E.VTTCue=Ne,E.VTTRegion=Be},E.VTTCue||ie.shim()},8318:(Wt,et,W)=>{var E=W(1421),ie=Object.create||function(){function X(){}return function(ve){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return X.prototype=ve,new X}}();function ne(X,ve){this.name="ParsingError",this.code=X.code,this.message=ve||X.message}function F(X){function ve(Le,Oe,qe,dt){return 3600*(0|Le)+60*(0|Oe)+(0|qe)+(0|dt)/1e3}var ge=X.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return ge?ge[3]?ve(ge[1],ge[2],ge[3].replace(":",""),ge[4]):ge[1]>59?ve(ge[1],ge[2],0,ge[4]):ve(0,ge[1],ge[2],ge[4]):null}function Ne(){this.values=ie(null)}function Be(X,ve,ge,Le){var Oe=Le?X.split(Le):[X];for(var qe in Oe)if("string"==typeof Oe[qe]){var dt=Oe[qe].split(ge);2===dt.length&&ve(dt[0].trim(),dt[1].trim())}}function ae(X,ve,ge){var Le=X;function Oe(){var wt=F(X);if(null===wt)throw new ne(ne.Errors.BadTimeStamp,"Malformed timestamp: "+Le);return X=X.replace(/^[^\sa-zA-Z-]+/,""),wt}function dt(){X=X.replace(/^\s+/,"")}if(dt(),ve.startTime=Oe(),dt(),"--\x3e"!==X.substr(0,3))throw new ne(ne.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+Le);X=X.substr(3),dt(),ve.endTime=Oe(),dt(),function qe(wt,vt){var Mt=new Ne;Be(wt,function(Rt,At){switch(Rt){case"region":for(var Yt=ge.length-1;Yt>=0;Yt--)if(ge[Yt].id===At){Mt.set(Rt,ge[Yt].region);break}break;case"vertical":Mt.alt(Rt,At,["rl","lr"]);break;case"line":var $t=At.split(","),ln=$t[0];Mt.integer(Rt,ln),Mt.percent(Rt,ln)&&Mt.set("snapToLines",!1),Mt.alt(Rt,ln,["auto"]),2===$t.length&&Mt.alt("lineAlign",$t[1],["start","center","end"]);break;case"position":$t=At.split(","),Mt.percent(Rt,$t[0]),2===$t.length&&Mt.alt("positionAlign",$t[1],["start","center","end"]);break;case"size":Mt.percent(Rt,At);break;case"align":Mt.alt(Rt,At,["start","center","end","left","right"])}},/:/,/\s/),vt.region=Mt.get("region",null),vt.vertical=Mt.get("vertical","");try{vt.line=Mt.get("line","auto")}catch{}vt.lineAlign=Mt.get("lineAlign","start"),vt.snapToLines=Mt.get("snapToLines",!0),vt.size=Mt.get("size",100);try{vt.align=Mt.get("align","center")}catch{vt.align=Mt.get("align","middle")}try{vt.position=Mt.get("position","auto")}catch{vt.position=Mt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},vt.align)}vt.positionAlign=Mt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},vt.align)}(X,ve)}(ne.prototype=ie(Error.prototype)).constructor=ne,ne.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Ne.prototype={set:function(X,ve){!this.get(X)&&""!==ve&&(this.values[X]=ve)},get:function(X,ve,ge){return ge?this.has(X)?this.values[X]:ve[ge]:this.has(X)?this.values[X]:ve},has:function(X){return X in this.values},alt:function(X,ve,ge){for(var Le=0;Le<ge.length;++Le)if(ve===ge[Le]){this.set(X,ve);break}},integer:function(X,ve){/^-?\d+$/.test(ve)&&this.set(X,parseInt(ve,10))},percent:function(X,ve){return!!(ve.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(ve=parseFloat(ve),ve>=0&&ve<=100))&&(this.set(X,ve),!0)}};var He=E.createElement&&E.createElement("textarea"),Ae={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},De={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Ee={v:"title",lang:"lang"},Me={rt:"ruby"};function $e(X,ve){function ge(){if(!ve)return null;var Zt=ve.match(/^([^<]*)(<[^>]*>?)?/);return function ln(hn){return ve=ve.substr(hn.length),hn}(Zt[1]?Zt[1]:Zt[2])}function Le(ln){return He.innerHTML=ln,ln=He.textContent,He.textContent="",ln}function qe(ln,Zt){var hn=Ae[ln];if(!hn)return null;var Gt=X.document.createElement(hn),rr=Ee[ln];return rr&&Zt&&(Gt[rr]=Zt.trim()),Gt}for(var vt,dt=X.document.createElement("div"),wt=dt,Mt=[];null!==(vt=ge());)if("<"!==vt[0])wt.appendChild(X.document.createTextNode(Le(vt)));else{if("/"===vt[1]){Mt.length&&Mt[Mt.length-1]===vt.substr(2).replace(">","")&&(Mt.pop(),wt=wt.parentNode);continue}var At,Rt=F(vt.substr(1,vt.length-2));if(Rt){At=X.document.createProcessingInstruction("timestamp",Rt),wt.appendChild(At);continue}var Yt=vt.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Yt||!(At=qe(Yt[1],Yt[3]))||Me[(Zt=At).localName]&&Me[Zt.localName]!==wt.localName)continue;if(Yt[2]){var $t=Yt[2].split(".");$t.forEach(function(ln){var Zt=/^bg_/.test(ln),hn=Zt?ln.slice(3):ln;De.hasOwnProperty(hn)&&(At.style[Zt?"background-color":"color"]=De[hn])}),At.className=$t.join(" ")}Mt.push(Yt[1]),wt.appendChild(At),wt=At}var Zt;return dt}var rt=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function _t(X){for(var ve=0;ve<rt.length;ve++){var ge=rt[ve];if(X>=ge[0]&&X<=ge[1])return!0}return!1}function St(X){var ve=[],ge="";if(!X||!X.childNodes)return"ltr";function Oe(wt,vt){for(var Mt=vt.childNodes.length-1;Mt>=0;Mt--)wt.push(vt.childNodes[Mt])}function qe(wt){if(!wt||!wt.length)return null;var vt=wt.pop(),Mt=vt.textContent||vt.innerText;if(Mt){var Rt=Mt.match(/^.*(\n|\r)/);return Rt?(wt.length=0,Rt[0]):Mt}return"ruby"===vt.tagName?qe(wt):vt.childNodes?(Oe(wt,vt),qe(wt)):void 0}for(Oe(ve,X);ge=qe(ve);)for(var dt=0;dt<ge.length;dt++)if(_t(ge.charCodeAt(dt)))return"rtl";return"ltr"}function ut(){}function st(X,ve,ge){ut.call(this),this.cue=ve,this.cueDiv=$e(X,ve.text);var Le={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===ve.vertical?"horizontal-tb":"lr"===ve.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Le,this.cueDiv),this.div=X.document.createElement("div"),Le={direction:St(this.cueDiv),writingMode:""===ve.vertical?"horizontal-tb":"lr"===ve.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===ve.align?"center":ve.align,font:ge.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Le),this.div.appendChild(this.cueDiv);var Oe=0;switch(ve.positionAlign){case"start":case"line-left":Oe=ve.position;break;case"center":Oe=ve.position-ve.size/2;break;case"end":case"line-right":Oe=ve.position-ve.size}this.applyStyles(""===ve.vertical?{left:this.formatStyle(Oe,"%"),width:this.formatStyle(ve.size,"%")}:{top:this.formatStyle(Oe,"%"),height:this.formatStyle(ve.size,"%")}),this.move=function(qe){this.applyStyles({top:this.formatStyle(qe.top,"px"),bottom:this.formatStyle(qe.bottom,"px"),left:this.formatStyle(qe.left,"px"),right:this.formatStyle(qe.right,"px"),height:this.formatStyle(qe.height,"px"),width:this.formatStyle(qe.width,"px")})}}function Et(X){var ve,ge,Le,Oe;if(X.div){ge=X.div.offsetHeight,Le=X.div.offsetWidth,Oe=X.div.offsetTop;var qe=(qe=X.div.childNodes)&&(qe=qe[0])&&qe.getClientRects&&qe.getClientRects();X=X.div.getBoundingClientRect(),ve=qe?Math.max(qe[0]&&qe[0].height||0,X.height/qe.length):0}this.left=X.left,this.right=X.right,this.top=X.top||Oe,this.height=X.height||ge,this.bottom=X.bottom||Oe+(X.height||ge),this.width=X.width||Le,this.lineHeight=void 0!==ve?ve:X.lineHeight}function Ve(X,ve,ge,Le){var qe=new Et(ve),dt=ve.cue,wt=function Fe(X){if("number"==typeof X.line&&(X.snapToLines||X.line>=0&&X.line<=100))return X.line;if(!X.track||!X.track.textTrackList||!X.track.textTrackList.mediaElement)return-1;for(var ve=X.track,ge=ve.textTrackList,Le=0,Oe=0;Oe<ge.length&&ge[Oe]!==ve;Oe++)"showing"===ge[Oe].mode&&Le++;return-1*++Le}(dt),vt=[];if(dt.snapToLines){var Mt;switch(dt.vertical){case"":vt=["+y","-y"],Mt="height";break;case"rl":vt=["+x","-x"],Mt="width";break;case"lr":vt=["-x","+x"],Mt="width"}var Rt=qe.lineHeight,At=Rt*Math.round(wt),Yt=ge[Mt]+Rt,$t=vt[0];Math.abs(At)>Yt&&(At=At<0?-1:1,At*=Math.ceil(Yt/Rt)*Rt),wt<0&&(At+=""===dt.vertical?ge.height:ge.width,vt=vt.reverse()),qe.move($t,At)}else{var ln=qe.lineHeight/ge.height*100;switch(dt.lineAlign){case"center":wt-=ln/2;break;case"end":wt-=ln}switch(dt.vertical){case"":ve.applyStyles({top:ve.formatStyle(wt,"%")});break;case"rl":ve.applyStyles({left:ve.formatStyle(wt,"%")});break;case"lr":ve.applyStyles({right:ve.formatStyle(wt,"%")})}vt=["+y","-x","+x","-y"],qe=new Et(ve)}var Zt=function Oe(hn,Gt){for(var rr,Wn=new Et(hn),Er=1,_r=0;_r<Gt.length;_r++){for(;hn.overlapsOppositeAxis(ge,Gt[_r])||hn.within(ge)&&hn.overlapsAny(Le);)hn.move(Gt[_r]);if(hn.within(ge))return hn;var yi=hn.intersectPercentage(ge);Er>yi&&(rr=new Et(hn),Er=yi),hn=new Et(Wn)}return rr||Wn}(qe,vt);ve.move(Zt.toCSSCompatValues(ge))}function Xe(){}ut.prototype.applyStyles=function(X,ve){for(var ge in ve=ve||this.div,X)X.hasOwnProperty(ge)&&(ve.style[ge]=X[ge])},ut.prototype.formatStyle=function(X,ve){return 0===X?0:X+ve},(st.prototype=ie(ut.prototype)).constructor=st,Et.prototype.move=function(X,ve){switch(ve=void 0!==ve?ve:this.lineHeight,X){case"+x":this.left+=ve,this.right+=ve;break;case"-x":this.left-=ve,this.right-=ve;break;case"+y":this.top+=ve,this.bottom+=ve;break;case"-y":this.top-=ve,this.bottom-=ve}},Et.prototype.overlaps=function(X){return this.left<X.right&&this.right>X.left&&this.top<X.bottom&&this.bottom>X.top},Et.prototype.overlapsAny=function(X){for(var ve=0;ve<X.length;ve++)if(this.overlaps(X[ve]))return!0;return!1},Et.prototype.within=function(X){return this.top>=X.top&&this.bottom<=X.bottom&&this.left>=X.left&&this.right<=X.right},Et.prototype.overlapsOppositeAxis=function(X,ve){switch(ve){case"+x":return this.left<X.left;case"-x":return this.right>X.right;case"+y":return this.top<X.top;case"-y":return this.bottom>X.bottom}},Et.prototype.intersectPercentage=function(X){return Math.max(0,Math.min(this.right,X.right)-Math.max(this.left,X.left))*Math.max(0,Math.min(this.bottom,X.bottom)-Math.max(this.top,X.top))/(this.height*this.width)},Et.prototype.toCSSCompatValues=function(X){return{top:this.top-X.top,bottom:X.bottom-this.bottom,left:this.left-X.left,right:X.right-this.right,height:this.height,width:this.width}},Et.getSimpleBoxPosition=function(X){var ve=X.div?X.div.offsetHeight:X.tagName?X.offsetHeight:0,ge=X.div?X.div.offsetWidth:X.tagName?X.offsetWidth:0,Le=X.div?X.div.offsetTop:X.tagName?X.offsetTop:0;return{left:(X=X.div?X.div.getBoundingClientRect():X.tagName?X.getBoundingClientRect():X).left,right:X.right,top:X.top||Le,height:X.height||ve,bottom:X.bottom||Le+(X.height||ve),width:X.width||ge}},Xe.StringDecoder=function(){return{decode:function(X){if(!X)return"";if("string"!=typeof X)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(X))}}},Xe.convertCueToDOMTree=function(X,ve){return X&&ve?$e(X,ve):null},Xe.processCues=function(X,ve,ge){if(!X||!ve||!ge)return null;for(;ge.firstChild;)ge.removeChild(ge.firstChild);var Le=X.document.createElement("div");if(Le.style.position="absolute",Le.style.left="0",Le.style.right="0",Le.style.top="0",Le.style.bottom="0",Le.style.margin="1.5%",ge.appendChild(Le),function Oe(Rt){for(var At=0;At<Rt.length;At++)if(Rt[At].hasBeenReset||!Rt[At].displayState)return!0;return!1}(ve)){var dt=[],wt=Et.getSimpleBoxPosition(Le),Mt={font:Math.round(.05*wt.height*100)/100+"px sans-serif"};!function(){for(var Rt,At,Yt=0;Yt<ve.length;Yt++)Rt=new st(X,At=ve[Yt],Mt),Le.appendChild(Rt.div),Ve(0,Rt,wt,dt),At.displayState=Rt.div,dt.push(Et.getSimpleBoxPosition(Rt))}()}else for(var qe=0;qe<ve.length;qe++)Le.appendChild(ve[qe].displayState)},(Xe.Parser=function(X,ve,ge){ge||(ge=ve,ve={}),ve||(ve={}),this.window=X,this.vttjs=ve,this.state="INITIAL",this.buffer="",this.decoder=ge||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(X){if(!(X instanceof ne))throw X;this.onparsingerror&&this.onparsingerror(X)},parse:function(X){var Rt,ve=this;function ge(){for(var Rt=ve.buffer,At=0;At<Rt.length&&"\r"!==Rt[At]&&"\n"!==Rt[At];)++At;var Yt=Rt.substr(0,At);return"\r"===Rt[At]&&++At,"\n"===Rt[At]&&++At,ve.buffer=Rt.substr(At),Yt}X&&(ve.buffer+=ve.decoder.decode(X,{stream:!0}));try{var dt;if("INITIAL"===ve.state){if(!/\r\n|\n/.test(ve.buffer))return this;var wt=(dt=ge()).match(/^WEBVTT([ \t].*)?$/);if(!wt||!wt[0])throw new ne(ne.Errors.BadSignature);ve.state="HEADER"}for(var vt=!1;ve.buffer;){if(!/\r\n|\n/.test(ve.buffer))return this;switch(vt?vt=!1:dt=ge(),ve.state){case"HEADER":/:/.test(dt)?(Rt=dt).match(/X-TIMESTAMP-MAP/)?Be(Rt,function(At,Yt){"X-TIMESTAMP-MAP"===At&&function Oe(Rt){var At=new Ne;Be(Rt,function(Yt,$t){switch(Yt){case"MPEGT":At.integer(Yt+"S",$t);break;case"LOCA":At.set(Yt+"L",F($t))}},/[^\d]:/,/,/),ve.ontimestampmap&&ve.ontimestampmap({MPEGTS:At.get("MPEGTS"),LOCAL:At.get("LOCAL")})}(Yt)},/=/):Be(Rt,function(At,Yt){"Region"===At&&function Le(Rt){var At=new Ne;if(Be(Rt,function($t,ln){switch($t){case"id":At.set($t,ln);break;case"width":At.percent($t,ln);break;case"lines":At.integer($t,ln);break;case"regionanchor":case"viewportanchor":var Zt=ln.split(",");if(2!==Zt.length)break;var hn=new Ne;if(hn.percent("x",Zt[0]),hn.percent("y",Zt[1]),!hn.has("x")||!hn.has("y"))break;At.set($t+"X",hn.get("x")),At.set($t+"Y",hn.get("y"));break;case"scroll":At.alt($t,ln,["up"])}},/=/,/\s/),At.has("id")){var Yt=new(ve.vttjs.VTTRegion||ve.window.VTTRegion);Yt.width=At.get("width",100),Yt.lines=At.get("lines",3),Yt.regionAnchorX=At.get("regionanchorX",0),Yt.regionAnchorY=At.get("regionanchorY",100),Yt.viewportAnchorX=At.get("viewportanchorX",0),Yt.viewportAnchorY=At.get("viewportanchorY",100),Yt.scroll=At.get("scroll",""),ve.onregion&&ve.onregion(Yt),ve.regionList.push({id:At.get("id"),region:Yt})}}(Yt)},/:/):dt||(ve.state="ID");continue;case"NOTE":dt||(ve.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(dt)){ve.state="NOTE";break}if(!dt)continue;ve.cue=new(ve.vttjs.VTTCue||ve.window.VTTCue)(0,0,"");try{ve.cue.align="center"}catch{ve.cue.align="middle"}if(ve.state="CUE",-1===dt.indexOf("--\x3e")){ve.cue.id=dt;continue}case"CUE":try{ae(dt,ve.cue,ve.regionList)}catch(Rt){ve.reportOrThrowError(Rt),ve.cue=null,ve.state="BADCUE";continue}ve.state="CUETEXT";continue;case"CUETEXT":var Mt=-1!==dt.indexOf("--\x3e");if(!dt||Mt&&(vt=!0)){ve.oncue&&ve.oncue(ve.cue),ve.cue=null,ve.state="ID";continue}ve.cue.text&&(ve.cue.text+="\n"),ve.cue.text+=dt.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":dt||(ve.state="ID");continue}}}catch(Rt){ve.reportOrThrowError(Rt),"CUETEXT"===ve.state&&ve.cue&&ve.oncue&&ve.oncue(ve.cue),ve.cue=null,ve.state="INITIAL"===ve.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var X=this;try{if(X.buffer+=X.decoder.decode(),(X.cue||"HEADER"===X.state)&&(X.buffer+="\n\n",X.parse()),"INITIAL"===X.state)throw new ne(ne.Errors.BadSignature)}catch(ve){X.reportOrThrowError(ve)}return X.onflush&&X.onflush(),this}},Wt.exports=Xe},5713:Wt=>{var W={"":1,lr:1,rl:1},E={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ne(Ne){return"string"==typeof Ne&&!!E[Ne.toLowerCase()]&&Ne.toLowerCase()}function F(Ne,Be,ae){this.hasBeenReset=!1;var He="",Ae=!1,De=Ne,Ee=Be,Me=ae,$e=null,rt="",_t=!0,St="auto",Fe="start",ut="auto",st="auto",Et=100,Ve="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return He},set:function(Xe){He=""+Xe}},pauseOnExit:{enumerable:!0,get:function(){return Ae},set:function(Xe){Ae=!!Xe}},startTime:{enumerable:!0,get:function(){return De},set:function(Xe){if("number"!=typeof Xe)throw new TypeError("Start time must be set to a number.");De=Xe,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return Ee},set:function(Xe){if("number"!=typeof Xe)throw new TypeError("End time must be set to a number.");Ee=Xe,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Me},set:function(Xe){Me=""+Xe,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return $e},set:function(Xe){$e=Xe,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return rt},set:function(Xe){var gt=function ie(Ne){return"string"==typeof Ne&&!!W[Ne.toLowerCase()]&&Ne.toLowerCase()}(Xe);if(!1===gt)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");rt=gt,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return _t},set:function(Xe){_t=!!Xe,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return St},set:function(Xe){if("number"!=typeof Xe&&"auto"!==Xe)throw new SyntaxError("Line: an invalid number or illegal string was specified.");St=Xe,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Fe},set:function(Xe){var gt=ne(Xe);gt?(Fe=gt,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return ut},set:function(Xe){if(Xe<0||Xe>100)throw new Error("Position must be between 0 and 100.");ut=Xe,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return st},set:function(Xe){var gt=ne(Xe);gt?(st=gt,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Et},set:function(Xe){if(Xe<0||Xe>100)throw new Error("Size must be between 0 and 100.");Et=Xe,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return Ve},set:function(Xe){var gt=ne(Xe);if(!gt)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Ve=gt,this.hasBeenReset=!0}}}),this.displayState=void 0}F.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Wt.exports=F},3872:Wt=>{var et={"":!0,up:!0};function E(ne){return"number"==typeof ne&&ne>=0&&ne<=100}Wt.exports=function ie(){var ne=100,F=3,Ne=0,Be=100,ae=0,He=100,Ae="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return ne},set:function(De){if(!E(De))throw new Error("Width must be between 0 and 100.");ne=De}},lines:{enumerable:!0,get:function(){return F},set:function(De){if("number"!=typeof De)throw new TypeError("Lines must be set to a number.");F=De}},regionAnchorY:{enumerable:!0,get:function(){return Be},set:function(De){if(!E(De))throw new Error("RegionAnchorX must be between 0 and 100.");Be=De}},regionAnchorX:{enumerable:!0,get:function(){return Ne},set:function(De){if(!E(De))throw new Error("RegionAnchorY must be between 0 and 100.");Ne=De}},viewportAnchorY:{enumerable:!0,get:function(){return He},set:function(De){if(!E(De))throw new Error("ViewportAnchorY must be between 0 and 100.");He=De}},viewportAnchorX:{enumerable:!0,get:function(){return ae},set:function(De){if(!E(De))throw new Error("ViewportAnchorX must be between 0 and 100.");ae=De}},scroll:{enumerable:!0,get:function(){return Ae},set:function(De){var Ee=function W(ne){return"string"==typeof ne&&!!et[ne.toLowerCase()]&&ne.toLowerCase()}(De);!1===Ee?console.warn("Scroll: an invalid or illegal string was specified."):Ae=Ee}}})}},655:(Wt,et,W)=>{"use strict";function F(ge,Le){var Oe={};for(var qe in ge)Object.prototype.hasOwnProperty.call(ge,qe)&&Le.indexOf(qe)<0&&(Oe[qe]=ge[qe]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(qe=Object.getOwnPropertySymbols(ge);dt<qe.length;dt++)Le.indexOf(qe[dt])<0&&Object.prototype.propertyIsEnumerable.call(ge,qe[dt])&&(Oe[qe[dt]]=ge[qe[dt]])}return Oe}function He(ge,Le,Oe,qe){return new(Oe||(Oe=Promise))(function(wt,vt){function Mt(Yt){try{At(qe.next(Yt))}catch($t){vt($t)}}function Rt(Yt){try{At(qe.throw(Yt))}catch($t){vt($t)}}function At(Yt){Yt.done?wt(Yt.value):function dt(wt){return wt instanceof Oe?wt:new Oe(function(vt){vt(wt)})}(Yt.value).then(Mt,Rt)}At((qe=qe.apply(ge,Le||[])).next())})}function Fe(ge){return this instanceof Fe?(this.v=ge,this):new Fe(ge)}function ut(ge,Le,Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,qe=Oe.apply(ge,Le||[]),wt=[];return dt={},vt("next"),vt("throw"),vt("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function vt(ln){qe[ln]&&(dt[ln]=function(Zt){return new Promise(function(hn,Gt){wt.push([ln,Zt,hn,Gt])>1||Mt(ln,Zt)})})}function Mt(ln,Zt){try{!function Rt(ln){ln.value instanceof Fe?Promise.resolve(ln.value.v).then(At,Yt):$t(wt[0][2],ln)}(qe[ln](Zt))}catch(hn){$t(wt[0][3],hn)}}function At(ln){Mt("next",ln)}function Yt(ln){Mt("throw",ln)}function $t(ln,Zt){ln(Zt),wt.shift(),wt.length&&Mt(wt[0][0],wt[0][1])}}function Et(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Le=ge[Symbol.asyncIterator];return Le?Le.call(ge):(ge=function Me(ge){var Le="function"==typeof Symbol&&Symbol.iterator,Oe=Le&&ge[Le],qe=0;if(Oe)return Oe.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&qe>=ge.length&&(ge=void 0),{value:ge&&ge[qe++],done:!ge}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Oe={},qe("next"),qe("throw"),qe("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe);function qe(wt){Oe[wt]=ge[wt]&&function(vt){return new Promise(function(Mt,Rt){!function dt(wt,vt,Mt,Rt){Promise.resolve(Rt).then(function(At){wt({value:At,done:Mt})},vt)}(Mt,Rt,(vt=ge[wt](vt)).done,vt.value)})}}}W.d(et,{FC:()=>ut,KL:()=>Et,_T:()=>F,mG:()=>He,qq:()=>Fe})},5893:()=>{},434:Wt=>{function et(){return Wt.exports=et=Object.assign?Object.assign.bind():function(W){for(var E=1;E<arguments.length;E++){var ie=arguments[E];for(var ne in ie)Object.prototype.hasOwnProperty.call(ie,ne)&&(W[ne]=ie[ne])}return W},Wt.exports.__esModule=!0,Wt.exports.default=Wt.exports,et.apply(this,arguments)}Wt.exports=et,Wt.exports.__esModule=!0,Wt.exports.default=Wt.exports},6895:(Wt,et,W)=>{"use strict";W.d(et,{Do:()=>st,EM:()=>Xo,HT:()=>F,JF:()=>fi,K0:()=>Be,Mx:()=>is,O5:()=>vi,Ov:()=>pn,PC:()=>Do,PM:()=>sa,S$:()=>St,V_:()=>Ae,Ye:()=>Et,Zx:()=>ya,b0:()=>ut,bD:()=>Us,ez:()=>zs,mk:()=>ps,q:()=>ne,sg:()=>ss,uU:()=>Vr,w_:()=>Ne});var E=W(4650);let ie=null;function ne(){return ie}function F(V){ie||(ie=V)}class Ne{}const Be=new E.OlP("DocumentToken");let ae=(()=>{class V{historyGo(G){throw new Error("Not implemented")}}return V.\u0275fac=function(G){return new(G||V)},V.\u0275prov=E.Yz7({token:V,factory:function(){return function He(){return(0,E.LFG)(De)}()},providedIn:"platform"}),V})();const Ae=new E.OlP("Location Initialized");let De=(()=>{class V extends ae{constructor(G){super(),this._doc=G,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ne().getBaseHref(this._doc)}onPopState(G){const Te=ne().getGlobalEventTarget(this._doc,"window");return Te.addEventListener("popstate",G,!1),()=>Te.removeEventListener("popstate",G)}onHashChange(G){const Te=ne().getGlobalEventTarget(this._doc,"window");return Te.addEventListener("hashchange",G,!1),()=>Te.removeEventListener("hashchange",G)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(G){this.location.pathname=G}pushState(G,Te,Je){Ee()?this._history.pushState(G,Te,Je):this.location.hash=Je}replaceState(G,Te,Je){Ee()?this._history.replaceState(G,Te,Je):this.location.hash=Je}forward(){this._history.forward()}back(){this._history.back()}historyGo(G=0){this._history.go(G)}getState(){return this._history.state}}return V.\u0275fac=function(G){return new(G||V)(E.LFG(Be))},V.\u0275prov=E.Yz7({token:V,factory:function(){return function Me(){return new De((0,E.LFG)(Be))}()},providedIn:"platform"}),V})();function Ee(){return!!window.history.pushState}function $e(V,ue){if(0==V.length)return ue;if(0==ue.length)return V;let G=0;return V.endsWith("/")&&G++,ue.startsWith("/")&&G++,2==G?V+ue.substring(1):1==G?V+ue:V+"/"+ue}function rt(V){const ue=V.match(/#|\?|$/),G=ue&&ue.index||V.length;return V.slice(0,G-("/"===V[G-1]?1:0))+V.slice(G)}function _t(V){return V&&"?"!==V[0]?"?"+V:V}let St=(()=>{class V{historyGo(G){throw new Error("Not implemented")}}return V.\u0275fac=function(G){return new(G||V)},V.\u0275prov=E.Yz7({token:V,factory:function(){return(0,E.f3M)(ut)},providedIn:"root"}),V})();const Fe=new E.OlP("appBaseHref");let ut=(()=>{class V extends St{constructor(G,Te){super(),this._platformLocation=G,this._removeListenerFns=[],this._baseHref=Te??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(Be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}prepareExternalUrl(G){return $e(this._baseHref,G)}path(G=!1){const Te=this._platformLocation.pathname+_t(this._platformLocation.search),Je=this._platformLocation.hash;return Je&&G?`${Te}${Je}`:Te}pushState(G,Te,Je,Nt){const en=this.prepareExternalUrl(Je+_t(Nt));this._platformLocation.pushState(G,Te,en)}replaceState(G,Te,Je,Nt){const en=this.prepareExternalUrl(Je+_t(Nt));this._platformLocation.replaceState(G,Te,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return V.\u0275fac=function(G){return new(G||V)(E.LFG(ae),E.LFG(Fe,8))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),st=(()=>{class V extends St{constructor(G,Te){super(),this._platformLocation=G,this._baseHref="",this._removeListenerFns=[],null!=Te&&(this._baseHref=Te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(G){this._removeListenerFns.push(this._platformLocation.onPopState(G),this._platformLocation.onHashChange(G))}getBaseHref(){return this._baseHref}path(G=!1){let Te=this._platformLocation.hash;return null==Te&&(Te="#"),Te.length>0?Te.substring(1):Te}prepareExternalUrl(G){const Te=$e(this._baseHref,G);return Te.length>0?"#"+Te:Te}pushState(G,Te,Je,Nt){let en=this.prepareExternalUrl(Je+_t(Nt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.pushState(G,Te,en)}replaceState(G,Te,Je,Nt){let en=this.prepareExternalUrl(Je+_t(Nt));0==en.length&&(en=this._platformLocation.pathname),this._platformLocation.replaceState(G,Te,en)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(G=0){this._platformLocation.historyGo?.(G)}}return V.\u0275fac=function(G){return new(G||V)(E.LFG(ae),E.LFG(Fe,8))},V.\u0275prov=E.Yz7({token:V,factory:V.\u0275fac}),V})(),Et=(()=>{class V{constructor(G){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=G;const Te=this._locationStrategy.getBaseHref();this._basePath=function kt(V){if(/^(https?:)?\/\//.test(V)){const[,ue]=V.split(/\/\/[^\/]+/);return ue}return V}(rt(gt(Te))),this._locationStrategy.onPopState(Je=>{this._subject.emit({url:this.path(!0),pop:!0,state:Je.state,type:Je.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(G=!1){return this.normalize(this._locationStrategy.path(G))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(G,Te=""){return this.path()==this.normalize(G+_t(Te))}normalize(G){return V.stripTrailingSlash(function Xe(V,ue){return V&&ue.startsWith(V)?ue.substring(V.length):ue}(this._basePath,gt(G)))}prepareExternalUrl(G){return G&&"/"!==G[0]&&(G="/"+G),this._locationStrategy.prepareExternalUrl(G)}go(G,Te="",Je=null){this._locationStrategy.pushState(Je,"",G,Te),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+_t(Te)),Je)}replaceState(G,Te="",Je=null){this._locationStrategy.replaceState(Je,"",G,Te),this._notifyUrlChangeListeners(this.prepareExternalUrl(G+_t(Te)),Je)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(G=0){this._locationStrategy.historyGo?.(G)}onUrlChange(G){return this._urlChangeListeners.push(G),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Te=>{this._notifyUrlChangeListeners(Te.url,Te.state)})),()=>{const Te=this._urlChangeListeners.indexOf(G);this._urlChangeListeners.splice(Te,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(G="",Te){this._urlChangeListeners.forEach(Je=>Je(G,Te))}subscribe(G,Te,Je){return this._subject.subscribe({next:G,error:Te,complete:Je})}}return V.normalizeQueryParams=_t,V.joinWithSlash=$e,V.stripTrailingSlash=rt,V.\u0275fac=function(G){return new(G||V)(E.LFG(St))},V.\u0275prov=E.Yz7({token:V,factory:function(){return function Ve(){return new Et((0,E.LFG)(St))}()},providedIn:"root"}),V})();function gt(V){return V.replace(/\/index.html$/,"")}var X=(()=>((X=X||{})[X.Decimal=0]="Decimal",X[X.Percent=1]="Percent",X[X.Currency=2]="Currency",X[X.Scientific=3]="Scientific",X))(),ge=(()=>((ge=ge||{})[ge.Format=0]="Format",ge[ge.Standalone=1]="Standalone",ge))(),Le=(()=>((Le=Le||{})[Le.Narrow=0]="Narrow",Le[Le.Abbreviated=1]="Abbreviated",Le[Le.Wide=2]="Wide",Le[Le.Short=3]="Short",Le))(),Oe=(()=>((Oe=Oe||{})[Oe.Short=0]="Short",Oe[Oe.Medium=1]="Medium",Oe[Oe.Long=2]="Long",Oe[Oe.Full=3]="Full",Oe))(),qe=(()=>((qe=qe||{})[qe.Decimal=0]="Decimal",qe[qe.Group=1]="Group",qe[qe.List=2]="List",qe[qe.PercentSign=3]="PercentSign",qe[qe.PlusSign=4]="PlusSign",qe[qe.MinusSign=5]="MinusSign",qe[qe.Exponential=6]="Exponential",qe[qe.SuperscriptingExponent=7]="SuperscriptingExponent",qe[qe.PerMille=8]="PerMille",qe[qe.Infinity=9]="Infinity",qe[qe.NaN=10]="NaN",qe[qe.TimeSeparator=11]="TimeSeparator",qe[qe.CurrencyDecimal=12]="CurrencyDecimal",qe[qe.CurrencyGroup=13]="CurrencyGroup",qe))();function ln(V,ue){return xn((0,E.cg1)(V)[E.wAp.DateFormat],ue)}function Zt(V,ue){return xn((0,E.cg1)(V)[E.wAp.TimeFormat],ue)}function hn(V,ue){return xn((0,E.cg1)(V)[E.wAp.DateTimeFormat],ue)}function Gt(V,ue){const G=(0,E.cg1)(V),Te=G[E.wAp.NumberSymbols][ue];if(typeof Te>"u"){if(ue===qe.CurrencyDecimal)return G[E.wAp.NumberSymbols][qe.Decimal];if(ue===qe.CurrencyGroup)return G[E.wAp.NumberSymbols][qe.Group]}return Te}function Xn(V){if(!V[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${V[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function xn(V,ue){for(let G=ue;G>-1;G--)if(typeof V[G]<"u")return V[G];throw new Error("Locale data API: locale data undefined")}function mr(V){const[ue,G]=V.split(":");return{hours:+ue,minutes:+G}}const xr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gi={},Ei=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ur=(()=>((ur=ur||{})[ur.Short=0]="Short",ur[ur.ShortGMT=1]="ShortGMT",ur[ur.Long=2]="Long",ur[ur.Extended=3]="Extended",ur))(),zn=(()=>((zn=zn||{})[zn.FullYear=0]="FullYear",zn[zn.Month=1]="Month",zn[zn.Date=2]="Date",zn[zn.Hours=3]="Hours",zn[zn.Minutes=4]="Minutes",zn[zn.Seconds=5]="Seconds",zn[zn.FractionalSeconds=6]="FractionalSeconds",zn[zn.Day=7]="Day",zn))(),Jn=(()=>((Jn=Jn||{})[Jn.DayPeriods=0]="DayPeriods",Jn[Jn.Days=1]="Days",Jn[Jn.Months=2]="Months",Jn[Jn.Eras=3]="Eras",Jn))();function ui(V,ue,G,Te){let Je=function Tn(V){if(Br(V))return V;if("number"==typeof V&&!isNaN(V))return new Date(V);if("string"==typeof V){if(V=V.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(V)){const[Je,Nt=1,en=1]=V.split("-").map(Nn=>+Nn);return qr(Je,Nt-1,en)}const G=parseFloat(V);if(!isNaN(V-G))return new Date(G);let Te;if(Te=V.match(xr))return function cr(V){const ue=new Date(0);let G=0,Te=0;const Je=V[8]?ue.setUTCFullYear:ue.setFullYear,Nt=V[8]?ue.setUTCHours:ue.setHours;V[9]&&(G=Number(V[9]+V[10]),Te=Number(V[9]+V[11])),Je.call(ue,Number(V[1]),Number(V[2])-1,Number(V[3]));const en=Number(V[4]||0)-G,Nn=Number(V[5]||0)-Te,ai=Number(V[6]||0),Gr=Math.floor(1e3*parseFloat("0."+(V[7]||0)));return Nt.call(ue,en,Nn,ai,Gr),ue}(Te)}const ue=new Date(V);if(!Br(ue))throw new Error(`Unable to convert "${V}" into a date`);return ue}(V);ue=Mn(G,ue)||ue;let Nn,en=[];for(;ue;){if(Nn=Ei.exec(ue),!Nn){en.push(ue);break}{en=en.concat(Nn.slice(1));const kr=en.pop();if(!kr)break;ue=kr}}let ai=Je.getTimezoneOffset();Te&&(ai=at(Te,ai),Je=function Dt(V,ue,G){const Te=G?-1:1,Je=V.getTimezoneOffset();return function Vt(V,ue){return(V=new Date(V.getTime())).setMinutes(V.getMinutes()+ue),V}(V,Te*(at(ue,Je)-Je))}(Je,Te,!0));let Gr="";return en.forEach(kr=>{const Fr=function Ye(V){if(Qe[V])return Qe[V];let ue;switch(V){case"G":case"GG":case"GGG":ue=wr(Jn.Eras,Le.Abbreviated);break;case"GGGG":ue=wr(Jn.Eras,Le.Wide);break;case"GGGGG":ue=wr(Jn.Eras,Le.Narrow);break;case"y":ue=sr(zn.FullYear,1,0,!1,!0);break;case"yy":ue=sr(zn.FullYear,2,0,!0,!0);break;case"yyy":ue=sr(zn.FullYear,3,0,!1,!0);break;case"yyyy":ue=sr(zn.FullYear,4,0,!1,!0);break;case"Y":ue=Vn(1);break;case"YY":ue=Vn(2,!0);break;case"YYY":ue=Vn(3);break;case"YYYY":ue=Vn(4);break;case"M":case"L":ue=sr(zn.Month,1,1);break;case"MM":case"LL":ue=sr(zn.Month,2,1);break;case"MMM":ue=wr(Jn.Months,Le.Abbreviated);break;case"MMMM":ue=wr(Jn.Months,Le.Wide);break;case"MMMMM":ue=wr(Jn.Months,Le.Narrow);break;case"LLL":ue=wr(Jn.Months,Le.Abbreviated,ge.Standalone);break;case"LLLL":ue=wr(Jn.Months,Le.Wide,ge.Standalone);break;case"LLLLL":ue=wr(Jn.Months,Le.Narrow,ge.Standalone);break;case"w":ue=$n(1);break;case"ww":ue=$n(2);break;case"W":ue=$n(1,!0);break;case"d":ue=sr(zn.Date,1);break;case"dd":ue=sr(zn.Date,2);break;case"c":case"cc":ue=sr(zn.Day,1);break;case"ccc":ue=wr(Jn.Days,Le.Abbreviated,ge.Standalone);break;case"cccc":ue=wr(Jn.Days,Le.Wide,ge.Standalone);break;case"ccccc":ue=wr(Jn.Days,Le.Narrow,ge.Standalone);break;case"cccccc":ue=wr(Jn.Days,Le.Short,ge.Standalone);break;case"E":case"EE":case"EEE":ue=wr(Jn.Days,Le.Abbreviated);break;case"EEEE":ue=wr(Jn.Days,Le.Wide);break;case"EEEEE":ue=wr(Jn.Days,Le.Narrow);break;case"EEEEEE":ue=wr(Jn.Days,Le.Short);break;case"a":case"aa":case"aaa":ue=wr(Jn.DayPeriods,Le.Abbreviated);break;case"aaaa":ue=wr(Jn.DayPeriods,Le.Wide);break;case"aaaaa":ue=wr(Jn.DayPeriods,Le.Narrow);break;case"b":case"bb":case"bbb":ue=wr(Jn.DayPeriods,Le.Abbreviated,ge.Standalone,!0);break;case"bbbb":ue=wr(Jn.DayPeriods,Le.Wide,ge.Standalone,!0);break;case"bbbbb":ue=wr(Jn.DayPeriods,Le.Narrow,ge.Standalone,!0);break;case"B":case"BB":case"BBB":ue=wr(Jn.DayPeriods,Le.Abbreviated,ge.Format,!0);break;case"BBBB":ue=wr(Jn.DayPeriods,Le.Wide,ge.Format,!0);break;case"BBBBB":ue=wr(Jn.DayPeriods,Le.Narrow,ge.Format,!0);break;case"h":ue=sr(zn.Hours,1,-12);break;case"hh":ue=sr(zn.Hours,2,-12);break;case"H":ue=sr(zn.Hours,1);break;case"HH":ue=sr(zn.Hours,2);break;case"m":ue=sr(zn.Minutes,1);break;case"mm":ue=sr(zn.Minutes,2);break;case"s":ue=sr(zn.Seconds,1);break;case"ss":ue=sr(zn.Seconds,2);break;case"S":ue=sr(zn.FractionalSeconds,1);break;case"SS":ue=sr(zn.FractionalSeconds,2);break;case"SSS":ue=sr(zn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":ue=Hi(ur.Short);break;case"ZZZZZ":ue=Hi(ur.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":ue=Hi(ur.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":ue=Hi(ur.Long);break;default:return null}return Qe[V]=ue,ue}(kr);Gr+=Fr?Fr(Je,G,ai):"''"===kr?"'":kr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Gr}function qr(V,ue,G){const Te=new Date(0);return Te.setFullYear(V,ue,G),Te.setHours(0,0,0),Te}function Mn(V,ue){const G=function wt(V){return(0,E.cg1)(V)[E.wAp.LocaleId]}(V);if(gi[G]=gi[G]||{},gi[G][ue])return gi[G][ue];let Te="";switch(ue){case"shortDate":Te=ln(V,Oe.Short);break;case"mediumDate":Te=ln(V,Oe.Medium);break;case"longDate":Te=ln(V,Oe.Long);break;case"fullDate":Te=ln(V,Oe.Full);break;case"shortTime":Te=Zt(V,Oe.Short);break;case"mediumTime":Te=Zt(V,Oe.Medium);break;case"longTime":Te=Zt(V,Oe.Long);break;case"fullTime":Te=Zt(V,Oe.Full);break;case"short":const Je=Mn(V,"shortTime"),Nt=Mn(V,"shortDate");Te=wi(hn(V,Oe.Short),[Je,Nt]);break;case"medium":const en=Mn(V,"mediumTime"),Nn=Mn(V,"mediumDate");Te=wi(hn(V,Oe.Medium),[en,Nn]);break;case"long":const ai=Mn(V,"longTime"),Gr=Mn(V,"longDate");Te=wi(hn(V,Oe.Long),[ai,Gr]);break;case"full":const kr=Mn(V,"fullTime"),Fr=Mn(V,"fullDate");Te=wi(hn(V,Oe.Full),[kr,Fr])}return Te&&(gi[G][ue]=Te),Te}function wi(V,ue){return ue&&(V=V.replace(/\{([^}]+)}/g,function(G,Te){return null!=ue&&Te in ue?ue[Te]:G})),V}function ki(V,ue,G="-",Te,Je){let Nt="";(V<0||Je&&V<=0)&&(Je?V=1-V:(V=-V,Nt=G));let en=String(V);for(;en.length<ue;)en="0"+en;return Te&&(en=en.slice(en.length-ue)),Nt+en}function sr(V,ue,G=0,Te=!1,Je=!1){return function(Nt,en){let Nn=function li(V,ue){switch(V){case zn.FullYear:return ue.getFullYear();case zn.Month:return ue.getMonth();case zn.Date:return ue.getDate();case zn.Hours:return ue.getHours();case zn.Minutes:return ue.getMinutes();case zn.Seconds:return ue.getSeconds();case zn.FractionalSeconds:return ue.getMilliseconds();case zn.Day:return ue.getDay();default:throw new Error(`Unknown DateType value "${V}".`)}}(V,Nt);if((G>0||Nn>-G)&&(Nn+=G),V===zn.Hours)0===Nn&&-12===G&&(Nn=12);else if(V===zn.FractionalSeconds)return function Ri(V,ue){return ki(V,3).substring(0,ue)}(Nn,ue);const ai=Gt(en,qe.MinusSign);return ki(Nn,ue,ai,Te,Je)}}function wr(V,ue,G=ge.Format,Te=!1){return function(Je,Nt){return function si(V,ue,G,Te,Je,Nt){switch(G){case Jn.Months:return function Rt(V,ue,G){const Te=(0,E.cg1)(V),Nt=xn([Te[E.wAp.MonthsFormat],Te[E.wAp.MonthsStandalone]],ue);return xn(Nt,G)}(ue,Je,Te)[V.getMonth()];case Jn.Days:return function Mt(V,ue,G){const Te=(0,E.cg1)(V),Nt=xn([Te[E.wAp.DaysFormat],Te[E.wAp.DaysStandalone]],ue);return xn(Nt,G)}(ue,Je,Te)[V.getDay()];case Jn.DayPeriods:const en=V.getHours(),Nn=V.getMinutes();if(Nt){const Gr=function Hr(V){const ue=(0,E.cg1)(V);return Xn(ue),(ue[E.wAp.ExtraData][2]||[]).map(Te=>"string"==typeof Te?mr(Te):[mr(Te[0]),mr(Te[1])])}(ue),kr=function zr(V,ue,G){const Te=(0,E.cg1)(V);Xn(Te);const Nt=xn([Te[E.wAp.ExtraData][0],Te[E.wAp.ExtraData][1]],ue)||[];return xn(Nt,G)||[]}(ue,Je,Te),Fr=Gr.findIndex(Xr=>{if(Array.isArray(Xr)){const[bi,to]=Xr,cn=en>=bi.hours&&Nn>=bi.minutes,Si=en<to.hours||en===to.hours&&Nn<to.minutes;if(bi.hours<to.hours){if(cn&&Si)return!0}else if(cn||Si)return!0}else if(Xr.hours===en&&Xr.minutes===Nn)return!0;return!1});if(-1!==Fr)return kr[Fr]}return function vt(V,ue,G){const Te=(0,E.cg1)(V),Nt=xn([Te[E.wAp.DayPeriodsFormat],Te[E.wAp.DayPeriodsStandalone]],ue);return xn(Nt,G)}(ue,Je,Te)[en<12?0:1];case Jn.Eras:return function At(V,ue){return xn((0,E.cg1)(V)[E.wAp.Eras],ue)}(ue,Te)[V.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${G}`)}}(Je,Nt,V,ue,G,Te)}}function Hi(V){return function(ue,G,Te){const Je=-1*Te,Nt=Gt(G,qe.MinusSign),en=Je>0?Math.floor(Je/60):Math.ceil(Je/60);switch(V){case ur.Short:return(Je>=0?"+":"")+ki(en,2,Nt)+ki(Math.abs(Je%60),2,Nt);case ur.ShortGMT:return"GMT"+(Je>=0?"+":"")+ki(en,1,Nt);case ur.Long:return"GMT"+(Je>=0?"+":"")+ki(en,2,Nt)+":"+ki(Math.abs(Je%60),2,Nt);case ur.Extended:return 0===Te?"Z":(Je>=0?"+":"")+ki(en,2,Nt)+":"+ki(Math.abs(Je%60),2,Nt);default:throw new Error(`Unknown zone width "${V}"`)}}}function er(V){return qr(V.getFullYear(),V.getMonth(),V.getDate()+(4-V.getDay()))}function $n(V,ue=!1){return function(G,Te){let Je;if(ue){const Nt=new Date(G.getFullYear(),G.getMonth(),1).getDay()-1,en=G.getDate();Je=1+Math.floor((en+Nt)/7)}else{const Nt=er(G),en=function Cn(V){const ue=qr(V,0,1).getDay();return qr(V,0,1+(ue<=4?4:11)-ue)}(Nt.getFullYear()),Nn=Nt.getTime()-en.getTime();Je=1+Math.round(Nn/6048e5)}return ki(Je,V,Gt(Te,qe.MinusSign))}}function Vn(V,ue=!1){return function(G,Te){return ki(er(G).getFullYear(),V,Gt(Te,qe.MinusSign),ue)}}const Qe={};function at(V,ue){V=V.replace(/:/g,"");const G=Date.parse("Jan 01, 1970 00:00:00 "+V)/6e4;return isNaN(G)?ue:G}function Br(V){return V instanceof Date&&!isNaN(V.valueOf())}const mi=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function rs(V){const ue=parseInt(V);if(isNaN(ue))throw new Error("Invalid integer literal when parsing "+V);return ue}function is(V,ue){ue=encodeURIComponent(ue);for(const G of V.split(";")){const Te=G.indexOf("="),[Je,Nt]=-1==Te?[G,""]:[G.slice(0,Te),G.slice(Te+1)];if(Je.trim()===ue)return decodeURIComponent(Nt)}return null}let ps=(()=>{class V{constructor(G,Te,Je,Nt){this._iterableDiffers=G,this._keyValueDiffers=Te,this._ngEl=Je,this._renderer=Nt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(G){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof G?G.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(G){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof G?G.split(/\s+/):G,this._rawClass&&((0,E.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const G=this._iterableDiffer.diff(this._rawClass);G&&this._applyIterableChanges(G)}else if(this._keyValueDiffer){const G=this._keyValueDiffer.diff(this._rawClass);G&&this._applyKeyValueChanges(G)}}_applyKeyValueChanges(G){G.forEachAddedItem(Te=>this._toggleClass(Te.key,Te.currentValue)),G.forEachChangedItem(Te=>this._toggleClass(Te.key,Te.currentValue)),G.forEachRemovedItem(Te=>{Te.previousValue&&this._toggleClass(Te.key,!1)})}_applyIterableChanges(G){G.forEachAddedItem(Te=>{if("string"!=typeof Te.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,E.AaK)(Te.item)}`);this._toggleClass(Te.item,!0)}),G.forEachRemovedItem(Te=>this._toggleClass(Te.item,!1))}_applyClasses(G){G&&(Array.isArray(G)||G instanceof Set?G.forEach(Te=>this._toggleClass(Te,!0)):Object.keys(G).forEach(Te=>this._toggleClass(Te,!!G[Te])))}_removeClasses(G){G&&(Array.isArray(G)||G instanceof Set?G.forEach(Te=>this._toggleClass(Te,!1)):Object.keys(G).forEach(Te=>this._toggleClass(Te,!1)))}_toggleClass(G,Te){(G=G.trim())&&G.split(/\s+/g).forEach(Je=>{Te?this._renderer.addClass(this._ngEl.nativeElement,Je):this._renderer.removeClass(this._ngEl.nativeElement,Je)})}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),V})();class Ds{constructor(ue,G,Te,Je){this.$implicit=ue,this.ngForOf=G,this.index=Te,this.count=Je}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ss=(()=>{class V{constructor(G,Te,Je){this._viewContainer=G,this._template=Te,this._differs=Je,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(G){this._ngForOf=G,this._ngForOfDirty=!0}set ngForTrackBy(G){this._trackByFn=G}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(G){G&&(this._template=G)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const G=this._ngForOf;!this._differ&&G&&(this._differ=this._differs.find(G).create(this.ngForTrackBy))}if(this._differ){const G=this._differ.diff(this._ngForOf);G&&this._applyChanges(G)}}_applyChanges(G){const Te=this._viewContainer;G.forEachOperation((Je,Nt,en)=>{if(null==Je.previousIndex)Te.createEmbeddedView(this._template,new Ds(Je.item,this._ngForOf,-1,-1),null===en?void 0:en);else if(null==en)Te.remove(null===Nt?void 0:Nt);else if(null!==Nt){const Nn=Te.get(Nt);Te.move(Nn,en),Ai(Nn,Je)}});for(let Je=0,Nt=Te.length;Je<Nt;Je++){const Nn=Te.get(Je).context;Nn.index=Je,Nn.count=Nt,Nn.ngForOf=this._ngForOf}G.forEachIdentityChange(Je=>{Ai(Te.get(Je.currentIndex),Je)})}static ngTemplateContextGuard(G,Te){return!0}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),V})();function Ai(V,ue){V.context.$implicit=ue.item}let vi=(()=>{class V{constructor(G,Te){this._viewContainer=G,this._context=new bs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Te}set ngIf(G){this._context.$implicit=this._context.ngIf=G,this._updateView()}set ngIfThen(G){$i("ngIfThen",G),this._thenTemplateRef=G,this._thenViewRef=null,this._updateView()}set ngIfElse(G){$i("ngIfElse",G),this._elseTemplateRef=G,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(G,Te){return!0}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.s_b),E.Y36(E.Rgc))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),V})();class bs{constructor(){this.$implicit=null,this.ngIf=null}}function $i(V,ue){if(ue&&!ue.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,E.AaK)(ue)}'.`)}let Do=(()=>{class V{constructor(G,Te,Je){this._ngEl=G,this._differs=Te,this._renderer=Je,this._ngStyle=null,this._differ=null}set ngStyle(G){this._ngStyle=G,!this._differ&&G&&(this._differ=this._differs.find(G).create())}ngDoCheck(){if(this._differ){const G=this._differ.diff(this._ngStyle);G&&this._applyChanges(G)}}_setStyle(G,Te){const[Je,Nt]=G.split("."),en=-1===Je.indexOf("-")?void 0:E.JOm.DashCase;null!=Te?this._renderer.setStyle(this._ngEl.nativeElement,Je,Nt?`${Te}${Nt}`:Te,en):this._renderer.removeStyle(this._ngEl.nativeElement,Je,en)}_applyChanges(G){G.forEachRemovedItem(Te=>this._setStyle(Te.key,null)),G.forEachAddedItem(Te=>this._setStyle(Te.key,Te.currentValue)),G.forEachChangedItem(Te=>this._setStyle(Te.key,Te.currentValue))}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.SBq),E.Y36(E.aQg),E.Y36(E.Qsj))},V.\u0275dir=E.lG2({type:V,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),V})();function vn(V,ue){return new E.vHH(2100,!1)}class ot{createSubscription(ue,G){return ue.subscribe({next:G,error:Te=>{throw Te}})}dispose(ue){ue.unsubscribe()}}class lt{createSubscription(ue,G){return ue.then(G,Te=>{throw Te})}dispose(ue){}}const ft=new lt,Qt=new ot;let pn=(()=>{class V{constructor(G){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=G}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(G){return this._obj?G!==this._obj?(this._dispose(),this.transform(G)):this._latestValue:(G&&this._subscribe(G),this._latestValue)}_subscribe(G){this._obj=G,this._strategy=this._selectStrategy(G),this._subscription=this._strategy.createSubscription(G,Te=>this._updateLatestValue(G,Te))}_selectStrategy(G){if((0,E.QGY)(G))return ft;if((0,E.F4k)(G))return Qt;throw vn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(G,Te){G===this._obj&&(this._latestValue=Te,this._ref.markForCheck())}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.sBO,16))},V.\u0275pipe=E.Yjl({name:"async",type:V,pure:!1,standalone:!0}),V})();const gs=new E.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Bi=new E.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Vr=(()=>{class V{constructor(G,Te,Je){this.locale=G,this.defaultTimezone=Te,this.defaultOptions=Je}transform(G,Te,Je,Nt){if(null==G||""===G||G!=G)return null;try{return ui(G,Te??this.defaultOptions?.dateFormat??"mediumDate",Nt||this.locale,Je??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(en){throw vn()}}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.soG,16),E.Y36(gs,24),E.Y36(Bi,24))},V.\u0275pipe=E.Yjl({name:"date",type:V,pure:!0,standalone:!0}),V})(),ya=(()=>{class V{constructor(G){this._locale=G}transform(G,Te,Je){if(!function qa(V){return!(null==V||""===V||V!=V)}(G))return null;Je=Je||this._locale;try{return function Ci(V,ue,G){return function dr(V,ue,G,Te,Je,Nt,en=!1){let Nn="",ai=!1;if(isFinite(V)){let Gr=function Lr(V){let Te,Je,Nt,en,Nn,ue=Math.abs(V)+"",G=0;for((Je=ue.indexOf("."))>-1&&(ue=ue.replace(".","")),(Nt=ue.search(/e/i))>0?(Je<0&&(Je=Nt),Je+=+ue.slice(Nt+1),ue=ue.substring(0,Nt)):Je<0&&(Je=ue.length),Nt=0;"0"===ue.charAt(Nt);Nt++);if(Nt===(Nn=ue.length))Te=[0],Je=1;else{for(Nn--;"0"===ue.charAt(Nn);)Nn--;for(Je-=Nt,Te=[],en=0;Nt<=Nn;Nt++,en++)Te[en]=Number(ue.charAt(Nt))}return Je>22&&(Te=Te.splice(0,21),G=Je-1,Je=1),{digits:Te,exponent:G,integerLen:Je}}(V);en&&(Gr=function fs(V){if(0===V.digits[0])return V;const ue=V.digits.length-V.integerLen;return V.exponent?V.exponent+=2:(0===ue?V.digits.push(0,0):1===ue&&V.digits.push(0),V.integerLen+=2),V}(Gr));let kr=ue.minInt,Fr=ue.minFrac,Xr=ue.maxFrac;if(Nt){const Io=Nt.match(mi);if(null===Io)throw new Error(`${Nt} is not a valid digit info`);const In=Io[1],Rn=Io[3],Du=Io[5];null!=In&&(kr=rs(In)),null!=Rn&&(Fr=rs(Rn)),null!=Du?Xr=rs(Du):null!=Rn&&Fr>Xr&&(Xr=Fr)}!function ns(V,ue,G){if(ue>G)throw new Error(`The minimum number of digits after fraction (${ue}) is higher than the maximum (${G}).`);let Te=V.digits,Je=Te.length-V.integerLen;const Nt=Math.min(Math.max(ue,Je),G);let en=Nt+V.integerLen,Nn=Te[en];if(en>0){Te.splice(Math.max(V.integerLen,en));for(let Fr=en;Fr<Te.length;Fr++)Te[Fr]=0}else{Je=Math.max(0,Je),V.integerLen=1,Te.length=Math.max(1,en=Nt+1),Te[0]=0;for(let Fr=1;Fr<en;Fr++)Te[Fr]=0}if(Nn>=5)if(en-1<0){for(let Fr=0;Fr>en;Fr--)Te.unshift(0),V.integerLen++;Te.unshift(1),V.integerLen++}else Te[en-1]++;for(;Je<Math.max(0,Nt);Je++)Te.push(0);let ai=0!==Nt;const Gr=ue+V.integerLen,kr=Te.reduceRight(function(Fr,Xr,bi,to){return to[bi]=(Xr+=Fr)<10?Xr:Xr-10,ai&&(0===to[bi]&&bi>=Gr?to.pop():ai=!1),Xr>=10?1:0},0);kr&&(Te.unshift(kr),V.integerLen++)}(Gr,Fr,Xr);let bi=Gr.digits,to=Gr.integerLen;const cn=Gr.exponent;let Si=[];for(ai=bi.every(Io=>!Io);to<kr;to++)bi.unshift(0);for(;to<0;to++)bi.unshift(0);to>0?Si=bi.splice(to,bi.length):(Si=bi,bi=[0]);const ci=[];for(bi.length>=ue.lgSize&&ci.unshift(bi.splice(-ue.lgSize,bi.length).join(""));bi.length>ue.gSize;)ci.unshift(bi.splice(-ue.gSize,bi.length).join(""));bi.length&&ci.unshift(bi.join("")),Nn=ci.join(Gt(G,Te)),Si.length&&(Nn+=Gt(G,Je)+Si.join("")),cn&&(Nn+=Gt(G,qe.Exponential)+"+"+cn)}else Nn=Gt(G,qe.Infinity);return Nn=V<0&&!ai?ue.negPre+Nn+ue.negSuf:ue.posPre+Nn+ue.posSuf,Nn}(V,function Zr(V,ue="-"){const G={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Te=V.split(";"),Je=Te[0],Nt=Te[1],en=-1!==Je.indexOf(".")?Je.split("."):[Je.substring(0,Je.lastIndexOf("0")+1),Je.substring(Je.lastIndexOf("0")+1)],Nn=en[0],ai=en[1]||"";G.posPre=Nn.substring(0,Nn.indexOf("#"));for(let kr=0;kr<ai.length;kr++){const Fr=ai.charAt(kr);"0"===Fr?G.minFrac=G.maxFrac=kr+1:"#"===Fr?G.maxFrac=kr+1:G.posSuf+=Fr}const Gr=Nn.split(",");if(G.gSize=Gr[1]?Gr[1].length:0,G.lgSize=Gr[2]||Gr[1]?(Gr[2]||Gr[1]).length:0,Nt){const kr=Je.length-G.posPre.length-G.posSuf.length,Fr=Nt.indexOf("#");G.negPre=Nt.substring(0,Fr).replace(/'/g,""),G.negSuf=Nt.slice(Fr+kr).replace(/'/g,"")}else G.negPre=ue+G.posPre,G.negSuf=G.posSuf;return G}(function rr(V,ue){return(0,E.cg1)(V)[E.wAp.NumberFormats][ue]}(ue,X.Percent),Gt(ue,qe.MinusSign)),ue,qe.Group,qe.Decimal,G,!0).replace(new RegExp("%","g"),Gt(ue,qe.PercentSign))}(function jo(V){if("string"==typeof V&&!isNaN(Number(V)-parseFloat(V)))return Number(V);if("number"!=typeof V)throw new Error(`${V} is not a number`);return V}(G),Je,Te)}catch(Nt){throw vn()}}}return V.\u0275fac=function(G){return new(G||V)(E.Y36(E.soG,16))},V.\u0275pipe=E.Yjl({name:"percent",type:V,pure:!0,standalone:!0}),V})();let zs=(()=>{class V{}return V.\u0275fac=function(G){return new(G||V)},V.\u0275mod=E.oAB({type:V}),V.\u0275inj=E.cJS({}),V})();const Us="browser";function sa(V){return"server"===V}let Xo=(()=>{class V{}return V.\u0275prov=(0,E.Yz7)({token:V,providedIn:"root",factory:()=>new hi((0,E.LFG)(Be),window)}),V})();class hi{constructor(ue,G){this.document=ue,this.window=G,this.offset=()=>[0,0]}setOffset(ue){this.offset=Array.isArray(ue)?()=>ue:ue}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ue){this.supportsScrolling()&&this.window.scrollTo(ue[0],ue[1])}scrollToAnchor(ue){if(!this.supportsScrolling())return;const G=function Ra(V,ue){const G=V.getElementById(ue)||V.getElementsByName(ue)[0];if(G)return G;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const Te=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Je=Te.currentNode;for(;Je;){const Nt=Je.shadowRoot;if(Nt){const en=Nt.getElementById(ue)||Nt.querySelector(`[name="${ue}"]`);if(en)return en}Je=Te.nextNode()}}return null}(this.document,ue);G&&(this.scrollToElement(G),G.focus())}setHistoryScrollRestoration(ue){if(this.supportScrollRestoration()){const G=this.window.history;G&&G.scrollRestoration&&(G.scrollRestoration=ue)}}scrollToElement(ue){const G=ue.getBoundingClientRect(),Te=G.left+this.window.pageXOffset,Je=G.top+this.window.pageYOffset,Nt=this.offset();this.window.scrollTo(Te-Nt[0],Je-Nt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ue=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!ue||!ue.writable&&!ue.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class fi{}},4650:(Wt,et,W)=>{"use strict";W.d(et,{$8M:()=>ko,$Z:()=>Ty,AFp:()=>Cb,ALo:()=>$_,AaK:()=>He,AsE:()=>ed,BQk:()=>Hs,CHM:()=>Fn,CRH:()=>eb,CZH:()=>u_,CqO:()=>Ap,D6c:()=>kE,DdM:()=>ma,EJc:()=>WT,EiD:()=>Ed,EpF:()=>Jl,F$t:()=>C0,F4k:()=>xf,FYo:()=>uf,FiY:()=>Pu,Gf:()=>X_,GfV:()=>lf,Gpc:()=>Ee,Hsn:()=>yv,JOm:()=>du,JVY:()=>ht,JZr:()=>St,KtG:()=>qt,L6k:()=>jt,LAX:()=>Yn,LFG:()=>dn,LSH:()=>ig,Lbi:()=>$T,Lck:()=>I,MAs:()=>mv,MMx:()=>he,NdJ:()=>jd,O4$:()=>la,OlP:()=>as,Oqu:()=>Mp,P3R:()=>fh,PXZ:()=>uE,Q6J:()=>Gg,QGY:()=>zg,QP$:()=>Mi,Qsj:()=>c0,R0b:()=>Yd,RDi:()=>$l,Rgc:()=>q0,SBq:()=>wd,Sil:()=>ZT,Suo:()=>J_,TTD:()=>hi,TgZ:()=>Sc,VKq:()=>G0,W1O:()=>ib,WLB:()=>Uf,X6Q:()=>fE,XFs:()=>yn,Xpm:()=>dr,Xts:()=>rf,Y36:()=>wh,YKP:()=>_e,YNc:()=>Ki,Yjl:()=>rs,Yz7:()=>Gt,Z0I:()=>_r,ZZ4:()=>F_,_Bn:()=>ts,_UZ:()=>$g,_Vd:()=>_h,_c5:()=>IE,_uU:()=>us,aQg:()=>j_,c2e:()=>zT,cJS:()=>Wn,cg1:()=>Uu,dDg:()=>iE,dqk:()=>ur,eBb:()=>Sn,eFA:()=>Fb,ekj:()=>Uy,eoX:()=>Rb,f3M:()=>Cn,g9A:()=>Db,h0i:()=>$s,hGG:()=>PE,hij:()=>Op,iGM:()=>Q_,ifc:()=>Br,ip1:()=>wb,jDz:()=>Ze,kL8:()=>rd,kcU:()=>Ir,lG2:()=>ns,lcZ:()=>z_,lqb:()=>Ju,lri:()=>Mb,mCW:()=>bd,n5z:()=>zu,n_E:()=>r_,oAB:()=>Zr,oxw:()=>kh,pB0:()=>Dr,q3G:()=>qo,q4F:()=>cf,qLn:()=>Cd,qOj:()=>iv,qZA:()=>xp,qzn:()=>le,rWj:()=>Ob,sBO:()=>pE,sIi:()=>Ql,s_b:()=>s_,soG:()=>l_,tb:()=>xb,tp0:()=>Q,uIk:()=>dv,vHH:()=>Fe,vpe:()=>Bf,wAp:()=>Ur,xp6:()=>mg,ynx:()=>Yc,z2F:()=>c_,z3N:()=>O,zSh:()=>Am,zs3:()=>Gc});var E=W(7579),ie=W(727),ne=W(9751),F=W(6451),Ne=W(3099);function Be(r){for(let i in r)if(r[i]===Be)return i;throw Error("Could not find renamed property on target object.")}function ae(r,i){for(const d in i)i.hasOwnProperty(d)&&!r.hasOwnProperty(d)&&(r[d]=i[d])}function He(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(He).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const d=i.indexOf("\n");return-1===d?i:i.substring(0,d)}function Ae(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const De=Be({__forward_ref__:Be});function Ee(r){return r.__forward_ref__=Ee,r.toString=function(){return He(this())},r}function Me(r){return $e(r)?r():r}function $e(r){return"function"==typeof r&&r.hasOwnProperty(De)&&r.__forward_ref__===Ee}function rt(r){return r&&!!r.\u0275providers}const St="https://g.co/ng/security#xss";class Fe extends Error{constructor(i,d){super(function ut(r,i){return`NG0${Math.abs(r)}${i?": "+i.trim():""}`}(i,d)),this.code=i}}function st(r){return"string"==typeof r?r:null==r?"":String(r)}function kt(r,i){throw new Fe(-201,!1)}function Yt(r,i){null==r&&function $t(r,i,d,f){throw new Error(`ASSERTION ERROR: ${r}`+(null==f?"":` [Expected=> ${d} ${f} ${i} <=Actual]`))}(i,r,null,"!=")}function Gt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Wn(r){return{providers:r.providers||[],imports:r.imports||[]}}function Er(r){return yi(r,zr)||yi(r,xn)}function _r(r){return null!==Er(r)}function yi(r,i){return r.hasOwnProperty(i)?r[i]:null}function Hr(r){return r&&(r.hasOwnProperty(pr)||r.hasOwnProperty(mr))?r[pr]:null}const zr=Be({\u0275prov:Be}),pr=Be({\u0275inj:Be}),xn=Be({ngInjectableDef:Be}),mr=Be({ngInjectorDef:Be});var yn=(()=>((yn=yn||{})[yn.Default=0]="Default",yn[yn.Host=1]="Host",yn[yn.Self=2]="Self",yn[yn.SkipSelf=4]="SkipSelf",yn[yn.Optional=8]="Optional",yn))();let xi;function xr(r){const i=xi;return xi=r,i}function gi(r,i,d){const f=Er(r);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:d&yn.Optional?null:void 0!==i?i:void kt(He(r))}const ur=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qr={},Mn="__NG_DI_FLAG__",wi="ngTempTokenPath",Ri=/\n/gm,li="__source";let wr;function si(r){const i=wr;return wr=r,i}function Hi(r,i=yn.Default){if(void 0===wr)throw new Fe(-203,!1);return null===wr?gi(r,void 0,i):wr.get(r,i&yn.Optional?null:void 0,i)}function dn(r,i=yn.Default){return(function br(){return xi}()||Hi)(Me(r),i)}function Cn(r,i=yn.Default){return dn(r,er(i))}function er(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function $n(r){const i=[];for(let d=0;d<r.length;d++){const f=Me(r[d]);if(Array.isArray(f)){if(0===f.length)throw new Fe(900,!1);let m,b=yn.Default;for(let A=0;A<f.length;A++){const L=f[A],$=Qe(L);"number"==typeof $?-1===$?m=L.token:b|=$:m=L}i.push(dn(m,b))}else i.push(dn(f))}return i}function Vn(r,i){return r[Mn]=i,r.prototype[Mn]=i,r}function Qe(r){return r[Mn]}function Vt(r){return{toString:r}.toString()}var Dt=(()=>((Dt=Dt||{})[Dt.OnPush=0]="OnPush",Dt[Dt.Default=1]="Default",Dt))(),Br=(()=>{return(r=Br||(Br={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Br;var r})();const mi={},pe=[],re=Be({\u0275cmp:Be}),de=Be({\u0275dir:Be}),me=Be({\u0275pipe:Be}),ze=Be({\u0275mod:Be}),bt=Be({\u0275fac:Be}),bn=Be({__NG_ELEMENT_ID__:Be});let On=0;function dr(r){return Vt(()=>{const d=!0===r.standalone,f={},m={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Dt.OnPush,directiveDefs:null,pipeDefs:null,standalone:d,dependencies:d&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||pe,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Br.Emulated,id:"c"+On++,styles:r.styles||pe,_:null,setInput:null,schemas:r.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},b=r.dependencies,A=r.features;return m.inputs=Lr(r.inputs,f),m.outputs=Lr(r.outputs),A&&A.forEach(L=>L(m)),m.directiveDefs=b?()=>("function"==typeof b?b():b).map(Ci).filter(Yi):null,m.pipeDefs=b?()=>("function"==typeof b?b():b).map(Rr).filter(Yi):null,m})}function Ci(r){return tr(r)||Gi(r)}function Yi(r){return null!==r}function Zr(r){return Vt(()=>({type:r.type,bootstrap:r.bootstrap||pe,declarations:r.declarations||pe,imports:r.imports||pe,exports:r.exports||pe,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Lr(r,i){if(null==r)return mi;const d={};for(const f in r)if(r.hasOwnProperty(f)){let m=r[f],b=m;Array.isArray(m)&&(b=m[1],m=m[0]),d[m]=f,i&&(i[m]=b)}return d}const ns=dr;function rs(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function tr(r){return r[re]||null}function Gi(r){return r[de]||null}function Rr(r){return r[me]||null}function Mi(r){const i=tr(r)||Gi(r)||Rr(r);return null!==i&&i.standalone}function is(r,i){const d=r[ze]||null;if(!d&&!0===i)throw new Error(`Type ${He(r)} does not have '\u0275mod' property.`);return d}function Ui(r){return Array.isArray(r)&&"object"==typeof r[1]}function gs(r){return Array.isArray(r)&&!0===r[1]}function Bi(r){return 0!=(4&r.flags)}function Vr(r){return r.componentOffset>-1}function gu(r){return 1==(1&r.flags)}function As(r){return null!==r.template}function Yo(r){return 0!=(256&r[2])}function Js(r,i){return r.hasOwnProperty(bt)?r[bt]:null}class Xo{constructor(i,d,f){this.previousValue=i,this.currentValue=d,this.firstChange=f}isFirstChange(){return this.firstChange}}function hi(){return fo}function fo(r){return r.type.prototype.ngOnChanges&&(r.setInput=Jo),Ra}function Ra(){const r=_a(this),i=r?.current;if(i){const d=r.previous;if(d===mi)r.previous=i;else for(let f in i)d[f]=i[f];r.current=null,this.ngOnChanges(i)}}function Jo(r,i,d,f){const m=this.declaredInputs[d],b=_a(r)||function ba(r,i){return r[fi]=i}(r,{previous:mi,current:null}),A=b.current||(b.current={}),L=b.previous,$=L[m];A[m]=new Xo($&&$.currentValue,i,L===mi),r[f]=i}hi.ngInherit=!0;const fi="__ngSimpleChanges__";function _a(r){return r[fi]||null}function cs(r){for(;Array.isArray(r);)r=r[0];return r}function Vo(r,i){return cs(i[r])}function vs(r,i){return cs(i[r.index])}function Rs(r,i){return r.data[i]}function Ks(r,i){return r[i]}function Ns(r,i){const d=i[r];return Ui(d)?d:d[0]}function po(r){return 64==(64&r[2])}function mo(r,i){return null==i?null:r[i]}function ro(r){r[18]=0}function vo(r,i){r[5]+=i;let d=r,f=r[3];for(;null!==f&&(1===i&&1===d[5]||-1===i&&0===d[5]);)f[5]+=i,d=f,f=f[3]}const Sr={lFrame:sc(null),bindingsEnabled:!0};function ce(){return Sr.bindingsEnabled}function Ge(){return Sr.lFrame.lView}function Ut(){return Sr.lFrame.tView}function Fn(r){return Sr.lFrame.contextLView=r,r[8]}function qt(r){return Sr.lFrame.contextLView=null,r}function Un(){let r=$r();for(;null!==r&&64===r.type;)r=r.parent;return r}function $r(){return Sr.lFrame.currentTNode}function Qr(r,i){const d=Sr.lFrame;d.currentTNode=r,d.isParent=i}function Ni(){return Sr.lFrame.isParent}function Ar(){Sr.lFrame.isParent=!1}function ar(){const r=Sr.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function Zs(){return Sr.lFrame.bindingIndex++}function Es(r){const i=Sr.lFrame,d=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,d}function oa(r,i){const d=Sr.lFrame;d.bindingIndex=d.bindingRootIndex=r,aa(i)}function aa(r){Sr.lFrame.currentDirectiveIndex=r}function ou(){return Sr.lFrame.currentQueryIndex}function ua(r){Sr.lFrame.currentQueryIndex=r}function Vu(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Ol(r,i,d){if(d&yn.SkipSelf){let m=i,b=r;for(;!(m=m.parent,null!==m||d&yn.Host||(m=Vu(b),null===m||(b=b[15],10&m.type))););if(null===m)return!1;i=m,r=b}const f=Sr.lFrame=Hu();return f.currentTNode=i,f.lView=r,!0}function Ta(r){const i=Hu(),d=r[1];Sr.lFrame=i,i.currentTNode=d.firstChild,i.lView=r,i.tView=d,i.contextLView=r,i.bindingIndex=d.bindingStartIndex,i.inI18n=!1}function Hu(){const r=Sr.lFrame,i=null===r?null:r.child;return null===i?sc(r):i}function sc(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function io(){const r=Sr.lFrame;return Sr.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const au=io;function Ic(){const r=io();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Go(){return Sr.lFrame.selectedIndex}function Ea(r){Sr.lFrame.selectedIndex=r}function Li(){const r=Sr.lFrame;return Rs(r.tView,r.selectedIndex)}function la(){Sr.lFrame.currentNamespace="svg"}function Ir(){!function Ka(){Sr.lFrame.currentNamespace=null}()}function ue(r,i){for(let d=i.directiveStart,f=i.directiveEnd;d<f;d++){const b=r.data[d].type.prototype,{ngAfterContentInit:A,ngAfterContentChecked:L,ngAfterViewInit:$,ngAfterViewChecked:oe,ngOnDestroy:Ce}=b;A&&(r.contentHooks||(r.contentHooks=[])).push(-d,A),L&&((r.contentHooks||(r.contentHooks=[])).push(d,L),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(d,L)),$&&(r.viewHooks||(r.viewHooks=[])).push(-d,$),oe&&((r.viewHooks||(r.viewHooks=[])).push(d,oe),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(d,oe)),null!=Ce&&(r.destroyHooks||(r.destroyHooks=[])).push(d,Ce)}}function G(r,i,d){Nt(r,i,3,d)}function Te(r,i,d,f){(3&r[2])===d&&Nt(r,i,d,f)}function Je(r,i){let d=r[2];(3&d)===i&&(d&=2047,d+=1,r[2]=d)}function Nt(r,i,d,f){const b=f??-1,A=i.length-1;let L=0;for(let $=void 0!==f?65535&r[18]:0;$<A;$++)if("number"==typeof i[$+1]){if(L=i[$],null!=f&&L>=f)break}else i[$]<0&&(r[18]+=65536),(L<b||-1==b)&&(en(r,d,i,$),r[18]=(4294901760&r[18])+$+2),$++}function en(r,i,d,f){const m=d[f]<0,b=d[f+1],L=r[m?-d[f]:d[f]];if(m){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{b.call(L)}finally{}}}else try{b.call(L)}finally{}}class ai{constructor(i,d,f){this.factory=i,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=f}}function ci(r,i,d){let f=0;for(;f<d.length;){const m=d[f];if("number"==typeof m){if(0!==m)break;f++;const b=d[f++],A=d[f++],L=d[f++];r.setAttribute(i,A,L,b)}else{const b=m,A=d[++f];In(b)?r.setProperty(i,b,A):r.setAttribute(i,b,A),f++}}return f}function Io(r){return 3===r||4===r||6===r}function In(r){return 64===r.charCodeAt(0)}function Rn(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let d=-1;for(let f=0;f<i.length;f++){const m=i[f];"number"==typeof m?d=m:0===d||Du(r,d,m,null,-1===d||2===d?i[++f]:null)}}return r}function Du(r,i,d,f,m){let b=0,A=r.length;if(-1===i)A=-1;else for(;b<r.length;){const L=r[b++];if("number"==typeof L){if(L===i){A=-1;break}if(L>i){A=b-1;break}}}for(;b<r.length;){const L=r[b];if("number"==typeof L)break;if(L===d){if(null===f)return void(null!==m&&(r[b+1]=m));if(f===r[b+1])return void(r[b+2]=m)}b++,null!==f&&b++,null!==m&&b++}-1!==A&&(r.splice(A,0,i),b=A+1),r.splice(b++,0,d),null!==f&&r.splice(b++,0,f),null!==m&&r.splice(b++,0,m)}function kn(r){return-1!==r}function Ht(r){return 32767&r}function ws(r,i){let d=function an(r){return r>>16}(r),f=i;for(;d>0;)f=f[15],d--;return f}let Za=!0;function $u(r){const i=Za;return Za=r,i}let Pc=0;const Ys={};function so(r,i){const d=Au(r,i);if(-1!==d)return d;const f=i[1];f.firstCreatePass&&(r.injectorIndex=i.length,Ya(f.data,r),Ya(i,null),Ya(f.blueprint,null));const m=Mr(r,i),b=r.injectorIndex;if(kn(m)){const A=Ht(m),L=ws(m,i),$=L[1].data;for(let oe=0;oe<8;oe++)i[b+oe]=L[A+oe]|$[A+oe]}return i[b+8]=m,b}function Ya(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Au(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function Mr(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let d=0,f=null,m=i;for(;null!==m;){if(f=kc(m),null===f)return-1;if(d++,m=m[15],-1!==f.injectorIndex)return f.injectorIndex|d<<16}return-1}function La(r,i,d){!function Po(r,i,d){let f;"string"==typeof d?f=d.charCodeAt(0)||0:d.hasOwnProperty(bn)&&(f=d[bn]),null==f&&(f=d[bn]=Pc++);const m=255&f;i.data[r+(m>>5)]|=1<<m}(r,i,d)}function Ji(r,i,d){if(d&yn.Optional||void 0!==r)return r;kt()}function Bn(r,i,d,f){if(d&yn.Optional&&void 0===f&&(f=null),0==(d&(yn.Self|yn.Host))){const m=r[9],b=xr(void 0);try{return m?m.get(i,f,d&yn.Optional):gi(i,f,d&yn.Optional)}finally{xr(b)}}return Ji(f,0,d)}function Ls(r,i,d,f=yn.Default,m){if(null!==r){if(1024&i[2]){const A=function wa(r,i,d,f,m){let b=r,A=i;for(;null!==b&&null!==A&&1024&A[2]&&!(256&A[2]);){const L=jr(b,A,d,f|yn.Self,Ys);if(L!==Ys)return L;let $=b.parent;if(!$){const oe=A[21];if(oe){const Ce=oe.get(d,Ys,f);if(Ce!==Ys)return Ce}$=kc(A),A=A[15]}b=$}return m}(r,i,d,f,Ys);if(A!==Ys)return A}const b=jr(r,i,d,f,Ys);if(b!==Ys)return b}return Bn(i,d,f,m)}function jr(r,i,d,f,m){const b=function Qs(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(bn)?r[bn]:void 0;return"number"==typeof i?i>=0?255&i:oo:i}(d);if("function"==typeof b){if(!Ol(i,r,f))return f&yn.Host?Ji(m,0,f):Bn(i,d,f,m);try{const A=b(f);if(null!=A||f&yn.Optional)return A;kt()}finally{au()}}else if("number"==typeof b){let A=null,L=Au(r,i),$=-1,oe=f&yn.Host?i[16][6]:null;for((-1===L||f&yn.SkipSelf)&&($=-1===L?Mr(r,i):i[L+8],-1!==$&&Ps(f,!1)?(A=i[1],L=Ht($),i=ws($,i)):L=-1);-1!==L;){const Ce=i[1];if(Fi(b,L,Ce.data)){const We=Fa(L,i,d,A,f,oe);if(We!==Ys)return We}$=i[L+8],-1!==$&&Ps(f,i[1].data[L+8]===oe)&&Fi(b,L,i)?(A=Ce,L=Ht($),i=ws($,i)):L=-1}}return m}function Fa(r,i,d,f,m,b){const A=i[1],L=A.data[r+8],Ce=ys(L,A,d,null==f?Vr(L)&&Za:f!=A&&0!=(3&L.type),m&yn.Host&&b===L);return null!==Ce?En(i,A,Ce,L):Ys}function ys(r,i,d,f,m){const b=r.providerIndexes,A=i.data,L=1048575&b,$=r.directiveStart,Ce=b>>20,pt=m?L+Ce:r.directiveEnd;for(let Ot=f?L:L+Ce;Ot<pt;Ot++){const sn=A[Ot];if(Ot<$&&d===sn||Ot>=$&&sn.type===d)return Ot}if(m){const Ot=A[$];if(Ot&&As(Ot)&&Ot.type===d)return $}return null}function En(r,i,d,f){let m=r[d];const b=i.data;if(function Gr(r){return r instanceof ai}(m)){const A=m;A.resolving&&function Ve(r,i){const d=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${r}${d}`)}(function Et(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():st(r)}(b[d]));const L=$u(A.canSeeViewProviders);A.resolving=!0;const $=A.injectImpl?xr(A.injectImpl):null;Ol(r,f,yn.Default);try{m=r[d]=A.factory(void 0,b,r,f),i.firstCreatePass&&d>=f.directiveStart&&function V(r,i,d){const{ngOnChanges:f,ngOnInit:m,ngDoCheck:b}=i.type.prototype;if(f){const A=fo(i);(d.preOrderHooks||(d.preOrderHooks=[])).push(r,A),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(r,A)}m&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-r,m),b&&((d.preOrderHooks||(d.preOrderHooks=[])).push(r,b),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(r,b))}(d,b[d],i)}finally{null!==$&&xr($),$u(L),A.resolving=!1,au()}}return m}function Fi(r,i,d){return!!(d[i+(r>>5)]&1<<r)}function Ps(r,i){return!(r&yn.Self||r&yn.Host&&i)}class uu{constructor(i,d){this._tNode=i,this._lView=d}get(i,d,f){return Ls(this._tNode,this._lView,i,er(f),d)}}function oo(){return new uu(Un(),Ge())}function zu(r){return Vt(()=>{const i=r.prototype.constructor,d=i[bt]||Qa(i),f=Object.prototype;let m=Object.getPrototypeOf(r.prototype).constructor;for(;m&&m!==f;){const b=m[bt]||Qa(m);if(b&&b!==d)return b;m=Object.getPrototypeOf(m)}return b=>new b})}function Qa(r){return $e(r)?()=>{const i=Qa(Me(r));return i&&i()}:Js(r)}function kc(r){const i=r[1],d=i.type;return 2===d?i.declTNode:1===d?r[6]:null}function ko(r){return function sd(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const d=r.attrs;if(d){const f=d.length;let m=0;for(;m<f;){const b=d[m];if(Io(b))break;if(0===b)m+=2;else if("number"==typeof b)for(m++;m<f&&"string"==typeof d[m];)m++;else{if(b===i)return d[m+1];m+=2}}}return null}(Un(),r)}const Iu="__parameters__";function Ft(r,i,d){return Vt(()=>{const f=function ca(r){return function(...d){if(r){const f=r(...d);for(const m in f)this[m]=f[m]}}}(i);function m(...b){if(this instanceof m)return f.apply(this,b),this;const A=new m(...b);return L.annotation=A,L;function L($,oe,Ce){const We=$.hasOwnProperty(Iu)?$[Iu]:Object.defineProperty($,Iu,{value:[]})[Iu];for(;We.length<=Ce;)We.push(null);return(We[Ce]=We[Ce]||[]).push(A),$}}return d&&(m.prototype=Object.create(d.prototype)),m.prototype.ngMetadataName=r,m.annotationCls=m,m})}class as{constructor(i,d){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=Gt({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Se(r,i){r.forEach(d=>Array.isArray(d)?Se(d,i):i(d))}function mt(r,i,d){i>=r.length?r.push(d):r.splice(i,0,d)}function Jt(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function wn(r,i){const d=[];for(let f=0;f<r;f++)d.push(i);return d}function Wi(r,i,d){let f=Cs(r,i);return f>=0?r[1|f]=d:(f=~f,function Jr(r,i,d,f){let m=r.length;if(m==i)r.push(d,f);else if(1===m)r.push(f,r[0]),r[0]=d;else{for(m--,r.push(r[m-1],r[m]);m>i;)r[m]=r[m-2],m--;r[i]=d,r[i+1]=f}}(r,f,i,d)),f}function Mo(r,i){const d=Cs(r,i);if(d>=0)return r[1|d]}function Cs(r,i){return function Wu(r,i,d){let f=0,m=r.length>>d;for(;m!==f;){const b=f+(m-f>>1),A=r[b<<d];if(i===A)return b<<d;A>i?m=b:f=b+1}return~(m<<d)}(r,i,1)}const Pu=Vn(Ft("Optional"),8),Q=Vn(Ft("SkipSelf"),4);var du=(()=>((du=du||{})[du.Important=1]="Important",du[du.DashCase=2]="DashCase",du))();const hl=new Map;let qh=0;const Bl="__ngContext__";function _s(r,i){Ui(i)?(r[Bl]=i[20],function Ul(r){hl.set(r[20],r)}(i)):r[Bl]=i}function dd(r,i){return undefined(r,i)}function dc(r){const i=r[3];return gs(i)?i[3]:i}function _u(r){return Hl(r[13])}function nh(r){return Hl(r[4])}function Hl(r){for(;null!==r&&!gs(r);)r=r[4];return r}function hc(r,i,d,f,m){if(null!=f){let b,A=!1;gs(f)?b=f:Ui(f)&&(A=!0,f=f[0]);const L=cs(f);0===r&&null!==d?null==m?bu(i,d,L):ml(i,d,L,m||null,!0):1===r&&null!==d?ml(i,d,L,m||null,!0):2===r?function Ru(r,i,d){const f=Ii(r,i);f&&function ef(r,i,d,f){r.removeChild(i,d,f)}(r,f,i,d)}(i,L,A):3===r&&i.destroyNode(L),null!=b&&function ah(r,i,d,f,m){const b=d[7];b!==cs(d)&&hc(i,r,f,b,m);for(let L=10;L<d.length;L++){const $=d[L];pd($[1],$,r,i,f,b)}}(i,r,b,d,m)}}function pl(r,i,d){return r.createElement(i,d)}function jc(r,i){const d=r[9],f=d.indexOf(i),m=i[3];512&i[2]&&(i[2]&=-513,vo(m,-1)),d.splice(f,1)}function Gl(r,i){if(r.length<=10)return;const d=10+i,f=r[d];if(f){const m=f[17];null!==m&&m!==r&&jc(m,f),i>0&&(r[d-1][4]=f[4]);const b=Jt(r,10+i);!function Xh(r,i){pd(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(f[1],f);const A=b[19];null!==A&&A.detachView(b[1]),f[3]=null,f[4]=null,f[2]&=-65}return f}function eg(r,i){if(!(128&i[2])){const d=i[11];d.destroyNode&&pd(r,i,d,3,null,null),function Fc(r){let i=r[13];if(!i)return pc(r[1],r);for(;i;){let d=null;if(Ui(i))d=i[13];else{const f=i[10];f&&(d=f)}if(!d){for(;i&&!i[4]&&i!==r;)Ui(i)&&pc(i[1],i),i=i[3];null===i&&(i=r),Ui(i)&&pc(i[1],i),d=i&&i[4]}i=d}}(i)}}function pc(r,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function gl(r,i){let d;if(null!=r&&null!=(d=r.destroyHooks))for(let f=0;f<d.length;f+=2){const m=i[d[f]];if(!(m instanceof ai)){const b=d[f+1];if(Array.isArray(b))for(let A=0;A<b.length;A+=2){const L=m[b[A]],$=b[A+1];try{$.call(L)}finally{}}else try{b.call(m)}finally{}}}}(r,i),function Ku(r,i){const d=r.cleanup,f=i[7];let m=-1;if(null!==d)for(let b=0;b<d.length-1;b+=2)if("string"==typeof d[b]){const A=d[b+3];A>=0?f[m=A]():f[m=-A].unsubscribe(),b+=2}else{const A=f[m=d[b+1]];d[b].call(A)}if(null!==f){for(let b=m+1;b<f.length;b++)(0,f[b])();i[7]=null}}(r,i),1===i[1].type&&i[11].destroy();const d=i[17];if(null!==d&&gs(i[3])){d!==i[3]&&jc(d,i);const f=i[19];null!==f&&f.detachView(r)}!function Rc(r){hl.delete(r[20])}(i)}}function gc(r,i,d){return function Jh(r,i,d){let f=i;for(;null!==f&&40&f.type;)f=(i=f).parent;if(null===f)return d[0];{const{componentOffset:m}=f;if(m>-1){const{encapsulation:b}=r.data[f.directiveStart+m];if(b===Br.None||b===Br.Emulated)return null}return vs(f,d)}}(r,i.parent,d)}function ml(r,i,d,f,m){r.insertBefore(i,d,f,m)}function bu(r,i,d){r.appendChild(i,d)}function hd(r,i,d,f,m){null!==f?ml(r,i,d,f,m):bu(r,i,d)}function Ii(r,i){return r.parentNode(i)}function nf(r,i,d){return fd(r,i,d)}let vd,Qf,yd,fd=function Zu(r,i,d){return 40&r.type?vs(r,d):null};function mc(r,i,d,f){const m=gc(r,f,i),b=i[11],L=nf(f.parent||i[6],f,i);if(null!=m)if(Array.isArray(d))for(let $=0;$<d.length;$++)hd(b,m,d[$],L,!1);else hd(b,m,d,L,!1)}function vl(r,i){if(null!==i){const d=i.type;if(3&d)return vs(i,r);if(4&d)return ga(-1,r[i.index]);if(8&d){const f=i.child;if(null!==f)return vl(r,f);{const m=r[i.index];return gs(m)?ga(-1,m):cs(m)}}if(32&d)return dd(i,r)()||cs(r[i.index]);{const f=Ou(r,i);return null!==f?Array.isArray(f)?f[0]:vl(dc(r[16]),f):vl(r,i.next)}}return null}function Ou(r,i){return null!==i?r[16][6].projection[i.projection]:null}function ga(r,i){const d=10+r+1;if(d<i.length){const f=i[d],m=f[1].firstChild;if(null!==m)return vl(f,m)}return i[7]}function sh(r,i,d,f,m,b,A){for(;null!=d;){const L=f[d.index],$=d.type;if(A&&0===i&&(L&&_s(cs(L),f),d.flags|=2),32!=(32&d.flags))if(8&$)sh(r,i,d.child,f,m,b,!1),hc(i,r,m,L,b);else if(32&$){const oe=dd(d,f);let Ce;for(;Ce=oe();)hc(i,r,m,Ce,b);hc(i,r,m,L,b)}else 16&$?oh(r,i,f,d,m,b):hc(i,r,m,L,b);d=A?d.projectionNext:d.next}}function pd(r,i,d,f,m,b){sh(d,f,r.firstChild,i,m,b,!1)}function oh(r,i,d,f,m,b){const A=d[16],$=A[6].projection[f.projection];if(Array.isArray($))for(let oe=0;oe<$.length;oe++)hc(i,r,m,$[oe],b);else sh(r,i,$,A[3],m,b,!0)}function fu(r,i,d){""===d?r.removeAttribute(i,"class"):r.setAttribute(i,"class",d)}function md(r,i,d){const{mergedAttrs:f,classes:m,styles:b}=d;null!==f&&ci(r,i,f),null!==m&&fu(r,i,m),null!==b&&function gd(r,i,d){r.setAttribute(i,"style",d)}(r,i,b)}function vc(r){return function yl(){if(void 0===vd&&(vd=null,ur.trustedTypes))try{vd=ur.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return vd}()?.createHTML(r)||r}function $l(r){Qf=r}function Xf(r){return function uh(){if(void 0===yd&&(yd=null,ur.trustedTypes))try{yd=ur.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return yd}()?.createScriptURL(r)||r}class Yu{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${St})`}}class _l extends Yu{getTypeName(){return"HTML"}}class lh extends Yu{getTypeName(){return"Style"}}class D extends Yu{getTypeName(){return"Script"}}class y extends Yu{getTypeName(){return"URL"}}class T extends Yu{getTypeName(){return"ResourceURL"}}function O(r){return r instanceof Yu?r.changingThisBreaksApplicationSecurity:r}function le(r,i){const d=function xe(r){return r instanceof Yu&&r.getTypeName()||null}(r);if(null!=d&&d!==i){if("ResourceURL"===d&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${d} (see ${St})`)}return d===i}function ht(r){return new _l(r)}function jt(r){return new lh(r)}function Sn(r){return new D(r)}function Yn(r){return new y(r)}function Dr(r){return new T(r)}class ao{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const d=(new window.DOMParser).parseFromString(vc(i),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(i):(d.removeChild(d.firstChild),d)}catch{return null}}}class pu{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);const f=this.inertDocument.createElement("body");d.appendChild(f)}}getInertBodyElement(i){const d=this.inertDocument.createElement("template");if("content"in d)return d.innerHTML=vc(i),d;const f=this.inertDocument.createElement("body");return f.innerHTML=vc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(i){const d=i.attributes;for(let m=d.length-1;0<m;m--){const A=d.item(m).name;("xmlns:ns1"===A||0===A.indexOf("ns1:"))&&i.removeAttribute(A)}let f=i.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const ch=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function bd(r){return(r=String(r)).match(ch)?r:"unsafe:"+r}function Qu(r){const i={};for(const d of r.split(","))i[d]=!0;return i}function zo(...r){const i={};for(const d of r)for(const f in d)d.hasOwnProperty(f)&&(i[f]=!0);return i}const zl=Qu("area,br,col,hr,img,wbr"),dh=Qu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ct=Qu("rp,rt"),ql=zo(zl,zo(dh,Qu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zo(Ct,Qu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zo(Ct,dh)),Eo=Qu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ng=zo(Eo,Qu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jf=Qu("script,style,template");class bm{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let d=i.firstChild,f=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?f=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,f&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let m=this.checkClobberedElement(d,d.nextSibling);if(m){d=m;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(i){const d=i.nodeName.toLowerCase();if(!ql.hasOwnProperty(d))return this.sanitizedSomething=!0,!Jf.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const f=i.attributes;for(let m=0;m<f.length;m++){const b=f.item(m),A=b.name,L=A.toLowerCase();if(!ng.hasOwnProperty(L)){this.sanitizedSomething=!0;continue}let $=b.value;Eo[L]&&($=bd($)),this.buf.push(" ",A,'="',Tm($),'"')}return this.buf.push(">"),!0}endElement(i){const d=i.nodeName.toLowerCase();ql.hasOwnProperty(d)&&!zl.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(i){this.buf.push(Tm(i))}checkClobberedElement(i,d){if(d&&(i.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return d}}const r0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s0=/([^\#-~ |!])/g;function Tm(r){return r.replace(/&/g,"&amp;").replace(r0,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(s0,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rg;function Ed(r,i){let d=null;try{rg=rg||function hr(r){const i=new pu(r);return function _d(){try{return!!(new window.DOMParser).parseFromString(vc(""),"text/html")}catch{return!1}}()?new ao(i):i}(r);let f=i?String(i):"";d=rg.getInertBodyElement(f);let m=5,b=f;do{if(0===m)throw new Error("Failed to sanitize html because the input is unstable");m--,f=b,b=d.innerHTML,d=rg.getInertBodyElement(f)}while(f!==b);return vc((new bm).sanitizeChildren(Em(d)||d))}finally{if(d){const f=Em(d)||d;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function Em(r){return"content"in r&&function qv(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var qo=(()=>((qo=qo||{})[qo.NONE=0]="NONE",qo[qo.HTML=1]="HTML",qo[qo.STYLE=2]="STYLE",qo[qo.SCRIPT=3]="SCRIPT",qo[qo.URL=4]="URL",qo[qo.RESOURCE_URL=5]="RESOURCE_URL",qo))();function ig(r){const i=Wo();return i?i.sanitize(qo.URL,r)||"":le(r,"URL")?O(r):bd(st(r))}function Cm(r){const i=Wo();if(i)return Xf(i.sanitize(qo.RESOURCE_URL,r)||"");if(le(r,"ResourceURL"))return Xf(O(r));throw new Fe(904,!1)}function fh(r,i,d){return function Sm(r,i){return"src"===i&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===i&&("base"===r||"link"===r)?Cm:ig}(i,d)(r)}function Wo(){const r=Ge();return r&&r[12]}const rf=new as("ENVIRONMENT_INITIALIZER"),sf=new as("INJECTOR",-1),ph=new as("INJECTOR_DEF_TYPES");class Vc{get(i,d=qr){if(d===qr){const f=new Error(`NullInjectorError: No provider for ${He(i)}!`);throw f.name="NullInjectorError",f}return d}}function Qv(...r){return{\u0275providers:Dm(0,r),\u0275fromNgModule:!0}}function Dm(r,...i){const d=[],f=new Set;let m;return Se(i,b=>{const A=b;Wl(A,d,[],f)&&(m||(m=[]),m.push(A))}),void 0!==m&&gh(m,d),d}function gh(r,i){for(let d=0;d<r.length;d++){const{providers:m}=r[d];Xu(m,b=>{i.push(b)})}}function Wl(r,i,d,f){if(!(r=Me(r)))return!1;let m=null,b=Hr(r);const A=!b&&tr(r);if(b||A){if(A&&!A.standalone)return!1;m=r}else{const $=r.ngModule;if(b=Hr($),!b)return!1;m=$}const L=f.has(m);if(A){if(L)return!1;if(f.add(m),A.dependencies){const $="function"==typeof A.dependencies?A.dependencies():A.dependencies;for(const oe of $)Wl(oe,i,d,f)}}else{if(!b)return!1;{if(null!=b.imports&&!L){let oe;f.add(m);try{Se(b.imports,Ce=>{Wl(Ce,i,d,f)&&(oe||(oe=[]),oe.push(Ce))})}finally{}void 0!==oe&&gh(oe,i)}if(!L){const oe=Js(m)||(()=>new m);i.push({provide:m,useFactory:oe,deps:pe},{provide:ph,useValue:m,multi:!0},{provide:rf,useValue:()=>dn(m),multi:!0})}const $=b.providers;null==$||L||Xu($,Ce=>{i.push(Ce)})}}return m!==r&&void 0!==r.providers}function Xu(r,i){for(let d of r)rt(d)&&(d=d.\u0275providers),Array.isArray(d)?Xu(d,i):i(d)}const Va=Be({provide:String,useValue:Be});function ep(r){return null!==r&&"object"==typeof r&&Va in r}function El(r){return"function"==typeof r}const Am=new as("Set Injector scope."),tp={},Xv={};let vh;function Kl(){return void 0===vh&&(vh=new Vc),vh}class Ju{}class Jv extends Ju{constructor(i,d,f,m){super(),this.parent=d,this.source=f,this.scopes=m,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pm(i,A=>this.processProvider(A)),this.records.set(sf,Zl(void 0,this)),m.has("environment")&&this.records.set(Ju,Zl(void 0,this));const b=this.records.get(Am);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(ph.multi,pe,yn.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const d=si(this),f=xr(void 0);try{return i()}finally{si(d),xr(f)}}get(i,d=qr,f=yn.Default){this.assertNotDestroyed(),f=er(f);const m=si(this),b=xr(void 0);try{if(!(f&yn.SkipSelf)){let L=this.records.get(i);if(void 0===L){const $=function yh(r){return"function"==typeof r||"object"==typeof r&&r instanceof as}(i)&&Er(i);L=$&&this.injectableDefInScope($)?Zl(og(i),tp):null,this.records.set(i,L)}if(null!=L)return this.hydrate(i,L)}return(f&yn.Self?Kl():this.parent).get(i,d=f&yn.Optional&&d===qr?null:d)}catch(A){if("NullInjectorError"===A.name){if((A[wi]=A[wi]||[]).unshift(He(i)),m)throw A;return function Ye(r,i,d,f){const m=r[wi];throw i[li]&&m.unshift(i[li]),r.message=function at(r,i,d,f=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let m=He(i);if(Array.isArray(i))m=i.map(He).join(" -> ");else if("object"==typeof i){let b=[];for(let A in i)if(i.hasOwnProperty(A)){let L=i[A];b.push(A+":"+("string"==typeof L?JSON.stringify(L):He(L)))}m=`{${b.join(", ")}}`}return`${d}${f?"("+f+")":""}[${m}]: ${r.replace(Ri,"\n  ")}`}("\n"+r.message,m,d,f),r.ngTokenPath=m,r[wi]=null,r}(A,i,"R3InjectorError",this.source)}throw A}finally{xr(b),si(m)}}resolveInjectorInitializers(){const i=si(this),d=xr(void 0);try{const f=this.get(rf.multi,pe,yn.Self);for(const m of f)m()}finally{si(i),xr(d)}}toString(){const i=[],d=this.records;for(const f of d.keys())i.push(He(f));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processProvider(i){let d=El(i=Me(i))?i:Me(i&&i.provide);const f=function ey(r){return ep(r)?Zl(void 0,r.useValue):Zl(Im(r),tp)}(i);if(El(i)||!0!==i.multi)this.records.get(d);else{let m=this.records.get(d);m||(m=Zl(void 0,tp,!0),m.factory=()=>$n(m.multi),this.records.set(d,m)),d=i,m.multi.push(i)}this.records.set(d,f)}hydrate(i,d){return d.value===tp&&(d.value=Xv,d.value=d.factory()),"object"==typeof d.value&&d.value&&function yc(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(i){if(!i.providedIn)return!1;const d=Me(i.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function og(r){const i=Er(r),d=null!==i?i.factory:Js(r);if(null!==d)return d;if(r instanceof as)throw new Fe(204,!1);if(r instanceof Function)return function l0(r){const i=r.length;if(i>0)throw wn(i,"?"),new Fe(204,!1);const d=function or(r){const i=r&&(r[zr]||r[xn]);if(i){const d=function Xn(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),i}return null}(r);return null!==d?()=>d.factory(r):()=>new r}(r);throw new Fe(204,!1)}function Im(r,i,d){let f;if(El(r)){const m=Me(r);return Js(m)||og(m)}if(ep(r))f=()=>Me(r.useValue);else if(function sg(r){return!(!r||!r.useFactory)}(r))f=()=>r.useFactory(...$n(r.deps||[]));else if(function af(r){return!(!r||!r.useExisting)}(r))f=()=>dn(Me(r.useExisting));else{const m=Me(r&&(r.useClass||r.provide));if(!function Hc(r){return!!r.deps}(r))return Js(m)||og(m);f=()=>new m(...$n(r.deps))}return f}function Zl(r,i,d=!1){return{factory:r,value:i,multi:d?[]:void 0}}function Pm(r,i){for(const d of r)Array.isArray(d)?Pm(d,i):d&&rt(d)?Pm(d.\u0275providers,i):i(d)}class ty{}class ag{}class Mm{resolveComponentFactory(i){throw function ug(r){const i=Error(`No component factory found for ${He(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let _h=(()=>{class r{}return r.NULL=new Mm,r})();function ny(){return _c(Un(),Ge())}function _c(r,i){return new wd(vs(r,i))}let wd=(()=>{class r{constructor(d){this.nativeElement=d}}return r.__NG_ELEMENT_ID__=ny,r})();function cg(r){return r instanceof wd?r.nativeElement:r}class uf{}let c0=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function ry(){const r=Ge(),d=Ns(Un().index,r);return(Ui(d)?d:r)[11]}(),r})(),np=(()=>{class r{}return r.\u0275prov=Gt({token:r,providedIn:"root",factory:()=>null}),r})();class lf{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const cf=new lf("15.0.3"),dg={};function fg(r){return r.ngOriginalError}class Cd{constructor(){this._console=console}handleError(i){const d=this._findOriginalError(i);this._console.error("ERROR",i),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(i){let d=i&&fg(i);for(;d&&fg(d);)d=fg(d);return d||null}}function Tc(r){return r instanceof Function?r():r}function hf(r,i,d){let f=r.length;for(;;){const m=r.indexOf(i,d);if(-1===m)return m;if(0===m||r.charCodeAt(m-1)<=32){const b=i.length;if(m+b===f||r.charCodeAt(m+b)<=32)return m}d=m+1}}const Rm="ng-template";function uy(r,i,d){let f=0;for(;f<r.length;){let m=r[f++];if(d&&"class"===m){if(m=r[f],-1!==hf(m.toLowerCase(),i,0))return!0}else if(1===m){for(;f<r.length&&"string"==typeof(m=r[f++]);)if(m.toLowerCase()===i)return!0;return!1}}return!1}function gg(r){return 4===r.type&&r.value!==Rm}function ly(r,i,d){return i===(4!==r.type||d?r.value:Rm)}function cy(r,i,d){let f=4;const m=r.attrs||[],b=function hy(r){for(let i=0;i<r.length;i++)if(Io(r[i]))return i;return r.length}(m);let A=!1;for(let L=0;L<i.length;L++){const $=i[L];if("number"!=typeof $){if(!A)if(4&f){if(f=2|1&f,""!==$&&!ly(r,$,d)||""===$&&1===i.length){if(eu(f))return!1;A=!0}}else{const oe=8&f?$:i[++L];if(8&f&&null!==r.attrs){if(!uy(r.attrs,oe,d)){if(eu(f))return!1;A=!0}continue}const We=rp(8&f?"class":$,m,gg(r),d);if(-1===We){if(eu(f))return!1;A=!0;continue}if(""!==oe){let pt;pt=We>b?"":m[We+1].toLowerCase();const Ot=8&f?pt:null;if(Ot&&-1!==hf(Ot,oe,0)||2&f&&oe!==pt){if(eu(f))return!1;A=!0}}}}else{if(!A&&!eu(f)&&!eu($))return!1;if(A&&eu($))continue;A=!1,f=$|1&f}}return eu(f)||A}function eu(r){return 0==(1&r)}function rp(r,i,d,f){if(null===i)return-1;let m=0;if(f||!d){let b=!1;for(;m<i.length;){const A=i[m];if(A===r)return m;if(3===A||6===A)b=!0;else{if(1===A||2===A){let L=i[++m];for(;"string"==typeof L;)L=i[++m];continue}if(4===A)break;if(0===A){m+=4;continue}}m+=b?1:2}return-1}return function Lm(r,i){let d=r.indexOf(4);if(d>-1)for(d++;d<r.length;){const f=r[d];if("number"==typeof f)return-1;if(f===i)return d;d++}return-1}(i,r)}function Nm(r,i,d=!1){for(let f=0;f<i.length;f++)if(cy(r,i[f],d))return!0;return!1}function fy(r,i){e:for(let d=0;d<i.length;d++){const f=i[d];if(r.length===f.length){for(let m=0;m<r.length;m++)if(r[m]!==f[m])continue e;return!0}}return!1}function Fm(r,i){return r?":not("+i.trim()+")":i}function jm(r){let i=r[0],d=1,f=2,m="",b=!1;for(;d<r.length;){let A=r[d];if("string"==typeof A)if(2&f){const L=r[++d];m+="["+A+(L.length>0?'="'+L+'"':"")+"]"}else 8&f?m+="."+A:4&f&&(m+=" "+A);else""!==m&&!eu(A)&&(i+=Fm(b,m),m=""),f=A,b=b||!eu(f);d++}return""!==m&&(i+=Fm(b,m)),i}const pi={};function mg(r){ip(Ut(),Ge(),Go()+r,!1)}function ip(r,i,d,f){if(!f)if(3==(3&i[2])){const b=r.preOrderCheckHooks;null!==b&&G(i,b,d)}else{const b=r.preOrderHooks;null!==b&&Te(i,b,0,d)}Ea(d)}function bg(r,i=null,d=null,f){const m=ap(r,i,d,f);return m.resolveInjectorInitializers(),m}function ap(r,i=null,d=null,f,m=new Set){const b=[d||pe,Qv(r)];return f=f||("object"==typeof r?void 0:He(r)),new Jv(b,i||Kl(),f||null,m)}let Gc=(()=>{class r{static create(d,f){if(Array.isArray(d))return bg({name:""},f,d,"");{const m=d.name??"";return bg({name:m},d.parent,d.providers,m)}}}return r.THROW_IF_NOT_FOUND=qr,r.NULL=new Vc,r.\u0275prov=Gt({token:r,providedIn:"any",factory:()=>dn(sf)}),r.__NG_ELEMENT_ID__=-1,r})();function wh(r,i=yn.Default){const d=Ge();return null===d?dn(r,i):Ls(Un(),d,Me(r),i)}function Ty(){throw new Error("invalid")}function Ey(r,i){const d=r.contentQueries;if(null!==d)for(let f=0;f<d.length;f+=2){const m=d[f],b=d[f+1];if(-1!==b){const A=r.data[b];ua(m),A.contentQueries(2,i[b],b)}}}function Sl(r,i,d,f,m,b,A,L,$,oe,Ce){const We=i.blueprint.slice();return We[0]=m,We[2]=76|f,(null!==Ce||r&&1024&r[2])&&(We[2]|=1024),ro(We),We[3]=We[15]=r,We[8]=d,We[10]=A||r&&r[10],We[11]=L||r&&r[11],We[12]=$||r&&r[12]||null,We[9]=oe||r&&r[9]||null,We[6]=b,We[20]=function Wh(){return qh++}(),We[21]=Ce,We[16]=2==i.type?r[16]:We,We}function Id(r,i,d,f,m){let b=r.data[i];if(null===b)b=function dp(r,i,d,f,m){const b=$r(),A=Ni(),$=r.data[i]=function bf(r,i,d,f,m,b){return{type:d,index:f,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:m,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,A?b:b&&b.parent,d,i,f,m);return null===r.firstChild&&(r.firstChild=$),null!==b&&(A?null==b.child&&null!==$.parent&&(b.child=$):null===b.next&&(b.next=$)),$}(r,i,d,f,m),function yo(){return Sr.lFrame.inI18n}()&&(b.flags|=32);else if(64&b.type){b.type=d,b.value=f,b.attrs=m;const A=function Qi(){const r=Sr.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();b.injectorIndex=null===A?-1:A.injectorIndex}return Qr(b,!0),b}function Pd(r,i,d,f){if(0===d)return-1;const m=i.length;for(let b=0;b<d;b++)i.push(f),r.blueprint.push(f),r.data.push(null);return m}function zm(r,i,d){Ta(i);try{const f=r.viewQuery;null!==f&&kd(1,f,d);const m=r.template;null!==m&&gf(r,i,m,1,d),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Ey(r,i),r.staticViewQueries&&kd(2,r.viewQuery,d);const b=r.components;null!==b&&function Ag(r,i){for(let d=0;d<i.length;d++)Qm(r,i[d])}(i,b)}catch(f){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),f}finally{i[2]&=-5,Ic()}}function Ig(r,i,d,f){const m=i[2];if(128!=(128&m)){Ta(i);try{ro(i),function Is(r){return Sr.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==d&&gf(r,i,d,2,f);const A=3==(3&m);if(A){const oe=r.preOrderCheckHooks;null!==oe&&G(i,oe,null)}else{const oe=r.preOrderHooks;null!==oe&&Te(i,oe,0,null),Je(i,0)}if(function Ym(r){for(let i=_u(r);null!==i;i=nh(i)){if(!i[2])continue;const d=i[9];for(let f=0;f<d.length;f++){const m=d[f],b=m[3];0==(512&m[2])&&vo(b,1),m[2]|=512}}}(i),function xy(r){for(let i=_u(r);null!==i;i=nh(i))for(let d=10;d<i.length;d++){const f=i[d],m=f[1];po(f)&&Ig(m,f,m.template,f[8])}}(i),null!==r.contentQueries&&Ey(r,i),A){const oe=r.contentCheckHooks;null!==oe&&G(i,oe)}else{const oe=r.contentHooks;null!==oe&&Te(i,oe,1),Je(i,1)}!function f0(r,i){const d=r.hostBindingOpCodes;if(null!==d)try{for(let f=0;f<d.length;f++){const m=d[f];if(m<0)Ea(~m);else{const b=m,A=d[++f],L=d[++f];oa(A,b),L(2,i[b])}}}finally{Ea(-1)}}(r,i);const L=r.components;null!==L&&function $m(r,i){for(let d=0;d<i.length;d++)Ay(r,i[d])}(i,L);const $=r.viewQuery;if(null!==$&&kd(2,$,f),A){const oe=r.viewCheckHooks;null!==oe&&G(i,oe)}else{const oe=r.viewHooks;null!==oe&&Te(i,oe,2),Je(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,vo(i[3],-1))}finally{Ic()}}}function gf(r,i,d,f,m){const b=Go(),A=2&f;try{Ea(-1),A&&i.length>22&&ip(r,i,22,!1),d(f,m)}finally{Ea(b)}}function mf(r,i,d){if(Bi(i)){const m=i.directiveEnd;for(let b=i.directiveStart;b<m;b++){const A=r.data[b];A.contentQueries&&A.contentQueries(1,d[b],b)}}}function qm(r,i,d){!ce()||(function Rg(r,i,d,f){const m=d.directiveStart,b=d.directiveEnd;Vr(d)&&function Lg(r,i,d){const f=vs(i,r),m=vf(d),b=r[10],A=$c(r,Sl(r,m,null,d.onPush?32:16,f,i,b,b.createRenderer(f,d),null,null,null));r[i.index]=A}(i,d,r.data[m+d.componentOffset]),r.firstCreatePass||so(d,i),_s(f,i);const A=d.initialInputs;for(let L=m;L<b;L++){const $=r.data[L],oe=En(i,r,L,d);_s(oe,i),null!==A&&Zm(0,L-m,oe,$,0,A),As($)&&(Ns(d.index,i)[8]=En(i,r,L,d))}}(r,i,d,vs(d,i)),64==(64&d.flags)&&Ng(r,i,d))}function Pg(r,i,d=vs){const f=i.localNames;if(null!==f){let m=i.index+1;for(let b=0;b<f.length;b+=2){const A=f[b+1],L=-1===A?d(i,r):r[A];r[m++]=L}}}function vf(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=yf(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function yf(r,i,d,f,m,b,A,L,$,oe){const Ce=22+f,We=Ce+m,pt=function _f(r,i){const d=[];for(let f=0;f<i;f++)d.push(f<r?null:pi);return d}(Ce,We),Ot="function"==typeof oe?oe():oe;return pt[1]={type:r,blueprint:pt,template:d,queries:null,viewQuery:L,declTNode:i,data:pt.slice().fill(null,Ce),bindingStartIndex:Ce,expandoStartIndex:We,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof A?A():A,firstChild:null,schemas:$,consts:Ot,incompleteFirstPass:!1}}function el(r,i,d,f){const m=Dh(i);null===d?m.push(f):(m.push(d),r.firstCreatePass&&Iy(r).push(f,m.length-1))}function kg(r,i,d,f){for(let m in r)if(r.hasOwnProperty(m)){d=null===d?{}:d;const b=r[m];null===f?fp(d,i,m,b):f.hasOwnProperty(m)&&fp(d,i,f[m],b)}return d}function fp(r,i,d,f){r.hasOwnProperty(d)?r[d].push(i,f):r[d]=[i,f]}function Dl(r,i){const d=Ns(i,r);16&d[2]||(d[2]|=32)}function Mg(r,i,d,f){let m=!1;if(ce()){const b=null===f?null:{"":-1},A=function Ch(r,i){const d=r.directiveRegistry;let f=null,m=null;if(d)for(let b=0;b<d.length;b++){const A=d[b];if(Nm(i,A.selectors,!1))if(f||(f=[]),As(A))if(null!==A.findHostDirectiveDefs){const L=[];m=m||new Map,A.findHostDirectiveDefs(A,L,m),f.unshift(...L,A),mp(r,i,L.length)}else f.unshift(A),mp(r,i,0);else m=m||new Map,A.findHostDirectiveDefs?.(A,f,m),f.push(A)}return null===f?null:[f,m]}(r,d);let L,$;null===A?L=$=null:[L,$]=A,null!==L&&(m=!0,gp(r,i,d,L,b,$)),b&&function p0(r,i,d){if(i){const f=r.localNames=[];for(let m=0;m<i.length;m+=2){const b=d[i[m+1]];if(null==b)throw new Fe(-301,!1);f.push(i[m],b)}}}(d,f,b)}return d.mergedAttrs=Rn(d.mergedAttrs,d.attrs),m}function gp(r,i,d,f,m,b){for(let oe=0;oe<f.length;oe++)La(so(d,i),r,f[oe].type);!function Sy(r,i,d){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+d,r.providerIndexes=i}(d,r.data.length,f.length);for(let oe=0;oe<f.length;oe++){const Ce=f[oe];Ce.providersResolver&&Ce.providersResolver(Ce)}let A=!1,L=!1,$=Pd(r,i,f.length,null);for(let oe=0;oe<f.length;oe++){const Ce=f[oe];d.mergedAttrs=Rn(d.mergedAttrs,Ce.hostAttrs),Dy(r,d,i,$,Ce),g0($,Ce,m),null!==Ce.contentQueries&&(d.flags|=4),(null!==Ce.hostBindings||null!==Ce.hostAttrs||0!==Ce.hostVars)&&(d.flags|=64);const We=Ce.type.prototype;!A&&(We.ngOnChanges||We.ngOnInit||We.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(d.index),A=!0),!L&&(We.ngOnChanges||We.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(d.index),L=!0),$++}!function Wm(r,i,d){const m=i.directiveEnd,b=r.data,A=i.attrs,L=[];let $=null,oe=null;for(let Ce=i.directiveStart;Ce<m;Ce++){const We=b[Ce],pt=d?d.get(We):null,sn=pt?pt.outputs:null;$=kg(We.inputs,Ce,$,pt?pt.inputs:null),oe=kg(We.outputs,Ce,oe,sn);const Pn=null===$||null===A||gg(i)?null:m0($,Ce,A);L.push(Pn)}null!==$&&($.hasOwnProperty("class")&&(i.flags|=8),$.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=L,i.inputs=$,i.outputs=oe}(r,d,b)}function Ng(r,i,d){const f=d.directiveStart,m=d.directiveEnd,b=d.index,A=function Na(){return Sr.lFrame.currentDirectiveIndex}();try{Ea(b);for(let L=f;L<m;L++){const $=r.data[L],oe=i[L];aa(L),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&Cy($,oe)}}finally{Ea(-1),aa(A)}}function Cy(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function mp(r,i,d){i.componentOffset=d,(r.components||(r.components=[])).push(i.index)}function g0(r,i,d){if(d){if(i.exportAs)for(let f=0;f<i.exportAs.length;f++)d[i.exportAs[f]]=r;As(i)&&(d[""]=r)}}function Dy(r,i,d,f,m){r.data[f]=m;const b=m.factory||(m.factory=Js(m.type)),A=new ai(b,As(m),wh);r.blueprint[f]=A,d[f]=A,function wy(r,i,d,f,m){const b=m.hostBindings;if(b){let A=r.hostBindingOpCodes;null===A&&(A=r.hostBindingOpCodes=[]);const L=~i.index;(function Og(r){let i=r.length;for(;i>0;){const d=r[--i];if("number"==typeof d&&d<0)return d}return 0})(A)!=L&&A.push(L),A.push(d,f,b)}}(r,i,f,Pd(r,d,m.hostVars,pi),m)}function Fu(r,i,d,f,m,b){const A=vs(r,i);!function Km(r,i,d,f,m,b,A){if(null==b)r.removeAttribute(i,m,d);else{const L=null==A?st(b):A(b,f||"",m);r.setAttribute(i,m,L,d)}}(i[11],A,b,r.value,d,f,m)}function Zm(r,i,d,f,m,b){const A=b[i];if(null!==A){const L=f.setInput;for(let $=0;$<A.length;){const oe=A[$++],Ce=A[$++],We=A[$++];null!==L?f.setInput(d,We,oe,Ce):d[Ce]=We}}}function m0(r,i,d){let f=null,m=0;for(;m<d.length;){const b=d[m];if(0!==b)if(5!==b){if("number"==typeof b)break;if(r.hasOwnProperty(b)){null===f&&(f=[]);const A=r[b];for(let L=0;L<A.length;L+=2)if(A[L]===i){f.push(b,A[L+1],d[m+1]);break}}m+=2}else m+=2;else m+=4}return f}function Sh(r,i,d,f){return[r,!0,!1,i,null,0,f,d,null,null]}function Ay(r,i){const d=Ns(i,r);if(po(d)){const f=d[1];48&d[2]?Ig(f,d,f.template,d[8]):d[5]>0&&vp(d)}}function vp(r){for(let f=_u(r);null!==f;f=nh(f))for(let m=10;m<f.length;m++){const b=f[m];if(po(b))if(512&b[2]){const A=b[1];Ig(A,b,A.template,b[8])}else b[5]>0&&vp(b)}const d=r[1].components;if(null!==d)for(let f=0;f<d.length;f++){const m=Ns(d[f],r);po(m)&&m[5]>0&&vp(m)}}function Qm(r,i){const d=Ns(i,r),f=d[1];(function Xm(r,i){for(let d=i.length;d<r.blueprint.length;d++)i.push(r.blueprint[d])})(f,d),zm(f,d,d[8])}function $c(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Ec(r){for(;r;){r[2]|=32;const i=dc(r);if(Yo(r)&&!i)return r;r=i}return null}function Tf(r,i,d,f=!0){const m=i[10];m.begin&&m.begin();try{Ig(r,i,r.template,d)}catch(A){throw f&&Fg(i,A),A}finally{m.end&&m.end()}}function kd(r,i,d){ua(0),i(r,d)}function Dh(r){return r[7]||(r[7]=[])}function Iy(r){return r.cleanup||(r.cleanup=[])}function Fg(r,i){const d=r[9],f=d?d.get(Cd,null):null;f&&f.handleError(i)}function yp(r,i,d,f,m){for(let b=0;b<d.length;){const A=d[b++],L=d[b++],$=i[A],oe=r.data[A];null!==oe.setInput?oe.setInput($,m,f,L):$[L]=m}}function xl(r,i,d){const f=Vo(i,r);!function qf(r,i,d){r.setValue(i,d)}(r[11],f,d)}function Ef(r,i,d){let f=d?r.styles:null,m=d?r.classes:null,b=0;if(null!==i)for(let A=0;A<i.length;A++){const L=i[A];"number"==typeof L?b=L:1==b?m=Ae(m,L):2==b&&(f=Ae(f,L+": "+i[++A]+";"))}d?r.styles=f:r.stylesWithoutHost=f,d?r.classes=m:r.classesWithoutHost=m}function jg(r,i,d,f,m=!1){for(;null!==d;){const b=i[d.index];if(null!==b&&f.push(cs(b)),gs(b))for(let L=10;L<b.length;L++){const $=b[L],oe=$[1].firstChild;null!==oe&&jg($[1],$,oe,f)}const A=d.type;if(8&A)jg(r,i,d.child,f);else if(32&A){const L=dd(d,i);let $;for(;$=L();)f.push($)}else if(16&A){const L=Ou(i,d);if(Array.isArray(L))f.push(...L);else{const $=dc(i[16]);jg($[1],$,L,f,!0)}}d=m?d.projectionNext:d.next}return f}class _p{constructor(i,d){this._lView=i,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,d=i[1];return jg(d,i,d.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(gs(i)){const d=i[8],f=d?d.indexOf(this):-1;f>-1&&(Gl(i,f),Jt(d,f))}this._attachedToViewContainer=!1}eg(this._lView[1],this._lView)}onDestroy(i){el(this._lView[1],this._lView,null,i)}markForCheck(){Ec(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Tf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vs(r,i){pd(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Fe(902,!1);this._appRef=i}}class Jm extends _p{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Tf(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class bp extends _h{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const d=tr(i);return new wf(d,this.ngModule)}}function ev(r){const i=[];for(let d in r)r.hasOwnProperty(d)&&i.push({propName:r[d],templateName:d});return i}class y0{constructor(i,d){this.injector=i,this.parentInjector=d}get(i,d,f){f=er(f);const m=this.injector.get(i,dg,f);return m!==dg||d===dg?m:this.parentInjector.get(i,d,f)}}class wf extends ag{constructor(i,d){super(),this.componentDef=i,this.ngModule=d,this.componentType=i.type,this.selector=function Ha(r){return r.map(jm).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return ev(this.componentDef.inputs)}get outputs(){return ev(this.componentDef.outputs)}create(i,d,f,m){let b=(m=m||this.ngModule)instanceof Ju?m:m?.injector;b&&null!==this.componentDef.getStandaloneInjector&&(b=this.componentDef.getStandaloneInjector(b)||b);const A=b?new y0(i,b):i,L=A.get(uf,null);if(null===L)throw new Fe(407,!1);const $=A.get(np,null),oe=L.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",We=f?function hp(r,i,d){return r.selectRootElement(i,d===Br.ShadowDom)}(oe,f,this.componentDef.encapsulation):pl(oe,Ce,function ky(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(Ce)),pt=this.componentDef.onPush?288:272,Ot=yf(0,null,null,1,0,null,null,null,null,null),sn=Sl(null,Ot,null,pt,null,null,L,oe,$,A,null);let Pn,Qn;Ta(sn);try{const yr=this.componentDef;let ii,_n=null;yr.findHostDirectiveDefs?(ii=[],_n=new Map,yr.findHostDirectiveDefs(yr,ii,_n),ii.push(yr)):ii=[yr];const Di=function tv(r,i){const d=r[1];return r[22]=i,Id(d,22,2,"#host",null)}(sn,We),va=function Oy(r,i,d,f,m,b,A,L){const $=m[1];!function _0(r,i,d,f){for(const m of r)i.mergedAttrs=Rn(i.mergedAttrs,m.hostAttrs);null!==i.mergedAttrs&&(Ef(i,i.mergedAttrs,!0),null!==d&&md(f,d,i))}(f,r,i,A);const oe=b.createRenderer(i,d),Ce=Sl(m,vf(d),null,d.onPush?32:16,m[r.index],r,b,oe,L||null,null,null);return $.firstCreatePass&&mp($,r,f.length-1),$c(m,Ce),m[r.index]=Ce}(Di,We,yr,ii,sn,L,oe);Qn=Rs(Ot,22),We&&function T0(r,i,d,f){if(f)ci(r,d,["ng-version",cf.full]);else{const{attrs:m,classes:b}=function py(r){const i=[],d=[];let f=1,m=2;for(;f<r.length;){let b=r[f];if("string"==typeof b)2===m?""!==b&&i.push(b,r[++f]):8===m&&d.push(b);else{if(!eu(m))break;m=b}f++}return{attrs:i,classes:d}}(i.selectors[0]);m&&ci(r,d,m),b&&b.length>0&&fu(r,d,b.join(" "))}}(oe,yr,We,f),void 0!==d&&function nv(r,i,d){const f=r.projection=[];for(let m=0;m<i.length;m++){const b=d[m];f.push(null!=b?Array.from(b):null)}}(Qn,this.ngContentSelectors,d),Pn=function b0(r,i,d,f,m,b){const A=Un(),L=m[1],$=vs(A,m);gp(L,m,A,d,null,f);for(let Ce=0;Ce<d.length;Ce++)_s(En(m,L,A.directiveStart+Ce,A),m);Ng(L,m,A),$&&_s($,m);const oe=En(m,L,A.directiveStart+A.componentOffset,A);if(r[8]=m[8]=oe,null!==b)for(const Ce of b)Ce(oe,i);return mf(L,A,r),oe}(va,yr,ii,_n,sn,[rv]),zm(Ot,sn,null)}finally{Ic()}return new My(this.componentType,Pn,_c(Qn,sn),sn,Qn)}}class My extends ty{constructor(i,d,f,m,b){super(),this.location=f,this._rootLView=m,this._tNode=b,this.instance=d,this.hostView=this.changeDetectorRef=new Jm(m),this.componentType=i}setInput(i,d){const f=this._tNode.inputs;let m;if(null!==f&&(m=f[i])){const b=this._rootLView;yp(b[1],b,m,i,d),Dl(b,this._tNode.index)}}get injector(){return new uu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function rv(){const r=Un();ue(Ge()[1],r)}function iv(r){let i=function Tp(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),d=!0;const f=[r];for(;i;){let m;if(As(r))m=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Fe(903,!1);m=i.\u0275dir}if(m){if(d){f.push(m);const A=r;A.inputs=ov(r.inputs),A.declaredInputs=ov(r.declaredInputs),A.outputs=ov(r.outputs);const L=m.hostBindings;L&&av(r,L);const $=m.viewQuery,oe=m.contentQueries;if($&&Ep(r,$),oe&&wp(r,oe),ae(r.inputs,m.inputs),ae(r.declaredInputs,m.declaredInputs),ae(r.outputs,m.outputs),As(m)&&m.data.animation){const Ce=r.data;Ce.animation=(Ce.animation||[]).concat(m.data.animation)}}const b=m.features;if(b)for(let A=0;A<b.length;A++){const L=b[A];L&&L.ngInherit&&L(r),L===iv&&(d=!1)}}i=Object.getPrototypeOf(i)}!function sv(r){let i=0,d=null;for(let f=r.length-1;f>=0;f--){const m=r[f];m.hostVars=i+=m.hostVars,m.hostAttrs=Rn(m.hostAttrs,d=Rn(d,m.hostAttrs))}}(f)}function ov(r){return r===mi?{}:r===pe?[]:r}function Ep(r,i){const d=r.viewQuery;r.viewQuery=d?(f,m)=>{i(f,m),d(f,m)}:i}function wp(r,i){const d=r.contentQueries;r.contentQueries=d?(f,m,b)=>{i(f,m,b),d(f,m,b)}:i}function av(r,i){const d=r.hostBindings;r.hostBindings=d?(f,m)=>{i(f,m),d(f,m)}:i}let wc=null;function il(){if(!wc){const r=ur.Symbol;if(r&&r.iterator)wc=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<i.length;++d){const f=i[d];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(wc=f)}}}return wc}function Ql(r){return!!Cf(r)&&(Array.isArray(r)||!(r instanceof Map)&&il()in r)}function Cf(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function sl(r,i,d){return r[i]=d}function Ga(r,i,d){return!Object.is(r[i],d)&&(r[i]=d,!0)}function xh(r,i,d,f){const m=Ga(r,i,d);return Ga(r,i+1,f)||m}function dv(r,i,d,f){const m=Ge();return Ga(m,Zs(),i)&&(Ut(),Fu(Li(),m,r,i,d,f)),dv}function Nd(r,i,d,f,m,b){const L=xh(r,function Vi(){return Sr.lFrame.bindingIndex}(),d,m);return Es(2),L?i+st(d)+f+st(m)+b:pi}function Ki(r,i,d,f,m,b,A,L){const $=Ge(),oe=Ut(),Ce=r+22,We=oe.firstCreatePass?function Hg(r,i,d,f,m,b,A,L,$){const oe=i.consts,Ce=Id(i,r,4,A||null,mo(oe,L));Mg(i,d,Ce,mo(oe,$)),ue(i,Ce);const We=Ce.tViews=yf(2,Ce,f,m,b,i.directiveRegistry,i.pipeRegistry,null,i.schemas,oe);return null!==i.queries&&(i.queries.template(i,Ce),We.queries=i.queries.embeddedTView(Ce)),Ce}(Ce,oe,$,i,d,f,m,b,A):oe.data[Ce];Qr(We,!1);const pt=$[11].createComment("");mc(oe,$,pt,We),_s(pt,$),$c($,$[Ce]=Sh(pt,$,pt,We)),gu(We)&&qm(oe,$,We),null!=A&&Pg($,We,L)}function mv(r){return Ks(function Xi(){return Sr.lFrame.contextLView}(),22+r)}function Gg(r,i,d){const f=Ge();return Ga(f,Zs(),i)&&function Ko(r,i,d,f,m,b,A,L){const $=vs(i,d);let Ce,oe=i.inputs;!L&&null!=oe&&(Ce=oe[f])?(yp(r,d,Ce,f,m),Vr(i)&&Dl(d,i.index)):3&i.type&&(f=function pp(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(f),m=null!=A?A(m,i.value||"",f):m,b.setProperty($,f,m))}(Ut(),Li(),f,r,i,f[11],d,!1),Gg}function Cc(r,i,d,f,m){const A=m?"class":"style";yp(r,d,i.inputs[A],A,f)}function Sc(r,i,d,f){const m=Ge(),b=Ut(),A=22+r,L=m[11],$=m[A]=pl(L,i,function Su(){return Sr.lFrame.currentNamespace}()),oe=b.firstCreatePass?function Zi(r,i,d,f,m,b,A){const L=i.consts,oe=Id(i,r,2,m,mo(L,b));return Mg(i,d,oe,mo(L,A)),null!==oe.attrs&&Ef(oe,oe.attrs,!1),null!==oe.mergedAttrs&&Ef(oe,oe.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,oe),oe}(A,b,m,0,i,d,f):b.data[A];return Qr(oe,!0),md(L,$,oe),32!=(32&oe.flags)&&mc(b,m,$,oe),0===function K(){return Sr.lFrame.elementDepthCount}()&&_s($,m),function w(){Sr.lFrame.elementDepthCount++}(),gu(oe)&&(qm(b,m,oe),mf(b,oe,m)),null!==f&&Pg(m,oe),Sc}function xp(){let r=Un();Ni()?Ar():(r=r.parent,Qr(r,!1));const i=r;!function k(){Sr.lFrame.elementDepthCount--}();const d=Ut();return d.firstCreatePass&&(ue(d,r),Bi(r)&&d.queries.elementEnd(r)),null!=i.classesWithoutHost&&function bi(r){return 0!=(8&r.flags)}(i)&&Cc(d,i,Ge(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function to(r){return 0!=(16&r.flags)}(i)&&Cc(d,i,Ge(),i.stylesWithoutHost,!1),xp}function $g(r,i,d,f){return Sc(r,i,d,f),xp(),$g}function Yc(r,i,d){const f=Ge(),m=Ut(),b=r+22,A=m.firstCreatePass?function Zc(r,i,d,f,m){const b=i.consts,A=mo(b,f),L=Id(i,r,8,"ng-container",A);return null!==A&&Ef(L,A,!0),Mg(i,d,L,mo(b,m)),null!==i.queries&&i.queries.elementStart(i,L),L}(b,m,f,i,d):m.data[b];Qr(A,!0);const L=f[b]=f[11].createComment("");return mc(m,f,L,A),_s(L,f),gu(A)&&(qm(m,f,A),mf(m,A,f)),null!=d&&Pg(f,A),Yc}function Hs(){let r=Un();const i=Ut();return Ni()?Ar():(r=r.parent,Qr(r,!1)),i.firstCreatePass&&(ue(i,r),Bi(r)&&i.queries.elementEnd(r)),Hs}function Jl(){return Ge()}function zg(r){return!!r&&"function"==typeof r.then}function xf(r){return!!r&&"function"==typeof r.subscribe}const Ap=xf;function jd(r,i,d,f){const m=Ge(),b=Ut(),A=Un();return function Ip(r,i,d,f,m,b,A){const L=gu(f),oe=r.firstCreatePass&&Iy(r),Ce=i[8],We=Dh(i);let pt=!0;if(3&f.type||A){const Pn=vs(f,i),Qn=A?A(Pn):Pn,yr=We.length,ii=A?Di=>A(cs(Di[f.index])):f.index;let _n=null;if(!A&&L&&(_n=function Ph(r,i,d,f){const m=r.cleanup;if(null!=m)for(let b=0;b<m.length-1;b+=2){const A=m[b];if(A===d&&m[b+1]===f){const L=i[7],$=m[b+2];return L.length>$?L[$]:null}"string"==typeof A&&(b+=2)}return null}(r,i,m,f.index)),null!==_n)(_n.__ngLastListenerFn__||_n).__ngNextListenerFn__=b,_n.__ngLastListenerFn__=b,pt=!1;else{b=w0(f,i,Ce,b,!1);const Di=d.listen(Qn,m,b);We.push(b,Di),oe&&oe.push(m,ii,yr,yr+1)}}else b=w0(f,i,Ce,b,!1);const Ot=f.outputs;let sn;if(pt&&null!==Ot&&(sn=Ot[m])){const Pn=sn.length;if(Pn)for(let Qn=0;Qn<Pn;Qn+=2){const va=i[sn[Qn]][sn[Qn+1]].subscribe(b),su=We.length;We.push(b,va),oe&&oe.push(m,f.index,su,-(su+1))}}}(b,m,m[11],A,r,i,f),jd}function vv(r,i,d,f){try{return!1!==d(f)}catch(m){return Fg(r,m),!1}}function w0(r,i,d,f,m){return function b(A){if(A===Function)return f;Ec(r.componentOffset>-1?Ns(r.index,i):i);let $=vv(i,0,f,A),oe=b.__ngNextListenerFn__;for(;oe;)$=vv(i,0,oe,A)&&$,oe=oe.__ngNextListenerFn__;return m&&!1===$&&(A.preventDefault(),A.returnValue=!1),$}}function kh(r=1){return function Cu(r){return(Sr.lFrame.contextLView=function Gu(r,i){for(;r>0;)i=i[15],r--;return i}(r,Sr.lFrame.contextLView))[8]}(r)}function jy(r,i){let d=null;const f=function dy(r){const i=r.attrs;if(null!=i){const d=i.indexOf(5);if(0==(1&d))return i[d+1]}return null}(r);for(let m=0;m<i.length;m++){const b=i[m];if("*"!==b){if(null===f?Nm(r,b,!0):fy(f,b))return m}else d=m}return d}function C0(r){const i=Ge()[16][6];if(!i.projection){const f=i.projection=wn(r?r.length:1,null),m=f.slice();let b=i.child;for(;null!==b;){const A=r?jy(b,r):0;null!==A&&(m[A]?m[A].projectionNext=b:f[A]=b,m[A]=b),b=b.next}}}function yv(r,i=0,d){const f=Ge(),m=Ut(),b=Id(m,22+r,16,null,d||null);null===b.projection&&(b.projection=i),Ar(),32!=(32&b.flags)&&function ri(r,i,d){oh(i[11],0,i,d,gc(r,d,i),nf(d.parent||i[6],d,i))}(m,f,b)}function H(r,i){return r<<17|i<<2}function Y(r){return r>>17&32767}function je(r){return 2|r}function Pe(r){return(131068&r)>>2}function Re(r,i){return-131069&r|i<<2}function It(r){return 1|r}function Hn(r,i,d,f,m){const b=r[d+1],A=null===i;let L=f?Y(b):Pe(b),$=!1;for(;0!==L&&(!1===$||A);){const Ce=r[L+1];gn(r[L],i)&&($=!0,r[L+1]=f?It(Ce):je(Ce)),L=f?Y(Ce):Pe(Ce)}$&&(r[d+1]=f?je(b):It(b))}function gn(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&Cs(r,i)>=0}function Uy(r,i){return function ka(r,i,d,f){const m=Ge(),b=Ut(),A=Es(2);b.firstUpdatePass&&function Xc(r,i,d,f){const m=r.data;if(null===m[d+1]){const b=m[Go()],A=function Bd(r,i){return i>=r.expandoStartIndex}(r,d);(function Tv(r,i){return 0!=(r.flags&(i?8:16))})(b,f)&&null===i&&!A&&(i=!1),i=function Vd(r,i,d,f){const m=function _o(r){const i=Sr.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let b=f?i.residualClasses:i.residualStyles;if(null===m)0===(f?i.classBindings:i.styleBindings)&&(d=Pp(d=Hd(null,r,i,d,f),i.attrs,f),b=null);else{const A=i.directiveStylingLast;if(-1===A||r[A]!==m)if(d=Hd(m,r,i,d,f),null===b){let $=function bv(r,i,d){const f=d?i.classBindings:i.styleBindings;if(0!==Pe(f))return r[Y(f)]}(r,i,f);void 0!==$&&Array.isArray($)&&($=Hd(null,r,i,$[1],f),$=Pp($,i.attrs,f),function ks(r,i,d,f){r[Y(d?i.classBindings:i.styleBindings)]=f}(r,i,f,$))}else b=function By(r,i,d){let f;const m=i.directiveEnd;for(let b=1+i.directiveStylingLast;b<m;b++)f=Pp(f,r[b].hostAttrs,d);return Pp(f,i.attrs,d)}(r,i,f)}return void 0!==b&&(f?i.residualClasses=b:i.residualStyles=b),d}(m,b,i,f),function Kt(r,i,d,f,m,b){let A=b?i.classBindings:i.styleBindings,L=Y(A),$=Pe(A);r[f]=d;let Ce,oe=!1;if(Array.isArray(d)){const We=d;Ce=We[1],(null===Ce||Cs(We,Ce)>0)&&(oe=!0)}else Ce=d;if(m)if(0!==$){const pt=Y(r[L+1]);r[f+1]=H(pt,L),0!==pt&&(r[pt+1]=Re(r[pt+1],f)),r[L+1]=function we(r,i){return 131071&r|i<<17}(r[L+1],f)}else r[f+1]=H(L,0),0!==L&&(r[L+1]=Re(r[L+1],f)),L=f;else r[f+1]=H($,0),0===L?L=f:r[$+1]=Re(r[$+1],f),$=f;oe&&(r[f+1]=je(r[f+1])),Hn(r,Ce,f,!0),Hn(r,Ce,f,!1),function jn(r,i,d,f,m){const b=m?r.residualClasses:r.residualStyles;null!=b&&"string"==typeof i&&Cs(b,i)>=0&&(d[f+1]=It(d[f+1]))}(i,Ce,r,f,b),A=H(L,$),b?i.classBindings=A:i.styleBindings=A}(m,b,i,d,A,f)}}(b,r,A,f),i!==pi&&Ga(m,A,i)&&function Af(r,i,d,f,m,b,A,L){if(!(3&i.type))return;const $=r.data,oe=$[L+1],Ce=function Bt(r){return 1==(1&r)}(oe)?If($,i,d,m,Pe(oe),A):void 0;kp(Ce)||(kp(b)||function Z(r){return 2==(2&r)}(oe)&&(b=If($,null,d,m,L,A)),function Uc(r,i,d,f,m){if(i)m?r.addClass(d,f):r.removeClass(d,f);else{let b=-1===f.indexOf("-")?void 0:du.DashCase;null==m?r.removeStyle(d,f,b):("string"==typeof m&&m.endsWith("!important")&&(m=m.slice(0,-10),b|=du.Important),r.setStyle(d,f,m,b))}}(f,A,Vo(Go(),d),m,b))}(b,b.data[Go()],m,m[11],r,m[A+1]=function Vy(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=He(O(r)))),r}(i,d),f,A)}(r,i,null,!0),Uy}function Hd(r,i,d,f,m){let b=null;const A=d.directiveEnd;let L=d.directiveStylingLast;for(-1===L?L=d.directiveStart:L++;L<A&&(b=i[L],f=Pp(f,b.hostAttrs,m),b!==r);)L++;return null!==r&&(d.directiveStylingLast=L),f}function Pp(r,i,d){const f=d?1:2;let m=-1;if(null!==i)for(let b=0;b<i.length;b++){const A=i[b];"number"==typeof A?m=A:m===f&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Wi(r,A,!!d||i[++b]))}return void 0===r?null:r}function If(r,i,d,f,m,b){const A=null===i;let L;for(;m>0;){const $=r[m],oe=Array.isArray($),Ce=oe?$[1]:$,We=null===Ce;let pt=d[m+1];pt===pi&&(pt=We?pe:void 0);let Ot=We?Mo(pt,f):Ce===f?pt:void 0;if(oe&&!kp(Ot)&&(Ot=Mo($,f)),kp(Ot)&&(L=Ot,A))return L;const sn=r[m+1];m=A?Y(sn):Pe(sn)}if(null!==i){let $=b?i.residualClasses:i.residualStyles;null!=$&&(L=Mo($,f))}return L}function kp(r){return void 0!==r}function us(r,i=""){const d=Ge(),f=Ut(),m=r+22,b=f.firstCreatePass?Id(f,m,1,i,null):f.data[m],A=d[m]=function fc(r,i){return r.createText(i)}(d[11],i);mc(f,d,A,b),Qr(b,!1)}function Mp(r){return Op("",r,""),Mp}function Op(r,i,d){const f=Ge(),m=function Sf(r,i,d,f){return Ga(r,Zs(),d)?i+st(d)+f:pi}(f,r,i,d);return m!==pi&&xl(f,Go(),m),Op}function ed(r,i,d,f,m){const b=Ge(),A=Nd(b,r,i,d,f,m);return A!==pi&&xl(b,Go(),A),ed}const td=void 0;var tm=["en",[["a","p"],["AM","PM"],td],[["AM","PM"],td,td],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],td,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],td,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",td,"{1} 'at' {0}",td],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Mf(r){const d=Math.floor(Math.abs(r)),f=r.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===f?1:5}];let nd={};function Uu(r){const i=function ol(r){return r.toLowerCase().replace(/_/g,"-")}(r);let d=Bp(i);if(d)return d;const f=i.split("-")[0];if(d=Bp(f),d)return d;if("en"===f)return tm;throw new Fe(701,!1)}function rd(r){return Uu(r)[Ur.PluralCase]}function Bp(r){return r in nd||(nd[r]=ur.ng&&ur.ng.common&&ur.ng.common.locales&&ur.ng.common.locales[r]),nd[r]}var Ur=(()=>((Ur=Ur||{})[Ur.LocaleId=0]="LocaleId",Ur[Ur.DayPeriodsFormat=1]="DayPeriodsFormat",Ur[Ur.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ur[Ur.DaysFormat=3]="DaysFormat",Ur[Ur.DaysStandalone=4]="DaysStandalone",Ur[Ur.MonthsFormat=5]="MonthsFormat",Ur[Ur.MonthsStandalone=6]="MonthsStandalone",Ur[Ur.Eras=7]="Eras",Ur[Ur.FirstDayOfWeek=8]="FirstDayOfWeek",Ur[Ur.WeekendRange=9]="WeekendRange",Ur[Ur.DateFormat=10]="DateFormat",Ur[Ur.TimeFormat=11]="TimeFormat",Ur[Ur.DateTimeFormat=12]="DateTimeFormat",Ur[Ur.NumberSymbols=13]="NumberSymbols",Ur[Ur.NumberFormats=14]="NumberFormats",Ur[Ur.CurrencyCode=15]="CurrencyCode",Ur[Ur.CurrencySymbol=16]="CurrencySymbol",Ur[Ur.CurrencyName=17]="CurrencyName",Ur[Ur.Currencies=18]="Currencies",Ur[Ur.Directionality=19]="Directionality",Ur[Ur.PluralCase=20]="PluralCase",Ur[Ur.ExtraData=21]="ExtraData",Ur))();const qd="en-US";let xv=qd;function nt(r,i,d,f,m){if(r=Me(r),Array.isArray(r))for(let b=0;b<r.length;b++)nt(r[b],i,d,f,m);else{const b=Ut(),A=Ge();let L=El(r)?r:Me(r.provide),$=Im(r);const oe=Un(),Ce=1048575&oe.providerIndexes,We=oe.directiveStart,pt=oe.providerIndexes>>20;if(El(r)||!r.multi){const Ot=new ai($,m,wh),sn=mn(L,i,m?Ce:Ce+pt,We);-1===sn?(La(so(oe,A),b,L),Pt(b,r,i.length),i.push(L),oe.directiveStart++,oe.directiveEnd++,m&&(oe.providerIndexes+=1048576),d.push(Ot),A.push(Ot)):(d[sn]=Ot,A[sn]=Ot)}else{const Ot=mn(L,i,Ce+pt,We),sn=mn(L,i,Ce,Ce+pt),Pn=Ot>=0&&d[Ot],Qn=sn>=0&&d[sn];if(m&&!Qn||!m&&!Pn){La(so(oe,A),b,L);const yr=function So(r,i,d,f,m){const b=new ai(r,d,wh);return b.multi=[],b.index=i,b.componentProviders=0,rn(b,m,f&&!d),b}(m?Tr:qn,d.length,m,f,$);!m&&Qn&&(d[sn].providerFactory=yr),Pt(b,r,i.length,0),i.push(L),oe.directiveStart++,oe.directiveEnd++,m&&(oe.providerIndexes+=1048576),d.push(yr),A.push(yr)}else Pt(b,r,Ot>-1?Ot:sn,rn(d[m?sn:Ot],$,!m&&f));!m&&f&&Qn&&d[sn].componentProviders++}}}function Pt(r,i,d,f){const m=El(i),b=function xm(r){return!!r.useClass}(i);if(m||b){const $=(b?Me(i.useClass):i).prototype.ngOnDestroy;if($){const oe=r.destroyHooks||(r.destroyHooks=[]);if(!m&&i.multi){const Ce=oe.indexOf(d);-1===Ce?oe.push(d,[f,$]):oe[Ce+1].push(f,$)}else oe.push(d,$)}}}function rn(r,i,d){return d&&r.componentProviders++,r.multi.push(i)-1}function mn(r,i,d,f){for(let m=d;m<f;m++)if(i[m]===r)return m;return-1}function qn(r,i,d,f){return Ms(this.multi,[])}function Tr(r,i,d,f){const m=this.multi;let b;if(this.providerFactory){const A=this.providerFactory.componentProviders,L=En(d,d[1],this.providerFactory.index,f);b=L.slice(0,A),Ms(m,b);for(let $=A;$<L.length;$++)b.push(L[$])}else b=[],Ms(m,b);return b}function Ms(r,i){for(let d=0;d<r.length;d++)i.push((0,r[d])());return i}function ts(r,i=[]){return d=>{d.providersResolver=(f,m)=>function ke(r,i,d){const f=Ut();if(f.firstCreatePass){const m=As(r);nt(d,f.data,f.blueprint,m,!0),nt(i,f.data,f.blueprint,m,!1)}}(f,m?m(r):r,i)}}class $s{}class _e{}function I(r,i){return new U(r,i??null)}class U extends $s{constructor(i,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bp(this);const f=is(i);this._bootstrapComponents=Tc(f.bootstrap),this._r3Injector=ap(i,d,[{provide:$s,useValue:this},{provide:_h,useValue:this.componentFactoryResolver}],He(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class z extends _e{constructor(i){super(),this.moduleType=i}create(i){return new U(this.moduleType,i)}}class se extends $s{constructor(i,d,f){super(),this.componentFactoryResolver=new bp(this),this.instance=null;const m=new Jv([...i,{provide:$s,useValue:this},{provide:_h,useValue:this.componentFactoryResolver}],d||Kl(),f,new Set(["environment"]));this.injector=m,m.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function he(r,i,d=null){return new se(r,i,d).injector}let Ue=(()=>{class r{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const f=Dm(0,d.type),m=f.length>0?he([f],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,m)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=Gt({token:r,providedIn:"environment",factory:()=>new r(dn(Ju))}),r})();function Ze(r){r.getStandaloneInjector=i=>i.get(Ue).getOrCreateStandaloneInjector(r)}function ma(r,i,d){const f=ar()+r,m=Ge();return m[f]===pi?sl(m,f,d?i.call(d):i()):function Sp(r,i){return r[i]}(m,f)}function G0(r,i,d,f){return U_(Ge(),ar(),r,i,d,f)}function Uf(r,i,d,f,m){return function B_(r,i,d,f,m,b,A){const L=i+d;return xh(r,L,m,b)?sl(r,L+2,A?f.call(A,m,b):f(m,b)):$0(r,L+2)}(Ge(),ar(),r,i,d,f,m)}function $0(r,i){const d=r[i];return d===pi?void 0:d}function U_(r,i,d,f,m,b){const A=i+d;return Ga(r,A,m)?sl(r,A+1,b?f.call(b,m):f(m)):$0(r,A+1)}function $_(r,i){const d=Ut();let f;const m=r+22;d.firstCreatePass?(f=function aT(r,i){if(i)for(let d=i.length-1;d>=0;d--){const f=i[d];if(r===f.name)return f}}(i,d.pipeRegistry),d.data[m]=f,f.onDestroy&&(d.destroyHooks||(d.destroyHooks=[])).push(m,f.onDestroy)):f=d.data[m];const b=f.factory||(f.factory=Js(f.type)),A=xr(wh);try{const L=$u(!1),$=b();return $u(L),function Fy(r,i,d,f){d>=r.data.length&&(r.data[d]=null,r.blueprint[d]=null),i[d]=f}(d,Ge(),m,$),$}finally{xr(A)}}function z_(r,i,d){const f=r+22,m=Ge(),b=Ks(m,f);return function z0(r,i){return r[1].data[i].pure}(m,f)?U_(m,ar(),i,b.transform,d,b):b.transform(d)}function g_(r){return i=>{setTimeout(r,void 0,i)}}const Bf=class hT extends E.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,d,f){let m=i,b=d||(()=>null),A=f;if(i&&"object"==typeof i){const $=i;m=$.next?.bind($),b=$.error?.bind($),A=$.complete?.bind($)}this.__isAsync&&(b=g_(b),m&&(m=g_(m)),A&&(A=g_(A)));const L=super.subscribe({next:m,error:b,complete:A});return i instanceof ie.w0&&i.add(L),L}};function fT(){return this._results[il()]()}class r_{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=il(),f=r_.prototype;f[d]||(f[d]=fT)}get changes(){return this._changes||(this._changes=new Bf)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,d){return this._results.reduce(i,d)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,d){const f=this;f.dirty=!1;const m=function ye(r){return r.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function J(r,i,d){if(r.length!==i.length)return!1;for(let f=0;f<r.length;f++){let m=r[f],b=i[f];if(d&&(m=d(m),b=d(b)),b!==m)return!1}return!0}(f._results,m,d))&&(f._results=m,f.length=m.length,f.last=m[this.length-1],f.first=m[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let q0=(()=>{class r{}return r.__NG_ELEMENT_ID__=mT,r})();const pT=q0,gT=class extends pT{constructor(i,d,f){super(),this._declarationLView=i,this._declarationTContainer=d,this.elementRef=f}createEmbeddedView(i,d){const f=this._declarationTContainer.tViews,m=Sl(this._declarationLView,f,i,16,null,f.declTNode,null,null,null,null,d||null);m[17]=this._declarationLView[this._declarationTContainer.index];const A=this._declarationLView[19];return null!==A&&(m[19]=A.createEmbeddedView(f)),zm(f,m,i),new _p(m)}};function mT(){return i_(Un(),Ge())}function i_(r,i){return 4&r.type?new gT(i,r,_c(r,i)):null}let s_=(()=>{class r{}return r.__NG_ELEMENT_ID__=vT,r})();function vT(){return K_(Un(),Ge())}const yT=s_,q_=class extends yT{constructor(i,d,f){super(),this._lContainer=i,this._hostTNode=d,this._hostLView=f}get element(){return _c(this._hostTNode,this._hostLView)}get injector(){return new uu(this._hostTNode,this._hostLView)}get parentInjector(){const i=Mr(this._hostTNode,this._hostLView);if(kn(i)){const d=ws(i,this._hostLView),f=Ht(i);return new uu(d[1].data[f+8],d)}return new uu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const d=W_(this._lContainer);return null!==d&&d[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,d,f){let m,b;"number"==typeof f?m=f:null!=f&&(m=f.index,b=f.injector);const A=i.createEmbeddedView(d||{},b);return this.insert(A,m),A}createComponent(i,d,f,m,b){const A=i&&!function B(r){return"function"==typeof r}(i);let L;if(A)L=d;else{const We=d||{};L=We.index,f=We.injector,m=We.projectableNodes,b=We.environmentInjector||We.ngModuleRef}const $=A?i:new wf(tr(i)),oe=f||this.parentInjector;if(!b&&null==$.ngModule){const pt=(A?oe:this.parentInjector).get(Ju,null);pt&&(b=pt)}const Ce=$.create(oe,m,void 0,b);return this.insert(Ce.hostView,L),Ce}insert(i,d){const f=i._lView,m=f[1];if(function go(r){return gs(r[3])}(f)){const Ce=this.indexOf(i);if(-1!==Ce)this.detach(Ce);else{const We=f[3],pt=new q_(We,We[6],We[3]);pt.detach(pt.indexOf(i))}}const b=this._adjustIndex(d),A=this._lContainer;!function rh(r,i,d,f){const m=10+f,b=d.length;f>0&&(d[m-1][4]=i),f<b-10?(i[4]=d[m],mt(d,10+f,i)):(d.push(i),i[4]=null),i[3]=d;const A=i[17];null!==A&&d!==A&&function Kf(r,i){const d=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===d?r[9]=[i]:d.push(i)}(A,i);const L=i[19];null!==L&&L.insertView(r),i[2]|=64}(m,f,A,b);const L=ga(b,A),$=f[11],oe=Ii($,A[7]);return null!==oe&&function Jp(r,i,d,f,m,b){f[0]=m,f[6]=i,pd(r,f,d,1,m,b)}(m,A[6],$,f,oe,L),i.attachToViewContainerRef(),mt(m_(A),b,i),i}move(i,d){return this.insert(i,d)}indexOf(i){const d=W_(this._lContainer);return null!==d?d.indexOf(i):-1}remove(i){const d=this._adjustIndex(i,-1),f=Gl(this._lContainer,d);f&&(Jt(m_(this._lContainer),d),eg(f[1],f))}detach(i){const d=this._adjustIndex(i,-1),f=Gl(this._lContainer,d);return f&&null!=Jt(m_(this._lContainer),d)?new _p(f):null}_adjustIndex(i,d=0){return i??this.length+d}};function W_(r){return r[8]}function m_(r){return r[8]||(r[8]=[])}function K_(r,i){let d;const f=i[r.index];if(gs(f))d=f;else{let m;if(8&r.type)m=cs(f);else{const b=i[11];m=b.createComment("");const A=vs(r,i);ml(b,Ii(b,A),m,function tf(r,i){return r.nextSibling(i)}(b,A),!1)}i[r.index]=d=Sh(f,i,m,r),$c(i,d)}return new q_(d,r,i)}class v_{constructor(i){this.queryList=i,this.matches=null}clone(){return new v_(this.queryList)}setDirty(){this.queryList.setDirty()}}class y_{constructor(i=[]){this.queries=i}createEmbeddedView(i){const d=i.queries;if(null!==d){const f=null!==i.contentQueries?i.contentQueries[0]:d.length,m=[];for(let b=0;b<f;b++){const A=d.getByIndex(b);m.push(this.queries[A.indexInDeclarationView].clone())}return new y_(m)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let d=0;d<this.queries.length;d++)null!==rb(i,d).matches&&this.queries[d].setDirty()}}class Z_{constructor(i,d,f=null){this.predicate=i,this.flags=d,this.read=f}}class __{constructor(i=[]){this.queries=i}elementStart(i,d){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(i,d)}elementEnd(i){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(i)}embeddedTView(i){let d=null;for(let f=0;f<this.length;f++){const m=null!==d?d.length:0,b=this.getByIndex(f).embeddedTView(i,m);b&&(b.indexInDeclarationView=f,null!==d?d.push(b):d=[b])}return null!==d?new __(d):null}template(i,d){for(let f=0;f<this.queries.length;f++)this.queries[f].template(i,d)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class b_{constructor(i,d=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(i,d){this.isApplyingToNode(d)&&this.matchTNode(i,d)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,d){this.elementStart(i,d)}embeddedTView(i,d){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,d),new b_(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let f=i.parent;for(;null!==f&&8&f.type&&f.index!==d;)f=f.parent;return d===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(i,d){const f=this.metadata.predicate;if(Array.isArray(f))for(let m=0;m<f.length;m++){const b=f[m];this.matchTNodeWithReadOption(i,d,_T(d,b)),this.matchTNodeWithReadOption(i,d,ys(d,i,b,!1,!1))}else f===q0?4&d.type&&this.matchTNodeWithReadOption(i,d,-1):this.matchTNodeWithReadOption(i,d,ys(d,i,f,!1,!1))}matchTNodeWithReadOption(i,d,f){if(null!==f){const m=this.metadata.read;if(null!==m)if(m===wd||m===s_||m===q0&&4&d.type)this.addMatch(d.index,-2);else{const b=ys(d,i,m,!1,!1);null!==b&&this.addMatch(d.index,b)}else this.addMatch(d.index,f)}}addMatch(i,d){null===this.matches?this.matches=[i,d]:this.matches.push(i,d)}}function _T(r,i){const d=r.localNames;if(null!==d)for(let f=0;f<d.length;f+=2)if(d[f]===i)return d[f+1];return null}function TT(r,i,d,f){return-1===d?function bT(r,i){return 11&r.type?_c(r,i):4&r.type?i_(r,i):null}(i,r):-2===d?function ET(r,i,d){return d===wd?_c(i,r):d===q0?i_(i,r):d===s_?K_(i,r):void 0}(r,i,f):En(r,r[1],d,i)}function Y_(r,i,d,f){const m=i[19].queries[f];if(null===m.matches){const b=r.data,A=d.matches,L=[];for(let $=0;$<A.length;$+=2){const oe=A[$];L.push(oe<0?null:TT(i,b[oe],A[$+1],d.metadata.read))}m.matches=L}return m.matches}function T_(r,i,d,f){const m=r.queries.getByIndex(d),b=m.matches;if(null!==b){const A=Y_(r,i,m,d);for(let L=0;L<b.length;L+=2){const $=b[L];if($>0)f.push(A[L/2]);else{const oe=b[L+1],Ce=i[-$];for(let We=10;We<Ce.length;We++){const pt=Ce[We];pt[17]===pt[3]&&T_(pt[1],pt,oe,f)}if(null!==Ce[9]){const We=Ce[9];for(let pt=0;pt<We.length;pt++){const Ot=We[pt];T_(Ot[1],Ot,oe,f)}}}}}return f}function Q_(r){const i=Ge(),d=Ut(),f=ou();ua(f+1);const m=rb(d,f);if(r.dirty&&function ea(r){return 4==(4&r[2])}(i)===(2==(2&m.metadata.flags))){if(null===m.matches)r.reset([]);else{const b=m.crossesNgTemplate?T_(d,i,f,[]):Y_(d,i,m,f);r.reset(b,cg),r.notifyOnChanges()}return!0}return!1}function X_(r,i,d){const f=Ut();f.firstCreatePass&&(nb(f,new Z_(r,i,d),-1),2==(2&i)&&(f.staticViewQueries=!0)),tb(f,Ge(),i)}function J_(r,i,d,f){const m=Ut();if(m.firstCreatePass){const b=Un();nb(m,new Z_(i,d,f),b.index),function CT(r,i){const d=r.contentQueries||(r.contentQueries=[]);i!==(d.length?d[d.length-1]:-1)&&d.push(r.queries.length-1,i)}(m,r),2==(2&d)&&(m.staticContentQueries=!0)}tb(m,Ge(),d)}function eb(){return function wT(r,i){return r[19].queries[i].queryList}(Ge(),ou())}function tb(r,i,d){const f=new r_(4==(4&d));el(r,i,f,f.destroy),null===i[19]&&(i[19]=new y_),i[19].queries.push(new v_(f))}function nb(r,i,d){null===r.queries&&(r.queries=new __),r.queries.track(new b_(i,d))}function rb(r,i){return r.queries.getByIndex(i)}function ib(r,i){return i_(r,i)}function a_(...r){}const wb=new as("Application Initializer");let u_=(()=>{class r{constructor(d){this.appInits=d,this.resolve=a_,this.reject=a_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,m)=>{this.resolve=f,this.reject=m})}runInitializers(){if(this.initialized)return;const d=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let m=0;m<this.appInits.length;m++){const b=this.appInits[m]();if(zg(b))d.push(b);else if(Ap(b)){const A=new Promise((L,$)=>{b.subscribe({complete:L,error:$})});d.push(A)}}Promise.all(d).then(()=>{f()}).catch(m=>{this.reject(m)}),0===d.length&&f(),this.initialized=!0}}return r.\u0275fac=function(d){return new(d||r)(dn(wb,8))},r.\u0275prov=Gt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Cb=new as("AppId",{providedIn:"root",factory:function Sb(){return`${D_()}${D_()}${D_()}`}});function D_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Db=new as("Platform Initializer"),$T=new as("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xb=new as("appBootstrapListener");let zT=(()=>{class r{log(d){console.log(d)}warn(d){console.warn(d)}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=Gt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const l_=new as("LocaleId",{providedIn:"root",factory:()=>Cn(l_,yn.Optional|yn.SkipSelf)||function qT(){return typeof $localize<"u"&&$localize.locale||qd}()}),WT=new as("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KT{constructor(i,d){this.ngModuleFactory=i,this.componentFactories=d}}let ZT=(()=>{class r{compileModuleSync(d){return new z(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const f=this.compileModuleSync(d),b=Tc(is(d).declarations).reduce((A,L)=>{const $=tr(L);return $&&A.push(new wf($)),A},[]);return new KT(f,b)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=Gt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const XT=(()=>Promise.resolve(0))();function x_(r){typeof Zone>"u"?XT.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Yd{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bf(!1),this.onMicrotaskEmpty=new Bf(!1),this.onStable=new Bf(!1),this.onError=new Bf(!1),typeof Zone>"u")throw new Fe(908,!1);Zone.assertZonePatched();const m=this;m._nesting=0,m._outer=m._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(m._inner=m._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(m._inner=m._inner.fork(Zone.longStackTraceZoneSpec)),m.shouldCoalesceEventChangeDetection=!f&&d,m.shouldCoalesceRunChangeDetection=f,m.lastRequestAnimationFrameId=-1,m.nativeRequestAnimationFrame=function JT(){let r=ur.requestAnimationFrame,i=ur.cancelAnimationFrame;if(typeof Zone<"u"&&r&&i){const d=r[Zone.__symbol__("OriginalDelegate")];d&&(r=d);const f=i[Zone.__symbol__("OriginalDelegate")];f&&(i=f)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function nE(r){const i=()=>{!function tE(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(ur,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,I_(r),r.isCheckStableRunning=!0,A_(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),I_(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,f,m,b,A,L)=>{try{return Pb(r),d.invokeTask(m,b,A,L)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||r.shouldCoalesceRunChangeDetection)&&i(),kb(r)}},onInvoke:(d,f,m,b,A,L,$)=>{try{return Pb(r),d.invoke(m,b,A,L,$)}finally{r.shouldCoalesceRunChangeDetection&&i(),kb(r)}},onHasTask:(d,f,m,b)=>{d.hasTask(m,b),f===m&&("microTask"==b.change?(r._hasPendingMicrotasks=b.microTask,I_(r),A_(r)):"macroTask"==b.change&&(r.hasPendingMacrotasks=b.macroTask))},onHandleError:(d,f,m,b)=>(d.handleError(m,b),r.runOutsideAngular(()=>r.onError.emit(b)),!1)})}(m)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yd.isInAngularZone())throw new Fe(909,!1)}static assertNotInAngularZone(){if(Yd.isInAngularZone())throw new Fe(909,!1)}run(i,d,f){return this._inner.run(i,d,f)}runTask(i,d,f,m){const b=this._inner,A=b.scheduleEventTask("NgZoneEvent: "+m,i,eE,a_,a_);try{return b.runTask(A,d,f)}finally{b.cancelTask(A)}}runGuarded(i,d,f){return this._inner.runGuarded(i,d,f)}runOutsideAngular(i){return this._outer.run(i)}}const eE={};function A_(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function I_(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Pb(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function kb(r){r._nesting--,A_(r)}class rE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bf,this.onMicrotaskEmpty=new Bf,this.onStable=new Bf,this.onError=new Bf}run(i,d,f){return i.apply(d,f)}runGuarded(i,d,f){return i.apply(d,f)}runOutsideAngular(i){return i()}runTask(i,d,f,m){return i.apply(d,f)}}const Mb=new as(""),Ob=new as("");let P_,iE=(()=>{class r{constructor(d,f,m){this._ngZone=d,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,P_||(function sE(r){P_=r}(m),m.addToWindow(f)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yd.assertNotInAngularZone(),x_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())x_(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(d)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,f,m){let b=-1;f&&f>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(A=>A.timeoutId!==b),d(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:d,timeoutId:b,updateCb:m})}whenStable(d,f,m){if(m&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,f,m),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,f,m){return[]}}return r.\u0275fac=function(d){return new(d||r)(dn(Yd),dn(Rb),dn(Ob))},r.\u0275prov=Gt({token:r,factory:r.\u0275fac}),r})(),Rb=(()=>{class r{constructor(){this._applications=new Map}registerApplication(d,f){this._applications.set(d,f)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,f=!0){return P_?.findTestabilityInTree(this,d,f)??null}}return r.\u0275fac=function(d){return new(d||r)},r.\u0275prov=Gt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),ym=null;const Nb=new as("AllowMultipleToken"),k_=new as("PlatformDestroyListeners");class uE{constructor(i,d){this.name=i,this.token=d}}function Fb(r,i,d=[]){const f=`Platform: ${i}`,m=new as(f);return(b=[])=>{let A=M_();if(!A||A.injector.get(Nb,!1)){const L=[...d,...b,{provide:m,useValue:!0}];r?r(L):function lE(r){if(ym&&!ym.get(Nb,!1))throw new Fe(400,!1);ym=r;const i=r.get(Ub);(function Lb(r){const i=r.get(Db,null);i&&i.forEach(d=>d())})(r)}(function jb(r=[],i){return Gc.create({name:i,providers:[{provide:Am,useValue:"platform"},{provide:k_,useValue:new Set([()=>ym=null])},...r]})}(L,f))}return function dE(r){const i=M_();if(!i)throw new Fe(401,!1);return i}()}}function M_(){return ym?.get(Ub)??null}let Ub=(()=>{class r{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,f){const m=function Vb(r,i){let d;return d="noop"===r?new rE:("zone.js"===r?void 0:r)||new Yd(i),d}(f?.ngZone,function Bb(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(f)),b=[{provide:Yd,useValue:m}];return m.run(()=>{const A=Gc.create({providers:b,parent:this.injector,name:d.moduleType.name}),L=d.create(A),$=L.injector.get(Cd,null);if(!$)throw new Fe(402,!1);return m.runOutsideAngular(()=>{const oe=m.onError.subscribe({next:Ce=>{$.handleError(Ce)}});L.onDestroy(()=>{d_(this._modules,L),oe.unsubscribe()})}),function Hb(r,i,d){try{const f=d();return zg(f)?f.catch(m=>{throw i.runOutsideAngular(()=>r.handleError(m)),m}):f}catch(f){throw i.runOutsideAngular(()=>r.handleError(f)),f}}($,m,()=>{const oe=L.injector.get(u_);return oe.runInitializers(),oe.donePromise.then(()=>(function Av(r){Yt(r,"Expected localeId to be defined"),"string"==typeof r&&(xv=r.toLowerCase().replace(/_/g,"-"))}(L.injector.get(l_,qd)||qd),this._moduleDoBootstrap(L),L))})})}bootstrapModule(d,f=[]){const m=Gb({},f);return function oE(r,i,d){const f=new z(d);return Promise.resolve(f)}(0,0,d).then(b=>this.bootstrapModuleFactory(b,m))}_moduleDoBootstrap(d){const f=d.injector.get(c_);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(m=>f.bootstrap(m));else{if(!d.instance.ngDoBootstrap)throw new Fe(403,!1);d.instance.ngDoBootstrap(f)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const d=this._injector.get(k_,null);d&&(d.forEach(f=>f()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(d){return new(d||r)(dn(Gc))},r.\u0275prov=Gt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function Gb(r,i){return Array.isArray(i)?i.reduce(Gb,r):{...r,...i}}let c_=(()=>{class r{constructor(d,f,m){this._zone=d,this._injector=f,this._exceptionHandler=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new ne.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),A=new ne.y(L=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{Yd.assertNotInAngularZone(),x_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const oe=this._zone.onUnstable.subscribe(()=>{Yd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{$.unsubscribe(),oe.unsubscribe()}});this.isStable=(0,F.T)(b,A.pipe((0,Ne.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,f){const m=d instanceof ag;if(!this._injector.get(u_).done)throw!m&&Mi(d),new Fe(405,false);let A;A=m?d:this._injector.get(_h).resolveComponentFactory(d),this.componentTypes.push(A.componentType);const L=function aE(r){return r.isBoundToModule}(A)?void 0:this._injector.get($s),oe=A.create(Gc.NULL,[],f||A.selector,L),Ce=oe.location.nativeElement,We=oe.injector.get(Mb,null);return We?.registerApplication(Ce),oe.onDestroy(()=>{this.detachView(oe.hostView),d_(this.components,oe),We?.unregisterApplication(Ce)}),this._loadComponent(oe),oe}tick(){if(this._runningTick)throw new Fe(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const f=d;this._views.push(f),f.attachToAppRef(this)}detachView(d){const f=d;d_(this._views,f),f.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(xb,[]).concat(this._bootstrapListeners).forEach(m=>m(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>d_(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new Fe(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(d){return new(d||r)(dn(Yd),dn(Ju),dn(Cd))},r.\u0275prov=Gt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function d_(r,i){const d=r.indexOf(i);d>-1&&r.splice(d,1)}function fE(){return!1}let pE=(()=>{class r{}return r.__NG_ELEMENT_ID__=gE,r})();function gE(r){return function mE(r,i,d){if(Vr(r)&&!d){const f=Ns(r.index,i);return new _p(f,f)}return 47&r.type?new _p(i[16],i):null}(Un(),Ge(),16==(16&r))}class Kb{constructor(){}supports(i){return Ql(i)}create(i){return new EE(i)}}const TE=(r,i)=>i;class EE{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||TE}forEachItem(i){let d;for(d=this._itHead;null!==d;d=d._next)i(d)}forEachOperation(i){let d=this._itHead,f=this._removalsHead,m=0,b=null;for(;d||f;){const A=!f||d&&d.currentIndex<Yb(f,m,b)?d:f,L=Yb(A,m,b),$=A.currentIndex;if(A===f)m--,f=f._nextRemoved;else if(d=d._next,null==A.previousIndex)m++;else{b||(b=[]);const oe=L-m,Ce=$-m;if(oe!=Ce){for(let pt=0;pt<oe;pt++){const Ot=pt<b.length?b[pt]:b[pt]=0,sn=Ot+pt;Ce<=sn&&sn<oe&&(b[pt]=Ot+1)}b[A.previousIndex]=Ce-oe}}L!==$&&i(A,L,$)}}forEachPreviousItem(i){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)i(d)}forEachAddedItem(i){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)i(d)}forEachMovedItem(i){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)i(d)}forEachRemovedItem(i){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)i(d)}forEachIdentityChange(i){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)i(d)}diff(i){if(null==i&&(i=[]),!Ql(i))throw new Fe(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let m,b,A,d=this._itHead,f=!1;if(Array.isArray(i)){this.length=i.length;for(let L=0;L<this.length;L++)b=i[L],A=this._trackByFn(L,b),null!==d&&Object.is(d.trackById,A)?(f&&(d=this._verifyReinsertion(d,b,A,L)),Object.is(d.item,b)||this._addIdentityChange(d,b)):(d=this._mismatch(d,b,A,L),f=!0),d=d._next}else m=0,function Ny(r,i){if(Array.isArray(r))for(let d=0;d<r.length;d++)i(r[d]);else{const d=r[il()]();let f;for(;!(f=d.next()).done;)i(f.value)}}(i,L=>{A=this._trackByFn(m,L),null!==d&&Object.is(d.trackById,A)?(f&&(d=this._verifyReinsertion(d,L,A,m)),Object.is(d.item,L)||this._addIdentityChange(d,L)):(d=this._mismatch(d,L,A,m),f=!0),d=d._next,m++}),this.length=m;return this._truncate(d),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,d,f,m){let b;return null===i?b=this._itTail:(b=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(i.item,d)||this._addIdentityChange(i,d),this._reinsertAfter(i,b,m)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(f,m))?(Object.is(i.item,d)||this._addIdentityChange(i,d),this._moveAfter(i,b,m)):i=this._addAfter(new wE(d,f),b,m),i}_verifyReinsertion(i,d,f,m){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==b?i=this._reinsertAfter(b,i._prev,m):i.currentIndex!=m&&(i.currentIndex=m,this._addToMoves(i,m)),i}_truncate(i){for(;null!==i;){const d=i._next;this._addToRemovals(this._unlink(i)),i=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,d,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const m=i._prevRemoved,b=i._nextRemoved;return null===m?this._removalsHead=b:m._nextRemoved=b,null===b?this._removalsTail=m:b._prevRemoved=m,this._insertAfter(i,d,f),this._addToMoves(i,f),i}_moveAfter(i,d,f){return this._unlink(i),this._insertAfter(i,d,f),this._addToMoves(i,f),i}_addAfter(i,d,f){return this._insertAfter(i,d,f),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,d,f){const m=null===d?this._itHead:d._next;return i._next=m,i._prev=d,null===m?this._itTail=i:m._prev=i,null===d?this._itHead=i:d._next=i,null===this._linkedRecords&&(this._linkedRecords=new Zb),this._linkedRecords.put(i),i.currentIndex=f,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const d=i._prev,f=i._next;return null===d?this._itHead=f:d._next=f,null===f?this._itTail=d:f._prev=d,i}_addToMoves(i,d){return i.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Zb),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,d){return i.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class wE{constructor(i,d){this.item=i,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CE{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,d){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===d||d<=f.currentIndex)&&Object.is(f.trackById,i))return f;return null}remove(i){const d=i._prevDup,f=i._nextDup;return null===d?this._head=f:d._nextDup=f,null===f?this._tail=d:f._prevDup=d,null===this._head}}class Zb{constructor(){this.map=new Map}put(i){const d=i.trackById;let f=this.map.get(d);f||(f=new CE,this.map.set(d,f)),f.add(i)}get(i,d){const m=this.map.get(i);return m?m.get(i,d):null}remove(i){const d=i.trackById;return this.map.get(d).remove(i)&&this.map.delete(d),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yb(r,i,d){const f=r.previousIndex;if(null===f)return f;let m=0;return d&&f<d.length&&(m=d[f]),f+i+m}class Qb{constructor(){}supports(i){return i instanceof Map||Cf(i)}create(){return new SE}}class SE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let d;for(d=this._mapHead;null!==d;d=d._next)i(d)}forEachPreviousItem(i){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)i(d)}forEachChangedItem(i){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)i(d)}forEachAddedItem(i){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)i(d)}forEachRemovedItem(i){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)i(d)}diff(i){if(i){if(!(i instanceof Map||Cf(i)))throw new Fe(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(i,(f,m)=>{if(d&&d.key===m)this._maybeAddToChanges(d,f),this._appendAfter=d,d=d._next;else{const b=this._getOrCreateRecordForKey(m,f);d=this._insertBeforeOrAppend(d,b)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let f=d;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,d){if(i){const f=i._prev;return d._next=i,d._prev=f,i._prev=d,f&&(f._next=d),i===this._mapHead&&(this._mapHead=d),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(i,d){if(this._records.has(i)){const m=this._records.get(i);this._maybeAddToChanges(m,d);const b=m._prev,A=m._next;return b&&(b._next=A),A&&(A._prev=b),m._next=null,m._prev=null,m}const f=new DE(i);return this._records.set(i,f),f.currentValue=d,this._addToAdditions(f),f}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,d){Object.is(d,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=d,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,d){i instanceof Map?i.forEach(d):Object.keys(i).forEach(f=>d(i[f],f))}}class DE{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xb(){return new F_([new Kb])}let F_=(()=>{class r{constructor(d){this.factories=d}static create(d,f){if(null!=f){const m=f.factories.slice();d=d.concat(m)}return new r(d)}static extend(d){return{provide:r,useFactory:f=>r.create(d,f||Xb()),deps:[[r,new Q,new Pu]]}}find(d){const f=this.factories.find(m=>m.supports(d));if(null!=f)return f;throw new Fe(901,!1)}}return r.\u0275prov=Gt({token:r,providedIn:"root",factory:Xb}),r})();function Jb(){return new j_([new Qb])}let j_=(()=>{class r{constructor(d){this.factories=d}static create(d,f){if(f){const m=f.factories.slice();d=d.concat(m)}return new r(d)}static extend(d){return{provide:r,useFactory:f=>r.create(d,f||Jb()),deps:[[r,new Q,new Pu]]}}find(d){const f=this.factories.find(m=>m.supports(d));if(f)return f;throw new Fe(901,!1)}}return r.\u0275prov=Gt({token:r,providedIn:"root",factory:Jb}),r})();const IE=Fb(null,"core",[]);let PE=(()=>{class r{constructor(d){}}return r.\u0275fac=function(d){return new(d||r)(dn(c_))},r.\u0275mod=Zr({type:r}),r.\u0275inj=Wn({}),r})();function kE(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},4006:(Wt,et,W)=>{"use strict";W.d(et,{F:()=>Ai,Fj:()=>rt,JJ:()=>xn,JL:()=>mr,Kr:()=>Wa,NI:()=>bs,On:()=>vn,Q7:()=>fi,UX:()=>Ns,YN:()=>no,_Y:()=>ot,c5:()=>Ao,cw:()=>Dt,kI:()=>Ve,oH:()=>Vr,sg:()=>As,u5:()=>Ks});var E=W(4650),ie=W(6895),ne=W(8996),F=W(4128),Ne=W(4004);let Be=(()=>{class te{constructor(w,k){this._renderer=w,this._elementRef=k,this.onChange=ce=>{},this.onTouched=()=>{}}setProperty(w,k){this._renderer.setProperty(this._elementRef.nativeElement,w,k)}registerOnTouched(w){this.onTouched=w}registerOnChange(w){this.onChange=w}setDisabledState(w){this.setProperty("disabled",w)}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(E.Qsj),E.Y36(E.SBq))},te.\u0275dir=E.lG2({type:te}),te})(),ae=(()=>{class te extends Be{}return te.\u0275fac=function(){let K;return function(k){return(K||(K=E.n5z(te)))(k||te)}}(),te.\u0275dir=E.lG2({type:te,features:[E.qOj]}),te})();const He=new E.OlP("NgValueAccessor"),Ee={provide:He,useExisting:(0,E.Gpc)(()=>rt),multi:!0},$e=new E.OlP("CompositionEventMode");let rt=(()=>{class te extends Be{constructor(w,k,ce){super(w,k),this._compositionMode=ce,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Me(){const te=(0,ie.q)()?(0,ie.q)().getUserAgent():"";return/android (\d+)/.test(te.toLowerCase())}())}writeValue(w){this.setProperty("value",w??"")}_handleInput(w){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(w)}_compositionStart(){this._composing=!0}_compositionEnd(w){this._composing=!1,this._compositionMode&&this.onChange(w)}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36($e,8))},te.\u0275dir=E.lG2({type:te,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(w,k){1&w&&E.NdJ("input",function(Ie){return k._handleInput(Ie.target.value)})("blur",function(){return k.onTouched()})("compositionstart",function(){return k._compositionStart()})("compositionend",function(Ie){return k._compositionEnd(Ie.target.value)})},features:[E._Bn([Ee]),E.qOj]}),te})();function St(te){return null==te||("string"==typeof te||Array.isArray(te))&&0===te.length}function Fe(te){return null!=te&&"number"==typeof te.length}const ut=new E.OlP("NgValidators"),st=new E.OlP("NgAsyncValidators"),Et=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ve{static min(K){return function Xe(te){return K=>{if(St(K.value)||St(te))return null;const w=parseFloat(K.value);return!isNaN(w)&&w<te?{min:{min:te,actual:K.value}}:null}}(K)}static max(K){return function gt(te){return K=>{if(St(K.value)||St(te))return null;const w=parseFloat(K.value);return!isNaN(w)&&w>te?{max:{max:te,actual:K.value}}:null}}(K)}static required(K){return kt(K)}static requiredTrue(K){return function xt(te){return!0===te.value?null:{required:!0}}(K)}static email(K){return function X(te){return St(te.value)||Et.test(te.value)?null:{email:!0}}(K)}static minLength(K){return function ve(te){return K=>St(K.value)||!Fe(K.value)?null:K.value.length<te?{minlength:{requiredLength:te,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function ge(te){return K=>Fe(K.value)&&K.value.length>te?{maxlength:{requiredLength:te,actualLength:K.value.length}}:null}(K)}static pattern(K){return Le(K)}static nullValidator(K){return null}static compose(K){return At(K)}static composeAsync(K){return $t(K)}}function kt(te){return St(te.value)?{required:!0}:null}function Le(te){if(!te)return Oe;let K,w;return"string"==typeof te?(w="","^"!==te.charAt(0)&&(w+="^"),w+=te,"$"!==te.charAt(te.length-1)&&(w+="$"),K=new RegExp(w)):(w=te.toString(),K=te),k=>{if(St(k.value))return null;const ce=k.value;return K.test(ce)?null:{pattern:{requiredPattern:w,actualValue:ce}}}}function Oe(te){return null}function qe(te){return null!=te}function dt(te){return(0,E.QGY)(te)?(0,ne.D)(te):te}function wt(te){let K={};return te.forEach(w=>{K=null!=w?{...K,...w}:K}),0===Object.keys(K).length?null:K}function vt(te,K){return K.map(w=>w(te))}function Rt(te){return te.map(K=>function Mt(te){return!te.validate}(K)?K:w=>K.validate(w))}function At(te){if(!te)return null;const K=te.filter(qe);return 0==K.length?null:function(w){return wt(vt(w,K))}}function Yt(te){return null!=te?At(Rt(te)):null}function $t(te){if(!te)return null;const K=te.filter(qe);return 0==K.length?null:function(w){const k=vt(w,K).map(dt);return(0,F.D)(k).pipe((0,Ne.U)(wt))}}function ln(te){return null!=te?$t(Rt(te)):null}function Zt(te,K){return null===te?[K]:Array.isArray(te)?[...te,K]:[te,K]}function hn(te){return te._rawValidators}function Gt(te){return te._rawAsyncValidators}function rr(te){return te?Array.isArray(te)?te:[te]:[]}function Wn(te,K){return Array.isArray(te)?te.includes(K):te===K}function Er(te,K){const w=rr(K);return rr(te).forEach(ce=>{Wn(w,ce)||w.push(ce)}),w}function _r(te,K){return rr(K).filter(w=>!Wn(te,w))}class yi{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=Yt(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=ln(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K){this.control&&this.control.reset(K)}hasError(K,w){return!!this.control&&this.control.hasError(K,w)}getError(K,w){return this.control?this.control.getError(K,w):null}}class or extends yi{get formDirective(){return null}get path(){return null}}class Xn extends yi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Hr{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let xn=(()=>{class te extends Hr{constructor(w){super(w)}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(Xn,2))},te.\u0275dir=E.lG2({type:te,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(w,k){2&w&&E.ekj("ng-untouched",k.isUntouched)("ng-touched",k.isTouched)("ng-pristine",k.isPristine)("ng-dirty",k.isDirty)("ng-valid",k.isValid)("ng-invalid",k.isInvalid)("ng-pending",k.isPending)},features:[E.qOj]}),te})(),mr=(()=>{class te extends Hr{constructor(w){super(w)}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(or,10))},te.\u0275dir=E.lG2({type:te,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(w,k){2&w&&E.ekj("ng-untouched",k.isUntouched)("ng-touched",k.isTouched)("ng-pristine",k.isPristine)("ng-dirty",k.isDirty)("ng-valid",k.isValid)("ng-invalid",k.isInvalid)("ng-pending",k.isPending)("ng-submitted",k.isSubmitted)},features:[E.qOj]}),te})();const si="VALID",Hi="INVALID",dn="PENDING",zt="DISABLED";function Cn(te){return(Qe(te)?te.validators:te)||null}function $n(te,K){return(Qe(K)?K.asyncValidators:te)||null}function Qe(te){return null!=te&&!Array.isArray(te)&&"object"==typeof te}class Vt{constructor(K,w){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(w)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===si}get invalid(){return this.status===Hi}get pending(){return this.status==dn}get disabled(){return this.status===zt}get enabled(){return this.status!==zt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(Er(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(Er(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(_r(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(_r(K,this._rawAsyncValidators))}hasValidator(K){return Wn(this._rawValidators,K)}hasAsyncValidator(K){return Wn(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(w=>{w.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(w=>{w.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=dn,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const w=this._parentMarkedDirty(K.onlySelf);this.status=zt,this.errors=null,this._forEachChild(k=>{k.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:w}),this._onDisabledChange.forEach(k=>k(!0))}enable(K={}){const w=this._parentMarkedDirty(K.onlySelf);this.status=si,this._forEachChild(k=>{k.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:w}),this._onDisabledChange.forEach(k=>k(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===si||this.status===dn)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(w=>w._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zt:si}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=dn,this._hasOwnPendingAsyncValidator=!0;const w=dt(this.asyncValidator(this));this._asyncValidationSubscription=w.subscribe(k=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(k,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,w={}){this.errors=K,this._updateControlsErrors(!1!==w.emitEvent)}get(K){let w=K;return null==w||(Array.isArray(w)||(w=w.split(".")),0===w.length)?null:w.reduce((k,ce)=>k&&k._find(ce),this)}getError(K,w){const k=w?this.get(w):this;return k&&k.errors?k.errors[K]:null}hasError(K,w){return!!this.getError(K,w)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new E.vpe,this.statusChanges=new E.vpe}_calculateStatus(){return this._allControlsDisabled()?zt:this.errors?Hi:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dn)?dn:this._anyControlsHaveStatus(Hi)?Hi:si}_anyControlsHaveStatus(K){return this._anyControls(w=>w.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){Qe(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function er(te){return Array.isArray(te)?Yt(te):te||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function Vn(te){return Array.isArray(te)?ln(te):te||null}(this._rawAsyncValidators)}}class Dt extends Vt{constructor(K,w,k){super(Cn(w),$n(k,w)),this.controls=K,this._initObservables(),this._setUpdateStrategy(w),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,w){return this.controls[K]?this.controls[K]:(this.controls[K]=w,w.setParent(this),w._registerOnCollectionChange(this._onCollectionChange),w)}addControl(K,w,k={}){this.registerControl(K,w),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}removeControl(K,w={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:w.emitEvent}),this._onCollectionChange()}setControl(K,w,k={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],w&&this.registerControl(K,w),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,w={}){(function at(te,K,w){te._forEachChild((k,ce)=>{if(void 0===w[ce])throw new E.vHH(1002,"")})})(this,0,K),Object.keys(K).forEach(k=>{(function Ye(te,K,w){const k=te.controls;if(!(K?Object.keys(k):k).length)throw new E.vHH(1e3,"");if(!k[w])throw new E.vHH(1001,"")})(this,!0,k),this.controls[k].setValue(K[k],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w)}patchValue(K,w={}){null!=K&&(Object.keys(K).forEach(k=>{const ce=this.controls[k];ce&&ce.patchValue(K[k],{onlySelf:!0,emitEvent:w.emitEvent})}),this.updateValueAndValidity(w))}reset(K={},w={}){this._forEachChild((k,ce)=>{k.reset(K[ce],{onlySelf:!0,emitEvent:w.emitEvent})}),this._updatePristine(w),this._updateTouched(w),this.updateValueAndValidity(w)}getRawValue(){return this._reduceChildren({},(K,w,k)=>(K[k]=w.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(w,k)=>!!k._syncPendingControls()||w);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(w=>{const k=this.controls[w];k&&K(k,w)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[w,k]of Object.entries(this.controls))if(this.contains(w)&&K(k))return!0;return!1}_reduceValue(){return this._reduceChildren({},(w,k,ce)=>((k.enabled||this.disabled)&&(w[ce]=k.value),w))}_reduceChildren(K,w){let k=K;return this._forEachChild((ce,Ie)=>{k=w(k,ce,Ie)}),k}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}const pe=new E.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>re}),re="always";function me(te,K,w=re){On(te,K),K.valueAccessor.writeValue(te.value),(te.disabled||"always"===w)&&K.valueAccessor.setDisabledState?.(te.disabled),function Nr(te,K){K.valueAccessor.registerOnChange(w=>{te._pendingValue=w,te._pendingChange=!0,te._pendingDirty=!0,"change"===te.updateOn&&Yi(te,K)})}(te,K),function Zr(te,K){const w=(k,ce)=>{K.valueAccessor.writeValue(k),ce&&K.viewToModelUpdate(k)};te.registerOnChange(w),K._registerOnDestroy(()=>{te._unregisterOnChange(w)})}(te,K),function Ci(te,K){K.valueAccessor.registerOnTouched(()=>{te._pendingTouched=!0,"blur"===te.updateOn&&te._pendingChange&&Yi(te,K),"submit"!==te.updateOn&&te.markAsTouched()})}(te,K),function bn(te,K){if(K.valueAccessor.setDisabledState){const w=k=>{K.valueAccessor.setDisabledState(k)};te.registerOnDisabledChange(w),K._registerOnDestroy(()=>{te._unregisterOnDisabledChange(w)})}}(te,K)}function ze(te,K,w=!0){const k=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(k),K.valueAccessor.registerOnTouched(k)),dr(te,K),te&&(K._invokeOnDestroyCallbacks(),te._registerOnCollectionChange(()=>{}))}function bt(te,K){te.forEach(w=>{w.registerOnValidatorChange&&w.registerOnValidatorChange(K)})}function On(te,K){const w=hn(te);null!==K.validator?te.setValidators(Zt(w,K.validator)):"function"==typeof w&&te.setValidators([w]);const k=Gt(te);null!==K.asyncValidator?te.setAsyncValidators(Zt(k,K.asyncValidator)):"function"==typeof k&&te.setAsyncValidators([k]);const ce=()=>te.updateValueAndValidity();bt(K._rawValidators,ce),bt(K._rawAsyncValidators,ce)}function dr(te,K){let w=!1;if(null!==te){if(null!==K.validator){const ce=hn(te);if(Array.isArray(ce)&&ce.length>0){const Ie=ce.filter(tt=>tt!==K.validator);Ie.length!==ce.length&&(w=!0,te.setValidators(Ie))}}if(null!==K.asyncValidator){const ce=Gt(te);if(Array.isArray(ce)&&ce.length>0){const Ie=ce.filter(tt=>tt!==K.asyncValidator);Ie.length!==ce.length&&(w=!0,te.setAsyncValidators(Ie))}}}const k=()=>{};return bt(K._rawValidators,k),bt(K._rawAsyncValidators,k),w}function Yi(te,K){te._pendingDirty&&te.markAsDirty(),te.setValue(te._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(te._pendingValue),te._pendingChange=!1}function fs(te,K){On(te,K)}function Mi(te,K){if(!te.hasOwnProperty("model"))return!1;const w=te.model;return!!w.isFirstChange()||!Object.is(K,w.currentValue)}function ps(te,K){te._syncPendingControls(),K.forEach(w=>{const k=w.control;"submit"===k.updateOn&&k._pendingChange&&(w.viewToModelUpdate(k._pendingValue),k._pendingChange=!1)})}function Dn(te,K){if(!K)return null;let w,k,ce;return Array.isArray(K),K.forEach(Ie=>{Ie.constructor===rt?w=Ie:function is(te){return Object.getPrototypeOf(te.constructor)===ae}(Ie)?k=Ie:ce=Ie}),ce||k||w||null}const Ds={provide:or,useExisting:(0,E.Gpc)(()=>Ai)},ss=(()=>Promise.resolve())();let Ai=(()=>{class te extends or{constructor(w,k,ce){super(),this.callSetDisabledState=ce,this.submitted=!1,this._directives=new Set,this.ngSubmit=new E.vpe,this.form=new Dt({},Yt(w),ln(k))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(w){ss.then(()=>{const k=this._findContainer(w.path);w.control=k.registerControl(w.name,w.control),me(w.control,w,this.callSetDisabledState),w.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(w)})}getControl(w){return this.form.get(w.path)}removeControl(w){ss.then(()=>{const k=this._findContainer(w.path);k&&k.removeControl(w.name),this._directives.delete(w)})}addFormGroup(w){ss.then(()=>{const k=this._findContainer(w.path),ce=new Dt({});fs(ce,w),k.registerControl(w.name,ce),ce.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(w){ss.then(()=>{const k=this._findContainer(w.path);k&&k.removeControl(w.name)})}getFormGroup(w){return this.form.get(w.path)}updateModel(w,k){ss.then(()=>{this.form.get(w.path).setValue(k)})}setValue(w){this.control.setValue(w)}onSubmit(w){return this.submitted=!0,ps(this.form,this._directives),this.ngSubmit.emit(w),"dialog"===w?.target?.method}onReset(){this.resetForm()}resetForm(w){this.form.reset(w),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(w){return w.pop(),w.length?this.form.get(w):this.form}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(ut,10),E.Y36(st,10),E.Y36(pe,8))},te.\u0275dir=E.lG2({type:te,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(w,k){1&w&&E.NdJ("submit",function(Ie){return k.onSubmit(Ie)})("reset",function(){return k.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([Ds]),E.qOj]}),te})();function os(te,K){const w=te.indexOf(K);w>-1&&te.splice(w,1)}function vi(te){return"object"==typeof te&&null!==te&&2===Object.keys(te).length&&"value"in te&&"disabled"in te}const bs=class extends Vt{constructor(K=null,w,k){super(Cn(w),$n(k,w)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(w),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qe(w)&&(w.nonNullable||w.initialValueIsDefault)&&(this.defaultValue=vi(K)?K.value:K)}setValue(K,w={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==w.emitModelToViewChange&&this._onChange.forEach(k=>k(this.value,!1!==w.emitViewToModelChange)),this.updateValueAndValidity(w)}patchValue(K,w={}){this.setValue(K,w)}reset(K=this.defaultValue,w={}){this._applyFormState(K),this.markAsPristine(w),this.markAsUntouched(w),this.setValue(this.value,w),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){os(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){os(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){vi(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},Os={provide:Xn,useExisting:(0,E.Gpc)(()=>vn)},xo=(()=>Promise.resolve())();let vn=(()=>{class te extends Xn{constructor(w,k,ce,Ie,tt,Ge){super(),this._changeDetectorRef=tt,this.callSetDisabledState=Ge,this.control=new bs,this._registered=!1,this.update=new E.vpe,this._parent=w,this._setValidators(k),this._setAsyncValidators(ce),this.valueAccessor=Dn(0,Ie)}ngOnChanges(w){if(this._checkForErrors(),!this._registered||"name"in w){if(this._registered&&(this._checkName(),this.formDirective)){const k=w.name.previousValue;this.formDirective.removeControl({name:k,path:this._getPath(k)})}this._setUpControl()}"isDisabled"in w&&this._updateDisabled(w),Mi(w,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){me(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(w){xo.then(()=>{this.control.setValue(w,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(w){const k=w.isDisabled.currentValue,ce=0!==k&&(0,E.D6c)(k);xo.then(()=>{ce&&!this.control.disabled?this.control.disable():!ce&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(w){return this._parent?function de(te,K){return[...K.path,te]}(w,this._parent):[w]}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(or,9),E.Y36(ut,10),E.Y36(st,10),E.Y36(He,10),E.Y36(E.sBO,8),E.Y36(pe,8))},te.\u0275dir=E.lG2({type:te,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[E._Bn([Os]),E.qOj,E.TTD]}),te})(),ot=(()=>{class te{}return te.\u0275fac=function(w){return new(w||te)},te.\u0275dir=E.lG2({type:te,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),te})(),Kn=(()=>{class te{}return te.\u0275fac=function(w){return new(w||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({}),te})();const gs=new E.OlP("NgModelWithFormControlWarning"),Bi={provide:Xn,useExisting:(0,E.Gpc)(()=>Vr)};let Vr=(()=>{class te extends Xn{constructor(w,k,ce,Ie,tt){super(),this._ngModelWarningConfig=Ie,this.callSetDisabledState=tt,this.update=new E.vpe,this._ngModelWarningSent=!1,this._setValidators(w),this._setAsyncValidators(k),this.valueAccessor=Dn(0,ce)}set isDisabled(w){}ngOnChanges(w){if(this._isControlChanged(w)){const k=w.form.previousValue;k&&ze(k,this,!1),me(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Mi(w,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ze(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(w){this.viewModel=w,this.update.emit(w)}_isControlChanged(w){return w.hasOwnProperty("form")}}return te._ngModelWarningSentOnce=!1,te.\u0275fac=function(w){return new(w||te)(E.Y36(ut,10),E.Y36(st,10),E.Y36(He,10),E.Y36(gs,8),E.Y36(pe,8))},te.\u0275dir=E.lG2({type:te,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[E._Bn([Bi]),E.qOj,E.TTD]}),te})();const gu={provide:or,useExisting:(0,E.Gpc)(()=>As)};let As=(()=>{class te extends or{constructor(w,k,ce){super(),this.callSetDisabledState=ce,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new E.vpe,this._setValidators(w),this._setAsyncValidators(k)}ngOnChanges(w){this._checkFormPresent(),w.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(w){const k=this.form.get(w.path);return me(k,w,this.callSetDisabledState),k.updateValueAndValidity({emitEvent:!1}),this.directives.push(w),k}getControl(w){return this.form.get(w.path)}removeControl(w){ze(w.control||null,w,!1),function vr(te,K){const w=te.indexOf(K);w>-1&&te.splice(w,1)}(this.directives,w)}addFormGroup(w){this._setUpFormContainer(w)}removeFormGroup(w){this._cleanUpFormContainer(w)}getFormGroup(w){return this.form.get(w.path)}addFormArray(w){this._setUpFormContainer(w)}removeFormArray(w){this._cleanUpFormContainer(w)}getFormArray(w){return this.form.get(w.path)}updateModel(w,k){this.form.get(w.path).setValue(k)}onSubmit(w){return this.submitted=!0,ps(this.form,this.directives),this.ngSubmit.emit(w),"dialog"===w?.target?.method}onReset(){this.resetForm()}resetForm(w){this.form.reset(w),this.submitted=!1}_updateDomValue(){this.directives.forEach(w=>{const k=w.control,ce=this.form.get(w.path);k!==ce&&(ze(k||null,w),(te=>te instanceof bs)(ce)&&(me(ce,w,this.callSetDisabledState),w.control=ce))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(w){const k=this.form.get(w.path);fs(k,w),k.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(w){if(this.form){const k=this.form.get(w.path);k&&function Lr(te,K){return dr(te,K)}(k,w)&&k.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){On(this.form,this),this._oldForm&&dr(this._oldForm,this)}_checkFormPresent(){}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(ut,10),E.Y36(st,10),E.Y36(pe,8))},te.\u0275dir=E.lG2({type:te,selectors:[["","formGroup",""]],hostBindings:function(w,k){1&w&&E.NdJ("submit",function(Ie){return k.onSubmit(Ie)})("reset",function(){return k.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[E._Bn([gu]),E.qOj,E.TTD]}),te})();const Oa={provide:He,useExisting:(0,E.Gpc)(()=>ho),multi:!0};function qa(te,K){return null==te?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${te}: ${K}`.slice(0,50))}let ho=(()=>{class te extends ae{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(w){this._compareWith=w}writeValue(w){this.value=w;const ce=qa(this._getOptionId(w),w);this.setProperty("value",ce)}registerOnChange(w){this.onChange=k=>{this.value=this._getOptionValue(k),w(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(w){for(const k of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(k),w))return k;return null}_getOptionValue(w){const k=function jo(te){return te.split(":")[0]}(w);return this._optionMap.has(k)?this._optionMap.get(k):w}}return te.\u0275fac=function(){let K;return function(k){return(K||(K=E.n5z(te)))(k||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(w,k){1&w&&E.NdJ("change",function(Ie){return k.onChange(Ie.target.value)})("blur",function(){return k.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([Oa]),E.qOj]}),te})(),no=(()=>{class te{constructor(w,k,ce){this._element=w,this._renderer=k,this._select=ce,this._select&&(this.id=this._select._registerOption())}set ngValue(w){null!=this._select&&(this._select._optionMap.set(this.id,w),this._setElementValue(qa(this.id,w)),this._select.writeValue(this._select.value))}set value(w){this._setElementValue(w),this._select&&this._select.writeValue(this._select.value)}_setElementValue(w){this._renderer.setProperty(this._element.nativeElement,"value",w)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(ho,9))},te.\u0275dir=E.lG2({type:te,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),te})();const zs={provide:He,useExisting:(0,E.Gpc)(()=>ms),multi:!0};function Us(te,K){return null==te?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${te}: ${K}`.slice(0,50))}let ms=(()=>{class te extends ae{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(w){this._compareWith=w}writeValue(w){let k;if(this.value=w,Array.isArray(w)){const ce=w.map(Ie=>this._getOptionId(Ie));k=(Ie,tt)=>{Ie._setSelected(ce.indexOf(tt.toString())>-1)}}else k=(ce,Ie)=>{ce._setSelected(!1)};this._optionMap.forEach(k)}registerOnChange(w){this.onChange=k=>{const ce=[],Ie=k.selectedOptions;if(void 0!==Ie){const tt=Ie;for(let Ge=0;Ge<tt.length;Ge++){const Fn=this._getOptionValue(tt[Ge].value);ce.push(Fn)}}else{const tt=k.options;for(let Ge=0;Ge<tt.length;Ge++){const Ut=tt[Ge];if(Ut.selected){const Fn=this._getOptionValue(Ut.value);ce.push(Fn)}}}this.value=ce,w(ce)}}_registerOption(w){const k=(this._idCounter++).toString();return this._optionMap.set(k,w),k}_getOptionId(w){for(const k of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(k)._value,w))return k;return null}_getOptionValue(w){const k=function ia(te){return te.split(":")[0]}(w);return this._optionMap.has(k)?this._optionMap.get(k)._value:w}}return te.\u0275fac=function(){let K;return function(k){return(K||(K=E.n5z(te)))(k||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(w,k){1&w&&E.NdJ("change",function(Ie){return k.onChange(Ie.target)})("blur",function(){return k.onTouched()})},inputs:{compareWith:"compareWith"},features:[E._Bn([zs]),E.qOj]}),te})(),Wa=(()=>{class te{constructor(w,k,ce){this._element=w,this._renderer=k,this._select=ce,this._select&&(this.id=this._select._registerOption(this))}set ngValue(w){null!=this._select&&(this._value=w,this._setElementValue(Us(this.id,w)),this._select.writeValue(this._select.value))}set value(w){this._select?(this._value=w,this._setElementValue(Us(this.id,w)),this._select.writeValue(this._select.value)):this._setElementValue(w)}_setElementValue(w){this._renderer.setProperty(this._element.nativeElement,"value",w)}_setSelected(w){this._renderer.setProperty(this._element.nativeElement,"selected",w)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return te.\u0275fac=function(w){return new(w||te)(E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(ms,9))},te.\u0275dir=E.lG2({type:te,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),te})(),Yr=(()=>{class te{constructor(){this._validator=Oe}ngOnChanges(w){if(this.inputName in w){const k=this.normalizeInput(w[this.inputName].currentValue);this._enabled=this.enabled(k),this._validator=this._enabled?this.createValidator(k):Oe,this._onChange&&this._onChange()}}validate(w){return this._validator(w)}registerOnValidatorChange(w){this._onChange=w}enabled(w){return null!=w}}return te.\u0275fac=function(w){return new(w||te)},te.\u0275dir=E.lG2({type:te,features:[E.TTD]}),te})();const Ra={provide:ut,useExisting:(0,E.Gpc)(()=>fi),multi:!0};let fi=(()=>{class te extends Yr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=E.D6c,this.createValidator=w=>kt}enabled(w){return w}}return te.\u0275fac=function(){let K;return function(k){return(K||(K=E.n5z(te)))(k||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(w,k){2&w&&E.uIk("required",k._enabled?"":null)},inputs:{required:"required"},features:[E._Bn([Ra]),E.qOj]}),te})();const cs={provide:ut,useExisting:(0,E.Gpc)(()=>Ao),multi:!0};let Ao=(()=>{class te extends Yr{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=w=>w,this.createValidator=w=>Le(w)}}return te.\u0275fac=function(){let K;return function(k){return(K||(K=E.n5z(te)))(k||te)}}(),te.\u0275dir=E.lG2({type:te,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(w,k){2&w&&E.uIk("pattern",k._enabled?k.pattern:null)},inputs:{pattern:"pattern"},features:[E._Bn([cs]),E.qOj]}),te})(),Rs=(()=>{class te{}return te.\u0275fac=function(w){return new(w||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({imports:[Kn]}),te})(),Ks=(()=>{class te{static withConfig(w){return{ngModule:te,providers:[{provide:pe,useValue:w.callSetDisabledState??re}]}}}return te.\u0275fac=function(w){return new(w||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({imports:[Rs]}),te})(),Ns=(()=>{class te{static withConfig(w){return{ngModule:te,providers:[{provide:gs,useValue:w.warnOnNgModelWithFormControl??"always"},{provide:pe,useValue:w.callSetDisabledState??re}]}}}return te.\u0275fac=function(w){return new(w||te)},te.\u0275mod=E.oAB({type:te}),te.\u0275inj=E.cJS({imports:[Rs]}),te})()},1481:(Wt,et,W)=>{"use strict";W.d(et,{Dx:()=>Ei,H7:()=>cr,b2:()=>yn,q6:()=>zr});var E=W(6895),ie=W(4650);class ne extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class F extends ne{static makeCurrent(){(0,E.HT)(new F)}onAndCancel(de,me,ze){return de.addEventListener(me,ze,!1),()=>{de.removeEventListener(me,ze,!1)}}dispatchEvent(de,me){de.dispatchEvent(me)}remove(de){de.parentNode&&de.parentNode.removeChild(de)}createElement(de,me){return(me=me||this.getDefaultDocument()).createElement(de)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(de){return de.nodeType===Node.ELEMENT_NODE}isShadowRoot(de){return de instanceof DocumentFragment}getGlobalEventTarget(de,me){return"window"===me?window:"document"===me?de:"body"===me?de.body:null}getBaseHref(de){const me=function Be(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==me?null:function He(re){ae=ae||document.createElement("a"),ae.setAttribute("href",re);const de=ae.pathname;return"/"===de.charAt(0)?de:`/${de}`}(me)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(de){return(0,E.Mx)(document.cookie,de)}}let ae,Ne=null;const Ae=new ie.OlP("TRANSITION_ID"),Ee=[{provide:ie.ip1,useFactory:function De(re,de,me){return()=>{me.get(ie.CZH).donePromise.then(()=>{const ze=(0,E.q)(),bt=de.querySelectorAll(`style[ng-transition="${re}"]`);for(let bn=0;bn<bt.length;bn++)ze.remove(bt[bn])})}},deps:[Ae,E.K0,ie.zs3],multi:!0}];let $e=(()=>{class re{build(){return new XMLHttpRequest}}return re.\u0275fac=function(me){return new(me||re)},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})();const rt=new ie.OlP("EventManagerPlugins");let _t=(()=>{class re{constructor(me,ze){this._zone=ze,this._eventNameToPlugin=new Map,me.forEach(bt=>bt.manager=this),this._plugins=me.slice().reverse()}addEventListener(me,ze,bt){return this._findPluginFor(ze).addEventListener(me,ze,bt)}addGlobalEventListener(me,ze,bt){return this._findPluginFor(ze).addGlobalEventListener(me,ze,bt)}getZone(){return this._zone}_findPluginFor(me){const ze=this._eventNameToPlugin.get(me);if(ze)return ze;const bt=this._plugins;for(let bn=0;bn<bt.length;bn++){const On=bt[bn];if(On.supports(me))return this._eventNameToPlugin.set(me,On),On}throw new Error(`No event manager plugin found for event ${me}`)}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(rt),ie.LFG(ie.R0b))},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})();class St{constructor(de){this._doc=de}addGlobalEventListener(de,me,ze){const bt=(0,E.q)().getGlobalEventTarget(this._doc,de);if(!bt)throw new Error(`Unsupported event target ${bt} for event ${me}`);return this.addEventListener(bt,me,ze)}}let Fe=(()=>{class re{constructor(){this._stylesSet=new Set}addStyles(me){const ze=new Set;me.forEach(bt=>{this._stylesSet.has(bt)||(this._stylesSet.add(bt),ze.add(bt))}),this.onStylesAdded(ze)}onStylesAdded(me){}getAllStyles(){return Array.from(this._stylesSet)}}return re.\u0275fac=function(me){return new(me||re)},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})(),ut=(()=>{class re extends Fe{constructor(me){super(),this._doc=me,this._hostNodes=new Map,this._hostNodes.set(me.head,[])}_addStylesToHost(me,ze,bt){me.forEach(bn=>{const On=this._doc.createElement("style");On.textContent=bn,bt.push(ze.appendChild(On))})}addHost(me){const ze=[];this._addStylesToHost(this._stylesSet,me,ze),this._hostNodes.set(me,ze)}removeHost(me){const ze=this._hostNodes.get(me);ze&&ze.forEach(st),this._hostNodes.delete(me)}onStylesAdded(me){this._hostNodes.forEach((ze,bt)=>{this._addStylesToHost(me,bt,ze)})}ngOnDestroy(){this._hostNodes.forEach(me=>me.forEach(st))}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(E.K0))},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})();function st(re){(0,E.q)().remove(re)}const Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ve=/%COMP%/g;function ge(re,de){return de.flat(100).map(me=>me.replace(Ve,re))}function Le(re){return de=>{if("__ngUnwrap__"===de)return re;!1===re(de)&&(de.preventDefault(),de.returnValue=!1)}}let qe=(()=>{class re{constructor(me,ze,bt){this.eventManager=me,this.sharedStylesHost=ze,this.appId=bt,this.rendererByCompId=new Map,this.defaultRenderer=new dt(me)}createRenderer(me,ze){if(!me||!ze)return this.defaultRenderer;switch(ze.encapsulation){case ie.ifc.Emulated:{let bt=this.rendererByCompId.get(ze.id);return bt||(bt=new Rt(this.eventManager,this.sharedStylesHost,ze,this.appId),this.rendererByCompId.set(ze.id,bt)),bt.applyToHost(me),bt}case 1:case ie.ifc.ShadowDom:return new At(this.eventManager,this.sharedStylesHost,me,ze);default:if(!this.rendererByCompId.has(ze.id)){const bt=ge(ze.id,ze.styles);this.sharedStylesHost.addStyles(bt),this.rendererByCompId.set(ze.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(_t),ie.LFG(ut),ie.LFG(ie.AFp))},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})();class dt{constructor(de){this.eventManager=de,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(de,me){return me?document.createElementNS(Et[me]||me,de):document.createElement(de)}createComment(de){return document.createComment(de)}createText(de){return document.createTextNode(de)}appendChild(de,me){(Mt(de)?de.content:de).appendChild(me)}insertBefore(de,me,ze){de&&(Mt(de)?de.content:de).insertBefore(me,ze)}removeChild(de,me){de&&de.removeChild(me)}selectRootElement(de,me){let ze="string"==typeof de?document.querySelector(de):de;if(!ze)throw new Error(`The selector "${de}" did not match any elements`);return me||(ze.textContent=""),ze}parentNode(de){return de.parentNode}nextSibling(de){return de.nextSibling}setAttribute(de,me,ze,bt){if(bt){me=bt+":"+me;const bn=Et[bt];bn?de.setAttributeNS(bn,me,ze):de.setAttribute(me,ze)}else de.setAttribute(me,ze)}removeAttribute(de,me,ze){if(ze){const bt=Et[ze];bt?de.removeAttributeNS(bt,me):de.removeAttribute(`${ze}:${me}`)}else de.removeAttribute(me)}addClass(de,me){de.classList.add(me)}removeClass(de,me){de.classList.remove(me)}setStyle(de,me,ze,bt){bt&(ie.JOm.DashCase|ie.JOm.Important)?de.style.setProperty(me,ze,bt&ie.JOm.Important?"important":""):de.style[me]=ze}removeStyle(de,me,ze){ze&ie.JOm.DashCase?de.style.removeProperty(me):de.style[me]=""}setProperty(de,me,ze){de[me]=ze}setValue(de,me){de.nodeValue=me}listen(de,me,ze){return"string"==typeof de?this.eventManager.addGlobalEventListener(de,me,Le(ze)):this.eventManager.addEventListener(de,me,Le(ze))}}function Mt(re){return"TEMPLATE"===re.tagName&&void 0!==re.content}class Rt extends dt{constructor(de,me,ze,bt){super(de),this.component=ze;const bn=ge(bt+"-"+ze.id,ze.styles);me.addStyles(bn),this.contentAttr=function X(re){return"_ngcontent-%COMP%".replace(Ve,re)}(bt+"-"+ze.id),this.hostAttr=function ve(re){return"_nghost-%COMP%".replace(Ve,re)}(bt+"-"+ze.id)}applyToHost(de){super.setAttribute(de,this.hostAttr,"")}createElement(de,me){const ze=super.createElement(de,me);return super.setAttribute(ze,this.contentAttr,""),ze}}class At extends dt{constructor(de,me,ze,bt){super(de),this.sharedStylesHost=me,this.hostEl=ze,this.shadowRoot=ze.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const bn=ge(bt.id,bt.styles);for(let On=0;On<bn.length;On++){const dr=document.createElement("style");dr.textContent=bn[On],this.shadowRoot.appendChild(dr)}}nodeOrShadowRoot(de){return de===this.hostEl?this.shadowRoot:de}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(de,me){return super.appendChild(this.nodeOrShadowRoot(de),me)}insertBefore(de,me,ze){return super.insertBefore(this.nodeOrShadowRoot(de),me,ze)}removeChild(de,me){return super.removeChild(this.nodeOrShadowRoot(de),me)}parentNode(de){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(de)))}}let Yt=(()=>{class re extends St{constructor(me){super(me)}supports(me){return!0}addEventListener(me,ze,bt){return me.addEventListener(ze,bt,!1),()=>this.removeEventListener(me,ze,bt)}removeEventListener(me,ze,bt){return me.removeEventListener(ze,bt)}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(E.K0))},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})();const $t=["alt","control","meta","shift"],ln={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zt={alt:re=>re.altKey,control:re=>re.ctrlKey,meta:re=>re.metaKey,shift:re=>re.shiftKey};let hn=(()=>{class re extends St{constructor(me){super(me)}supports(me){return null!=re.parseEventName(me)}addEventListener(me,ze,bt){const bn=re.parseEventName(ze),On=re.eventCallback(bn.fullKey,bt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(me,bn.domEventName,On))}static parseEventName(me){const ze=me.toLowerCase().split("."),bt=ze.shift();if(0===ze.length||"keydown"!==bt&&"keyup"!==bt)return null;const bn=re._normalizeKey(ze.pop());let On="",dr=ze.indexOf("code");if(dr>-1&&(ze.splice(dr,1),On="code."),$t.forEach(Ci=>{const Yi=ze.indexOf(Ci);Yi>-1&&(ze.splice(Yi,1),On+=Ci+".")}),On+=bn,0!=ze.length||0===bn.length)return null;const Nr={};return Nr.domEventName=bt,Nr.fullKey=On,Nr}static matchEventFullKeyCode(me,ze){let bt=ln[me.key]||me.key,bn="";return ze.indexOf("code.")>-1&&(bt=me.code,bn="code."),!(null==bt||!bt)&&(bt=bt.toLowerCase()," "===bt?bt="space":"."===bt&&(bt="dot"),$t.forEach(On=>{On!==bt&&(0,Zt[On])(me)&&(bn+=On+".")}),bn+=bt,bn===ze)}static eventCallback(me,ze,bt){return bn=>{re.matchEventFullKeyCode(bn,me)&&bt.runGuarded(()=>ze(bn))}}static _normalizeKey(me){return"esc"===me?"escape":me}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(E.K0))},re.\u0275prov=ie.Yz7({token:re,factory:re.\u0275fac}),re})();const zr=(0,ie.eFA)(ie._c5,"browser",[{provide:ie.Lbi,useValue:E.bD},{provide:ie.g9A,useValue:function yi(){F.makeCurrent()},multi:!0},{provide:E.K0,useFactory:function Xn(){return(0,ie.RDi)(document),document},deps:[]}]),pr=new ie.OlP(""),xn=[{provide:ie.rWj,useClass:class Me{addToWindow(de){ie.dqk.getAngularTestability=(ze,bt=!0)=>{const bn=de.findTestabilityInTree(ze,bt);if(null==bn)throw new Error("Could not find testability for element.");return bn},ie.dqk.getAllAngularTestabilities=()=>de.getAllTestabilities(),ie.dqk.getAllAngularRootElements=()=>de.getAllRootElements(),ie.dqk.frameworkStabilizers||(ie.dqk.frameworkStabilizers=[]),ie.dqk.frameworkStabilizers.push(ze=>{const bt=ie.dqk.getAllAngularTestabilities();let bn=bt.length,On=!1;const dr=function(Nr){On=On||Nr,bn--,0==bn&&ze(On)};bt.forEach(function(Nr){Nr.whenStable(dr)})})}findTestabilityInTree(de,me,ze){return null==me?null:de.getTestability(me)??(ze?(0,E.q)().isShadowRoot(me)?this.findTestabilityInTree(de,me.host,!0):this.findTestabilityInTree(de,me.parentElement,!0):null)}},deps:[]},{provide:ie.lri,useClass:ie.dDg,deps:[ie.R0b,ie.eoX,ie.rWj]},{provide:ie.dDg,useClass:ie.dDg,deps:[ie.R0b,ie.eoX,ie.rWj]}],mr=[{provide:ie.zSh,useValue:"root"},{provide:ie.qLn,useFactory:function or(){return new ie.qLn},deps:[]},{provide:rt,useClass:Yt,multi:!0,deps:[E.K0,ie.R0b,ie.Lbi]},{provide:rt,useClass:hn,multi:!0,deps:[E.K0]},{provide:qe,useClass:qe,deps:[_t,ut,ie.AFp]},{provide:ie.FYo,useExisting:qe},{provide:Fe,useExisting:ut},{provide:ut,useClass:ut,deps:[E.K0]},{provide:_t,useClass:_t,deps:[rt,ie.R0b]},{provide:E.JF,useClass:$e,deps:[]},[]];let yn=(()=>{class re{constructor(me){}static withServerTransition(me){return{ngModule:re,providers:[{provide:ie.AFp,useValue:me.appId},{provide:Ae,useExisting:ie.AFp},Ee]}}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(pr,12))},re.\u0275mod=ie.oAB({type:re}),re.\u0275inj=ie.cJS({providers:[...mr,...xn],imports:[E.ez,ie.hGG]}),re})(),Ei=(()=>{class re{constructor(me){this._doc=me}getTitle(){return this._doc.title}setTitle(me){this._doc.title=me||""}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(E.K0))},re.\u0275prov=ie.Yz7({token:re,factory:function(me){let ze=null;return ze=me?new me:function gi(){return new Ei((0,ie.LFG)(E.K0))}(),ze},providedIn:"root"}),re})();typeof window<"u"&&window;let cr=(()=>{class re{}return re.\u0275fac=function(me){return new(me||re)},re.\u0275prov=ie.Yz7({token:re,factory:function(me){let ze=null;return ze=me?new(me||re):ie.LFG(mi),ze},providedIn:"root"}),re})(),mi=(()=>{class re extends cr{constructor(me){super(),this._doc=me}sanitize(me,ze){if(null==ze)return null;switch(me){case ie.q3G.NONE:return ze;case ie.q3G.HTML:return(0,ie.qzn)(ze,"HTML")?(0,ie.z3N)(ze):(0,ie.EiD)(this._doc,String(ze)).toString();case ie.q3G.STYLE:return(0,ie.qzn)(ze,"Style")?(0,ie.z3N)(ze):ze;case ie.q3G.SCRIPT:if((0,ie.qzn)(ze,"Script"))return(0,ie.z3N)(ze);throw new Error("unsafe value used in a script context");case ie.q3G.URL:return(0,ie.qzn)(ze,"URL")?(0,ie.z3N)(ze):(0,ie.mCW)(String(ze));case ie.q3G.RESOURCE_URL:if((0,ie.qzn)(ze,"ResourceURL"))return(0,ie.z3N)(ze);throw new Error(`unsafe value used in a resource URL context (see ${ie.JZr})`);default:throw new Error(`Unexpected SecurityContext ${me} (see ${ie.JZr})`)}}bypassSecurityTrustHtml(me){return(0,ie.JVY)(me)}bypassSecurityTrustStyle(me){return(0,ie.L6k)(me)}bypassSecurityTrustScript(me){return(0,ie.eBb)(me)}bypassSecurityTrustUrl(me){return(0,ie.LAX)(me)}bypassSecurityTrustResourceUrl(me){return(0,ie.pB0)(me)}}return re.\u0275fac=function(me){return new(me||re)(ie.LFG(E.K0))},re.\u0275prov=ie.Yz7({token:re,factory:function(me){let ze=null;return ze=me?new me:function Br(re){return new mi(re.get(E.K0))}(ie.LFG(ie.zs3)),ze},providedIn:"root"}),re})()},9062:(Wt,et,W)=>{"use strict";W.d(et,{gz:()=>Bi,m2:()=>bs,F0:()=>Po,rH:()=>Ya,Od:()=>Au,Bz:()=>cu,lC:()=>Wa});var E=W(4650),ie=W(8996),ne=W(9646),F=W(1135),Ne=W(6805),Be=W(9841),ae=W(7272),He=W(9751),Ae=W(8421);function De(M){return new He.y(R=>{(0,Ae.Xf)(M()).subscribe(R)})}var Ee=W(9635),Me=W(576);function $e(M,R){const x=(0,Me.m)(M)?M:()=>M,B=J=>J.error(x());return new He.y(R?J=>R.schedule(B,0,J):B)}var rt=W(515),_t=W(727),St=W(4482),Fe=W(5403);function ut(){return(0,St.e)((M,R)=>{let x=null;M._refCount++;const B=(0,Fe.x)(R,void 0,void 0,void 0,()=>{if(!M||M._refCount<=0||0<--M._refCount)return void(x=null);const J=M._connection,ye=x;x=null,J&&(!ye||J===ye)&&J.unsubscribe(),R.unsubscribe()});M.subscribe(B),B.closed||(x=M.connect())})}class st extends He.y{constructor(R,x){super(),this.source=R,this.subjectFactory=x,this._subject=null,this._refCount=0,this._connection=null,(0,St.A)(R)&&(this.lift=R.lift)}_subscribe(R){return this.getSubject().subscribe(R)}getSubject(){const R=this._subject;return(!R||R.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:R}=this;this._subject=this._connection=null,R?.unsubscribe()}connect(){let R=this._connection;if(!R){R=this._connection=new _t.w0;const x=this.getSubject();R.add(this.source.subscribe((0,Fe.x)(x,void 0,()=>{this._teardown(),x.complete()},B=>{this._teardown(),x.error(B)},()=>this._teardown()))),R.closed&&(this._connection=null,R=_t.w0.EMPTY)}return R}refCount(){return ut()(this)}}var Et=W(7579),Ve=W(6895),Xe=W(4004),gt=W(3900),kt=W(5698),xt=W(8675),X=W(9300),ve=W(5577),ge=W(590);function Le(M,R){return(0,Me.m)(R)?(0,ve.z)(M,R,1):(0,ve.z)(M,1)}var Oe=W(8505);function qe(M){return(0,St.e)((R,x)=>{let ye,B=null,J=!1;B=R.subscribe((0,Fe.x)(x,void 0,void 0,Se=>{ye=(0,Ae.Xf)(M(Se,qe(M)(R))),B?(B.unsubscribe(),B=null,ye.subscribe(x)):J=!0})),J&&(B.unsubscribe(),B=null,ye.subscribe(x))})}var dt=W(5026);function wt(M){return M<=0?()=>rt.E:(0,St.e)((R,x)=>{let B=[];R.subscribe((0,Fe.x)(x,J=>{B.push(J),M<B.length&&B.shift()},()=>{for(const J of B)x.next(J);x.complete()},void 0,()=>{B=null}))})}var vt=W(8068),Mt=W(6590),Rt=W(4671);function At(M,R){const x=arguments.length>=2;return B=>B.pipe(M?(0,X.h)((J,ye)=>M(J,ye,B)):Rt.y,wt(1),x?(0,Mt.d)(R):(0,vt.T)(()=>new Ne.K))}var $t=W(9718);function ln(M){return(0,St.e)((R,x)=>{try{R.subscribe(x)}finally{x.add(M)}})}var Zt=W(8189),hn=W(1481);const Gt="primary",rr=Symbol("RouteTitle");class Wn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const x=this.params[R];return Array.isArray(x)?x[0]:x}return null}getAll(R){if(this.has(R)){const x=this.params[R];return Array.isArray(x)?x:[x]}return[]}get keys(){return Object.keys(this.params)}}function Er(M){return new Wn(M)}function _r(M,R,x){const B=x.path.split("/");if(B.length>M.length||"full"===x.pathMatch&&(R.hasChildren()||B.length<M.length))return null;const J={};for(let ye=0;ye<B.length;ye++){const Se=B[ye],mt=M[ye];if(Se.startsWith(":"))J[Se.substring(1)]=mt;else if(Se!==mt.path)return null}return{consumed:M.slice(0,B.length),posParams:J}}function or(M,R){const x=M?Object.keys(M):void 0,B=R?Object.keys(R):void 0;if(!x||!B||x.length!=B.length)return!1;let J;for(let ye=0;ye<x.length;ye++)if(J=x[ye],!Xn(M[J],R[J]))return!1;return!0}function Xn(M,R){if(Array.isArray(M)&&Array.isArray(R)){if(M.length!==R.length)return!1;const x=[...M].sort(),B=[...R].sort();return x.every((J,ye)=>B[ye]===J)}return M===R}function Hr(M){return Array.prototype.concat.apply([],M)}function zr(M){return M.length>0?M[M.length-1]:null}function xn(M,R){for(const x in M)M.hasOwnProperty(x)&&R(M[x],x)}function mr(M){return(0,E.CqO)(M)?M:(0,E.QGY)(M)?(0,ie.D)(Promise.resolve(M)):(0,ne.of)(M)}const yn=!1,xi={exact:function Ei(M,R,x){if(!Ri(M.segments,R.segments)||!ui(M.segments,R.segments,x)||M.numberOfChildren!==R.numberOfChildren)return!1;for(const B in R.children)if(!M.children[B]||!Ei(M.children[B],R.children[B],x))return!1;return!0},subset:zn},br={exact:function gi(M,R){return or(M,R)},subset:function ur(M,R){return Object.keys(R).length<=Object.keys(M).length&&Object.keys(R).every(x=>Xn(M[x],R[x]))},ignored:()=>!0};function xr(M,R,x){return xi[x.paths](M.root,R.root,x.matrixParams)&&br[x.queryParams](M.queryParams,R.queryParams)&&!("exact"===x.fragment&&M.fragment!==R.fragment)}function zn(M,R,x){return Jn(M,R,R.segments,x)}function Jn(M,R,x,B){if(M.segments.length>x.length){const J=M.segments.slice(0,x.length);return!(!Ri(J,x)||R.hasChildren()||!ui(J,x,B))}if(M.segments.length===x.length){if(!Ri(M.segments,x)||!ui(M.segments,x,B))return!1;for(const J in R.children)if(!M.children[J]||!zn(M.children[J],R.children[J],B))return!1;return!0}{const J=x.slice(0,M.segments.length),ye=x.slice(M.segments.length);return!!(Ri(M.segments,J)&&ui(M.segments,J,B)&&M.children[Gt])&&Jn(M.children[Gt],R,ye,B)}}function ui(M,R,x){return R.every((B,J)=>br[x](M[J].parameters,B.parameters))}class qr{constructor(R=new Mn([],{}),x={},B=null){this.root=R,this.queryParams=x,this.fragment=B}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return si.serialize(this)}}class Mn{constructor(R,x){this.segments=R,this.children=x,this.parent=null,xn(x,(B,J)=>B.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hi(this)}}class wi{constructor(R,x){this.path=R,this.parameters=x}get parameterMap(){return this._parameterMap||(this._parameterMap=Er(this.parameters)),this._parameterMap}toString(){return Ye(this)}}function Ri(M,R){return M.length===R.length&&M.every((x,B)=>x.path===R[B].path)}let li=(()=>{class M{}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return new wr},providedIn:"root"}),M})();class wr{parse(R){const x=new re(R);return new qr(x.parseRootSegment(),x.parseQueryParams(),x.parseFragment())}serialize(R){const x=`/${dn(R.root,!0)}`,B=function Vt(M){const R=Object.keys(M).map(x=>{const B=M[x];return Array.isArray(B)?B.map(J=>`${Cn(x)}=${Cn(J)}`).join("&"):`${Cn(x)}=${Cn(B)}`}).filter(x=>!!x);return R.length?`?${R.join("&")}`:""}(R.queryParams);return`${x}${B}${"string"==typeof R.fragment?`#${function er(M){return encodeURI(M)}(R.fragment)}`:""}`}}const si=new wr;function Hi(M){return M.segments.map(R=>Ye(R)).join("/")}function dn(M,R){if(!M.hasChildren())return Hi(M);if(R){const x=M.children[Gt]?dn(M.children[Gt],!1):"",B=[];return xn(M.children,(J,ye)=>{ye!==Gt&&B.push(`${ye}:${dn(J,!1)}`)}),B.length>0?`${x}(${B.join("//")})`:x}{const x=function sr(M,R){let x=[];return xn(M.children,(B,J)=>{J===Gt&&(x=x.concat(R(B,J)))}),xn(M.children,(B,J)=>{J!==Gt&&(x=x.concat(R(B,J)))}),x}(M,(B,J)=>J===Gt?[dn(M.children[Gt],!1)]:[`${J}:${dn(B,!1)}`]);return 1===Object.keys(M.children).length&&null!=M.children[Gt]?`${Hi(M)}/${x[0]}`:`${Hi(M)}/(${x.join("//")})`}}function zt(M){return encodeURIComponent(M).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cn(M){return zt(M).replace(/%3B/gi,";")}function $n(M){return zt(M).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vn(M){return decodeURIComponent(M)}function Qe(M){return Vn(M.replace(/\+/g,"%20"))}function Ye(M){return`${$n(M.path)}${function at(M){return Object.keys(M).map(R=>`;${$n(R)}=${$n(M[R])}`).join("")}(M.parameters)}`}const Dt=/^[^\/()?;=#]+/;function Tn(M){const R=M.match(Dt);return R?R[0]:""}const cr=/^[^=?&#]+/,mi=/^[^&#]+/;class re{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mn([],{}):new Mn([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let x={};this.peekStartsWith("/(")&&(this.capture("/"),x=this.parseParens(!0));let B={};return this.peekStartsWith("(")&&(B=this.parseParens(!1)),(R.length>0||Object.keys(x).length>0)&&(B[Gt]=new Mn(R,x)),B}parseSegment(){const R=Tn(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new E.vHH(4009,yn);return this.capture(R),new wi(Vn(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const x=Tn(this.remaining);if(!x)return;this.capture(x);let B="";if(this.consumeOptional("=")){const J=Tn(this.remaining);J&&(B=J,this.capture(B))}R[Vn(x)]=Vn(B)}parseQueryParam(R){const x=function Br(M){const R=M.match(cr);return R?R[0]:""}(this.remaining);if(!x)return;this.capture(x);let B="";if(this.consumeOptional("=")){const Se=function pe(M){const R=M.match(mi);return R?R[0]:""}(this.remaining);Se&&(B=Se,this.capture(B))}const J=Qe(x),ye=Qe(B);if(R.hasOwnProperty(J)){let Se=R[J];Array.isArray(Se)||(Se=[Se],R[J]=Se),Se.push(ye)}else R[J]=ye}parseParens(R){const x={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const B=Tn(this.remaining),J=this.remaining[B.length];if("/"!==J&&")"!==J&&";"!==J)throw new E.vHH(4010,yn);let ye;B.indexOf(":")>-1?(ye=B.slice(0,B.indexOf(":")),this.capture(ye),this.capture(":")):R&&(ye=Gt);const Se=this.parseChildren();x[ye]=1===Object.keys(Se).length?Se[Gt]:new Mn([],Se),this.consumeOptional("//")}return x}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new E.vHH(4011,yn)}}function de(M){return M.segments.length>0?new Mn([],{[Gt]:M}):M}function me(M){const R={};for(const B of Object.keys(M.children)){const ye=me(M.children[B]);(ye.segments.length>0||ye.hasChildren())&&(R[B]=ye)}return function ze(M){if(1===M.numberOfChildren&&M.children[Gt]){const R=M.children[Gt];return new Mn(M.segments.concat(R.segments),R.children)}return M}(new Mn(M.segments,R))}function bt(M){return M instanceof qr}function Ci(M,R,x,B,J){if(0===x.length)return fs(R.root,R.root,R.root,B,J);const ye=function rs(M){if("string"==typeof M[0]&&1===M.length&&"/"===M[0])return new ns(!0,0,M);let R=0,x=!1;const B=M.reduce((J,ye,Se)=>{if("object"==typeof ye&&null!=ye){if(ye.outlets){const mt={};return xn(ye.outlets,(Jt,wn)=>{mt[wn]="string"==typeof Jt?Jt.split("/"):Jt}),[...J,{outlets:mt}]}if(ye.segmentPath)return[...J,ye.segmentPath]}return"string"!=typeof ye?[...J,ye]:0===Se?(ye.split("/").forEach((mt,Jt)=>{0==Jt&&"."===mt||(0==Jt&&""===mt?x=!0:".."===mt?R++:""!=mt&&J.push(mt))}),J):[...J,ye]},[]);return new ns(x,R,B)}(x);return ye.toRoot()?fs(R.root,R.root,new Mn([],{}),B,J):function Se(Jt){const wn=function Rr(M,R,x,B){if(M.isAbsolute)return new tr(R.root,!0,0);if(-1===B)return new tr(x,x===R.root,0);return function Mi(M,R,x){let B=M,J=R,ye=x;for(;ye>J;){if(ye-=J,B=B.parent,!B)throw new E.vHH(4005,!1);J=B.segments.length}return new tr(B,!1,J-ye)}(x,B+(Yi(M.commands[0])?0:1),M.numberOfDoubleDots)}(ye,R,M.snapshot?._urlSegment,Jt),lr=wn.processChildren?Dn(wn.segmentGroup,wn.index,ye.commands):ps(wn.segmentGroup,wn.index,ye.commands);return fs(R.root,wn.segmentGroup,lr,B,J)}(M.snapshot?._lastPathIndex)}function Yi(M){return"object"==typeof M&&null!=M&&!M.outlets&&!M.segmentPath}function Zr(M){return"object"==typeof M&&null!=M&&M.outlets}function fs(M,R,x,B,J){let Se,ye={};B&&xn(B,(Jt,wn)=>{ye[wn]=Array.isArray(Jt)?Jt.map(lr=>`${lr}`):`${Jt}`}),Se=M===R?x:Lr(M,R,x);const mt=de(me(Se));return new qr(mt,ye,J)}function Lr(M,R,x){const B={};return xn(M.children,(J,ye)=>{B[ye]=J===R?x:Lr(J,R,x)}),new Mn(M.segments,B)}class ns{constructor(R,x,B){if(this.isAbsolute=R,this.numberOfDoubleDots=x,this.commands=B,R&&B.length>0&&Yi(B[0]))throw new E.vHH(4003,!1);const J=B.find(Zr);if(J&&J!==zr(B))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tr{constructor(R,x,B){this.segmentGroup=R,this.processChildren=x,this.index=B}}function ps(M,R,x){if(M||(M=new Mn([],{})),0===M.segments.length&&M.hasChildren())return Dn(M,R,x);const B=function vr(M,R,x){let B=0,J=R;const ye={match:!1,pathIndex:0,commandIndex:0};for(;J<M.segments.length;){if(B>=x.length)return ye;const Se=M.segments[J],mt=x[B];if(Zr(mt))break;const Jt=`${mt}`,wn=B<x.length-1?x[B+1]:null;if(J>0&&void 0===Jt)break;if(Jt&&wn&&"object"==typeof wn&&void 0===wn.outlets){if(!Ai(Jt,wn,Se))return ye;B+=2}else{if(!Ai(Jt,{},Se))return ye;B++}J++}return{match:!0,pathIndex:J,commandIndex:B}}(M,R,x),J=x.slice(B.commandIndex);if(B.match&&B.pathIndex<M.segments.length){const ye=new Mn(M.segments.slice(0,B.pathIndex),{});return ye.children[Gt]=new Mn(M.segments.slice(B.pathIndex),M.children),Dn(ye,0,J)}return B.match&&0===J.length?new Mn(M.segments,{}):B.match&&!M.hasChildren()?di(M,R,x):B.match?Dn(M,0,J):di(M,R,x)}function Dn(M,R,x){if(0===x.length)return new Mn(M.segments,{});{const B=function is(M){return Zr(M[0])?M[0].outlets:{[Gt]:M}}(x),J={};return xn(B,(ye,Se)=>{"string"==typeof ye&&(ye=[ye]),null!==ye&&(J[Se]=ps(M.children[Se],R,ye))}),xn(M.children,(ye,Se)=>{void 0===B[Se]&&(J[Se]=ye)}),new Mn(M.segments,J)}}function di(M,R,x){const B=M.segments.slice(0,R);let J=0;for(;J<x.length;){const ye=x[J];if(Zr(ye)){const Jt=Ds(ye.outlets);return new Mn(B,Jt)}if(0===J&&Yi(x[0])){B.push(new wi(M.segments[R].path,ss(x[0]))),J++;continue}const Se=Zr(ye)?ye.outlets[Gt]:`${ye}`,mt=J<x.length-1?x[J+1]:null;Se&&mt&&Yi(mt)?(B.push(new wi(Se,ss(mt))),J+=2):(B.push(new wi(Se,{})),J++)}return new Mn(B,{})}function Ds(M){const R={};return xn(M,(x,B)=>{"string"==typeof x&&(x=[x]),null!==x&&(R[B]=di(new Mn([],{}),0,x))}),R}function ss(M){const R={};return xn(M,(x,B)=>R[B]=`${x}`),R}function Ai(M,R,x){return M==x.path&&or(R,x.parameters)}class os{constructor(R,x){this.id=R,this.url=x}}class vi extends os{constructor(R,x,B="imperative",J=null){super(R,x),this.type=0,this.navigationTrigger=B,this.restoredState=J}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bs extends os{constructor(R,x,B){super(R,x),this.urlAfterRedirects=B,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $i extends os{constructor(R,x,B,J){super(R,x),this.reason=B,this.code=J,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cr extends os{constructor(R,x,B,J){super(R,x),this.error=B,this.target=J,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class lo extends os{constructor(R,x,B,J){super(R,x),this.urlAfterRedirects=B,this.state=J,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class co extends os{constructor(R,x,B,J){super(R,x),this.urlAfterRedirects=B,this.state=J,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wu extends os{constructor(R,x,B,J,ye){super(R,x),this.urlAfterRedirects=B,this.state=J,this.shouldActivate=ye,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class js extends os{constructor(R,x,B,J){super(R,x),this.urlAfterRedirects=B,this.state=J,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xs extends os{constructor(R,x,B,J){super(R,x),this.urlAfterRedirects=B,this.state=J,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ls{constructor(R){this.route=R,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Do{constructor(R){this.route=R,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Os{constructor(R){this.snapshot=R,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xo{constructor(R){this.snapshot=R,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vn{constructor(R){this.snapshot=R,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ot{constructor(R){this.snapshot=R,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lt{constructor(R,x,B){this.routerEvent=R,this.position=x,this.anchor=B,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Qt{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const x=this.pathFromRoot(R);return x.length>1?x[x.length-2]:null}children(R){const x=pn(R,this._root);return x?x.children.map(B=>B.value):[]}firstChild(R){const x=pn(R,this._root);return x&&x.children.length>0?x.children[0].value:null}siblings(R){const x=Kn(R,this._root);return x.length<2?[]:x[x.length-2].children.map(J=>J.value).filter(J=>J!==R)}pathFromRoot(R){return Kn(R,this._root).map(x=>x.value)}}function pn(M,R){if(M===R.value)return R;for(const x of R.children){const B=pn(M,x);if(B)return B}return null}function Kn(M,R){if(M===R.value)return[R];for(const x of R.children){const B=Kn(M,x);if(B.length)return B.unshift(R),B}return[]}class ir{constructor(R,x){this.value=R,this.children=x}toString(){return`TreeNode(${this.value})`}}function Pr(M){const R={};return M&&M.children.forEach(x=>R[x.value.outlet]=x),R}class oi extends Qt{constructor(R,x){super(R),this.snapshot=x,ra(this,R)}toString(){return this.snapshot.toString()}}function Ui(M,R){const x=function gs(M,R){const Se=new As([],{},{},"",{},Gt,R,null,M.root,-1,{});return new Yo("",new ir(Se,[]))}(M,R),B=new F.X([new wi("",{})]),J=new F.X({}),ye=new F.X({}),Se=new F.X({}),mt=new F.X(""),Jt=new Bi(B,J,Se,mt,ye,Gt,R,x.root);return Jt.snapshot=x.root,new oi(new ir(Jt,[]),x)}class Bi{constructor(R,x,B,J,ye,Se,mt,Jt){this.url=R,this.params=x,this.queryParams=B,this.fragment=J,this.data=ye,this.outlet=Se,this.component=mt,this.title=this.data?.pipe((0,Xe.U)(wn=>wn[rr]))??(0,ne.of)(void 0),this._futureSnapshot=Jt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(R=>Er(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(R=>Er(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Vr(M,R="emptyOnly"){const x=M.pathFromRoot;let B=0;if("always"!==R)for(B=x.length-1;B>=1;){const J=x[B],ye=x[B-1];if(J.routeConfig&&""===J.routeConfig.path)B--;else{if(ye.component)break;B--}}return function gu(M){return M.reduce((R,x)=>({params:{...R.params,...x.params},data:{...R.data,...x.data},resolve:{...x.data,...R.resolve,...x.routeConfig?.data,...x._resolvedData}}),{params:{},data:{},resolve:{}})}(x.slice(B))}class As{constructor(R,x,B,J,ye,Se,mt,Jt,wn,lr,ni){this.url=R,this.params=x,this.queryParams=B,this.fragment=J,this.data=ye,this.outlet=Se,this.component=mt,this.routeConfig=Jt,this._urlSegment=wn,this._lastPathIndex=lr,this._resolve=ni}get title(){return this.data?.[rr]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(B=>B.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yo extends Qt{constructor(R,x){super(x),this.url=R,ra(this,x)}toString(){return Lo(this._root)}}function ra(M,R){R.value._routerState=M,R.children.forEach(x=>ra(M,x))}function Lo(M){const R=M.children.length>0?` { ${M.children.map(Lo).join(", ")} } `:"";return`${M.value}${R}`}function Xs(M){if(M.snapshot){const R=M.snapshot,x=M._futureSnapshot;M.snapshot=x,or(R.queryParams,x.queryParams)||M.queryParams.next(x.queryParams),R.fragment!==x.fragment&&M.fragment.next(x.fragment),or(R.params,x.params)||M.params.next(x.params),function yi(M,R){if(M.length!==R.length)return!1;for(let x=0;x<M.length;++x)if(!or(M[x],R[x]))return!1;return!0}(R.url,x.url)||M.url.next(x.url),or(R.data,x.data)||M.data.next(x.data)}else M.snapshot=M._futureSnapshot,M.data.next(M._futureSnapshot.data)}function Fo(M,R){const x=or(M.params,R.params)&&function ki(M,R){return Ri(M,R)&&M.every((x,B)=>or(x.parameters,R[B].parameters))}(M.url,R.url);return x&&!(!M.parent!=!R.parent)&&(!M.parent||Fo(M.parent,R.parent))}function ya(M,R,x){if(x&&M.shouldReuseRoute(R.value,x.value.snapshot)){const B=x.value;B._futureSnapshot=R.value;const J=function Oa(M,R,x){return R.children.map(B=>{for(const J of x.children)if(M.shouldReuseRoute(B.value,J.value.snapshot))return ya(M,B,J);return ya(M,B)})}(M,R,x);return new ir(B,J)}{if(M.shouldAttach(R.value)){const ye=M.retrieve(R.value);if(null!==ye){const Se=ye.route;return Se.value._futureSnapshot=R.value,Se.children=R.children.map(mt=>ya(M,mt)),Se}}const B=function qa(M){return new Bi(new F.X(M.url),new F.X(M.params),new F.X(M.queryParams),new F.X(M.fragment),new F.X(M.data),M.outlet,M.component,M)}(R.value),J=R.children.map(ye=>ya(M,ye));return new ir(B,J)}}const jo="ngNavigationCancelingError";function ho(M,R){const{redirectTo:x,navigationBehaviorOptions:B}=bt(R)?{redirectTo:R,navigationBehaviorOptions:void 0}:R,J=no(!1,0,R);return J.url=x,J.navigationBehaviorOptions=B,J}function no(M,R,x){const B=new Error("NavigationCancelingError: "+(M||""));return B[jo]=!0,B.cancellationCode=R,x&&(B.url=x),B}function zs(M){return Us(M)&&bt(M.url)}function Us(M){return M&&M[jo]}class ia{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Uo,this.attachRef=null}}let Uo=(()=>{class M{constructor(){this.contexts=new Map}onChildOutletCreated(x,B){const J=this.getOrCreateContext(x);J.outlet=B,this.contexts.set(x,J)}onChildOutletDestroyed(x){const B=this.getContext(x);B&&(B.outlet=null,B.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let B=this.getContext(x);return B||(B=new ia,this.contexts.set(x,B)),B}getContext(x){return this.contexts.get(x)||null}}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const ms=!1;let Wa=(()=>{class M{constructor(){this.activated=null,this._activatedRoute=null,this.name=Gt,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(Uo),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb)}ngOnChanges(x){if(x.name){const{firstChange:B,previousValue:J}=x.name;if(B)return;this.isTrackedInParentContexts(J)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(J)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(x){return this.parentContexts.getContext(x)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const x=this.parentContexts.getContext(this.name);x?.route&&(x.attachRef?this.attach(x.attachRef,x.route):this.activateWith(x.route,x.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,ms);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,ms);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,ms);this.location.detach();const x=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(x.instance),x}attach(x,B){this.activated=x,this._activatedRoute=B,this.location.insert(x.hostView),this.attachEvents.emit(x.instance)}deactivate(){if(this.activated){const x=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(x)}}activateWith(x,B){if(this.isActivated)throw new E.vHH(4013,ms);this._activatedRoute=x;const J=this.location,Se=x.snapshot.component,mt=this.parentContexts.getOrCreateContext(this.name).children,Jt=new sa(x,mt,J.injector);if(B&&function Qo(M){return!!M.resolveComponentFactory}(B)){const wn=B.resolveComponentFactory(Se);this.activated=J.createComponent(wn,J.length,Jt)}else this.activated=J.createComponent(Se,{index:J.length,injector:Jt,environmentInjector:B??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return M.\u0275fac=function(x){return new(x||M)},M.\u0275dir=E.lG2({type:M,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]}),M})();class sa{constructor(R,x,B){this.route=R,this.childContexts=x,this.parent=B}get(R,x){return R===Bi?this.route:R===Uo?this.childContexts:this.parent.get(R,x)}}let Yr=(()=>{class M{}return M.\u0275fac=function(x){return new(x||M)},M.\u0275cmp=E.Xpm({type:M,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(x,B){1&x&&E._UZ(0,"router-outlet")},dependencies:[Wa],encapsulation:2}),M})();function Js(M,R){return M.providers&&!M._injector&&(M._injector=(0,E.MMx)(M.providers,R,`Route: ${M.path}`)),M._injector??R}function Bo(M){const R=M.children&&M.children.map(Bo),x=R?{...M,children:R}:{...M};return!x.component&&!x.loadComponent&&(R||x.loadChildren)&&x.outlet&&x.outlet!==Gt&&(x.component=Yr),x}function qs(M){return M.outlet||Gt}function zi(M,R){const x=M.filter(B=>qs(B)===R);return x.push(...M.filter(B=>qs(B)!==R)),x}function _i(M){if(!M)return null;if(M.routeConfig?._injector)return M.routeConfig._injector;for(let R=M.parent;R;R=R.parent){const x=R.routeConfig;if(x?._loadedInjector)return x._loadedInjector;if(x?._injector)return x._injector}return null}class cs{constructor(R,x,B,J){this.routeReuseStrategy=R,this.futureState=x,this.currState=B,this.forwardEvent=J}activate(R){const x=this.futureState._root,B=this.currState?this.currState._root:null;this.deactivateChildRoutes(x,B,R),Xs(this.futureState.root),this.activateChildRoutes(x,B,R)}deactivateChildRoutes(R,x,B){const J=Pr(x);R.children.forEach(ye=>{const Se=ye.value.outlet;this.deactivateRoutes(ye,J[Se],B),delete J[Se]}),xn(J,(ye,Se)=>{this.deactivateRouteAndItsChildren(ye,B)})}deactivateRoutes(R,x,B){const J=R.value,ye=x?x.value:null;if(J===ye)if(J.component){const Se=B.getContext(J.outlet);Se&&this.deactivateChildRoutes(R,x,Se.children)}else this.deactivateChildRoutes(R,x,B);else ye&&this.deactivateRouteAndItsChildren(x,B)}deactivateRouteAndItsChildren(R,x){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,x):this.deactivateRouteAndOutlet(R,x)}detachAndStoreRouteSubtree(R,x){const B=x.getContext(R.value.outlet),J=B&&R.value.component?B.children:x,ye=Pr(R);for(const Se of Object.keys(ye))this.deactivateRouteAndItsChildren(ye[Se],J);if(B&&B.outlet){const Se=B.outlet.detach(),mt=B.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Se,route:R,contexts:mt})}}deactivateRouteAndOutlet(R,x){const B=x.getContext(R.value.outlet),J=B&&R.value.component?B.children:x,ye=Pr(R);for(const Se of Object.keys(ye))this.deactivateRouteAndItsChildren(ye[Se],J);B&&B.outlet&&(B.outlet.deactivate(),B.children.onOutletDeactivated(),B.attachRef=null,B.resolver=null,B.route=null)}activateChildRoutes(R,x,B){const J=Pr(x);R.children.forEach(ye=>{this.activateRoutes(ye,J[ye.value.outlet],B),this.forwardEvent(new ot(ye.value.snapshot))}),R.children.length&&this.forwardEvent(new xo(R.value.snapshot))}activateRoutes(R,x,B){const J=R.value,ye=x?x.value:null;if(Xs(J),J===ye)if(J.component){const Se=B.getOrCreateContext(J.outlet);this.activateChildRoutes(R,x,Se.children)}else this.activateChildRoutes(R,x,B);else if(J.component){const Se=B.getOrCreateContext(J.outlet);if(this.routeReuseStrategy.shouldAttach(J.snapshot)){const mt=this.routeReuseStrategy.retrieve(J.snapshot);this.routeReuseStrategy.store(J.snapshot,null),Se.children.onOutletReAttached(mt.contexts),Se.attachRef=mt.componentRef,Se.route=mt.route.value,Se.outlet&&Se.outlet.attach(mt.componentRef,mt.route.value),Xs(mt.route.value),this.activateChildRoutes(R,null,Se.children)}else{const mt=_i(J.snapshot),Jt=mt?.get(E._Vd)??null;Se.attachRef=null,Se.route=J,Se.resolver=Jt,Se.injector=mt,Se.outlet&&Se.outlet.activateWith(J,Se.injector),this.activateChildRoutes(R,null,Se.children)}}else this.activateChildRoutes(R,null,B)}}class Ao{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Vo{constructor(R,x){this.component=R,this.route=x}}function vs(M,R,x){const B=M._root;return Ks(B,R?R._root:null,x,[B.value])}function Rs(M,R){const x=Symbol(),B=R.get(M,x);return B===x?"function"!=typeof M||(0,E.Z0I)(M)?R.get(M):M:B}function Ks(M,R,x,B,J={canDeactivateChecks:[],canActivateChecks:[]}){const ye=Pr(R);return M.children.forEach(Se=>{(function Ns(M,R,x,B,J={canDeactivateChecks:[],canActivateChecks:[]}){const ye=M.value,Se=R?R.value:null,mt=x?x.getContext(M.value.outlet):null;if(Se&&ye.routeConfig===Se.routeConfig){const Jt=function ea(M,R,x){if("function"==typeof x)return x(M,R);switch(x){case"pathParamsChange":return!Ri(M.url,R.url);case"pathParamsOrQueryParamsChange":return!Ri(M.url,R.url)||!or(M.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fo(M,R)||!or(M.queryParams,R.queryParams);default:return!Fo(M,R)}}(Se,ye,ye.routeConfig.runGuardsAndResolvers);Jt?J.canActivateChecks.push(new Ao(B)):(ye.data=Se.data,ye._resolvedData=Se._resolvedData),Ks(M,R,ye.component?mt?mt.children:null:x,B,J),Jt&&mt&&mt.outlet&&mt.outlet.isActivated&&J.canDeactivateChecks.push(new Vo(mt.outlet.component,Se))}else Se&&po(R,mt,J),J.canActivateChecks.push(new Ao(B)),Ks(M,null,ye.component?mt?mt.children:null:x,B,J)})(Se,ye[Se.value.outlet],x,B.concat([Se.value]),J),delete ye[Se.value.outlet]}),xn(ye,(Se,mt)=>po(Se,x.getContext(mt),J)),J}function po(M,R,x){const B=Pr(M),J=M.value;xn(B,(ye,Se)=>{po(ye,J.component?R?R.children.getContext(Se):null:R,x)}),x.canDeactivateChecks.push(new Vo(J.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,J))}function go(M){return"function"==typeof M}function k(M){return M instanceof Ne.K||"EmptyError"===M?.name}const ce=Symbol("INITIAL_VALUE");function Ie(){return(0,gt.w)(M=>(0,Be.a)(M.map(R=>R.pipe((0,kt.q)(1),(0,xt.O)(ce)))).pipe((0,Xe.U)(R=>{for(const x of R)if(!0!==x){if(x===ce)return ce;if(!1===x||x instanceof qr)return x}return!0}),(0,X.h)(R=>R!==ce),(0,kt.q)(1)))}function Ni(M){return(0,Ee.z)((0,Oe.b)(R=>{if(bt(R))throw ho(0,R)}),(0,Xe.U)(R=>!0===R))}const Xi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Oi(M,R,x,B,J){const ye=Ts(M,R,x);return ye.matched?function Ar(M,R,x,B){const J=R.canMatch;if(!J||0===J.length)return(0,ne.of)(!0);const ye=J.map(Se=>{const mt=Rs(Se,M);return mr(function te(M){return M&&go(M.canMatch)}(mt)?mt.canMatch(R,x):M.runInContext(()=>mt(R,x)))});return(0,ne.of)(ye).pipe(Ie(),Ni())}(B=Js(R,B),R,x).pipe((0,Xe.U)(Se=>!0===Se?ye:{...Xi})):(0,ne.of)(ye)}function Ts(M,R,x){if(""===R.path)return"full"===R.pathMatch&&(M.hasChildren()||x.length>0)?{...Xi}:{matched:!0,consumedSegments:[],remainingSegments:x,parameters:{},positionalParamSegments:{}};const J=(R.matcher||_r)(x,M,R);if(!J)return{...Xi};const ye={};xn(J.posParams,(mt,Jt)=>{ye[Jt]=mt.path});const Se=J.consumed.length>0?{...ye,...J.consumed[J.consumed.length-1].parameters}:ye;return{matched:!0,consumedSegments:J.consumed,remainingSegments:x.slice(J.consumed.length),parameters:Se,positionalParamSegments:J.posParams??{}}}function ar(M,R,x,B){if(x.length>0&&function Zs(M,R,x){return x.some(B=>yo(M,R,B)&&qs(B)!==Gt)}(M,x,B)){const ye=new Mn(R,function Is(M,R,x,B){const J={};J[Gt]=B,B._sourceSegment=M,B._segmentIndexShift=R.length;for(const ye of x)if(""===ye.path&&qs(ye)!==Gt){const Se=new Mn([],{});Se._sourceSegment=M,Se._segmentIndexShift=R.length,J[qs(ye)]=Se}return J}(M,R,B,new Mn(x,M.children)));return ye._sourceSegment=M,ye._segmentIndexShift=R.length,{segmentGroup:ye,slicedSegments:[]}}if(0===x.length&&function Es(M,R,x){return x.some(B=>yo(M,R,B))}(M,x,B)){const ye=new Mn(M.segments,function Vi(M,R,x,B,J){const ye={};for(const Se of B)if(yo(M,x,Se)&&!J[qs(Se)]){const mt=new Mn([],{});mt._sourceSegment=M,mt._segmentIndexShift=R.length,ye[qs(Se)]=mt}return{...J,...ye}}(M,R,x,B,M.children));return ye._sourceSegment=M,ye._segmentIndexShift=R.length,{segmentGroup:ye,slicedSegments:x}}const J=new Mn(M.segments,M.children);return J._sourceSegment=M,J._segmentIndexShift=R.length,{segmentGroup:J,slicedSegments:x}}function yo(M,R,x){return(!(M.hasChildren()||R.length>0)||"full"!==x.pathMatch)&&""===x.path}function Ho(M,R,x,B){return!!(qs(M)===B||B!==Gt&&yo(R,x,M))&&("**"===M.path||Ts(R,M,x).matched)}function oa(M,R,x){return 0===R.length&&!M.children[x]}const Na=!1;class aa{constructor(R){this.segmentGroup=R||null}}class _o{constructor(R){this.urlTree=R}}function ou(M){return $e(new aa(M))}function ua(M){return $e(new _o(M))}class Hu{constructor(R,x,B,J,ye){this.injector=R,this.configLoader=x,this.urlSerializer=B,this.urlTree=J,this.config=ye,this.allowRedirects=!0}apply(){const R=ar(this.urlTree.root,[],[],this.config).segmentGroup,x=new Mn(R.segments,R.children);return this.expandSegmentGroup(this.injector,this.config,x,Gt).pipe((0,Xe.U)(ye=>this.createUrlTree(me(ye),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qe(ye=>{if(ye instanceof _o)return this.allowRedirects=!1,this.match(ye.urlTree);throw ye instanceof aa?this.noMatchError(ye):ye}))}match(R){return this.expandSegmentGroup(this.injector,this.config,R.root,Gt).pipe((0,Xe.U)(J=>this.createUrlTree(me(J),R.queryParams,R.fragment))).pipe(qe(J=>{throw J instanceof aa?this.noMatchError(J):J}))}noMatchError(R){return new E.vHH(4002,Na)}createUrlTree(R,x,B){const J=de(R);return new qr(J,x,B)}expandSegmentGroup(R,x,B,J){return 0===B.segments.length&&B.hasChildren()?this.expandChildren(R,x,B).pipe((0,Xe.U)(ye=>new Mn([],ye))):this.expandSegment(R,B,x,B.segments,J,!0)}expandChildren(R,x,B){const J=[];for(const ye of Object.keys(B.children))"primary"===ye?J.unshift(ye):J.push(ye);return(0,ie.D)(J).pipe(Le(ye=>{const Se=B.children[ye],mt=zi(x,ye);return this.expandSegmentGroup(R,mt,Se,ye).pipe((0,Xe.U)(Jt=>({segment:Jt,outlet:ye})))}),(0,dt.R)((ye,Se)=>(ye[Se.outlet]=Se.segment,ye),{}),At())}expandSegment(R,x,B,J,ye,Se){return(0,ie.D)(B).pipe(Le(mt=>this.expandSegmentAgainstRoute(R,x,B,mt,J,ye,Se).pipe(qe(wn=>{if(wn instanceof aa)return(0,ne.of)(null);throw wn}))),(0,ge.P)(mt=>!!mt),qe((mt,Jt)=>{if(k(mt))return oa(x,J,ye)?(0,ne.of)(new Mn([],{})):ou(x);throw mt}))}expandSegmentAgainstRoute(R,x,B,J,ye,Se,mt){return Ho(J,x,ye,Se)?void 0===J.redirectTo?this.matchSegmentAgainstRoute(R,x,J,ye,Se):mt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,x,B,J,ye,Se):ou(x):ou(x)}expandSegmentAgainstRouteUsingRedirect(R,x,B,J,ye,Se){return"**"===J.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,B,J,Se):this.expandRegularSegmentAgainstRouteUsingRedirect(R,x,B,J,ye,Se)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,x,B,J){const ye=this.applyRedirectCommands([],B.redirectTo,{});return B.redirectTo.startsWith("/")?ua(ye):this.lineralizeSegments(B,ye).pipe((0,ve.z)(Se=>{const mt=new Mn(Se,{});return this.expandSegment(R,mt,x,Se,J,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,x,B,J,ye,Se){const{matched:mt,consumedSegments:Jt,remainingSegments:wn,positionalParamSegments:lr}=Ts(x,J,ye);if(!mt)return ou(x);const ni=this.applyRedirectCommands(Jt,J.redirectTo,lr);return J.redirectTo.startsWith("/")?ua(ni):this.lineralizeSegments(J,ni).pipe((0,ve.z)(Jr=>this.expandSegment(R,x,B,Jr.concat(wn),Se,!1)))}matchSegmentAgainstRoute(R,x,B,J,ye){return"**"===B.path?(R=Js(B,R),B.loadChildren?(B._loadedRoutes?(0,ne.of)({routes:B._loadedRoutes,injector:B._loadedInjector}):this.configLoader.loadChildren(R,B)).pipe((0,Xe.U)(mt=>(B._loadedRoutes=mt.routes,B._loadedInjector=mt.injector,new Mn(J,{})))):(0,ne.of)(new Mn(J,{}))):Oi(x,B,J,R).pipe((0,gt.w)(({matched:Se,consumedSegments:mt,remainingSegments:Jt})=>Se?this.getChildConfig(R=B._injector??R,B,J).pipe((0,ve.z)(lr=>{const ni=lr.injector??R,Jr=lr.routes,{segmentGroup:da,slicedSegments:Wi}=ar(x,mt,Jt,Jr),Mo=new Mn(da.segments,da.children);if(0===Wi.length&&Mo.hasChildren())return this.expandChildren(ni,Jr,Mo).pipe((0,Xe.U)(vu=>new Mn(mt,vu)));if(0===Jr.length&&0===Wi.length)return(0,ne.of)(new Mn(mt,{}));const Cs=qs(B)===ye;return this.expandSegment(ni,Mo,Jr,Wi,Cs?Gt:ye,!0).pipe((0,Xe.U)(Wu=>new Mn(mt.concat(Wu.segments),Wu.children)))})):ou(x)))}getChildConfig(R,x,B){return x.children?(0,ne.of)({routes:x.children,injector:R}):x.loadChildren?void 0!==x._loadedRoutes?(0,ne.of)({routes:x._loadedRoutes,injector:x._loadedInjector}):function Qr(M,R,x,B){const J=R.canLoad;if(void 0===J||0===J.length)return(0,ne.of)(!0);const ye=J.map(Se=>{const mt=Rs(Se,M);return mr(function ro(M){return M&&go(M.canLoad)}(mt)?mt.canLoad(R,x):M.runInContext(()=>mt(R,x)))});return(0,ne.of)(ye).pipe(Ie(),Ni())}(R,x,B).pipe((0,ve.z)(J=>J?this.configLoader.loadChildren(R,x).pipe((0,Oe.b)(ye=>{x._loadedRoutes=ye.routes,x._loadedInjector=ye.injector})):function Ol(M){return $e(no(Na,3))}())):(0,ne.of)({routes:[],injector:R})}lineralizeSegments(R,x){let B=[],J=x.root;for(;;){if(B=B.concat(J.segments),0===J.numberOfChildren)return(0,ne.of)(B);if(J.numberOfChildren>1||!J.children[Gt])return $e(new E.vHH(4e3,Na));J=J.children[Gt]}}applyRedirectCommands(R,x,B){return this.applyRedirectCreateUrlTree(x,this.urlSerializer.parse(x),R,B)}applyRedirectCreateUrlTree(R,x,B,J){const ye=this.createSegmentGroup(R,x.root,B,J);return new qr(ye,this.createQueryParams(x.queryParams,this.urlTree.queryParams),x.fragment)}createQueryParams(R,x){const B={};return xn(R,(J,ye)=>{if("string"==typeof J&&J.startsWith(":")){const mt=J.substring(1);B[ye]=x[mt]}else B[ye]=J}),B}createSegmentGroup(R,x,B,J){const ye=this.createSegments(R,x.segments,B,J);let Se={};return xn(x.children,(mt,Jt)=>{Se[Jt]=this.createSegmentGroup(R,mt,B,J)}),new Mn(ye,Se)}createSegments(R,x,B,J){return x.map(ye=>ye.path.startsWith(":")?this.findPosParam(R,ye,J):this.findOrReturn(ye,B))}findPosParam(R,x,B){const J=B[x.path.substring(1)];if(!J)throw new E.vHH(4001,Na);return J}findOrReturn(R,x){let B=0;for(const J of x){if(J.path===R.path)return x.splice(B),J;B++}return R}}class au{}class Gu{constructor(R,x,B,J,ye,Se,mt){this.injector=R,this.rootComponentType=x,this.config=B,this.urlTree=J,this.url=ye,this.paramsInheritanceStrategy=Se,this.urlSerializer=mt}recognize(){const R=ar(this.urlTree.root,[],[],this.config.filter(x=>void 0===x.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,R,Gt).pipe((0,Xe.U)(x=>{if(null===x)return null;const B=new As([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),J=new ir(B,x),ye=new Yo(this.url,J);return this.inheritParamsAndData(ye._root),ye}))}inheritParamsAndData(R){const x=R.value,B=Vr(x,this.paramsInheritanceStrategy);x.params=Object.freeze(B.params),x.data=Object.freeze(B.data),R.children.forEach(J=>this.inheritParamsAndData(J))}processSegmentGroup(R,x,B,J){return 0===B.segments.length&&B.hasChildren()?this.processChildren(R,x,B):this.processSegment(R,x,B,B.segments,J)}processChildren(R,x,B){return(0,ie.D)(Object.keys(B.children)).pipe(Le(J=>{const ye=B.children[J],Se=zi(x,J);return this.processSegmentGroup(R,Se,ye,J)}),(0,dt.R)((J,ye)=>J&&ye?(J.push(...ye),J):null),function Yt(M,R=!1){return(0,St.e)((x,B)=>{let J=0;x.subscribe((0,Fe.x)(B,ye=>{const Se=M(ye,J++);(Se||R)&&B.next(ye),!Se&&B.complete()}))})}(J=>null!==J),(0,Mt.d)(null),At(),(0,Xe.U)(J=>{if(null===J)return null;const ye=la(J);return function Go(M){M.sort((R,x)=>R.value.outlet===Gt?-1:x.value.outlet===Gt?1:R.value.outlet.localeCompare(x.value.outlet))}(ye),ye}))}processSegment(R,x,B,J,ye){return(0,ie.D)(x).pipe(Le(Se=>this.processSegmentAgainstRoute(Se._injector??R,Se,B,J,ye)),(0,ge.P)(Se=>!!Se),qe(Se=>{if(k(Se))return oa(B,J,ye)?(0,ne.of)([]):(0,ne.of)(null);throw Se}))}processSegmentAgainstRoute(R,x,B,J,ye){if(x.redirectTo||!Ho(x,B,J,ye))return(0,ne.of)(null);let Se;if("**"===x.path){const mt=J.length>0?zr(J).parameters:{},Jt=Ka(B)+J.length,wn=new As(J,mt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,V(x),qs(x),x.component??x._loadedComponent??null,x,Ir(B),Jt,ue(x));Se=(0,ne.of)({snapshot:wn,consumedSegments:[],remainingSegments:[]})}else Se=Oi(B,x,J,R).pipe((0,Xe.U)(({matched:mt,consumedSegments:Jt,remainingSegments:wn,parameters:lr})=>{if(!mt)return null;const ni=Ka(B)+Jt.length;return{snapshot:new As(Jt,lr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,V(x),qs(x),x.component??x._loadedComponent??null,x,Ir(B),ni,ue(x)),consumedSegments:Jt,remainingSegments:wn}}));return Se.pipe((0,gt.w)(mt=>{if(null===mt)return(0,ne.of)(null);const{snapshot:Jt,consumedSegments:wn,remainingSegments:lr}=mt;R=x._injector??R;const ni=x._loadedInjector??R,Jr=function Ea(M){return M.children?M.children:M.loadChildren?M._loadedRoutes:[]}(x),{segmentGroup:da,slicedSegments:Wi}=ar(B,wn,lr,Jr.filter(Cs=>void 0===Cs.redirectTo));if(0===Wi.length&&da.hasChildren())return this.processChildren(ni,Jr,da).pipe((0,Xe.U)(Cs=>null===Cs?null:[new ir(Jt,Cs)]));if(0===Jr.length&&0===Wi.length)return(0,ne.of)([new ir(Jt,[])]);const Mo=qs(x)===ye;return this.processSegment(ni,Jr,da,Wi,Mo?Gt:ye).pipe((0,Xe.U)(Cs=>null===Cs?null:[new ir(Jt,Cs)]))}))}}function Li(M){const R=M.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function la(M){const R=[],x=new Set;for(const B of M){if(!Li(B)){R.push(B);continue}const J=R.find(ye=>B.value.routeConfig===ye.value.routeConfig);void 0!==J?(J.children.push(...B.children),x.add(J)):R.push(B)}for(const B of x){const J=la(B.children);R.push(new ir(B.value,J))}return R.filter(B=>!x.has(B))}function Ir(M){let R=M;for(;R._sourceSegment;)R=R._sourceSegment;return R}function Ka(M){let R=M,x=R._segmentIndexShift??0;for(;R._sourceSegment;)R=R._sourceSegment,x+=R._segmentIndexShift??0;return x-1}function V(M){return M.data||{}}function ue(M){return M.resolve||{}}function ai(M){return"string"==typeof M.title||null===M.title}function Gr(M){return(0,gt.w)(R=>{const x=M(R);return x?(0,ie.D)(x).pipe((0,Xe.U)(()=>R)):(0,ne.of)(R)})}const Xr=new E.OlP("ROUTES");let bi=(()=>{class M{constructor(x,B){this.injector=x,this.compiler=B,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(x){if(this.componentLoaders.get(x))return this.componentLoaders.get(x);if(x._loadedComponent)return(0,ne.of)(x._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(x);const B=mr(x.loadComponent()).pipe((0,Xe.U)(cn),(0,Oe.b)(ye=>{this.onLoadEndListener&&this.onLoadEndListener(x),x._loadedComponent=ye}),ln(()=>{this.componentLoaders.delete(x)})),J=new st(B,()=>new Et.x).pipe(ut());return this.componentLoaders.set(x,J),J}loadChildren(x,B){if(this.childrenLoaders.get(B))return this.childrenLoaders.get(B);if(B._loadedRoutes)return(0,ne.of)({routes:B._loadedRoutes,injector:B._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(B);const ye=this.loadModuleFactoryOrRoutes(B.loadChildren).pipe((0,Xe.U)(mt=>{this.onLoadEndListener&&this.onLoadEndListener(B);let Jt,wn,lr=!1;Array.isArray(mt)?wn=mt:(Jt=mt.create(x).injector,wn=Hr(Jt.get(Xr,[],E.XFs.Self|E.XFs.Optional)));return{routes:wn.map(Bo),injector:Jt}}),ln(()=>{this.childrenLoaders.delete(B)})),Se=new st(ye,()=>new Et.x).pipe(ut());return this.childrenLoaders.set(B,Se),Se}loadModuleFactoryOrRoutes(x){return mr(x()).pipe((0,Xe.U)(cn),(0,ve.z)(J=>J instanceof E.YKP||Array.isArray(J)?(0,ne.of)(J):(0,ie.D)(this.compiler.compileModuleAsync(J))))}}return M.\u0275fac=function(x){return new(x||M)(E.LFG(E.zs3),E.LFG(E.Sil))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function cn(M){return function to(M){return M&&"object"==typeof M&&"default"in M}(M)?M.default:M}let ci=(()=>{class M{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Et.x,this.configLoader=(0,E.f3M)(bi),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(li),this.rootContexts=(0,E.f3M)(Uo),this.navigationId=0,this.configLoader.onLoadEndListener=J=>this.events.next(new Do(J)),this.configLoader.onLoadStartListener=J=>this.events.next(new ls(J))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(x){const B=++this.navigationId;this.transitions?.next({...this.transitions.value,...x,id:B})}setupNavigations(x){return this.transitions=new F.X({id:0,targetPageId:0,currentUrlTree:x.currentUrlTree,currentRawUrl:x.currentUrlTree,extractedUrl:x.urlHandlingStrategy.extract(x.currentUrlTree),urlAfterRedirects:x.urlHandlingStrategy.extract(x.currentUrlTree),rawUrl:x.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:x.routerState.snapshot,targetSnapshot:null,currentRouterState:x.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,X.h)(B=>0!==B.id),(0,Xe.U)(B=>({...B,extractedUrl:x.urlHandlingStrategy.extract(B.rawUrl)})),(0,gt.w)(B=>{let J=!1,ye=!1;return(0,ne.of)(B).pipe((0,Oe.b)(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.rawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,gt.w)(Se=>{const mt=x.browserUrlTree.toString(),Jt=!x.navigated||Se.extractedUrl.toString()!==mt||mt!==x.currentUrlTree.toString();if(("reload"===x.onSameUrlNavigation||Jt)&&x.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return Io(Se.source)&&(x.browserUrlTree=Se.extractedUrl),(0,ne.of)(Se).pipe((0,gt.w)(lr=>{const ni=this.transitions?.getValue();return this.events.next(new vi(lr.id,this.urlSerializer.serialize(lr.extractedUrl),lr.source,lr.restoredState)),ni!==this.transitions?.getValue()?rt.E:Promise.resolve(lr)}),function sc(M,R,x,B){return(0,gt.w)(J=>function Ta(M,R,x,B,J){return new Hu(M,R,x,B,J).apply()}(M,R,x,J.extractedUrl,B).pipe((0,Xe.U)(ye=>({...J,urlAfterRedirects:ye}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,x.config),(0,Oe.b)(lr=>{this.currentNavigation={...this.currentNavigation,finalUrl:lr.urlAfterRedirects},B.urlAfterRedirects=lr.urlAfterRedirects}),function G(M,R,x,B,J){return(0,ve.z)(ye=>function Cu(M,R,x,B,J,ye,Se="emptyOnly"){return new Gu(M,R,x,B,J,Se,ye).recognize().pipe((0,gt.w)(mt=>null===mt?function Ic(M){return new He.y(R=>R.error(M))}(new au):(0,ne.of)(mt)))}(M,R,x,ye.urlAfterRedirects,B.serialize(ye.urlAfterRedirects),B,J).pipe((0,Xe.U)(Se=>({...ye,targetSnapshot:Se}))))}(this.environmentInjector,x.rootComponentType,x.config,this.urlSerializer,x.paramsInheritanceStrategy),(0,Oe.b)(lr=>{if(B.targetSnapshot=lr.targetSnapshot,"eager"===x.urlUpdateStrategy){if(!lr.extras.skipLocationChange){const Jr=x.urlHandlingStrategy.merge(lr.urlAfterRedirects,lr.rawUrl);x.setBrowserUrl(Jr,lr)}x.browserUrlTree=lr.urlAfterRedirects}const ni=new lo(lr.id,this.urlSerializer.serialize(lr.extractedUrl),this.urlSerializer.serialize(lr.urlAfterRedirects),lr.targetSnapshot);this.events.next(ni)}));if(Jt&&x.rawUrlTree&&x.urlHandlingStrategy.shouldProcessUrl(x.rawUrlTree)){const{id:ni,extractedUrl:Jr,source:da,restoredState:Wi,extras:Mo}=Se,Cs=new vi(ni,this.urlSerializer.serialize(Jr),da,Wi);this.events.next(Cs);const ta=Ui(Jr,x.rootComponentType).snapshot;return B={...Se,targetSnapshot:ta,urlAfterRedirects:Jr,extras:{...Mo,skipLocationChange:!1,replaceUrl:!1}},(0,ne.of)(B)}return x.rawUrlTree=Se.rawUrl,Se.resolve(null),rt.E}),(0,Oe.b)(Se=>{const mt=new co(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects),Se.targetSnapshot);this.events.next(mt)}),(0,Xe.U)(Se=>B={...Se,guards:vs(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)}),function tt(M,R){return(0,ve.z)(x=>{const{targetSnapshot:B,currentSnapshot:J,guards:{canActivateChecks:ye,canDeactivateChecks:Se}}=x;return 0===Se.length&&0===ye.length?(0,ne.of)({...x,guardsResult:!0}):function Ge(M,R,x,B){return(0,ie.D)(M).pipe((0,ve.z)(J=>function Qi(M,R,x,B,J){const ye=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!ye||0===ye.length)return(0,ne.of)(!0);const Se=ye.map(mt=>{const Jt=_i(R)??J,wn=Rs(mt,Jt);return mr(function mu(M){return M&&go(M.canDeactivate)}(wn)?wn.canDeactivate(M,R,x,B):Jt.runInContext(()=>wn(M,R,x,B))).pipe((0,ge.P)())});return(0,ne.of)(Se).pipe(Ie())}(J.component,J.route,x,R,B)),(0,ge.P)(J=>!0!==J,!0))}(Se,B,J,M).pipe((0,ve.z)(mt=>mt&&function mo(M){return"boolean"==typeof M}(mt)?function Ut(M,R,x,B){return(0,ie.D)(R).pipe(Le(J=>(0,ae.z)(function qt(M,R){return null!==M&&R&&R(new Os(M)),(0,ne.of)(!0)}(J.route.parent,B),function Fn(M,R){return null!==M&&R&&R(new vn(M)),(0,ne.of)(!0)}(J.route,B),function $r(M,R,x){const B=R[R.length-1],ye=R.slice(0,R.length-1).reverse().map(Se=>function Ws(M){const R=M.routeConfig?M.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:M,guards:R}:null}(Se)).filter(Se=>null!==Se).map(Se=>De(()=>{const mt=Se.guards.map(Jt=>{const wn=_i(Se.node)??x,lr=Rs(Jt,wn);return mr(function Sr(M){return M&&go(M.canActivateChild)}(lr)?lr.canActivateChild(B,M):wn.runInContext(()=>lr(B,M))).pipe((0,ge.P)())});return(0,ne.of)(mt).pipe(Ie())}));return(0,ne.of)(ye).pipe(Ie())}(M,J.path,x),function Un(M,R,x){const B=R.routeConfig?R.routeConfig.canActivate:null;if(!B||0===B.length)return(0,ne.of)(!0);const J=B.map(ye=>De(()=>{const Se=_i(R)??x,mt=Rs(ye,Se);return mr(function vo(M){return M&&go(M.canActivate)}(mt)?mt.canActivate(R,M):Se.runInContext(()=>mt(R,M))).pipe((0,ge.P)())}));return(0,ne.of)(J).pipe(Ie())}(M,J.route,x))),(0,ge.P)(J=>!0!==J,!0))}(B,ye,M,R):(0,ne.of)(mt)),(0,Xe.U)(mt=>({...x,guardsResult:mt})))})}(this.environmentInjector,Se=>this.events.next(Se)),(0,Oe.b)(Se=>{if(B.guardsResult=Se.guardsResult,bt(Se.guardsResult))throw ho(0,Se.guardsResult);const mt=new wu(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.events.next(mt)}),(0,X.h)(Se=>!!Se.guardsResult||(x.restoreHistory(Se),this.cancelNavigationTransition(Se,"",3,x),!1)),Gr(Se=>{if(Se.guards.canActivateChecks.length)return(0,ne.of)(Se).pipe((0,Oe.b)(mt=>{const Jt=new js(mt.id,this.urlSerializer.serialize(mt.extractedUrl),this.urlSerializer.serialize(mt.urlAfterRedirects),mt.targetSnapshot);this.events.next(Jt)}),(0,gt.w)(mt=>{let Jt=!1;return(0,ne.of)(mt).pipe(function Te(M,R){return(0,ve.z)(x=>{const{targetSnapshot:B,guards:{canActivateChecks:J}}=x;if(!J.length)return(0,ne.of)(x);let ye=0;return(0,ie.D)(J).pipe(Le(Se=>function Je(M,R,x,B){const J=M.routeConfig,ye=M._resolve;return void 0!==J?.title&&!ai(J)&&(ye[rr]=J.title),function Nt(M,R,x,B){const J=function en(M){return[...Object.keys(M),...Object.getOwnPropertySymbols(M)]}(M);if(0===J.length)return(0,ne.of)({});const ye={};return(0,ie.D)(J).pipe((0,ve.z)(Se=>function Nn(M,R,x,B){const J=_i(R)??B,ye=Rs(M,J);return mr(ye.resolve?ye.resolve(R,x):J.runInContext(()=>ye(R,x)))}(M[Se],R,x,B).pipe((0,ge.P)(),(0,Oe.b)(mt=>{ye[Se]=mt}))),wt(1),(0,$t.h)(ye),qe(Se=>k(Se)?rt.E:$e(Se)))}(ye,M,R,B).pipe((0,Xe.U)(Se=>(M._resolvedData=Se,M.data=Vr(M,x).resolve,J&&ai(J)&&(M.data[rr]=J.title),null)))}(Se.route,B,M,R)),(0,Oe.b)(()=>ye++),wt(1),(0,ve.z)(Se=>ye===J.length?(0,ne.of)(x):rt.E))})}(x.paramsInheritanceStrategy,this.environmentInjector),(0,Oe.b)({next:()=>Jt=!0,complete:()=>{Jt||(x.restoreHistory(mt),this.cancelNavigationTransition(mt,"",2,x))}}))}),(0,Oe.b)(mt=>{const Jt=new xs(mt.id,this.urlSerializer.serialize(mt.extractedUrl),this.urlSerializer.serialize(mt.urlAfterRedirects),mt.targetSnapshot);this.events.next(Jt)}))}),Gr(Se=>{const mt=Jt=>{const wn=[];Jt.routeConfig?.loadComponent&&!Jt.routeConfig._loadedComponent&&wn.push(this.configLoader.loadComponent(Jt.routeConfig).pipe((0,Oe.b)(lr=>{Jt.component=lr}),(0,Xe.U)(()=>{})));for(const lr of Jt.children)wn.push(...mt(lr));return wn};return(0,Be.a)(mt(Se.targetSnapshot.root)).pipe((0,Mt.d)(),(0,kt.q)(1))}),Gr(()=>x.afterPreactivation()),(0,Xe.U)(Se=>{const mt=function Ma(M,R,x){const B=ya(M,R._root,x?x._root:void 0);return new oi(B,R)}(x.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return B={...Se,targetRouterState:mt}}),(0,Oe.b)(Se=>{x.currentUrlTree=Se.urlAfterRedirects,x.rawUrlTree=x.urlHandlingStrategy.merge(Se.urlAfterRedirects,Se.rawUrl),x.routerState=Se.targetRouterState,"deferred"===x.urlUpdateStrategy&&(Se.extras.skipLocationChange||x.setBrowserUrl(x.rawUrlTree,Se),x.browserUrlTree=Se.urlAfterRedirects)}),((M,R,x)=>(0,Xe.U)(B=>(new cs(R,B.targetRouterState,B.currentRouterState,x).activate(M),B)))(this.rootContexts,x.routeReuseStrategy,Se=>this.events.next(Se)),(0,Oe.b)({next:Se=>{J=!0,this.lastSuccessfulNavigation=this.currentNavigation,x.navigated=!0,this.events.next(new bs(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(x.currentUrlTree))),x.titleStrategy?.updateTitle(Se.targetRouterState.snapshot),Se.resolve(!0)},complete:()=>{J=!0}}),ln(()=>{J||ye||this.cancelNavigationTransition(B,"",1,x),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),qe(Se=>{if(ye=!0,Us(Se)){zs(Se)||(x.navigated=!0,x.restoreHistory(B,!0));const mt=new $i(B.id,this.urlSerializer.serialize(B.extractedUrl),Se.message,Se.cancellationCode);if(this.events.next(mt),zs(Se)){const Jt=x.urlHandlingStrategy.merge(Se.url,x.rawUrlTree),wn={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===x.urlUpdateStrategy||Io(B.source)};x.scheduleNavigation(Jt,"imperative",null,wn,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{x.restoreHistory(B,!0);const mt=new Cr(B.id,this.urlSerializer.serialize(B.extractedUrl),Se,B.targetSnapshot??void 0);this.events.next(mt);try{B.resolve(x.errorHandler(Se))}catch(Jt){B.reject(Jt)}}return rt.E}))}))}cancelNavigationTransition(x,B,J,ye){const Se=new $i(x.id,this.urlSerializer.serialize(x.extractedUrl),B,J);this.events.next(Se),x.resolve(!1)}}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function Io(M){return"imperative"!==M}let In=(()=>{class M{buildTitle(x){let B,J=x.root;for(;void 0!==J;)B=this.getResolvedTitleForRoute(J)??B,J=J.children.find(ye=>ye.outlet===Gt);return B}getResolvedTitleForRoute(x){return x.data[rr]}}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return(0,E.f3M)(Rn)},providedIn:"root"}),M})(),Rn=(()=>{class M extends In{constructor(x){super(),this.title=x}updateTitle(x){const B=this.buildTitle(x);void 0!==B&&this.title.setTitle(B)}}return M.\u0275fac=function(x){return new(x||M)(E.LFG(hn.Dx))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),Du=(()=>{class M{}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return(0,E.f3M)(Ht)},providedIn:"root"}),M})();class kn{shouldDetach(R){return!1}store(R,x){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,x){return R.routeConfig===x.routeConfig}}let Ht=(()=>{class M extends kn{}return M.\u0275fac=function(){let R;return function(B){return(R||(R=E.n5z(M)))(B||M)}}(),M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const ws=new E.OlP("",{providedIn:"root",factory:()=>({})});let Za=(()=>{class M{}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return(0,E.f3M)($u)},providedIn:"root"}),M})(),$u=(()=>{class M{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,B){return x}}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();function al(M){throw M}function oc(M,R,x){return R.parse("/")}const Pc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ys={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Po=(()=>{class M{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this.options=(0,E.f3M)(ws,{optional:!0})||{},this.errorHandler=this.options.errorHandler||al,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,ne.of)(void 0),this.urlHandlingStrategy=(0,E.f3M)(Za),this.routeReuseStrategy=(0,E.f3M)(Du),this.titleStrategy=(0,E.f3M)(In),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Hr((0,E.f3M)(Xr,{optional:!0})??[]),this.navigationTransitions=(0,E.f3M)(ci),this.urlSerializer=(0,E.f3M)(li),this.location=(0,E.f3M)(Ve.Ye),this.rootComponentType=null,this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ui(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(x=>{this.lastSuccessfulId=x.id,this.currentPageId=x.targetPageId},x=>{this.console.warn(`Unhandled Navigation Error: ${x}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(x){this.rootComponentType=x,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(x=>{const B="popstate"===x.type?"popstate":"hashchange";"popstate"===B&&setTimeout(()=>{const J={replaceUrl:!0},ye=x.state?.navigationId?x.state:null;if(x.state){const mt={...x.state};delete mt.navigationId,delete mt.\u0275routerPageId,0!==Object.keys(mt).length&&(J.state=mt)}const Se=this.parseUrl(x.url);this.scheduleNavigation(Se,B,ye,J)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(x){this.config=x.map(Bo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(x,B={}){const{relativeTo:J,queryParams:ye,fragment:Se,queryParamsHandling:mt,preserveFragment:Jt}=B,wn=J||this.routerState.root,lr=Jt?this.currentUrlTree.fragment:Se;let ni=null;switch(mt){case"merge":ni={...this.currentUrlTree.queryParams,...ye};break;case"preserve":ni=this.currentUrlTree.queryParams;break;default:ni=ye||null}return null!==ni&&(ni=this.removeEmptyProps(ni)),Ci(wn,this.currentUrlTree,x,ni,lr??null)}navigateByUrl(x,B={skipLocationChange:!1}){const J=bt(x)?x:this.parseUrl(x),ye=this.urlHandlingStrategy.merge(J,this.rawUrlTree);return this.scheduleNavigation(ye,"imperative",null,B)}navigate(x,B={skipLocationChange:!1}){return function so(M){for(let R=0;R<M.length;R++){if(null==M[R])throw new E.vHH(4008,!1)}}(x),this.navigateByUrl(this.createUrlTree(x,B),B)}serializeUrl(x){return this.urlSerializer.serialize(x)}parseUrl(x){let B;try{B=this.urlSerializer.parse(x)}catch(J){B=this.malformedUriErrorHandler(J,this.urlSerializer,x)}return B}isActive(x,B){let J;if(J=!0===B?{...Pc}:!1===B?{...Ys}:B,bt(x))return xr(this.currentUrlTree,x,J);const ye=this.parseUrl(x);return xr(this.currentUrlTree,ye,J)}removeEmptyProps(x){return Object.keys(x).reduce((B,J)=>{const ye=x[J];return null!=ye&&(B[J]=ye),B},{})}scheduleNavigation(x,B,J,ye,Se){if(this.disposed)return Promise.resolve(!1);let mt,Jt,wn,lr;return Se?(mt=Se.resolve,Jt=Se.reject,wn=Se.promise):wn=new Promise((ni,Jr)=>{mt=ni,Jt=Jr}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(J=this.location.getState()),lr=J&&J.\u0275routerPageId?J.\u0275routerPageId:ye.replaceUrl||ye.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):lr=0,this.navigationTransitions.handleNavigationRequest({targetPageId:lr,source:B,restoredState:J,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:x,extras:ye,resolve:mt,reject:Jt,promise:wn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),wn.catch(ni=>Promise.reject(ni))}setBrowserUrl(x,B){const J=this.urlSerializer.serialize(x),ye={...B.extras.state,...this.generateNgRouterState(B.id,B.targetPageId)};this.location.isCurrentPathEqualTo(J)||B.extras.replaceUrl?this.location.replaceState(J,"",ye):this.location.go(J,"",ye)}restoreHistory(x,B=!1){if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-x.targetPageId;"popstate"!==x.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===J?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===J&&(this.resetState(x),this.browserUrlTree=x.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(J)}else"replace"===this.canceledNavigationResolution&&(B&&this.resetState(x),this.resetUrlToCurrentUrlTree())}resetState(x){this.routerState=x.currentRouterState,this.currentUrlTree=x.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,x.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(x,B){return"computed"===this.canceledNavigationResolution?{navigationId:x,\u0275routerPageId:B}:{navigationId:x}}}return M.\u0275fac=function(x){return new(x||M)},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),Ya=(()=>{class M{constructor(x,B,J,ye,Se,mt){this.router=x,this.route=B,this.tabIndexAttribute=J,this.renderer=ye,this.el=Se,this.locationStrategy=mt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Et.x;const Jt=Se.nativeElement.tagName;this.isAnchorElement="A"===Jt||"AREA"===Jt,this.isAnchorElement?this.subscription=x.events.subscribe(wn=>{wn instanceof bs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(x){this._preserveFragment=(0,E.D6c)(x)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(x){this._skipLocationChange=(0,E.D6c)(x)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(x){this._replaceUrl=(0,E.D6c)(x)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(x){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",x)}ngOnChanges(x){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(x){null!=x?(this.commands=Array.isArray(x)?x:[x],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(x,B,J,ye,Se){return!!(null===this.urlTree||this.isAnchorElement&&(0!==x||B||J||ye||Se||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const x=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",x)}applyAttributeValue(x,B){const J=this.renderer,ye=this.el.nativeElement;null!==B?J.setAttribute(ye,x,B):J.removeAttribute(ye,x)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return M.\u0275fac=function(x){return new(x||M)(E.Y36(Po),E.Y36(Bi),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Ve.S$))},M.\u0275dir=E.lG2({type:M,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,B){1&x&&E.NdJ("click",function(ye){return B.onClick(ye.button,ye.ctrlKey,ye.shiftKey,ye.altKey,ye.metaKey)}),2&x&&E.uIk("target",B.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[E.TTD]}),M})(),Au=(()=>{class M{constructor(x,B,J,ye,Se){this.router=x,this.element=B,this.renderer=J,this.cdr=ye,this.link=Se,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new E.vpe,this.routerEventsSubscription=x.events.subscribe(mt=>{mt instanceof bs&&this.update()})}ngAfterContentInit(){(0,ne.of)(this.links.changes,(0,ne.of)(null)).pipe((0,Zt.J)()).subscribe(x=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const x=[...this.links.toArray(),this.link].filter(B=>!!B).map(B=>B.onChanges);this.linkInputChangesSubscription=(0,ie.D)(x).pipe((0,Zt.J)()).subscribe(B=>{this.isActive!==this.isLinkActive(this.router)(B)&&this.update()})}set routerLinkActive(x){const B=Array.isArray(x)?x:x.split(" ");this.classes=B.filter(J=>!!J)}ngOnChanges(x){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const x=this.hasActiveLinks();this.isActive!==x&&(this.isActive=x,this.cdr.markForCheck(),this.classes.forEach(B=>{x?this.renderer.addClass(this.element.nativeElement,B):this.renderer.removeClass(this.element.nativeElement,B)}),x&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(x))})}isLinkActive(x){const B=function Mr(M){return!!M.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return J=>!!J.urlTree&&x.isActive(J.urlTree,B)}hasActiveLinks(){const x=this.isLinkActive(this.router);return this.link&&x(this.link)||this.links.some(x)}}return M.\u0275fac=function(x){return new(x||M)(E.Y36(Po),E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(E.sBO),E.Y36(Ya,8))},M.\u0275dir=E.lG2({type:M,selectors:[["","routerLinkActive",""]],contentQueries:function(x,B,J){if(1&x&&E.Suo(J,Ya,5),2&x){let ye;E.iGM(ye=E.CRH())&&(B.links=ye)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[E.TTD]}),M})();class La{}let Bn=(()=>{class M{constructor(x,B,J,ye,Se){this.router=x,this.injector=J,this.preloadingStrategy=ye,this.loader=Se}setUpPreloading(){this.subscription=this.router.events.pipe((0,X.h)(x=>x instanceof bs),Le(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(x,B){const J=[];for(const ye of B){ye.providers&&!ye._injector&&(ye._injector=(0,E.MMx)(ye.providers,x,`Route: ${ye.path}`));const Se=ye._injector??x,mt=ye._loadedInjector??Se;ye.loadChildren&&!ye._loadedRoutes&&void 0===ye.canLoad||ye.loadComponent&&!ye._loadedComponent?J.push(this.preloadConfig(Se,ye)):(ye.children||ye._loadedRoutes)&&J.push(this.processRoutes(mt,ye.children??ye._loadedRoutes))}return(0,ie.D)(J).pipe((0,Zt.J)())}preloadConfig(x,B){return this.preloadingStrategy.preload(B,()=>{let J;J=B.loadChildren&&void 0===B.canLoad?this.loader.loadChildren(x,B):(0,ne.of)(null);const ye=J.pipe((0,ve.z)(Se=>null===Se?(0,ne.of)(void 0):(B._loadedRoutes=Se.routes,B._loadedInjector=Se.injector,this.processRoutes(Se.injector??x,Se.routes))));if(B.loadComponent&&!B._loadedComponent){const Se=this.loader.loadComponent(B);return(0,ie.D)([ye,Se]).pipe((0,Zt.J)())}return ye})}}return M.\u0275fac=function(x){return new(x||M)(E.LFG(Po),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(La),E.LFG(bi))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})();const Ls=new E.OlP("");let jr=(()=>{class M{constructor(x,B,J,ye,Se={}){this.urlSerializer=x,this.transitions=B,this.viewportScroller=J,this.zone=ye,this.options=Se,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Se.scrollPositionRestoration=Se.scrollPositionRestoration||"disabled",Se.anchorScrolling=Se.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(x=>{x instanceof vi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=x.navigationTrigger,this.restoredId=x.restoredState?x.restoredState.navigationId:0):x instanceof bs&&(this.lastId=x.id,this.scheduleScrollEvent(x,this.urlSerializer.parse(x.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(x=>{x instanceof lt&&(x.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(x.position):x.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(x.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(x,B){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lt(x,"popstate"===this.lastSource?this.store[this.restoredId]:null,B))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return M.\u0275fac=function(x){E.$Z()},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac}),M})();function Qs(M,R){return{\u0275kind:M,\u0275providers:R}}function zu(){const M=(0,E.f3M)(E.zs3);return R=>{const x=M.get(E.z2F);if(R!==x.components[0])return;const B=M.get(Po),J=M.get(Qa);1===M.get(wa)&&B.initialNavigation(),M.get(Iu,null,E.XFs.Optional)?.setUpPreloading(),M.get(Ls,null,E.XFs.Optional)?.init(),B.resetRootComponentType(x.componentTypes[0]),J.closed||(J.next(),J.unsubscribe())}}const Qa=new E.OlP("",{factory:()=>new Et.x}),wa=new E.OlP("",{providedIn:"root",factory:()=>1});const Iu=new E.OlP("");function qu(M){return Qs(0,[{provide:Iu,useExisting:Bn},{provide:La,useExisting:M}])}const ul=new E.OlP("ROUTER_FORROOT_GUARD"),ja=[Ve.Ye,{provide:li,useClass:wr},Po,Uo,{provide:Bi,useFactory:function En(M){return M.routerState.root},deps:[Po]},bi,[]];function as(){return new E.PXZ("Router",Po)}let cu=(()=>{class M{constructor(x){}static forRoot(x,B){return{ngModule:M,providers:[ja,[],{provide:Xr,multi:!0,useValue:x},{provide:ul,useFactory:Mc,deps:[[Po,new E.FiY,new E.tp0]]},{provide:ws,useValue:B||{}},B?.useHash?{provide:Ve.S$,useClass:Ve.Do}:{provide:Ve.S$,useClass:Ve.b0},{provide:Ls,useFactory:()=>{const M=(0,E.f3M)(Ve.EM),R=(0,E.f3M)(E.R0b),x=(0,E.f3M)(ws),B=(0,E.f3M)(ci),J=(0,E.f3M)(li);return x.scrollOffset&&M.setOffset(x.scrollOffset),new jr(J,B,M,R,x)}},B?.preloadingStrategy?qu(B.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:as},B?.initialNavigation?Rl(B):[],[{provide:Oc,useFactory:zu},{provide:E.tb,multi:!0,useExisting:Oc}]]}}static forChild(x){return{ngModule:M,providers:[{provide:Xr,multi:!0,useValue:x}]}}}return M.\u0275fac=function(x){return new(x||M)(E.LFG(ul,8))},M.\u0275mod=E.oAB({type:M}),M.\u0275inj=E.cJS({imports:[Yr]}),M})();function Mc(M){return"guarded"}function Rl(M){return["disabled"===M.initialNavigation?Qs(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const R=(0,E.f3M)(Po);return()=>{R.setUpLocationChangeListener()}}},{provide:wa,useValue:2}]).\u0275providers:[],"enabledBlocking"===M.initialNavigation?Qs(2,[{provide:wa,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:R=>{const x=R.get(Ve.V_,Promise.resolve());return()=>x.then(()=>new Promise(J=>{const ye=R.get(Po),Se=R.get(Qa);(function B(J){R.get(Po).events.pipe((0,X.h)(Se=>Se instanceof bs||Se instanceof $i||Se instanceof Cr),(0,Xe.U)(Se=>Se instanceof bs||Se instanceof $i&&(0===Se.code||1===Se.code)&&null),(0,X.h)(Se=>null!==Se),(0,kt.q)(1)).subscribe(()=>{J()})})(()=>{J(!0)}),ye.afterPreactivation=()=>(J(!0),Se.closed?(0,ne.of)(void 0):Se),ye.initialNavigation()}))}}]).\u0275providers:[]]}const Oc=new E.OlP("")},3942:(Wt,et,W)=>{"use strict";W.d(et,{Z:()=>_t});var E=W(2090),ie=W(4859),ne=W(9681),F=W(1877);class Ne{constructor(Fe,ut){this._delegate=Fe,this.firebase=ut,(0,ne._addComponent)(Fe,new ie.wA("app-compat",()=>this,"PUBLIC")),this.container=Fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this._delegate.automaticDataCollectionEnabled=Fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Fe=>{this._delegate.checkDestroyed(),Fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ne.deleteApp)(this._delegate)))}_getService(Fe,ut=ne._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(Fe);return!Et.isInitialized()&&"EXPLICIT"===(null===(st=Et.getComponent())||void 0===st?void 0:st.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:ut})}_removeServiceInstance(Fe,ut=ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Fe).clearInstance(ut)}_addComponent(Fe){(0,ne._addComponent)(this._delegate,Fe)}_addOrOverwriteComponent(Fe){(0,ne._addOrOverwriteComponent)(this._delegate,Fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),De=function Ae(){const St=function He(St){const Fe={},ut={__esModule:!0,initializeApp:function Ve(xt,X={}){const ve=ne.initializeApp(xt,X);if((0,E.r3)(Fe,ve.name))return Fe[ve.name];const ge=new St(ve,ut);return Fe[ve.name]=ge,ge},app:Et,registerVersion:ne.registerVersion,setLogLevel:ne.setLogLevel,onLog:ne.onLog,apps:null,SDK_VERSION:ne.SDK_VERSION,INTERNAL:{registerComponent:function gt(xt){const X=xt.name,ve=X.replace("-compat","");if(ne._registerComponent(xt)&&"PUBLIC"===xt.type){const ge=(Le=Et())=>{if("function"!=typeof Le[ve])throw ae.create("invalid-app-argument",{appName:X});return Le[ve]()};void 0!==xt.serviceProps&&(0,E.ZB)(ge,xt.serviceProps),ut[ve]=ge,St.prototype[ve]=function(...Le){return this._getService.bind(this,X).apply(this,xt.multipleInstances?Le:[])}}return"PUBLIC"===xt.type?ut[ve]:null},removeApp:function st(xt){delete Fe[xt]},useAsService:function kt(xt,X){return"serverAuth"===X?null:X},modularAPIs:ne}};function Et(xt){if(!(0,E.r3)(Fe,xt=xt||ne._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:xt});return Fe[xt]}return ut.default=ut,Object.defineProperty(ut,"apps",{get:function Xe(){return Object.keys(Fe).map(xt=>Fe[xt])}}),Et.App=St,ut}(Ne);return St.INTERNAL=Object.assign(Object.assign({},St.INTERNAL),{createFirebaseNamespace:Ae,extendNamespace:function Fe(ut){(0,E.ZB)(St,ut)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),St}(),Ee=new F.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const _t=De;!function rt(St){(0,ne.registerVersion)("@firebase/app-compat","0.2.1",St)}()},9681:(Wt,et,W)=>{"use strict";W.r(et),W.d(et,{FirebaseError:()=>F.ZR,SDK_VERSION:()=>or,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>ln,_addOrOverwriteComponent:()=>Zt,_apps:()=>Yt,_clearComponents:()=>Wn,_components:()=>$t,_getProvider:()=>Gt,_registerComponent:()=>hn,_removeServiceInstance:()=>rr,deleteApp:()=>pr,getApp:()=>Hr,getApps:()=>zr,initializeApp:()=>Xn,onLog:()=>yn,registerVersion:()=>mr,setLogLevel:()=>xi});var E=W(5861),ie=W(4859),ne=W(1877),F=W(2090),Ne=W(8766);class Be{constructor(zt){this.container=zt}getPlatformInfoString(){return this.container.getProviders().map(Cn=>{if(function ae(dn){return"VERSION"===dn.getComponent()?.type}(Cn)){const er=Cn.getImmediate();return`${er.library}/${er.version}`}return null}).filter(Cn=>Cn).join(" ")}}const He="@firebase/app",De=new ne.Yd("@firebase/app"),Rt="[DEFAULT]",At={[He]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yt=new Map,$t=new Map;function ln(dn,zt){try{dn.container.addComponent(zt)}catch(Cn){De.debug(`Component ${zt.name} failed to register with FirebaseApp ${dn.name}`,Cn)}}function Zt(dn,zt){dn.container.addOrOverwriteComponent(zt)}function hn(dn){const zt=dn.name;if($t.has(zt))return De.debug(`There were multiple attempts to register component ${zt}.`),!1;$t.set(zt,dn);for(const Cn of Yt.values())ln(Cn,dn);return!0}function Gt(dn,zt){const Cn=dn.container.getProvider("heartbeat").getImmediate({optional:!0});return Cn&&Cn.triggerHeartbeat(),dn.container.getProvider(zt)}function rr(dn,zt,Cn=Rt){Gt(dn,zt).clearInstance(Cn)}function Wn(){$t.clear()}const _r=new F.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yi{constructor(zt,Cn,er){this._isDeleted=!1,this._options=Object.assign({},zt),this._config=Object.assign({},Cn),this._name=Cn.name,this._automaticDataCollectionEnabled=Cn.automaticDataCollectionEnabled,this._container=er,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(zt){this.checkDestroyed(),this._automaticDataCollectionEnabled=zt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(zt){this._isDeleted=zt}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const or="9.16.0";function Xn(dn,zt={}){let Cn=dn;"object"!=typeof zt&&(zt={name:zt});const er=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},zt),$n=er.name;if("string"!=typeof $n||!$n)throw _r.create("bad-app-name",{appName:String($n)});if(Cn||(Cn=(0,F.aH)()),!Cn)throw _r.create("no-options");const Vn=Yt.get($n);if(Vn){if((0,F.vZ)(Cn,Vn.options)&&(0,F.vZ)(er,Vn.config))return Vn;throw _r.create("duplicate-app",{appName:$n})}const Qe=new ie.H0($n);for(const at of $t.values())Qe.addComponent(at);const Ye=new yi(Cn,er,Qe);return Yt.set($n,Ye),Ye}function Hr(dn=Rt){const zt=Yt.get(dn);if(!zt&&dn===Rt)return Xn();if(!zt)throw _r.create("no-app",{appName:dn});return zt}function zr(){return Array.from(Yt.values())}function pr(dn){return xn.apply(this,arguments)}function xn(){return(xn=(0,E.Z)(function*(dn){const zt=dn.name;Yt.has(zt)&&(Yt.delete(zt),yield Promise.all(dn.container.getProviders().map(Cn=>Cn.delete())),dn.isDeleted=!0)})).apply(this,arguments)}function mr(dn,zt,Cn){var er;let $n=null!==(er=At[dn])&&void 0!==er?er:dn;Cn&&($n+=`-${Cn}`);const Vn=$n.match(/\s|\//),Qe=zt.match(/\s|\//);if(Vn||Qe){const Ye=[`Unable to register library "${$n}" with version "${zt}":`];return Vn&&Ye.push(`library name "${$n}" contains illegal characters (whitespace or "/")`),Vn&&Qe&&Ye.push("and"),Qe&&Ye.push(`version name "${zt}" contains illegal characters (whitespace or "/")`),void De.warn(Ye.join(" "))}hn(new ie.wA(`${$n}-version`,()=>({library:$n,version:zt}),"VERSION"))}function yn(dn,zt){if(null!==dn&&"function"!=typeof dn)throw _r.create("invalid-log-argument");(0,ne.Am)(dn,zt)}function xi(dn){(0,ne.Ub)(dn)}const gi="firebase-heartbeat-store";let Ei=null;function ur(){return Ei||(Ei=(0,Ne.X3)("firebase-heartbeat-database",1,{upgrade:(dn,zt)=>{0===zt&&dn.createObjectStore(gi)}}).catch(dn=>{throw _r.create("idb-open",{originalErrorMessage:dn.message})})),Ei}function Jn(){return(Jn=(0,E.Z)(function*(dn){try{return(yield ur()).transaction(gi).objectStore(gi).get(Mn(dn))}catch(zt){if(zt instanceof F.ZR)De.warn(zt.message);else{const Cn=_r.create("idb-get",{originalErrorMessage:zt?.message});De.warn(Cn.message)}}})).apply(this,arguments)}function ui(dn,zt){return qr.apply(this,arguments)}function qr(){return(qr=(0,E.Z)(function*(dn,zt){try{const er=(yield ur()).transaction(gi,"readwrite");return yield er.objectStore(gi).put(zt,Mn(dn)),er.done}catch(Cn){if(Cn instanceof F.ZR)De.warn(Cn.message);else{const er=_r.create("idb-set",{originalErrorMessage:Cn?.message});De.warn(er.message)}}})).apply(this,arguments)}function Mn(dn){return`${dn.name}!${dn.options.appId}`}class Ri{constructor(zt){this.container=zt,this._heartbeatsCache=null;const Cn=this.container.getProvider("app").getImmediate();this._storage=new wr(Cn),this._heartbeatsCachePromise=this._storage.read().then(er=>(this._heartbeatsCache=er,er))}triggerHeartbeat(){var zt=this;return(0,E.Z)(function*(){const er=zt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$n=sr();if(null===zt._heartbeatsCache&&(zt._heartbeatsCache=yield zt._heartbeatsCachePromise),zt._heartbeatsCache.lastSentHeartbeatDate!==$n&&!zt._heartbeatsCache.heartbeats.some(Vn=>Vn.date===$n))return zt._heartbeatsCache.heartbeats.push({date:$n,agent:er}),zt._heartbeatsCache.heartbeats=zt._heartbeatsCache.heartbeats.filter(Vn=>{const Qe=new Date(Vn.date).valueOf();return Date.now()-Qe<=2592e6}),zt._storage.overwrite(zt._heartbeatsCache)})()}getHeartbeatsHeader(){var zt=this;return(0,E.Z)(function*(){if(null===zt._heartbeatsCache&&(yield zt._heartbeatsCachePromise),null===zt._heartbeatsCache||0===zt._heartbeatsCache.heartbeats.length)return"";const Cn=sr(),{heartbeatsToSend:er,unsentEntries:$n}=function li(dn,zt=1024){const Cn=[];let er=dn.slice();for(const $n of dn){const Vn=Cn.find(Qe=>Qe.agent===$n.agent);if(Vn){if(Vn.dates.push($n.date),si(Cn)>zt){Vn.dates.pop();break}}else if(Cn.push({agent:$n.agent,dates:[$n.date]}),si(Cn)>zt){Cn.pop();break}er=er.slice(1)}return{heartbeatsToSend:Cn,unsentEntries:er}}(zt._heartbeatsCache.heartbeats),Vn=(0,F.L)(JSON.stringify({version:2,heartbeats:er}));return zt._heartbeatsCache.lastSentHeartbeatDate=Cn,$n.length>0?(zt._heartbeatsCache.heartbeats=$n,yield zt._storage.overwrite(zt._heartbeatsCache)):(zt._heartbeatsCache.heartbeats=[],zt._storage.overwrite(zt._heartbeatsCache)),Vn})()}}function sr(){return(new Date).toISOString().substring(0,10)}class wr{constructor(zt){this.app=zt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,F.hl)()&&(0,F.eu)().then(()=>!0).catch(()=>!1)})()}read(){var zt=this;return(0,E.Z)(function*(){return(yield zt._canUseIndexedDBPromise)&&(yield function zn(dn){return Jn.apply(this,arguments)}(zt.app))||{heartbeats:[]}})()}overwrite(zt){var Cn=this;return(0,E.Z)(function*(){var er;if(yield Cn._canUseIndexedDBPromise){const Vn=yield Cn.read();return ui(Cn.app,{lastSentHeartbeatDate:null!==(er=zt.lastSentHeartbeatDate)&&void 0!==er?er:Vn.lastSentHeartbeatDate,heartbeats:zt.heartbeats})}})()}add(zt){var Cn=this;return(0,E.Z)(function*(){var er;if(yield Cn._canUseIndexedDBPromise){const Vn=yield Cn.read();return ui(Cn.app,{lastSentHeartbeatDate:null!==(er=zt.lastSentHeartbeatDate)&&void 0!==er?er:Vn.lastSentHeartbeatDate,heartbeats:[...Vn.heartbeats,...zt.heartbeats]})}})()}}function si(dn){return(0,F.L)(JSON.stringify({version:2,heartbeats:dn})).length}!function Hi(dn){hn(new ie.wA("platform-logger",zt=>new Be(zt),"PRIVATE")),hn(new ie.wA("heartbeat",zt=>new Ri(zt),"PRIVATE")),mr(He,"0.9.1",dn),mr(He,"0.9.1","esm2017"),mr("fire-js","")}("")},4859:(Wt,et,W)=>{"use strict";W.d(et,{H0:()=>He,wA:()=>ne});var E=W(5861),ie=W(2090);class ne{constructor(De,Ee,Me){this.name=De,this.instanceFactory=Ee,this.type=Me,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(De){return this.instantiationMode=De,this}setMultipleInstances(De){return this.multipleInstances=De,this}setServiceProps(De){return this.serviceProps=De,this}setInstanceCreatedCallback(De){return this.onInstanceCreated=De,this}}const F="[DEFAULT]";class Ne{constructor(De,Ee){this.name=De,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(De){const Ee=this.normalizeInstanceIdentifier(De);if(!this.instancesDeferred.has(Ee)){const Me=new ie.BH;if(this.instancesDeferred.set(Ee,Me),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:Ee});$e&&Me.resolve($e)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(De){var Ee;const Me=this.normalizeInstanceIdentifier(De?.identifier),$e=null!==(Ee=De?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(Me)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Me})}catch(rt){if($e)return null;throw rt}}getComponent(){return this.component}setComponent(De){if(De.name!==this.name)throw Error(`Mismatching Component ${De.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=De,this.shouldAutoInitialize()){if(function ae(Ae){return"EAGER"===Ae.instantiationMode}(De))try{this.getOrInitializeService({instanceIdentifier:F})}catch{}for(const[Ee,Me]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(Ee);try{const rt=this.getOrInitializeService({instanceIdentifier:$e});Me.resolve(rt)}catch{}}}}clearInstance(De=F){this.instancesDeferred.delete(De),this.instancesOptions.delete(De),this.instances.delete(De)}delete(){var De=this;return(0,E.Z)(function*(){const Ee=Array.from(De.instances.values());yield Promise.all([...Ee.filter(Me=>"INTERNAL"in Me).map(Me=>Me.INTERNAL.delete()),...Ee.filter(Me=>"_delete"in Me).map(Me=>Me._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(De=F){return this.instances.has(De)}getOptions(De=F){return this.instancesOptions.get(De)||{}}initialize(De={}){const{options:Ee={}}=De,Me=this.normalizeInstanceIdentifier(De.instanceIdentifier);if(this.isInitialized(Me))throw Error(`${this.name}(${Me}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Me,options:Ee});for(const[rt,_t]of this.instancesDeferred.entries())Me===this.normalizeInstanceIdentifier(rt)&&_t.resolve($e);return $e}onInit(De,Ee){var Me;const $e=this.normalizeInstanceIdentifier(Ee),rt=null!==(Me=this.onInitCallbacks.get($e))&&void 0!==Me?Me:new Set;rt.add(De),this.onInitCallbacks.set($e,rt);const _t=this.instances.get($e);return _t&&De(_t,$e),()=>{rt.delete(De)}}invokeOnInitCallbacks(De,Ee){const Me=this.onInitCallbacks.get(Ee);if(Me)for(const $e of Me)try{$e(De,Ee)}catch{}}getOrInitializeService({instanceIdentifier:De,options:Ee={}}){let Me=this.instances.get(De);if(!Me&&this.component&&(Me=this.component.instanceFactory(this.container,{instanceIdentifier:(Ae=De,Ae===F?void 0:Ae),options:Ee}),this.instances.set(De,Me),this.instancesOptions.set(De,Ee),this.invokeOnInitCallbacks(Me,De),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,De,Me)}catch{}var Ae;return Me||null}normalizeInstanceIdentifier(De=F){return this.component?this.component.multipleInstances?De:F:De}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class He{constructor(De){this.name=De,this.providers=new Map}addComponent(De){const Ee=this.getProvider(De.name);if(Ee.isComponentSet())throw new Error(`Component ${De.name} has already been registered with ${this.name}`);Ee.setComponent(De)}addOrOverwriteComponent(De){this.getProvider(De.name).isComponentSet()&&this.providers.delete(De.name),this.addComponent(De)}getProvider(De){if(this.providers.has(De))return this.providers.get(De);const Ee=new Ne(De,this);return this.providers.set(De,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},1877:(Wt,et,W)=>{"use strict";W.d(et,{Am:()=>Ae,Ub:()=>He,Yd:()=>ae,in:()=>ie});const E=[];var ie=(()=>{return(De=ie||(ie={}))[De.DEBUG=0]="DEBUG",De[De.VERBOSE=1]="VERBOSE",De[De.INFO=2]="INFO",De[De.WARN=3]="WARN",De[De.ERROR=4]="ERROR",De[De.SILENT=5]="SILENT",ie;var De})();const ne={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},F=ie.INFO,Ne={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},Be=(De,Ee,...Me)=>{if(Ee<De.logLevel)return;const $e=(new Date).toISOString(),rt=Ne[Ee];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[rt](`[${$e}]  ${De.name}:`,...Me)};class ae{constructor(Ee){this.name=Ee,this._logLevel=F,this._logHandler=Be,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in ie))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?ne[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...Ee),this._logHandler(this,ie.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...Ee),this._logHandler(this,ie.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...Ee),this._logHandler(this,ie.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...Ee),this._logHandler(this,ie.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...Ee),this._logHandler(this,ie.ERROR,...Ee)}}function He(De){E.forEach(Ee=>{Ee.setLogLevel(De)})}function Ae(De,Ee){for(const Me of E){let $e=null;Ee&&Ee.level&&($e=ne[Ee.level]),Me.userLogHandler=null===De?null:(rt,_t,...St)=>{const Fe=St.map(ut=>{if(null==ut)return null;if("string"==typeof ut)return ut;if("number"==typeof ut||"boolean"==typeof ut)return ut.toString();if(ut instanceof Error)return ut.message;try{return JSON.stringify(ut)}catch{return null}}).filter(ut=>ut).join(" ");_t>=($e??rt.logLevel)&&De({level:ie[_t].toLowerCase(),message:Fe,args:St,type:rt.name})}}}},259:(Wt,et,W)=>{"use strict";W.d(et,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=W(9681);(0,E.registerVersion)("firebase","9.16.0","app")},9260:(Wt,et,W)=>{"use strict";W.d(et,{Z:()=>E.Z});var E=W(3942);E.Z.registerVersion("firebase","9.16.0","app-compat")},750:(Wt,et,W)=>{"use strict";W.r(et);var E=W(5861),ie=W(3942),ne=W(2090),F=W(9681),Ne=W(1877),Be=W(655),ae=W(4859);const _t=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},St=function rt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fe=new ne.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new Ne.Yd("@firebase/auth");function Et(D,...y){st.logLevel<=Ne.in.ERROR&&st.error(`Auth (${F.SDK_VERSION}): ${D}`,...y)}function Ve(D,...y){throw xt(D,...y)}function Xe(D,...y){return xt(D,...y)}function gt(D,y,T){const O=Object.assign(Object.assign({},St()),{[y]:T});return new ne.LL("auth","Firebase",O).create(y,{appName:D.name})}function kt(D,y,T){if(!(y instanceof T))throw T.name!==y.constructor.name&&Ve(D,"argument-error"),gt(D,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(D,...y){if("string"!=typeof D){const T=y[0],O=[...y.slice(1)];return O[0]&&(O[0].appName=D.name),D._errorFactory.create(T,...O)}return Fe.create(D,...y)}function X(D,y,...T){if(!D)throw xt(y,...T)}function ve(D){const y="INTERNAL ASSERTION FAILED: "+D;throw Et(y),new Error(y)}function ge(D,y){D||ve(y)}const Le=new Map;function Oe(D){ge(D instanceof Function,"Expected a class definition");let y=Le.get(D);return y?(ge(y instanceof D,"Instance stored in cache mismatched with class"),y):(y=new D,Le.set(D,y),y)}function wt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function vt(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Yt{constructor(y,T){this.shortDelay=y,this.longDelay=T,ge(T>y,"Short delay should be less than long delay!"),this.isMobile=(0,ne.uI)()||(0,ne.b$)()}get(){return function Rt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(vt()||(0,ne.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $t(D,y){ge(D.emulator,"Emulator should always be set here");const{url:T}=D.emulator;return y?`${T}${y.startsWith("/")?y.slice(1):y}`:T}class ln{static initialize(y,T,O){this.fetchImpl=y,T&&(this.headersImpl=T),O&&(this.responseImpl=O)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},hn=new Yt(3e4,6e4);function Gt(D,y){return D.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:D.tenantId}):y}function rr(D,y,T,O){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,E.Z)(function*(D,y,T,O,le={}){return Er(D,le,(0,E.Z)(function*(){let xe={},ht={};O&&("GET"===y?ht=O:xe={body:JSON.stringify(O)});const jt=(0,ne.xO)(Object.assign({key:D.config.apiKey},ht)).slice(1),Sn=yield D._getAdditionalHeaders();return Sn["Content-Type"]="application/json",D.languageCode&&(Sn["X-Firebase-Locale"]=D.languageCode),ln.fetch()(Xn(D,D.config.apiHost,T,jt),Object.assign({method:y,headers:Sn,referrerPolicy:"no-referrer"},xe))}))})).apply(this,arguments)}function Er(D,y,T){return _r.apply(this,arguments)}function _r(){return(_r=(0,E.Z)(function*(D,y,T){D._canInitEmulator=!1;const O=Object.assign(Object.assign({},Zt),y);try{const le=new Hr(D),xe=yield Promise.race([T(),le.promise]);le.clearNetworkTimeout();const ht=yield xe.json();if("needConfirmation"in ht)throw zr(D,"account-exists-with-different-credential",ht);if(xe.ok&&!("errorMessage"in ht))return ht;{const jt=xe.ok?ht.errorMessage:ht.error.message,[Sn,Yn]=jt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Sn)throw zr(D,"credential-already-in-use",ht);if("EMAIL_EXISTS"===Sn)throw zr(D,"email-already-in-use",ht);if("USER_DISABLED"===Sn)throw zr(D,"user-disabled",ht);const Dr=O[Sn]||Sn.toLowerCase().replace(/[_\s]+/g,"-");if(Yn)throw gt(D,Dr,Yn);Ve(D,Dr)}}catch(le){if(le instanceof ne.ZR)throw le;Ve(D,"network-request-failed")}})).apply(this,arguments)}function yi(D,y,T,O){return or.apply(this,arguments)}function or(){return(or=(0,E.Z)(function*(D,y,T,O,le={}){const xe=yield rr(D,y,T,O,le);return"mfaPendingCredential"in xe&&Ve(D,"multi-factor-auth-required",{_serverResponse:xe}),xe})).apply(this,arguments)}function Xn(D,y,T,O){const le=`${y}${T}?${O}`;return D.config.emulator?$t(D.config,le):`${D.config.apiScheme}://${le}`}class Hr{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((T,O)=>{this.timer=setTimeout(()=>O(Xe(this.auth,"network-request-failed")),hn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zr(D,y,T){const O={appName:D.name};T.email&&(O.email=T.email),T.phoneNumber&&(O.phoneNumber=T.phoneNumber);const le=Xe(D,y,O);return le.customData._tokenResponse=T,le}function xn(){return(xn=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function mr(D,y){return yn.apply(this,arguments)}function yn(){return(yn=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function xi(D,y){return br.apply(this,arguments)}function br(){return(br=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function xr(D){if(D)try{const y=new Date(Number(D));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function ur(){return(ur=(0,E.Z)(function*(D,y=!1){const T=(0,ne.m9)(D),O=yield T.getIdToken(y),le=Jn(O);X(le&&le.exp&&le.auth_time&&le.iat,T.auth,"internal-error");const xe="object"==typeof le.firebase?le.firebase:void 0,ht=xe?.sign_in_provider;return{claims:le,token:O,authTime:xr(zn(le.auth_time)),issuedAtTime:xr(zn(le.iat)),expirationTime:xr(zn(le.exp)),signInProvider:ht||null,signInSecondFactor:xe?.sign_in_second_factor||null}})).apply(this,arguments)}function zn(D){return 1e3*Number(D)}function Jn(D){const[y,T,O]=D.split(".");if(void 0===y||void 0===T||void 0===O)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const le=(0,ne.tV)(T);return le?JSON.parse(le):(Et("Failed to decode base64 JWT payload"),null)}catch(le){return Et("Caught error parsing JWT payload as JSON",le?.toString()),null}}function qr(D,y){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,E.Z)(function*(D,y,T=!1){if(T)return y;try{return yield y}catch(O){throw O instanceof ne.ZR&&wi(O)&&D.auth.currentUser===D&&(yield D.auth.signOut()),O}})).apply(this,arguments)}function wi({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class ki{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var T;if(y){const O=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),O}{this.errorBackoff=3e4;const le=(null!==(T=this.user.stsTokenManager.expirationTime)&&void 0!==T?T:0)-Date.now()-3e5;return Math.max(0,le)}}schedule(y=!1){var T=this;if(!this.isRunning)return;const O=this.getInterval(y);this.timerId=setTimeout((0,E.Z)(function*(){yield T.iteration()}),O)}iteration(){var y=this;return(0,E.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===T?.code&&y.schedule(!0))}y.schedule()})()}}class Ri{constructor(y,T){this.createdAt=y,this.lastLoginAt=T,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(D){return li.apply(this,arguments)}function li(){return(li=(0,E.Z)(function*(D){var y;const T=D.auth,O=yield D.getIdToken(),le=yield qr(D,xi(T,{idToken:O}));X(le?.users.length,T,"internal-error");const xe=le.users[0];D._notifyReloadListener(xe);const ht=null!==(y=xe.providerUserInfo)&&void 0!==y&&y.length?dn(xe.providerUserInfo):[],jt=Hi(D.providerData,ht),Dr=!!D.isAnonymous&&!(D.email&&xe.passwordHash||jt?.length),hr={uid:xe.localId,displayName:xe.displayName||null,photoURL:xe.photoUrl||null,email:xe.email||null,emailVerified:xe.emailVerified||!1,phoneNumber:xe.phoneNumber||null,tenantId:xe.tenantId||null,providerData:jt,metadata:new Ri(xe.createdAt,xe.lastLoginAt),isAnonymous:Dr};Object.assign(D,hr)})).apply(this,arguments)}function si(){return(si=(0,E.Z)(function*(D){const y=(0,ne.m9)(D);yield sr(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function Hi(D,y){return[...D.filter(O=>!y.some(le=>le.providerId===O.providerId)),...y]}function dn(D){return D.map(y=>{var{providerId:T}=y,O=(0,Be._T)(y,["providerId"]);return{providerId:T,uid:O.rawId||"",displayName:O.displayName||null,email:O.email||null,phoneNumber:O.phoneNumber||null,photoURL:O.photoUrl||null}})}function Cn(){return(Cn=(0,E.Z)(function*(D,y){const T=yield Er(D,{},(0,E.Z)(function*(){const O=(0,ne.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:le,apiKey:xe}=D.config,ht=Xn(D,le,"/v1/token",`key=${xe}`),jt=yield D._getAdditionalHeaders();return jt["Content-Type"]="application/x-www-form-urlencoded",ln.fetch()(ht,{method:"POST",headers:jt,body:O})}));return{accessToken:T.access_token,expiresIn:T.expires_in,refreshToken:T.refresh_token}})).apply(this,arguments)}class er{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){X(y.idToken,"internal-error"),X(typeof y.idToken<"u","internal-error"),X(typeof y.refreshToken<"u","internal-error");const T="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function ui(D){const y=Jn(D);return X(y,"internal-error"),X(typeof y.exp<"u","internal-error"),X(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,T)}getToken(y,T=!1){var O=this;return(0,E.Z)(function*(){return X(!O.accessToken||O.refreshToken,y,"user-token-expired"),T||!O.accessToken||O.isExpired?O.refreshToken?(yield O.refresh(y,O.refreshToken),O.accessToken):null:O.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,T){var O=this;return(0,E.Z)(function*(){const{accessToken:le,refreshToken:xe,expiresIn:ht}=yield function zt(D,y){return Cn.apply(this,arguments)}(y,T);O.updateTokensAndExpiration(le,xe,Number(ht))})()}updateTokensAndExpiration(y,T,O){this.refreshToken=T||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*O}static fromJSON(y,T){const{refreshToken:O,accessToken:le,expirationTime:xe}=T,ht=new er;return O&&(X("string"==typeof O,"internal-error",{appName:y}),ht.refreshToken=O),le&&(X("string"==typeof le,"internal-error",{appName:y}),ht.accessToken=le),xe&&(X("number"==typeof xe,"internal-error",{appName:y}),ht.expirationTime=xe),ht}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new er,this.toJSON())}_performRefresh(){return ve("not implemented")}}function $n(D,y){X("string"==typeof D||typeof D>"u","internal-error",{appName:y})}class Vn{constructor(y){var{uid:T,auth:O,stsTokenManager:le}=y,xe=(0,Be._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ki(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=T,this.auth=O,this.stsTokenManager=le,this.accessToken=le.accessToken,this.displayName=xe.displayName||null,this.email=xe.email||null,this.emailVerified=xe.emailVerified||!1,this.phoneNumber=xe.phoneNumber||null,this.photoURL=xe.photoURL||null,this.isAnonymous=xe.isAnonymous||!1,this.tenantId=xe.tenantId||null,this.providerData=xe.providerData?[...xe.providerData]:[],this.metadata=new Ri(xe.createdAt||void 0,xe.lastLoginAt||void 0)}getIdToken(y){var T=this;return(0,E.Z)(function*(){const O=yield qr(T,T.stsTokenManager.getToken(T.auth,y));return X(O,T.auth,"internal-error"),T.accessToken!==O&&(T.accessToken=O,yield T.auth._persistUserIfCurrent(T),T.auth._notifyListenersIfCurrent(T)),O})()}getIdTokenResult(y){return function Ei(D){return ur.apply(this,arguments)}(this,y)}reload(){return function wr(D){return si.apply(this,arguments)}(this)}_assign(y){this!==y&&(X(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(T=>Object.assign({},T)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Vn(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,T=!1){var O=this;return(0,E.Z)(function*(){let le=!1;y.idToken&&y.idToken!==O.stsTokenManager.accessToken&&(O.stsTokenManager.updateFromServerResponse(y),le=!0),T&&(yield sr(O)),yield O.auth._persistUserIfCurrent(O),le&&O.auth._notifyListenersIfCurrent(O)})()}delete(){var y=this;return(0,E.Z)(function*(){const T=yield y.getIdToken();return yield qr(y,function pr(D,y){return xn.apply(this,arguments)}(y.auth,{idToken:T})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,T){var O,le,xe,ht,jt,Sn,Yn,Dr;const hr=null!==(O=T.displayName)&&void 0!==O?O:void 0,ao=null!==(le=T.email)&&void 0!==le?le:void 0,pu=null!==(xe=T.phoneNumber)&&void 0!==xe?xe:void 0,_d=null!==(ht=T.photoURL)&&void 0!==ht?ht:void 0,ch=null!==(jt=T.tenantId)&&void 0!==jt?jt:void 0,bd=null!==(Sn=T._redirectEventId)&&void 0!==Sn?Sn:void 0,Qu=null!==(Yn=T.createdAt)&&void 0!==Yn?Yn:void 0,zo=null!==(Dr=T.lastLoginAt)&&void 0!==Dr?Dr:void 0,{uid:zl,emailVerified:dh,isAnonymous:Ct,providerData:Td,stsTokenManager:xa}=T;X(zl&&xa,y,"internal-error");const bl=er.fromJSON(this.name,xa);X("string"==typeof zl,y,"internal-error"),$n(hr,y.name),$n(ao,y.name),X("boolean"==typeof dh,y,"internal-error"),X("boolean"==typeof Ct,y,"internal-error"),$n(pu,y.name),$n(_d,y.name),$n(ch,y.name),$n(bd,y.name),$n(Qu,y.name),$n(zo,y.name);const ql=new Vn({uid:zl,auth:y,email:ao,emailVerified:dh,displayName:hr,isAnonymous:Ct,photoURL:_d,phoneNumber:pu,tenantId:ch,stsTokenManager:bl,createdAt:Qu,lastLoginAt:zo});return Td&&Array.isArray(Td)&&(ql.providerData=Td.map(Eo=>Object.assign({},Eo))),bd&&(ql._redirectEventId=bd),ql}static _fromIdTokenResponse(y,T,O=!1){return(0,E.Z)(function*(){const le=new er;le.updateFromServerResponse(T);const xe=new Vn({uid:T.localId,auth:y,stsTokenManager:le,isAnonymous:O});return yield sr(xe),xe})()}}const Ye=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(T,O){var le=this;return(0,E.Z)(function*(){le.storage[T]=O})()}_get(T){var O=this;return(0,E.Z)(function*(){const le=O.storage[T];return void 0===le?null:le})()}_remove(T){var O=this;return(0,E.Z)(function*(){delete O.storage[T]})()}_addListener(T,O){}_removeListener(T,O){}}return D.type="NONE",D})();function at(D,y,T){return`firebase:${D}:${y}:${T}`}class Vt{constructor(y,T,O){this.persistence=y,this.auth=T,this.userKey=O;const{config:le,name:xe}=this.auth;this.fullUserKey=at(this.userKey,le.apiKey,xe),this.fullPersistenceKey=at("persistence",le.apiKey,xe),this.boundEventHandler=T._onStorageEvent.bind(T),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,E.Z)(function*(){const T=yield y.persistence._get(y.fullUserKey);return T?Vn._fromJSON(y.auth,T):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var T=this;return(0,E.Z)(function*(){if(T.persistence===y)return;const O=yield T.getCurrentUser();return yield T.removeCurrentUser(),T.persistence=y,O?T.setCurrentUser(O):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,T,O="authUser"){return(0,E.Z)(function*(){if(!T.length)return new Vt(Oe(Ye),y,O);const le=(yield Promise.all(T.map(function(){var Yn=(0,E.Z)(function*(Dr){if(yield Dr._isAvailable())return Dr});return function(Dr){return Yn.apply(this,arguments)}}()))).filter(Yn=>Yn);let xe=le[0]||Oe(Ye);const ht=at(O,y.config.apiKey,y.name);let jt=null;for(const Yn of T)try{const Dr=yield Yn._get(ht);if(Dr){const hr=Vn._fromJSON(y,Dr);Yn!==xe&&(jt=hr),xe=Yn;break}}catch{}const Sn=le.filter(Yn=>Yn._shouldAllowMigration);return xe._shouldAllowMigration&&Sn.length?(xe=Sn[0],jt&&(yield xe._set(ht,jt.toJSON())),yield Promise.all(T.map(function(){var Yn=(0,E.Z)(function*(Dr){if(Dr!==xe)try{yield Dr._remove(ht)}catch{}});return function(Dr){return Yn.apply(this,arguments)}}())),new Vt(xe,y,O)):new Vt(xe,y,O)})()}}function Dt(D){const y=D.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(mi(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(Tn(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(re(y))return"Blackberry";if(de(y))return"Webos";if(cr(y))return"Safari";if((y.includes("chrome/")||Br(y))&&!y.includes("edge/"))return"Chrome";if(pe(y))return"Android";{const O=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===O?.length)return O[1]}return"Other"}function Tn(D=(0,ne.z$)()){return/firefox\//i.test(D)}function cr(D=(0,ne.z$)()){const y=D.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Br(D=(0,ne.z$)()){return/crios\//i.test(D)}function mi(D=(0,ne.z$)()){return/iemobile/i.test(D)}function pe(D=(0,ne.z$)()){return/android/i.test(D)}function re(D=(0,ne.z$)()){return/blackberry/i.test(D)}function de(D=(0,ne.z$)()){return/webos/i.test(D)}function me(D=(0,ne.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function On(D=(0,ne.z$)()){return me(D)||pe(D)||de(D)||re(D)||/windows phone/i.test(D)||mi(D)}function Nr(D,y=[]){let T;switch(D){case"Browser":T=Dt((0,ne.z$)());break;case"Worker":T=`${Dt((0,ne.z$)())}-${D}`;break;default:T=D}const O=y.length?y.join(","):"FirebaseCore-web";return`${T}/JsCore/${F.SDK_VERSION}/${O}`}class Ci{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,T){const O=xe=>new Promise((ht,jt)=>{try{ht(y(xe))}catch(Sn){jt(Sn)}});O.onAbort=T,this.queue.push(O);const le=this.queue.length-1;return()=>{this.queue[le]=()=>Promise.resolve()}}runMiddleware(y){var T=this;return(0,E.Z)(function*(){if(T.auth.currentUser===y)return;const O=[];try{for(const le of T.queue)yield le(y),le.onAbort&&O.push(le.onAbort)}catch(le){O.reverse();for(const xe of O)try{xe()}catch{}throw T.auth._errorFactory.create("login-blocked",{originalMessage:le?.message})}})()}}class Yi{constructor(y,T,O){this.app=y,this.heartbeatServiceProvider=T,this.config=O,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fs(this),this.idTokenSubscription=new fs(this),this.beforeStateQueue=new Ci(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=O.sdkClientVersion}_initializeWithPersistence(y,T){var O=this;return T&&(this._popupRedirectResolver=Oe(T)),this._initializationPromise=this.queue((0,E.Z)(function*(){var le,xe;if(!O._deleted&&(O.persistenceManager=yield Vt.create(O,y),!O._deleted)){if(null!==(le=O._popupRedirectResolver)&&void 0!==le&&le._shouldInitProactively)try{yield O._popupRedirectResolver._initialize(O)}catch{}yield O.initializeCurrentUser(T),O.lastNotifiedUid=(null===(xe=O.currentUser)||void 0===xe?void 0:xe.uid)||null,!O._deleted&&(O._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,E.Z)(function*(){if(y._deleted)return;const T=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||T){if(y.currentUser&&T&&y.currentUser.uid===T.uid)return y._currentUser._assign(T),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(T,!0)}})()}initializeCurrentUser(y){var T=this;return(0,E.Z)(function*(){var O;const le=yield T.assertedPersistence.getCurrentUser();let xe=le,ht=!1;if(y&&T.config.authDomain){yield T.getOrInitRedirectPersistenceManager();const jt=null===(O=T.redirectUser)||void 0===O?void 0:O._redirectEventId,Sn=xe?._redirectEventId,Yn=yield T.tryRedirectSignIn(y);(!jt||jt===Sn)&&Yn?.user&&(xe=Yn.user,ht=!0)}if(!xe)return T.directlySetCurrentUser(null);if(!xe._redirectEventId){if(ht)try{yield T.beforeStateQueue.runMiddleware(xe)}catch(jt){xe=le,T._popupRedirectResolver._overrideRedirectResult(T,()=>Promise.reject(jt))}return xe?T.reloadAndSetCurrentUserOrClear(xe):T.directlySetCurrentUser(null)}return X(T._popupRedirectResolver,T,"argument-error"),yield T.getOrInitRedirectPersistenceManager(),T.redirectUser&&T.redirectUser._redirectEventId===xe._redirectEventId?T.directlySetCurrentUser(xe):T.reloadAndSetCurrentUserOrClear(xe)})()}tryRedirectSignIn(y){var T=this;return(0,E.Z)(function*(){let O=null;try{O=yield T._popupRedirectResolver._completeRedirectFn(T,y,!0)}catch{yield T._setRedirectUser(null)}return O})()}reloadAndSetCurrentUserOrClear(y){var T=this;return(0,E.Z)(function*(){try{yield sr(y)}catch(O){if("auth/network-request-failed"!==O?.code)return T.directlySetCurrentUser(null)}return T.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function At(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var y=this;return(0,E.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var T=this;return(0,E.Z)(function*(){const O=y?(0,ne.m9)(y):null;return O&&X(O.auth.config.apiKey===T.config.apiKey,T,"invalid-user-token"),T._updateCurrentUser(O&&O._clone(T))})()}_updateCurrentUser(y,T=!1){var O=this;return(0,E.Z)(function*(){if(!O._deleted)return y&&X(O.tenantId===y.tenantId,O,"tenant-id-mismatch"),T||(yield O.beforeStateQueue.runMiddleware(y)),O.queue((0,E.Z)(function*(){yield O.directlySetCurrentUser(y),O.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,E.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var T=this;return this.queue((0,E.Z)(function*(){yield T.assertedPersistence.setPersistence(Oe(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new ne.LL("auth","Firebase",y())}onAuthStateChanged(y,T,O){return this.registerStateListener(this.authStateSubscription,y,T,O)}beforeAuthStateChanged(y,T){return this.beforeStateQueue.pushCallback(y,T)}onIdTokenChanged(y,T,O){return this.registerStateListener(this.idTokenSubscription,y,T,O)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,T){var O=this;return(0,E.Z)(function*(){const le=yield O.getOrInitRedirectPersistenceManager(T);return null===y?le.removeCurrentUser():le.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var T=this;return(0,E.Z)(function*(){if(!T.redirectPersistenceManager){const O=y&&Oe(y)||T._popupRedirectResolver;X(O,T,"argument-error"),T.redirectPersistenceManager=yield Vt.create(T,[Oe(O._redirectPersistence)],"redirectUser"),T.redirectUser=yield T.redirectPersistenceManager.getCurrentUser()}return T.redirectPersistenceManager})()}_redirectUserForId(y){var T=this;return(0,E.Z)(function*(){var O,le;return T._isInitialized&&(yield T.queue((0,E.Z)(function*(){}))),(null===(O=T._currentUser)||void 0===O?void 0:O._redirectEventId)===y?T._currentUser:(null===(le=T.redirectUser)||void 0===le?void 0:le._redirectEventId)===y?T.redirectUser:null})()}_persistUserIfCurrent(y){var T=this;return(0,E.Z)(function*(){if(y===T.currentUser)return T.queue((0,E.Z)(function*(){return T.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,T;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const O=null!==(T=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==T?T:null;this.lastNotifiedUid!==O&&(this.lastNotifiedUid=O,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,T,O,le){if(this._deleted)return()=>{};const xe="function"==typeof T?T:T.next.bind(T),ht=this._isInitialized?Promise.resolve():this._initializationPromise;return X(ht,this,"internal-error"),ht.then(()=>xe(this.currentUser)),"function"==typeof T?y.addObserver(T,O,le):y.addObserver(T)}directlySetCurrentUser(y){var T=this;return(0,E.Z)(function*(){T.currentUser&&T.currentUser!==y&&T._currentUser._stopProactiveRefresh(),y&&T.isProactiveRefreshEnabled&&y._startProactiveRefresh(),T.currentUser=y,y?yield T.assertedPersistence.setCurrentUser(y):yield T.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,E.Z)(function*(){var T;const O={"X-Client-Version":y.clientVersion};y.app.options.appId&&(O["X-Firebase-gmpid"]=y.app.options.appId);const le=yield null===(T=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===T?void 0:T.getHeartbeatsHeader();return le&&(O["X-Firebase-Client"]=le),O})()}}function Zr(D){return(0,ne.m9)(D)}class fs{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,ne.ne)(T=>this.observer=T)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ns(D){const y=D.indexOf(":");return y<0?"":D.substr(0,y+1)}function tr(D){if(!D)return null;const y=Number(D);return isNaN(y)?null:y}class Rr{constructor(y,T){this.providerId=y,this.signInMethod=T}toJSON(){return ve("not implemented")}_getIdTokenResponse(y){return ve("not implemented")}_linkToIdToken(y,T){return ve("not implemented")}_getReauthenticationResolver(y){return ve("not implemented")}}function Mi(D,y){return is.apply(this,arguments)}function is(){return(is=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:resetPassword",Gt(D,y))})).apply(this,arguments)}function ps(D,y){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function vr(D,y){return di.apply(this,arguments)}function di(){return(di=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:update",Gt(D,y))})).apply(this,arguments)}function ss(){return(ss=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithPassword",Gt(D,y))})).apply(this,arguments)}function Ai(D,y){return os.apply(this,arguments)}function os(){return(os=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:sendOobCode",Gt(D,y))})).apply(this,arguments)}function vi(D,y){return bs.apply(this,arguments)}function bs(){return(bs=(0,E.Z)(function*(D,y){return Ai(D,y)})).apply(this,arguments)}function $i(D,y){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,E.Z)(function*(D,y){return Ai(D,y)})).apply(this,arguments)}function lo(D,y){return co.apply(this,arguments)}function co(){return(co=(0,E.Z)(function*(D,y){return Ai(D,y)})).apply(this,arguments)}function wu(D,y){return js.apply(this,arguments)}function js(){return(js=(0,E.Z)(function*(D,y){return Ai(D,y)})).apply(this,arguments)}function ls(){return(ls=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithEmailLink",Gt(D,y))})).apply(this,arguments)}function Os(){return(Os=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithEmailLink",Gt(D,y))})).apply(this,arguments)}class xo extends Rr{constructor(y,T,O,le=null){super("password",O),this._email=y,this._password=T,this._tenantId=le}static _fromEmailAndPassword(y,T){return new xo(y,T,"password")}static _fromEmailAndCode(y,T,O=null){return new xo(y,T,"emailLink",O)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y;if(T?.email&&T?.password){if("password"===T.signInMethod)return this._fromEmailAndPassword(T.email,T.password);if("emailLink"===T.signInMethod)return this._fromEmailAndCode(T.email,T.password,T.tenantId)}return null}_getIdTokenResponse(y){var T=this;return(0,E.Z)(function*(){switch(T.signInMethod){case"password":return function Ds(D,y){return ss.apply(this,arguments)}(y,{returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function xs(D,y){return ls.apply(this,arguments)}(y,{email:T._email,oobCode:T._password});default:Ve(y,"internal-error")}})()}_linkToIdToken(y,T){var O=this;return(0,E.Z)(function*(){switch(O.signInMethod){case"password":return ps(y,{idToken:T,returnSecureToken:!0,email:O._email,password:O._password});case"emailLink":return function Do(D,y){return Os.apply(this,arguments)}(y,{idToken:T,email:O._email,oobCode:O._password});default:Ve(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function vn(D,y){return ot.apply(this,arguments)}function ot(){return(ot=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithIdp",Gt(D,y))})).apply(this,arguments)}class ft extends Rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const T=new ft(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(T.idToken=y.idToken),y.accessToken&&(T.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(T.nonce=y.nonce),y.pendingToken&&(T.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(T.accessToken=y.oauthToken,T.secret=y.oauthTokenSecret):Ve("argument-error"),T}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y,{providerId:O,signInMethod:le}=T,xe=(0,Be._T)(T,["providerId","signInMethod"]);if(!O||!le)return null;const ht=new ft(O,le);return ht.idToken=xe.idToken||void 0,ht.accessToken=xe.accessToken||void 0,ht.secret=xe.secret,ht.nonce=xe.nonce,ht.pendingToken=xe.pendingToken||null,ht}_getIdTokenResponse(y){return vn(y,this.buildRequest())}_linkToIdToken(y,T){const O=this.buildRequest();return O.idToken=T,vn(y,O)}_getReauthenticationResolver(y){const T=this.buildRequest();return T.autoCreate=!1,vn(y,T)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const T={};this.idToken&&(T.id_token=this.idToken),this.accessToken&&(T.access_token=this.accessToken),this.secret&&(T.oauth_token_secret=this.secret),T.providerId=this.providerId,this.nonce&&!this.pendingToken&&(T.nonce=this.nonce),y.postBody=(0,ne.xO)(T)}return y}}function Qt(D,y){return pn.apply(this,arguments)}function pn(){return(pn=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:sendVerificationCode",Gt(D,y))})).apply(this,arguments)}function ir(){return(ir=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithPhoneNumber",Gt(D,y))})).apply(this,arguments)}function oi(){return(oi=(0,E.Z)(function*(D,y){const T=yield yi(D,"POST","/v1/accounts:signInWithPhoneNumber",Gt(D,y));if(T.temporaryProof)throw zr(D,"account-exists-with-different-credential",T);return T})).apply(this,arguments)}const Ui={USER_NOT_FOUND:"user-not-found"};function Bi(){return(Bi=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithPhoneNumber",Gt(D,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Ui)})).apply(this,arguments)}class Vr extends Rr{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,T){return new Vr({verificationId:y,verificationCode:T})}static _fromTokenResponse(y,T){return new Vr({phoneNumber:y,temporaryProof:T})}_getIdTokenResponse(y){return function Kn(D,y){return ir.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,T){return function Pr(D,y){return oi.apply(this,arguments)}(y,Object.assign({idToken:T},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function gs(D,y){return Bi.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:T,verificationId:O,verificationCode:le}=this.params;return y&&T?{temporaryProof:y,phoneNumber:T}:{sessionInfo:O,code:le}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:T,verificationCode:O,phoneNumber:le,temporaryProof:xe}=y;return O||T||le||xe?new Vr({verificationId:T,verificationCode:O,phoneNumber:le,temporaryProof:xe}):null}}class Yo{constructor(y){var T,O,le,xe,ht,jt;const Sn=(0,ne.zd)((0,ne.pd)(y)),Yn=null!==(T=Sn.apiKey)&&void 0!==T?T:null,Dr=null!==(O=Sn.oobCode)&&void 0!==O?O:null,hr=function gu(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(le=Sn.mode)&&void 0!==le?le:null);X(Yn&&Dr&&hr,"argument-error"),this.apiKey=Yn,this.operation=hr,this.code=Dr,this.continueUrl=null!==(xe=Sn.continueUrl)&&void 0!==xe?xe:null,this.languageCode=null!==(ht=Sn.languageCode)&&void 0!==ht?ht:null,this.tenantId=null!==(jt=Sn.tenantId)&&void 0!==jt?jt:null}static parseLink(y){const T=function As(D){const y=(0,ne.zd)((0,ne.pd)(D)).link,T=y?(0,ne.zd)((0,ne.pd)(y)).deep_link_id:null,O=(0,ne.zd)((0,ne.pd)(D)).deep_link_id;return(O?(0,ne.zd)((0,ne.pd)(O)).link:null)||O||T||y||D}(y);try{return new Yo(T)}catch{return null}}}let Lo=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(T,O){return xo._fromEmailAndPassword(T,O)}static credentialWithLink(T,O){const le=Yo.parseLink(O);return X(le,"argument-error"),xo._fromEmailAndCode(T,le.code,le.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Xs{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Fo extends Xs{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class Ma extends Fo{static credentialFromJSON(y){const T="string"==typeof y?JSON.parse(y):y;return X("providerId"in T&&"signInMethod"in T,"argument-error"),ft._fromParams(T)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return X(y.idToken||y.accessToken,"argument-error"),ft._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return Ma.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return Ma.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:O,oauthTokenSecret:le,pendingToken:xe,nonce:ht,providerId:jt}=y;if(!O&&!le&&!T&&!xe||!jt)return null;try{return new Ma(jt)._credential({idToken:T,accessToken:O,nonce:ht,pendingToken:xe})}catch{return null}}}let ya=(()=>{class D extends Fo{constructor(){super("facebook.com")}static credential(T){return ft._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return D.credentialFromTaggedObject(T)}static credentialFromError(T){return D.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return D.credential(T.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Oa=(()=>{class D extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(T,O){return ft._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:T,accessToken:O})}static credentialFromResult(T){return D.credentialFromTaggedObject(T)}static credentialFromError(T){return D.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{oauthIdToken:O,oauthAccessToken:le}=T;if(!O&&!le)return null;try{return D.credential(O,le)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),qa=(()=>{class D extends Fo{constructor(){super("github.com")}static credential(T){return ft._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:T})}static credentialFromResult(T){return D.credentialFromTaggedObject(T)}static credentialFromError(T){return D.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T||!("oauthAccessToken"in T)||!T.oauthAccessToken)return null;try{return D.credential(T.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class ho extends Rr{constructor(y,T){super(y,y),this.pendingToken=T}_getIdTokenResponse(y){return vn(y,this.buildRequest())}_linkToIdToken(y,T){const O=this.buildRequest();return O.idToken=T,vn(y,O)}_getReauthenticationResolver(y){const T=this.buildRequest();return T.autoCreate=!1,vn(y,T)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const T="string"==typeof y?JSON.parse(y):y,{providerId:O,signInMethod:le,pendingToken:xe}=T;return O&&le&&xe&&O===le?new ho(O,xe):null}static _create(y,T){return new ho(y,T)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zs extends Xs{constructor(y){X(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return zs.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return zs.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const T=ho.fromJSON(y);return X(T,"argument-error"),T}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:T,providerId:O}=y;if(!T||!O)return null;try{return ho._create(O,T)}catch{return null}}}let Us=(()=>{class D extends Fo{constructor(){super("twitter.com")}static credential(T,O){return ft._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:T,oauthTokenSecret:O})}static credentialFromResult(T){return D.credentialFromTaggedObject(T)}static credentialFromError(T){return D.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{oauthAccessToken:O,oauthTokenSecret:le}=T;if(!O||!le)return null;try{return D.credential(O,le)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function ia(D,y){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signUp",Gt(D,y))})).apply(this,arguments)}class ms{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,T,O,le=!1){return(0,E.Z)(function*(){const xe=yield Vn._fromIdTokenResponse(y,O,le),ht=Wa(O);return new ms({user:xe,providerId:ht,_tokenResponse:O,operationType:T})})()}static _forOperation(y,T,O){return(0,E.Z)(function*(){yield y._updateTokensIfNecessary(O,!0);const le=Wa(O);return new ms({user:y,providerId:le,_tokenResponse:O,operationType:T})})()}}function Wa(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Qo(){return(Qo=(0,E.Z)(function*(D){var y;const T=Zr(D);if(yield T._initializationPromise,null!==(y=T.currentUser)&&void 0!==y&&y.isAnonymous)return new ms({user:T.currentUser,providerId:null,operationType:"signIn"});const O=yield ia(T,{returnSecureToken:!0}),le=yield ms._fromIdTokenResponse(T,"signIn",O,!0);return yield T._updateCurrentUser(le.user),le})).apply(this,arguments)}class Yr extends ne.ZR{constructor(y,T,O,le){var xe;super(T.code,T.message),this.operationType=O,this.user=le,Object.setPrototypeOf(this,Yr.prototype),this.customData={appName:y.name,tenantId:null!==(xe=y.tenantId)&&void 0!==xe?xe:void 0,_serverResponse:T.customData._serverResponse,operationType:O}}static _fromErrorAndOperation(y,T,O,le){return new Yr(y,T,O,le)}}function Js(D,y,T,O){return("reauthenticate"===y?T._getReauthenticationResolver(D):T._getIdTokenResponse(D)).catch(xe=>{throw"auth/multi-factor-auth-required"===xe.code?Yr._fromErrorAndOperation(D,xe,y,O):xe})}function Xo(D){return new Set(D.map(({providerId:y})=>y).filter(y=>!!y))}function fo(){return(fo=(0,E.Z)(function*(D,y){const T=(0,ne.m9)(D);yield fi(!0,T,y);const{providerUserInfo:O}=yield mr(T.auth,{idToken:yield T.getIdToken(),deleteProvider:[y]}),le=Xo(O||[]);return T.providerData=T.providerData.filter(xe=>le.has(xe.providerId)),le.has("phone")||(T.phoneNumber=null),yield T.auth._persistUserIfCurrent(T),T})).apply(this,arguments)}function Ra(D,y){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,E.Z)(function*(D,y,T=!1){const O=yield qr(D,y._linkToIdToken(D.auth,yield D.getIdToken()),T);return ms._forOperation(D,"link",O)})).apply(this,arguments)}function fi(D,y,T){return _a.apply(this,arguments)}function _a(){return(_a=(0,E.Z)(function*(D,y,T){yield sr(y);const le=!1===D?"provider-already-linked":"no-such-provider";X(Xo(y.providerData).has(T)===D,y.auth,le)})).apply(this,arguments)}function ba(D,y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,E.Z)(function*(D,y,T=!1){const{auth:O}=D,le="reauthenticate";try{const xe=yield qr(D,Js(O,le,y,D),T);X(xe.idToken,O,"internal-error");const ht=Jn(xe.idToken);X(ht,O,"internal-error");const{sub:jt}=ht;return X(D.uid===jt,O,"user-mismatch"),ms._forOperation(D,le,xe)}catch(xe){throw"auth/user-not-found"===xe?.code&&Ve(O,"user-mismatch"),xe}})).apply(this,arguments)}function qs(D,y){return zi.apply(this,arguments)}function zi(){return(zi=(0,E.Z)(function*(D,y,T=!1){const O="signIn",le=yield Js(D,O,y),xe=yield ms._fromIdTokenResponse(D,O,le);return T||(yield D._updateCurrentUser(xe.user)),xe})).apply(this,arguments)}function _i(D,y){return eo.apply(this,arguments)}function eo(){return(eo=(0,E.Z)(function*(D,y){return qs(Zr(D),y)})).apply(this,arguments)}function cs(D,y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,E.Z)(function*(D,y){const T=(0,ne.m9)(D);return yield fi(!1,T,y.providerId),Ra(T,y)})).apply(this,arguments)}function Vo(D,y){return vs.apply(this,arguments)}function vs(){return(vs=(0,E.Z)(function*(D,y){return ba((0,ne.m9)(D),y)})).apply(this,arguments)}function Ws(D,y){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,E.Z)(function*(D,y){return yi(D,"POST","/v1/accounts:signInWithCustomToken",Gt(D,y))})).apply(this,arguments)}function Ns(){return(Ns=(0,E.Z)(function*(D,y){const T=Zr(D),O=yield Ws(T,{token:y,returnSecureToken:!0}),le=yield ms._fromIdTokenResponse(T,"signIn",O);return yield T._updateCurrentUser(le.user),le})).apply(this,arguments)}class ea{constructor(y,T){this.factorId=y,this.uid=T.mfaEnrollmentId,this.enrollmentTime=new Date(T.enrolledAt).toUTCString(),this.displayName=T.displayName}static _fromServerResponse(y,T){return"phoneInfo"in T?po._fromServerResponse(y,T):Ve(y,"internal-error")}}class po extends ea{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,T){return new po(T)}}function go(D,y,T){var O;X((null===(O=T.url)||void 0===O?void 0:O.length)>0,D,"invalid-continue-uri"),X(typeof T.dynamicLinkDomain>"u"||T.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),y.continueUrl=T.url,y.dynamicLinkDomain=T.dynamicLinkDomain,y.canHandleCodeInApp=T.handleCodeInApp,T.iOS&&(X(T.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),y.iOSBundleId=T.iOS.bundleId),T.android&&(X(T.android.packageName.length>0,D,"missing-android-pkg-name"),y.androidInstallApp=T.android.installApp,y.androidMinimumVersionCode=T.android.minimumVersion,y.androidPackageName=T.android.packageName)}function ro(){return(ro=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D),le={requestType:"PASSWORD_RESET",email:y};T&&go(O,le,T),yield $i(O,le)})).apply(this,arguments)}function Sr(){return(Sr=(0,E.Z)(function*(D,y,T){yield Mi((0,ne.m9)(D),{oobCode:y,newPassword:T})})).apply(this,arguments)}function te(){return(te=(0,E.Z)(function*(D,y){yield vr((0,ne.m9)(D),{oobCode:y})})).apply(this,arguments)}function K(D,y){return w.apply(this,arguments)}function w(){return(w=(0,E.Z)(function*(D,y){const T=(0,ne.m9)(D),O=yield Mi(T,{oobCode:y}),le=O.requestType;switch(X(le,T,"internal-error"),le){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(O.newEmail,T,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(O.mfaInfo,T,"internal-error");default:X(O.email,T,"internal-error")}let xe=null;return O.mfaInfo&&(xe=ea._fromServerResponse(Zr(T),O.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.newEmail:O.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.email:O.newEmail)||null,multiFactorInfo:xe},operation:le}})).apply(this,arguments)}function ce(){return(ce=(0,E.Z)(function*(D,y){const{data:T}=yield K((0,ne.m9)(D),y);return T.email})).apply(this,arguments)}function tt(){return(tt=(0,E.Z)(function*(D,y,T){const O=Zr(D),le=yield ia(O,{returnSecureToken:!0,email:y,password:T}),xe=yield ms._fromIdTokenResponse(O,"signIn",le);return yield O._updateCurrentUser(xe.user),xe})).apply(this,arguments)}function Fn(){return(Fn=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D),le={requestType:"EMAIL_SIGNIN",email:y};X(T.handleCodeInApp,O,"argument-error"),T&&go(O,le,T),yield lo(O,le)})).apply(this,arguments)}function $r(){return($r=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D),le=Lo.credentialWithLink(y,T||wt());return X(le._tenantId===(O.tenantId||null),O,"tenant-id-mismatch"),_i(O,le)})).apply(this,arguments)}function Qi(D,y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:createAuthUri",Gt(D,y))})).apply(this,arguments)}function Ar(){return(Ar=(0,E.Z)(function*(D,y){const O={identifier:y,continueUri:vt()?wt():"http://localhost"},{signinMethods:le}=yield Qi((0,ne.m9)(D),O);return le||[]})).apply(this,arguments)}function Oi(){return(Oi=(0,E.Z)(function*(D,y){const T=(0,ne.m9)(D),le={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};y&&go(T.auth,le,y);const{email:xe}=yield vi(T.auth,le);xe!==D.email&&(yield D.reload())})).apply(this,arguments)}function ar(){return(ar=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D),xe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:y};T&&go(O.auth,xe,T);const{email:ht}=yield wu(O.auth,xe);ht!==D.email&&(yield D.reload())})).apply(this,arguments)}function Vi(D,y){return Is.apply(this,arguments)}function Is(){return(Is=(0,E.Z)(function*(D,y){return rr(D,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Es(){return(Es=(0,E.Z)(function*(D,{displayName:y,photoURL:T}){if(void 0===y&&void 0===T)return;const O=(0,ne.m9)(D),xe={idToken:yield O.getIdToken(),displayName:y,photoUrl:T,returnSecureToken:!0},ht=yield qr(O,Vi(O.auth,xe));O.displayName=ht.displayName||null,O.photoURL=ht.photoUrl||null;const jt=O.providerData.find(({providerId:Sn})=>"password"===Sn);jt&&(jt.displayName=O.displayName,jt.photoURL=O.photoURL),yield O._updateTokensIfNecessary(ht)})).apply(this,arguments)}function oa(D,y,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,E.Z)(function*(D,y,T){const{auth:O}=D,xe={idToken:yield D.getIdToken(),returnSecureToken:!0};y&&(xe.email=y),T&&(xe.password=T);const ht=yield qr(D,ps(O,xe));yield D._updateTokensIfNecessary(ht,!0)})).apply(this,arguments)}class _o{constructor(y,T,O={}){this.isNewUser=y,this.providerId=T,this.profile=O}}class ou extends _o{constructor(y,T,O,le){super(y,T,O),this.username=le}}class ua extends _o{constructor(y,T){super(y,"facebook.com",T)}}class Vu extends ou{constructor(y,T){super(y,"github.com",T,"string"==typeof T?.login?T?.login:null)}}class Ol extends _o{constructor(y,T){super(y,"google.com",T)}}class Ta extends ou{constructor(y,T,O){super(y,"twitter.com",T,O)}}function Hu(D){const{user:y,_tokenResponse:T}=D;return y.isAnonymous&&!T?{providerId:null,isNewUser:!1,profile:null}:function aa(D){var y,T;if(!D)return null;const{providerId:O}=D,le=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},xe=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!O&&D?.idToken){const ht=null===(T=null===(y=Jn(D.idToken))||void 0===y?void 0:y.firebase)||void 0===T?void 0:T.sign_in_provider;if(ht)return new _o(xe,"anonymous"!==ht&&"custom"!==ht?ht:null)}if(!O)return null;switch(O){case"facebook.com":return new ua(xe,le);case"github.com":return new Vu(xe,le);case"google.com":return new Ol(xe,le);case"twitter.com":return new Ta(xe,le,D.screenName||null);case"custom":case"anonymous":return new _o(xe,null);default:return new _o(xe,O,le)}}(T)}class la{constructor(y,T,O){this.type=y,this.credential=T,this.auth=O}static _fromIdtoken(y,T){return new la("enroll",y,T)}static _fromMfaPendingCredential(y){return new la("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var T,O;if(y?.multiFactorSession){if(null!==(T=y.multiFactorSession)&&void 0!==T&&T.pendingCredential)return la._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null!==(O=y.multiFactorSession)&&void 0!==O&&O.idToken)return la._fromIdtoken(y.multiFactorSession.idToken)}return null}}class bo{constructor(y,T,O){this.session=y,this.hints=T,this.signInResolver=O}static _fromError(y,T){const O=Zr(y),le=T.customData._serverResponse,xe=(le.mfaInfo||[]).map(jt=>ea._fromServerResponse(O,jt));X(le.mfaPendingCredential,O,"internal-error");const ht=la._fromMfaPendingCredential(le.mfaPendingCredential);return new bo(ht,xe,function(){var jt=(0,E.Z)(function*(Sn){const Yn=yield Sn._process(O,ht);delete le.mfaInfo,delete le.mfaPendingCredential;const Dr=Object.assign(Object.assign({},le),{idToken:Yn.idToken,refreshToken:Yn.refreshToken});switch(T.operationType){case"signIn":const hr=yield ms._fromIdTokenResponse(O,T.operationType,Dr);return yield O._updateCurrentUser(hr.user),hr;case"reauthenticate":return X(T.user,O,"internal-error"),ms._forOperation(T.user,T.operationType,Dr);default:Ve(O,"internal-error")}});return function(Sn){return jt.apply(this,arguments)}}())}resolveSignIn(y){var T=this;return(0,E.Z)(function*(){return T.signInResolver(y)})()}}function Ka(D,y){return rr(D,"POST","/v2/accounts/mfaEnrollment:start",Gt(D,y))}class ue{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(T=>{T.mfaInfo&&(this.enrolledFactors=T.mfaInfo.map(O=>ea._fromServerResponse(y.auth,O)))})}static _fromUser(y){return new ue(y)}getSession(){var y=this;return(0,E.Z)(function*(){return la._fromIdtoken(yield y.user.getIdToken(),y.user.auth)})()}enroll(y,T){var O=this;return(0,E.Z)(function*(){const le=y,xe=yield O.getSession(),ht=yield qr(O.user,le._process(O.user.auth,xe,T));return yield O.user._updateTokensIfNecessary(ht),O.user.reload()})()}unenroll(y){var T=this;return(0,E.Z)(function*(){const O="string"==typeof y?y:y.uid,le=yield T.user.getIdToken(),xe=yield qr(T.user,function V(D,y){return rr(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(D,y))}(T.user.auth,{idToken:le,mfaEnrollmentId:O}));T.enrolledFactors=T.enrolledFactors.filter(({uid:ht})=>ht!==O),yield T.user._updateTokensIfNecessary(xe);try{yield T.user.reload()}catch(ht){if("auth/user-token-expired"!==ht?.code)throw ht}})()}}const G=new WeakMap,Je="__sak";class Nt{constructor(y,T){this.storageRetriever=y,this.type=T}_isAvailable(){try{return this.storage?(this.storage.setItem(Je,"1"),this.storage.removeItem(Je),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,T){return this.storage.setItem(y,JSON.stringify(T)),Promise.resolve()}_get(y){const T=this.storage.getItem(y);return Promise.resolve(T?JSON.parse(T):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const kr=(()=>{class D extends Nt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(T,O)=>this.onStorageEvent(T,O),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function en(){const D=(0,ne.z$)();return cr(D)||me(D)}()&&function dr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=On(),this._shouldAllowMigration=!0}forAllChangedKeys(T){for(const O of Object.keys(this.listeners)){const le=this.storage.getItem(O),xe=this.localCache[O];le!==xe&&T(O,xe,le)}}onStorageEvent(T,O=!1){if(!T.key)return void this.forAllChangedKeys((jt,Sn,Yn)=>{this.notifyListeners(jt,Yn)});const le=T.key;if(O?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const jt=this.storage.getItem(le);if(T.newValue!==jt)null!==T.newValue?this.storage.setItem(le,T.newValue):this.storage.removeItem(le);else if(this.localCache[le]===T.newValue&&!O)return}const xe=()=>{const jt=this.storage.getItem(le);!O&&this.localCache[le]===jt||this.notifyListeners(le,jt)},ht=this.storage.getItem(le);!function bn(){return(0,ne.w1)()&&10===document.documentMode}()||ht===T.newValue||T.newValue===T.oldValue?xe():setTimeout(xe,10)}notifyListeners(T,O){this.localCache[T]=O;const le=this.listeners[T];if(le)for(const xe of Array.from(le))xe(O&&JSON.parse(O))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((T,O,le)=>{this.onStorageEvent(new StorageEvent("storage",{key:T,oldValue:O,newValue:le}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(T,O){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[T]||(this.listeners[T]=new Set,this.localCache[T]=this.storage.getItem(T)),this.listeners[T].add(O)}_removeListener(T,O){this.listeners[T]&&(this.listeners[T].delete(O),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(T,O){var le=()=>super._set,xe=this;return(0,E.Z)(function*(){yield le().call(xe,T,O),xe.localCache[T]=JSON.stringify(O)})()}_get(T){var O=()=>super._get,le=this;return(0,E.Z)(function*(){const xe=yield O().call(le,T);return le.localCache[T]=JSON.stringify(xe),xe})()}_remove(T){var O=()=>super._remove,le=this;return(0,E.Z)(function*(){yield O().call(le,T),delete le.localCache[T]})()}}return D.type="LOCAL",D})(),Xr=(()=>{class D extends Nt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(T,O){}_removeListener(T,O){}}return D.type="SESSION",D})();let to=(()=>{class D{constructor(T){this.eventTarget=T,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(T){const O=this.receivers.find(xe=>xe.isListeningto(T));if(O)return O;const le=new D(T);return this.receivers.push(le),le}isListeningto(T){return this.eventTarget===T}handleEvent(T){var O=this;return(0,E.Z)(function*(){const le=T,{eventId:xe,eventType:ht,data:jt}=le.data,Sn=O.handlersMap[ht];if(!Sn?.size)return;le.ports[0].postMessage({status:"ack",eventId:xe,eventType:ht});const Yn=Array.from(Sn).map(function(){var hr=(0,E.Z)(function*(ao){return ao(le.origin,jt)});return function(ao){return hr.apply(this,arguments)}}()),Dr=yield function bi(D){return Promise.all(D.map(function(){var y=(0,E.Z)(function*(T){try{return{fulfilled:!0,value:yield T}}catch(O){return{fulfilled:!1,reason:O}}});return function(T){return y.apply(this,arguments)}}()))}(Yn);le.ports[0].postMessage({status:"done",eventId:xe,eventType:ht,response:Dr})})()}_subscribe(T,O){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[T]||(this.handlersMap[T]=new Set),this.handlersMap[T].add(O)}_unsubscribe(T,O){this.handlersMap[T]&&O&&this.handlersMap[T].delete(O),(!O||0===this.handlersMap[T].size)&&delete this.handlersMap[T],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function cn(D="",y=10){let T="";for(let O=0;O<y;O++)T+=Math.floor(10*Math.random());return D+T}class Si{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,T,O=50){var le=this;return(0,E.Z)(function*(){const xe=typeof MessageChannel<"u"?new MessageChannel:null;if(!xe)throw new Error("connection_unavailable");let ht,jt;return new Promise((Sn,Yn)=>{const Dr=cn("",20);xe.port1.start();const hr=setTimeout(()=>{Yn(new Error("unsupported_event"))},O);jt={messageChannel:xe,onMessage(ao){const pu=ao;if(pu.data.eventId===Dr)switch(pu.data.status){case"ack":clearTimeout(hr),ht=setTimeout(()=>{Yn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ht),Sn(pu.data.response);break;default:clearTimeout(hr),clearTimeout(ht),Yn(new Error("invalid_response"))}}},le.handlers.add(jt),xe.port1.addEventListener("message",jt.onMessage),le.target.postMessage({eventType:y,eventId:Dr,data:T},[xe.port2])}).finally(()=>{jt&&le.removeMessageHandler(jt)})})()}}function ci(){return window}function In(){return typeof ci().WorkerGlobalScope<"u"&&"function"==typeof ci().importScripts}function Du(){return(Du=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const an="firebaseLocalStorageDb",Za="firebaseLocalStorage",$u="fbase_key";class xu{constructor(y){this.request=y}toPromise(){return new Promise((y,T)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{T(this.request.error)})})}}function al(D,y){return D.transaction([Za],y?"readwrite":"readonly").objectStore(Za)}function Pc(){const D=indexedDB.open(an,1);return new Promise((y,T)=>{D.addEventListener("error",()=>{T(D.error)}),D.addEventListener("upgradeneeded",()=>{const O=D.result;try{O.createObjectStore(Za,{keyPath:$u})}catch(le){T(le)}}),D.addEventListener("success",(0,E.Z)(function*(){const O=D.result;O.objectStoreNames.contains(Za)?y(O):(O.close(),yield function oc(){const D=indexedDB.deleteDatabase(an);return new xu(D).toPromise()}(),y(yield Pc()))}))})}function Ys(D,y,T){return Po.apply(this,arguments)}function Po(){return(Po=(0,E.Z)(function*(D,y,T){const O=al(D,!0).put({[$u]:y,value:T});return new xu(O).toPromise()})).apply(this,arguments)}function Ya(){return(Ya=(0,E.Z)(function*(D,y){const T=al(D,!1).get(y),O=yield new xu(T).toPromise();return void 0===O?null:O.value})).apply(this,arguments)}function Au(D,y){const T=al(D,!0).delete(y);return new xu(T).toPromise()}const Ji=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var T=this;return(0,E.Z)(function*(){return T.db||(T.db=yield Pc()),T.db})()}_withRetries(T){var O=this;return(0,E.Z)(function*(){let le=0;for(;;)try{const xe=yield O._openDb();return yield T(xe)}catch(xe){if(le++>3)throw xe;O.db&&(O.db.close(),O.db=void 0)}})()}initializeServiceWorkerMessaging(){var T=this;return(0,E.Z)(function*(){return In()?T.initializeReceiver():T.initializeSender()})()}initializeReceiver(){var T=this;return(0,E.Z)(function*(){T.receiver=to._getInstance(function Ht(){return In()?self:null}()),T.receiver._subscribe("keyChanged",function(){var O=(0,E.Z)(function*(le,xe){return{keyProcessed:(yield T._poll()).includes(xe.key)}});return function(le,xe){return O.apply(this,arguments)}}()),T.receiver._subscribe("ping",function(){var O=(0,E.Z)(function*(le,xe){return["keyChanged"]});return function(le,xe){return O.apply(this,arguments)}}())})()}initializeSender(){var T=this;return(0,E.Z)(function*(){var O,le;if(T.activeServiceWorker=yield function Rn(){return Du.apply(this,arguments)}(),!T.activeServiceWorker)return;T.sender=new Si(T.activeServiceWorker);const xe=yield T.sender._send("ping",{},800);!xe||(null===(O=xe[0])||void 0===O?void 0:O.fulfilled)&&(null===(le=xe[0])||void 0===le?void 0:le.value.includes("keyChanged"))&&(T.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(T){var O=this;return(0,E.Z)(function*(){if(O.sender&&O.activeServiceWorker&&function kn(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===O.activeServiceWorker)try{yield O.sender._send("keyChanged",{key:T},O.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const T=yield Pc();return yield Ys(T,Je,"1"),yield Au(T,Je),!0}catch{}return!1})()}_withPendingWrite(T){var O=this;return(0,E.Z)(function*(){O.pendingWrites++;try{yield T()}finally{O.pendingWrites--}})()}_set(T,O){var le=this;return(0,E.Z)(function*(){return le._withPendingWrite((0,E.Z)(function*(){return yield le._withRetries(xe=>Ys(xe,T,O)),le.localCache[T]=O,le.notifyServiceWorker(T)}))})()}_get(T){var O=this;return(0,E.Z)(function*(){const le=yield O._withRetries(xe=>function so(D,y){return Ya.apply(this,arguments)}(xe,T));return O.localCache[T]=le,le})()}_remove(T){var O=this;return(0,E.Z)(function*(){return O._withPendingWrite((0,E.Z)(function*(){return yield O._withRetries(le=>Au(le,T)),delete O.localCache[T],O.notifyServiceWorker(T)}))})()}_poll(){var T=this;return(0,E.Z)(function*(){const O=yield T._withRetries(ht=>{const jt=al(ht,!1).getAll();return new xu(jt).toPromise()});if(!O)return[];if(0!==T.pendingWrites)return[];const le=[],xe=new Set;for(const{fbase_key:ht,value:jt}of O)xe.add(ht),JSON.stringify(T.localCache[ht])!==JSON.stringify(jt)&&(T.notifyListeners(ht,jt),le.push(ht));for(const ht of Object.keys(T.localCache))T.localCache[ht]&&!xe.has(ht)&&(T.notifyListeners(ht,null),le.push(ht));return le})()}notifyListeners(T,O){this.localCache[T]=O;const le=this.listeners[T];if(le)for(const xe of Array.from(le))xe(O)}startPolling(){var T=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return T._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(T,O){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[T]||(this.listeners[T]=new Set,this._get(T)),this.listeners[T].add(O)}_removeListener(T,O){this.listeners[T]&&(this.listeners[T].delete(O),0===this.listeners[T].size&&delete this.listeners[T]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function Bn(D,y){return rr(D,"POST","/v2/accounts/mfaSignIn:start",Gt(D,y))}function Fa(){return(Fa=(0,E.Z)(function*(D){return(yield rr(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function En(D){return new Promise((y,T)=>{const O=document.createElement("script");O.setAttribute("src",D),O.onload=y,O.onerror=le=>{const xe=Xe("internal-error");xe.customData=le,T(xe)},O.type="text/javascript",O.charset="UTF-8",function ys(){var D,y;return null!==(y=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==y?y:document}().appendChild(O)})}function Qs(D){return`__${D}${Math.floor(1e6*Math.random())}`}const uu=1e12;class oo{constructor(y){this.auth=y,this.counter=uu,this._widgets=new Map}render(y,T){const O=this.counter;return this._widgets.set(O,new zu(y,this.auth.name,T||{})),this.counter++,O}reset(y){var T;const O=y||uu;null===(T=this._widgets.get(O))||void 0===T||T.delete(),this._widgets.delete(O)}getResponse(y){var T;return(null===(T=this._widgets.get(y||uu))||void 0===T?void 0:T.getResponse())||""}execute(y){var T=this;return(0,E.Z)(function*(){var O;return null===(O=T._widgets.get(y||uu))||void 0===O||O.execute(),""})()}}class zu{constructor(y,T,O){this.params=O,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const le="string"==typeof y?document.getElementById(y):y;X(le,"argument-error",{appName:T}),this.container=le,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qa(D){const y=[],T="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let O=0;O<D;O++)y.push(T.charAt(Math.floor(Math.random()*T.length)));return y.join("")}(50);const{callback:y,"expired-callback":T}=this.params;if(y)try{y(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,T)try{T()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wa=Qs("rcb"),kc=new Yt(3e4,6e4);class Ca{constructor(){var y;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(y=ci().grecaptcha)||void 0===y||!y.render)}load(y,T=""){return X(function Iu(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(T),y,"argument-error"),this.shouldResolveImmediately(T)?Promise.resolve(ci().grecaptcha):new Promise((O,le)=>{const xe=ci().setTimeout(()=>{le(Xe(y,"network-request-failed"))},kc.get());ci()[wa]=()=>{ci().clearTimeout(xe),delete ci()[wa];const jt=ci().grecaptcha;if(!jt)return void le(Xe(y,"internal-error"));const Sn=jt.render;jt.render=(Yn,Dr)=>{const hr=Sn(Yn,Dr);return this.counter++,hr},this.hostLanguage=T,O(jt)},En(`https://www.google.com/recaptcha/api.js??${(0,ne.xO)({onload:wa,render:"explicit",hl:T})}`).catch(()=>{clearTimeout(xe),le(Xe(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){var T;return!(null===(T=ci().grecaptcha)||void 0===T||!T.render)&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qu{load(y){return(0,E.Z)(function*(){return new oo(y)})()}clearedOneInstance(){}}const lu="recaptcha",ca={theme:"light",type:"image"};class Ft{constructor(y,T=Object.assign({},ca),O){this.parameters=T,this.type=lu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zr(O),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const le="string"==typeof y?document.getElementById(y):y;X(le,this.auth,"argument-error"),this.container=le,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qu:new Ca,this.validateStartingState()}verify(){var y=this;return(0,E.Z)(function*(){y.assertNotDestroyed();const T=yield y.render(),O=y.getAssertedRecaptcha();return O.getResponse(T)||new Promise(xe=>{const ht=jt=>{!jt||(y.tokenChangeListeners.delete(ht),xe(jt))};y.tokenChangeListeners.add(ht),y.isInvisible&&O.execute(T)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return T=>{if(this.tokenChangeListeners.forEach(O=>O(T)),"function"==typeof y)y(T);else if("string"==typeof y){const O=ci()[y];"function"==typeof O&&O(T)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,E.Z)(function*(){if(yield y.init(),!y.widgetId){let T=y.container;if(!y.isInvisible){const O=document.createElement("div");T.appendChild(O),T=O}y.widgetId=y.getAssertedRecaptcha().render(T,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,E.Z)(function*(){X(vt()&&!In(),y.auth,"internal-error"),yield function ul(){let D=null;return new Promise(y=>{"complete"!==document.readyState?(D=()=>y(),window.addEventListener("load",D)):y()}).catch(y=>{throw D&&window.removeEventListener("load",D),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const T=yield function jr(D){return Fa.apply(this,arguments)}(y.auth);X(T,y.auth,"internal-error"),y.parameters.sitekey=T})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ja{constructor(y,T){this.verificationId=y,this.onConfirmation=T}confirm(y){const T=Vr._fromVerification(this.verificationId,y);return this.onConfirmation(T)}}function cu(){return(cu=(0,E.Z)(function*(D,y,T){const O=Zr(D),le=yield Rl(O,y,(0,ne.m9)(T));return new ja(le,xe=>_i(O,xe))})).apply(this,arguments)}function od(){return(od=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D);yield fi(!1,O,"phone");const le=yield Rl(O.auth,y,(0,ne.m9)(T));return new ja(le,xe=>cs(O,xe))})).apply(this,arguments)}function Mc(){return(Mc=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D),le=yield Rl(O.auth,y,(0,ne.m9)(T));return new ja(le,xe=>Vo(O,xe))})).apply(this,arguments)}function Rl(D,y,T){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,E.Z)(function*(D,y,T){var O;const le=yield T.verify();try{let xe;if(X("string"==typeof le,D,"argument-error"),X(T.type===lu,D,"argument-error"),xe="string"==typeof y?{phoneNumber:y}:y,"session"in xe){const ht=xe.session;if("phoneNumber"in xe)return X("enroll"===ht.type,D,"internal-error"),(yield Ka(D,{idToken:ht.credential,phoneEnrollmentInfo:{phoneNumber:xe.phoneNumber,recaptchaToken:le}})).phoneSessionInfo.sessionInfo;{X("signin"===ht.type,D,"internal-error");const jt=(null===(O=xe.multiFactorHint)||void 0===O?void 0:O.uid)||xe.multiFactorUid;return X(jt,D,"missing-multi-factor-info"),(yield Bn(D,{mfaPendingCredential:ht.credential,mfaEnrollmentId:jt,phoneSignInInfo:{recaptchaToken:le}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ht}=yield Qt(D,{phoneNumber:xe.phoneNumber,recaptchaToken:le});return ht}}finally{T._reset()}})).apply(this,arguments)}function nn(){return(nn=(0,E.Z)(function*(D,y){yield Ra((0,ne.m9)(D),y)})).apply(this,arguments)}let M=(()=>{class D{constructor(T){this.providerId=D.PROVIDER_ID,this.auth=Zr(T)}verifyPhoneNumber(T,O){return Rl(this.auth,T,(0,ne.m9)(O))}static credential(T,O){return Vr._fromVerification(T,O)}static credentialFromResult(T){return D.credentialFromTaggedObject(T)}static credentialFromError(T){return D.credentialFromTaggedObject(T.customData||{})}static credentialFromTaggedObject({_tokenResponse:T}){if(!T)return null;const{phoneNumber:O,temporaryProof:le}=T;return O&&le?Vr._fromTokenResponse(O,le):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function R(D,y){return y?Oe(y):(X(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class x extends Rr{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return vn(y,this._buildIdpRequest())}_linkToIdToken(y,T){return vn(y,this._buildIdpRequest(T))}_getReauthenticationResolver(y){return vn(y,this._buildIdpRequest())}_buildIdpRequest(y){const T={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(T.idToken=y),T}}function B(D){return qs(D.auth,new x(D),D.bypassAuthState)}function J(D){const{auth:y,user:T}=D;return X(T,y,"internal-error"),ba(T,new x(D),D.bypassAuthState)}function ye(D){return Se.apply(this,arguments)}function Se(){return(Se=(0,E.Z)(function*(D){const{auth:y,user:T}=D;return X(T,y,"internal-error"),Ra(T,new x(D),D.bypassAuthState)})).apply(this,arguments)}class mt{constructor(y,T,O,le,xe=!1){this.auth=y,this.resolver=O,this.user=le,this.bypassAuthState=xe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(T)?T:[T]}execute(){var y=this;return new Promise(function(){var T=(0,E.Z)(function*(O,le){y.pendingPromise={resolve:O,reject:le};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(xe){y.reject(xe)}});return function(O,le){return T.apply(this,arguments)}}())}onAuthEvent(y){var T=this;return(0,E.Z)(function*(){const{urlResponse:O,sessionId:le,postBody:xe,tenantId:ht,error:jt,type:Sn}=y;if(jt)return void T.reject(jt);const Yn={auth:T.auth,requestUri:O,sessionId:le,tenantId:ht||void 0,postBody:xe||void 0,user:T.user,bypassAuthState:T.bypassAuthState};try{T.resolve(yield T.getIdpTask(Sn)(Yn))}catch(Dr){T.reject(Dr)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return B;case"linkViaPopup":case"linkViaRedirect":return ye;case"reauthViaPopup":case"reauthViaRedirect":return J;default:Ve(this.auth,"internal-error")}}resolve(y){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jt=new Yt(2e3,1e4);function lr(){return(lr=(0,E.Z)(function*(D,y,T){const O=Zr(D);kt(D,y,Xs);const le=R(O,T);return new Mo(O,"signInViaPopup",y,le).executeNotNull()})).apply(this,arguments)}function Jr(){return(Jr=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D);kt(O.auth,y,Xs);const le=R(O.auth,T);return new Mo(O.auth,"reauthViaPopup",y,le,O).executeNotNull()})).apply(this,arguments)}function Wi(){return(Wi=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D);kt(O.auth,y,Xs);const le=R(O.auth,T);return new Mo(O.auth,"linkViaPopup",y,le,O).executeNotNull()})).apply(this,arguments)}let Mo=(()=>{class D extends mt{constructor(T,O,le,xe,ht){super(T,O,xe,ht),this.provider=le,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var T=this;return(0,E.Z)(function*(){const O=yield T.execute();return X(O,T.auth,"internal-error"),O})()}onExecution(){var T=this;return(0,E.Z)(function*(){ge(1===T.filter.length,"Popup operations only handle one event");const O=cn();T.authWindow=yield T.resolver._openPopup(T.auth,T.provider,T.filter[0],O),T.authWindow.associatedEvent=O,T.resolver._originValidation(T.auth).catch(le=>{T.reject(le)}),T.resolver._isIframeWebStorageSupported(T.auth,le=>{le||T.reject(Xe(T.auth,"web-storage-unsupported"))}),T.pollUserCancellation()})()}get eventId(){var T;return(null===(T=this.authWindow)||void 0===T?void 0:T.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const T=()=>{var O,le;this.pollId=null!==(le=null===(O=this.authWindow)||void 0===O?void 0:O.window)&&void 0!==le&&le.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(T,Jt.get())};T()}}return D.currentPopupAction=null,D})();const ta=new Map;class Wu extends mt{constructor(y,T,O=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],T,void 0,O),this.eventId=null}execute(){var y=()=>super.execute,T=this;return(0,E.Z)(function*(){let O=ta.get(T.auth._key());if(!O){try{const xe=(yield function vu(D,y){return $o.apply(this,arguments)}(T.resolver,T.auth))?yield y().call(T):null;O=()=>Promise.resolve(xe)}catch(le){O=()=>Promise.reject(le)}ta.set(T.auth._key(),O)}return T.bypassAuthState||ta.set(T.auth._key(),()=>Promise.resolve(null)),O()})()}onAuthEvent(y){var T=()=>super.onAuthEvent,O=this;return(0,E.Z)(function*(){if("signInViaRedirect"===y.type)return T().call(O,y);if("unknown"!==y.type){if(y.eventId){const le=yield O.auth._redirectUserForId(y.eventId);if(le)return O.user=le,T().call(O,y);O.resolve(null)}}else O.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function $o(){return($o=(0,E.Z)(function*(D,y){const T=yu(y),O=Ll(D);if(!(yield O._isAvailable()))return!1;const le="true"===(yield O._get(T));return yield O._remove(T),le})).apply(this,arguments)}function cl(D,y){return ha.apply(this,arguments)}function ha(){return(ha=(0,E.Z)(function*(D,y){return Ll(D)._set(yu(y),"true")})).apply(this,arguments)}function Nl(D,y){ta.set(D._key(),y)}function Ll(D){return Oe(D._redirectPersistence)}function yu(D){return at("pendingRedirect",D.config.apiKey,D.name)}function q(){return(q=(0,E.Z)(function*(D,y,T){const O=Zr(D);kt(D,y,Xs),yield O._initializationPromise;const le=R(O,T);return yield cl(le,O),le._openRedirect(O,y,"signInViaRedirect")})).apply(this,arguments)}function Ke(){return(Ke=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D);kt(O.auth,y,Xs),yield O.auth._initializationPromise;const le=R(O.auth,T);yield cl(le,O.auth);const xe=yield Wr(O);return le._openRedirect(O.auth,y,"reauthViaRedirect",xe)})).apply(this,arguments)}function fn(){return(fn=(0,E.Z)(function*(D,y,T){const O=(0,ne.m9)(D);kt(O.auth,y,Xs),yield O.auth._initializationPromise;const le=R(O.auth,T);yield fi(!1,O,y.providerId),yield cl(le,O.auth);const xe=yield Wr(O);return le._openRedirect(O.auth,y,"linkViaRedirect",xe)})).apply(this,arguments)}function fr(){return(fr=(0,E.Z)(function*(D,y){return yield Zr(D)._initializationPromise,nr(D,y,!1)})).apply(this,arguments)}function nr(D,y){return ti.apply(this,arguments)}function ti(){return(ti=(0,E.Z)(function*(D,y,T=!1){const O=Zr(D),le=R(O,y),ht=yield new Wu(O,le,T).execute();return ht&&!T&&(delete ht.user._redirectEventId,yield O._persistUserIfCurrent(ht.user),yield O._setRedirectUser(null,y)),ht})).apply(this,arguments)}function Wr(D){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,E.Z)(function*(D){const y=cn(`${D.uid}:::`);return D._redirectEventId=y,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),y})).apply(this,arguments)}class Ti{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let T=!1;return this.consumers.forEach(O=>{this.isEventForConsumer(y,O)&&(T=!0,this.sendToConsumer(y,O),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Ss(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xa(D);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,T||(this.queuedRedirectEvent=y,T=!0)),T}sendToConsumer(y,T){var O;if(y.error&&!Xa(y)){const le=(null===(O=y.error.code)||void 0===O?void 0:O.split("auth/")[1])||"internal-error";T.onError(Xe(this.auth,le))}else T.onAuthEvent(y)}isEventForConsumer(y,T){const O=null===T.eventId||!!y.eventId&&y.eventId===T.eventId;return T.filter.includes(y.type)&&O}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oo(y))}saveEventToCache(y){this.cachedEventUids.add(Oo(y)),this.lastProcessedEventTime=Date.now()}}function Oo(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(y=>y).join("-")}function Xa({type:D,error:y}){return"unknown"===D&&"auth/no-auth-event"===y?.code}function ku(D){return ji.apply(this,arguments)}function ji(){return(ji=(0,E.Z)(function*(D,y={}){return rr(D,"GET","/v1/projects",y)})).apply(this,arguments)}const Fl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gh=/^https?/;function Yp(){return(Yp=(0,E.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:y}=yield ku(D);for(const T of y)try{if(Qp(T))return}catch{}Ve(D,"unauthorized-domain")})).apply(this,arguments)}function Qp(D){const y=wt(),{protocol:T,hostname:O}=new URL(y);if(D.startsWith("chrome-extension://")){const ht=new URL(D);return""===ht.hostname&&""===O?"chrome-extension:"===T&&D.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===T&&ht.hostname===O}if(!Gh.test(T))return!1;if(Fl.test(D))return O===D;const le=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+le+"|"+le+")$","i").test(O)}const Gv=new Yt(3e4,6e4);function Vf(){const D=ci().___jsl;if(D?.H)for(const y of Object.keys(D.H))if(D.H[y].r=D.H[y].r||[],D.H[y].L=D.H[y].L||[],D.H[y].r=[...D.H[y].L],D.CP)for(let T=0;T<D.CP.length;T++)D.CP[T]=null}let uc=null;function $v(D){return uc=uc||function _m(D){return new Promise((y,T)=>{var O,le,xe;function ht(){Vf(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{Vf(),T(Xe(D,"network-request-failed"))},timeout:Gv.get()})}if(null!==(le=null===(O=ci().gapi)||void 0===O?void 0:O.iframes)&&void 0!==le&&le.Iframe)y(gapi.iframes.getContext());else{if(null===(xe=ci().gapi)||void 0===xe||!xe.load){const jt=Qs("iframefcb");return ci()[jt]=()=>{gapi.load?ht():T(Xe(D,"network-request-failed"))},En(`https://apis.google.com/js/api.js?onload=${jt}`).catch(Sn=>T(Sn))}ht()}}).catch(y=>{throw uc=null,y})}(D),uc}const zv=new Yt(5e3,15e3),Ro={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ua(D){const y=D.config;X(y.authDomain,D,"auth-domain-config-required");const T=y.emulator?$t(y,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,O={apiKey:y.apiKey,appName:D.name,v:F.SDK_VERSION},le=Hf.get(D.config.apiHost);le&&(O.eid=le);const xe=D._getFrameworks();return xe.length&&(O.fw=xe.join(",")),`${T}?${(0,ne.xO)(O).slice(1)}`}function $h(){return $h=(0,E.Z)(function*(D){const y=yield $v(D),T=ci().gapi;return X(T,D,"internal-error"),y.open({where:document.body,url:Ua(D),messageHandlersFilter:T.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ro,dontclear:!0},O=>new Promise(function(){var le=(0,E.Z)(function*(xe,ht){yield O.restyle({setHideOnLeave:!1});const jt=Xe(D,"network-request-failed"),Sn=ci().setTimeout(()=>{ht(jt)},zv.get());function Yn(){ci().clearTimeout(Sn),xe(O)}O.ping(Yn).then(Yn,()=>{ht(jt)})});return function(xe,ht){return le.apply(this,arguments)}}()))}),$h.apply(this,arguments)}const dl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class du{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hl(D,y,T,O,le,xe){X(D.config.authDomain,D,"auth-domain-config-required"),X(D.config.apiKey,D,"invalid-api-key");const ht={apiKey:D.config.apiKey,appName:D.name,authType:T,redirectUrl:O,v:F.SDK_VERSION,eventId:le};if(y instanceof Xs){y.setDefaultLanguage(D.languageCode),ht.providerId=y.providerId||"",(0,ne.xb)(y.getCustomParameters())||(ht.customParameters=JSON.stringify(y.getCustomParameters()));for(const[Sn,Yn]of Object.entries(xe||{}))ht[Sn]=Yn}if(y instanceof Fo){const Sn=y.getScopes().filter(Yn=>""!==Yn);Sn.length>0&&(ht.scopes=Sn.join(","))}D.tenantId&&(ht.tid=D.tenantId);const jt=ht;for(const Sn of Object.keys(jt))void 0===jt[Sn]&&delete jt[Sn];return`${function qh({config:D}){return D.emulator?$t(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,ne.xO)(jt).slice(1)}`}const Wh="webStorageSupport",hu=class Ul{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xr,this._completeRedirectFn=nr,this._overrideRedirectResult=Nl}_openPopup(y,T,O,le){var xe=this;return(0,E.Z)(function*(){var ht;ge(null===(ht=xe.eventManagers[y._key()])||void 0===ht?void 0:ht.manager,"_initialize() not called before _openPopup()");const jt=hl(y,T,O,wt(),le);return function Gf(D,y,T,O=500,le=600){const xe=Math.max((window.screen.availHeight-le)/2,0).toString(),ht=Math.max((window.screen.availWidth-O)/2,0).toString();let jt="";const Sn=Object.assign(Object.assign({},dl),{width:O.toString(),height:le.toString(),top:xe,left:ht}),Yn=(0,ne.z$)().toLowerCase();T&&(jt=Br(Yn)?"_blank":T),Tn(Yn)&&(y=y||"http://localhost",Sn.scrollbars="yes");const Dr=Object.entries(Sn).reduce((ao,[pu,_d])=>`${ao}${pu}=${_d},`,"");if(function bt(D=(0,ne.z$)()){var y;return me(D)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(Yn)&&"_self"!==jt)return function pa(D,y){const T=document.createElement("a");T.href=D,T.target=y;const O=document.createEvent("MouseEvent");O.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),T.dispatchEvent(O)}(y||"",jt),new du(null);const hr=window.open(y||"",jt,Dr);X(hr,D,"popup-blocked");try{hr.focus()}catch{}return new du(hr)}(y,jt,cn())})()}_openRedirect(y,T,O,le){var xe=this;return(0,E.Z)(function*(){return yield xe._originValidation(y),function Io(D){ci().location.href=D}(hl(y,T,O,wt(),le)),new Promise(()=>{})})()}_initialize(y){const T=y._key();if(this.eventManagers[T]){const{manager:le,promise:xe}=this.eventManagers[T];return le?Promise.resolve(le):(ge(xe,"If manager is not set, promise should be"),xe)}const O=this.initAndGetManager(y);return this.eventManagers[T]={promise:O},O.catch(()=>{delete this.eventManagers[T]}),O}initAndGetManager(y){var T=this;return(0,E.Z)(function*(){const O=yield function es(D){return $h.apply(this,arguments)}(y),le=new Ti(y);return O.register("authEvent",xe=>(X(xe?.authEvent,y,"invalid-auth-event"),{status:le.onEvent(xe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),T.eventManagers[y._key()]={manager:le},T.iframes[y._key()]=O,le})()}_isIframeWebStorageSupported(y,T){this.iframes[y._key()].send(Wh,{type:Wh},le=>{var xe;const ht=null===(xe=le?.[0])||void 0===xe?void 0:xe[Wh];void 0!==ht&&T(!!ht),Ve(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const T=y._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function ad(D){return Yp.apply(this,arguments)}(y)),this.originValidationPromises[T]}get _shouldInitProactively(){return On()||cr()||me()}};class Rc{constructor(y){this.factorId=y}_process(y,T,O){switch(T.type){case"enroll":return this._finalizeEnroll(y,T.credential,O);case"signin":return this._finalizeSignIn(y,T.credential);default:return ve("unexpected MultiFactorSessionType")}}}class Kh extends Rc{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Kh(y)}_finalizeEnroll(y,T,O){return function Su(D,y){return rr(D,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(D,y))}(y,{idToken:T,displayName:O,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,T){return function Ls(D,y){return rr(D,"POST","/v2/accounts/mfaSignIn:finalize",Gt(D,y))}(y,{mfaPendingCredential:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Da=(()=>{class D{constructor(){}static assertion(T){return Kh._fromCredential(T)}}return D.FACTOR_ID="phone",D})();var lc="@firebase/auth";class Bl{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var T=this;return(0,E.Z)(function*(){return T.assertAuthConfigured(),yield T.auth._initializationPromise,T.auth.currentUser?{accessToken:yield T.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const T=this.auth.onIdTokenChanged(O=>{y(O?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,T),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const T=this.internalListeners.get(y);!T||(this.internalListeners.delete(y),T(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vl(){return window}function ld(){return(ld=(0,E.Z)(function*(D,y,T){var O;const{BuildInfo:le}=Vl();ge(y.sessionId,"AuthEvent did not contain a session ID");const xe=yield Lc(y.sessionId),ht={};return me()?ht.ibi=le.packageName:pe()?ht.apn=le.packageName:Ve(D,"operation-not-supported-in-this-environment"),le.displayName&&(ht.appDisplayName=le.displayName),ht.sessionId=xe,hl(D,T,y.type,void 0,null!==(O=y.eventId)&&void 0!==O?O:void 0,ht)})).apply(this,arguments)}function cd(){return(cd=(0,E.Z)(function*(D){const{BuildInfo:y}=Vl(),T={};me()?T.iosBundleId=y.packageName:pe()?T.androidPackageName=y.packageName:Ve(D,"operation-not-supported-in-this-environment"),yield ku(D,T)})).apply(this,arguments)}function dc(){return(dc=(0,E.Z)(function*(D,y,T){const{cordova:O}=Vl();let le=()=>{};try{yield new Promise((xe,ht)=>{let jt=null;function Sn(){var hr;xe();const ao=null===(hr=O.plugins.browsertab)||void 0===hr?void 0:hr.close;"function"==typeof ao&&ao(),"function"==typeof T?.close&&T.close()}function Yn(){jt||(jt=window.setTimeout(()=>{ht(Xe(D,"redirect-cancelled-by-user"))},2e3))}function Dr(){"visible"===document?.visibilityState&&Yn()}y.addPassiveListener(Sn),document.addEventListener("resume",Yn,!1),pe()&&document.addEventListener("visibilitychange",Dr,!1),le=()=>{y.removePassiveListener(Sn),document.removeEventListener("resume",Yn,!1),document.removeEventListener("visibilitychange",Dr,!1),jt&&window.clearTimeout(jt)}})}finally{le()}})).apply(this,arguments)}function Lc(D){return _u.apply(this,arguments)}function _u(){return(_u=(0,E.Z)(function*(D){const y=nh(D),T=yield crypto.subtle.digest("SHA-256",y);return Array.from(new Uint8Array(T)).map(le=>le.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function nh(D){if(ge(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const y=new ArrayBuffer(D.length),T=new Uint8Array(y);for(let O=0;O<D.length;O++)T[O]=D.charCodeAt(O);return T}(0,ne.Pz)("authIdTokenMaxAge"),function Mu(D){(0,F._registerComponent)(new ae.wA("auth",(y,{options:T})=>{const O=y.getProvider("app").getImmediate(),le=y.getProvider("heartbeat"),{apiKey:xe,authDomain:ht}=O.options;return((jt,Sn)=>{X(xe&&!xe.includes(":"),"invalid-api-key",{appName:jt.name}),X(!ht?.includes(":"),"argument-error",{appName:jt.name});const Yn={apiKey:xe,authDomain:ht,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nr(D)},Dr=new Yi(jt,Sn,Yn);return function dt(D,y){const T=y?.persistence||[],O=(Array.isArray(T)?T:[T]).map(Oe);y?.errorMap&&D._updateErrorMap(y.errorMap),D._initializeWithPersistence(O,y?.popupRedirectResolver)}(Dr,T),Dr})(O,le)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,T,O)=>{y.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new ae.wA("auth-internal",y=>{const T=Zr(y.getProvider("auth").getImmediate());return new Bl(T)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(lc,"0.21.1",function _s(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,F.registerVersion)(lc,"0.21.1","esm2017")}("Browser");class hc extends Ti{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(y=>{this.resolveInialized=y})}addPassiveListener(y){this.passiveListeners.add(y)}removePassiveListener(y){this.passiveListeners.delete(y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(y){return this.resolveInialized(),this.passiveListeners.forEach(T=>T(y)),super.onEvent(y)}initialized(){var y=this;return(0,E.Z)(function*(){yield y.initPromise})()}}function Wf(D){return pl.apply(this,arguments)}function pl(){return(pl=(0,E.Z)(function*(D){const y=yield Vs()._get(Fc(D));return y&&(yield Vs()._remove(Fc(D))),y})).apply(this,arguments)}function Jp(){const D=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<20;T++){const O=Math.floor(Math.random()*y.length);D.push(y.charAt(O))}return D.join("")}function Vs(){return Oe(kr)}function Fc(D){return at("authEvent",D.config.apiKey,D.name)}function jc(D){if(!D?.includes("?"))return{};const[y,...T]=D.split("?");return(0,ne.zd)(T.join("?"))}const pc=class eg{constructor(){this._redirectPersistence=Xr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nr,this._overrideRedirectResult=Nl}_initialize(y){var T=this;return(0,E.Z)(function*(){const O=y._key();let le=T.eventManagers.get(O);return le||(le=new hc(y),T.eventManagers.set(O,le),T.attachCallbackListeners(y,le)),le})()}_openPopup(y){Ve(y,"operation-not-supported-in-this-environment")}_openRedirect(y,T,O,le){var xe=this;return(0,E.Z)(function*(){!function th(D){var y,T,O,le,xe,ht,jt,Sn,Yn,Dr;const hr=Vl();X("function"==typeof(null===(y=hr?.universalLinks)||void 0===y?void 0:y.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(T=hr?.BuildInfo)||void 0===T?void 0:T.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(xe=null===(le=null===(O=hr?.cordova)||void 0===O?void 0:O.plugins)||void 0===le?void 0:le.browsertab)||void 0===xe?void 0:xe.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Sn=null===(jt=null===(ht=hr?.cordova)||void 0===ht?void 0:ht.plugins)||void 0===jt?void 0:jt.browsertab)||void 0===Sn?void 0:Sn.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Dr=null===(Yn=hr?.cordova)||void 0===Yn?void 0:Yn.InAppBrowser)||void 0===Dr?void 0:Dr.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(y);const ht=yield xe._initialize(y);yield ht.initialized(),ht.resetRedirect(),function Qd(){ta.clear()}(),yield xe._originValidation(y);const jt=function fc(D,y,T=null){return{type:y,eventId:T,urlResponse:null,sessionId:Jp(),postBody:null,tenantId:D.tenantId,error:Xe(D,"no-auth-event")}}(y,O,le);yield function qf(D,y){return Vs()._set(Fc(D),y)}(y,jt);const Sn=yield function eh(D,y,T){return ld.apply(this,arguments)}(y,jt,T),Yn=yield function dd(D){const{cordova:y}=Vl();return new Promise(T=>{y.plugins.browsertab.isAvailable(O=>{let le=null;O?y.plugins.browsertab.openUrl(D):le=y.InAppBrowser.open(D,function ze(D=(0,ne.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),T(le)})})}(Sn);return function zf(D,y,T){return dc.apply(this,arguments)}(y,ht,Yn)})()}_isIframeWebStorageSupported(y,T){throw new Error("Method not implemented.")}_originValidation(y){const T=y._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function Qh(D){return cd.apply(this,arguments)}(y)),this.originValidationPromises[T]}attachCallbackListeners(y,T){const{universalLinks:O,handleOpenURL:le,BuildInfo:xe}=Vl(),ht=setTimeout((0,E.Z)(function*(){yield Wf(y),T.onEvent(Ku())}),500),jt=function(){var Dr=(0,E.Z)(function*(hr){clearTimeout(ht);const ao=yield Wf(y);let pu=null;ao&&hr?.url&&(pu=function Xh(D,y){var T,O;const le=function Kf(D){const y=jc(D),T=y.link?decodeURIComponent(y.link):void 0,O=jc(T).link,le=y.deep_link_id?decodeURIComponent(y.deep_link_id):void 0;return jc(le).link||le||O||T||D}(y);if(le.includes("/__/auth/callback")){const xe=jc(le),ht=xe.firebaseError?function rh(D){try{return JSON.parse(D)}catch{return null}}(decodeURIComponent(xe.firebaseError)):null,jt=null===(O=null===(T=ht?.code)||void 0===T?void 0:T.split("auth/"))||void 0===O?void 0:O[1],Sn=jt?Xe(jt):null;return Sn?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:Sn,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:le,postBody:null}}return null}(ao,hr.url)),T.onEvent(pu||Ku())});return function(ao){return Dr.apply(this,arguments)}}();typeof O<"u"&&"function"==typeof O.subscribe&&O.subscribe(null,jt);const Sn=le,Yn=`${xe.packageName.toLowerCase()}://`;Vl().handleOpenURL=function(){var Dr=(0,E.Z)(function*(hr){if(hr.toLowerCase().startsWith(Yn)&&jt({url:hr}),"function"==typeof Sn)try{Sn(hr)}catch(ao){console.error(ao)}});return function(hr){return Dr.apply(this,arguments)}}()}};function Ku(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}function bu(){var D;return(null===(D=self?.location)||void 0===D?void 0:D.protocol)||null}function ef(D=(0,ne.z$)()){return!("file:"!==bu()&&"ionic:"!==bu()&&"capacitor:"!==bu()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zu(){try{const D=self.localStorage,y=cn();if(D)return D.setItem(y,"1"),D.removeItem(y),!function nf(D=(0,ne.z$)()){return function Ii(){return(0,ne.w1)()&&11===document?.documentMode}()||function tf(D=(0,ne.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,ne.hl)()}catch{return fd()&&(0,ne.hl)()}return!1}function fd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function na(){return(function hd(){return"http:"===bu()||"https:"===bu()}()||(0,ne.ru)()||ef())&&!function No(){return(0,ne.b$)()||(0,ne.UG)()}()&&Zu()&&!fd()}function ih(){return ef()&&typeof document<"u"}function vl(){return(vl=(0,E.Z)(function*(){return!!ih()&&new Promise(D=>{const y=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(y),D(!0)})})})).apply(this,arguments)}const ga={LOCAL:"local",NONE:"none",SESSION:"session"},Ru=X,sh="persistence";function ri(D){return oh.apply(this,arguments)}function oh(){return(oh=(0,E.Z)(function*(D){yield D._initializationPromise;const y=Uc(),T=at(sh,D.config.apiKey,D.name);y&&y.setItem(T,D._getPersistence())})).apply(this,arguments)}function Uc(){var D;try{return(null===(D=function Ou(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch{return null}}const gd=X;class fu{constructor(){this.browserResolver=Oe(hu),this.cordovaResolver=Oe(pc),this.underlyingResolver=null,this._redirectPersistence=Xr,this._completeRedirectFn=nr,this._overrideRedirectResult=Nl}_initialize(y){var T=this;return(0,E.Z)(function*(){return yield T.selectUnderlyingResolver(),T.assertedUnderlyingResolver._initialize(y)})()}_openPopup(y,T,O,le){var xe=this;return(0,E.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openPopup(y,T,O,le)})()}_openRedirect(y,T,O,le){var xe=this;return(0,E.Z)(function*(){return yield xe.selectUnderlyingResolver(),xe.assertedUnderlyingResolver._openRedirect(y,T,O,le)})()}_isIframeWebStorageSupported(y,T){this.assertedUnderlyingResolver._isIframeWebStorageSupported(y,T)}_originValidation(y){return this.assertedUnderlyingResolver._originValidation(y)}get _shouldInitProactively(){return ih()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var y=this;return(0,E.Z)(function*(){if(y.underlyingResolver)return;const T=yield function mc(){return vl.apply(this,arguments)}();y.underlyingResolver=T?y.cordovaResolver:y.browserResolver})()}}function md(D){return D.unwrap()}function yl(D){return Zf(D)}function Zf(D){const{_tokenResponse:y}=D instanceof ne.ZR?D.customData:D;if(!y)return null;if(!(D instanceof ne.ZR)&&"temporaryProof"in y&&"phoneNumber"in y)return M.credentialFromResult(D);const T=y.providerId;if(!T||"password"===T)return null;let O;switch(T){case"google.com":O=Oa;break;case"facebook.com":O=ya;break;case"github.com":O=qa;break;case"twitter.com":O=Us;break;default:const{oauthIdToken:le,oauthAccessToken:xe,oauthTokenSecret:ht,pendingToken:jt,nonce:Sn}=y;return xe||ht||le||jt?jt?T.startsWith("saml.")?ho._create(T,jt):ft._fromParams({providerId:T,signInMethod:T,pendingToken:jt,idToken:le,accessToken:xe}):new Ma(T).credential({idToken:le,accessToken:xe,rawNonce:Sn}):null}return D instanceof ne.ZR?O.credentialFromError(D):O.credentialFromResult(D)}function Ja(D,y){return y.catch(T=>{throw T instanceof ne.ZR&&function vc(D,y){var T;const O=null===(T=y.customData)||void 0===T?void 0:T._tokenResponse;if("auth/multi-factor-auth-required"===y?.code)y.resolver=new Qf(D,function Ir(D,y){var T;const O=(0,ne.m9)(D),le=y;return X(y.customData.operationType,O,"argument-error"),X(null===(T=le.customData._serverResponse)||void 0===T?void 0:T.mfaPendingCredential,O,"argument-error"),bo._fromError(O,le)}(D,y));else if(O){const le=Zf(y),xe=y;le&&(xe.credential=le,xe.tenantId=O.tenantId||void 0,xe.email=O.email||void 0,xe.phoneNumber=O.phoneNumber||void 0)}}(D,T),T}).then(T=>{const le=T.user;return{operationType:T.operationType,credential:yl(T),additionalUserInfo:Hu(T),user:$l.getOrCreate(le)}})}function tg(D,y){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,E.Z)(function*(D,y){const T=yield y;return{verificationId:T.verificationId,confirm:O=>Ja(D,T.confirm(O))}})).apply(this,arguments)}class Qf{constructor(y,T){this.resolver=T,this.auth=function vd(D){return D.wrapped()}(y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(y){return Ja(md(this.auth),this.resolver.resolveSignIn(y))}}class $l{constructor(y){this._delegate=y,this.multiFactor=function Te(D){const y=(0,ne.m9)(D);return G.has(y)||G.set(y,ue._fromUser(y)),G.get(y)}(y)}static getOrCreate(y){return $l.USER_MAP.has(y)||$l.USER_MAP.set(y,new $l(y)),$l.USER_MAP.get(y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(y){return this._delegate.getIdTokenResult(y)}getIdToken(y){return this._delegate.getIdToken(y)}linkAndRetrieveDataWithCredential(y){return this.linkWithCredential(y)}linkWithCredential(y){var T=this;return(0,E.Z)(function*(){return Ja(T.auth,cs(T._delegate,y))})()}linkWithPhoneNumber(y,T){var O=this;return(0,E.Z)(function*(){return tg(O.auth,function ds(D,y,T){return od.apply(this,arguments)}(O._delegate,y,T))})()}linkWithPopup(y){var T=this;return(0,E.Z)(function*(){return Ja(T.auth,function da(D,y,T){return Wi.apply(this,arguments)}(T._delegate,y,fu))})()}linkWithRedirect(y){var T=this;return(0,E.Z)(function*(){return yield ri(Zr(T.auth)),function Tt(D,y,T){return function Lt(D,y,T){return fn.apply(this,arguments)}(D,y,T)}(T._delegate,y,fu)})()}reauthenticateAndRetrieveDataWithCredential(y){return this.reauthenticateWithCredential(y)}reauthenticateWithCredential(y){var T=this;return(0,E.Z)(function*(){return Ja(T.auth,Vo(T._delegate,y))})()}reauthenticateWithPhoneNumber(y,T){return tg(this.auth,function qi(D,y,T){return Mc.apply(this,arguments)}(this._delegate,y,T))}reauthenticateWithPopup(y){return Ja(this.auth,function ni(D,y,T){return Jr.apply(this,arguments)}(this._delegate,y,fu))}reauthenticateWithRedirect(y){var T=this;return(0,E.Z)(function*(){return yield ri(Zr(T.auth)),function Q(D,y,T){return function be(D,y,T){return Ke.apply(this,arguments)}(D,y,T)}(T._delegate,y,fu)})()}sendEmailVerification(y){return function Xi(D,y){return Oi.apply(this,arguments)}(this._delegate,y)}unlink(y){var T=this;return(0,E.Z)(function*(){return yield function hi(D,y){return fo.apply(this,arguments)}(T._delegate,y),T})()}updateEmail(y){return function yo(D,y){return oa((0,ne.m9)(D),y,null)}(this._delegate,y)}updatePassword(y){return function Ho(D,y){return oa((0,ne.m9)(D),null,y)}(this._delegate,y)}updatePhoneNumber(y){return function ll(D,y){return nn.apply(this,arguments)}(this._delegate,y)}updateProfile(y){return function Zs(D,y){return Es.apply(this,arguments)}(this._delegate,y)}verifyBeforeUpdateEmail(y,T){return function Ts(D,y,T){return ar.apply(this,arguments)}(this._delegate,y,T)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$l.USER_MAP=new WeakMap;const Tu=X;let yd=(()=>{class D{constructor(T,O){if(this.app=T,O.isInitialized())return this._delegate=O.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:le}=T.options;Tu(le,"invalid-api-key",{appName:T.name}),Tu(le,"invalid-api-key",{appName:T.name});const xe=typeof window<"u"?fu:void 0;this._delegate=O.initialize({options:{persistence:To(le,T.name),popupRedirectResolver:xe}}),this._delegate._updateErrorMap(_t),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$l.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(T){this._delegate.languageCode=T}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(T){this._delegate.tenantId=T}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(T,O){!function Lr(D,y,T){const O=Zr(D);X(O._canInitEmulator,O,"emulator-config-failed"),X(/^https?:\/\//.test(y),O,"invalid-emulator-scheme");const le=!!T?.disableWarnings,xe=ns(y),{host:ht,port:jt}=function rs(D){const y=ns(D),T=/(\/\/)?([^?#/]+)/.exec(D.substr(y.length));if(!T)return{host:"",port:null};const O=T[2].split("@").pop()||"",le=/^(\[[^\]]+\])(:|$)/.exec(O);if(le){const xe=le[1];return{host:xe,port:tr(O.substr(xe.length+1))}}{const[xe,ht]=O.split(":");return{host:xe,port:tr(ht)}}}(y);O.config.emulator={url:`${xe}//${ht}${null===jt?"":`:${jt}`}/`},O.settings.appVerificationDisabledForTesting=!0,O.emulatorConfig=Object.freeze({host:ht,port:jt,protocol:xe.replace(":",""),options:Object.freeze({disableWarnings:le})}),le||function Gi(){function D(){const y=document.createElement("p"),T=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",T.position="fixed",T.width="100%",T.backgroundColor="#ffffff",T.border=".1em solid #000000",T.color="#b50000",T.bottom="0px",T.left="0px",T.margin="0px",T.zIndex="10000",T.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,T,O)}applyActionCode(T){return function mu(D,y){return te.apply(this,arguments)}(this._delegate,T)}checkActionCode(T){return K(this._delegate,T)}confirmPasswordReset(T,O){return function vo(D,y,T){return Sr.apply(this,arguments)}(this._delegate,T,O)}createUserWithEmailAndPassword(T,O){var le=this;return(0,E.Z)(function*(){return Ja(le._delegate,function Ie(D,y,T){return tt.apply(this,arguments)}(le._delegate,T,O))})()}fetchProvidersForEmail(T){return this.fetchSignInMethodsForEmail(T)}fetchSignInMethodsForEmail(T){return function Ni(D,y){return Ar.apply(this,arguments)}(this._delegate,T)}isSignInWithEmailLink(T){return function qt(D,y){return"EMAIL_SIGNIN"===Yo.parseLink(y)?.operation}(0,T)}getRedirectResult(){var T=this;return(0,E.Z)(function*(){Tu(na(),T._delegate,"operation-not-supported-in-this-environment");const O=yield function Zn(D,y){return fr.apply(this,arguments)}(T._delegate,fu);return O?Ja(T._delegate,Promise.resolve(O)):{credential:null,user:null}})()}addFrameworkForLogging(T){!function gl(D,y){Zr(D)._logFramework(y)}(this._delegate,T)}onAuthStateChanged(T,O,le){const{next:xe,error:ht,complete:jt}=uh(T,O,le);return this._delegate.onAuthStateChanged(xe,ht,jt)}onIdTokenChanged(T,O,le){const{next:xe,error:ht,complete:jt}=uh(T,O,le);return this._delegate.onIdTokenChanged(xe,ht,jt)}sendSignInLinkToEmail(T,O){return function Ut(D,y,T){return Fn.apply(this,arguments)}(this._delegate,T,O)}sendPasswordResetEmail(T,O){return function mo(D,y,T){return ro.apply(this,arguments)}(this._delegate,T,O||void 0)}setPersistence(T){var O=this;return(0,E.Z)(function*(){let le;switch(function pd(D,y){Ru(Object.values(ga).includes(y),D,"invalid-persistence-type"),(0,ne.b$)()?Ru(y!==ga.SESSION,D,"unsupported-persistence-type"):(0,ne.UG)()?Ru(y===ga.NONE,D,"unsupported-persistence-type"):fd()?Ru(y===ga.NONE||y===ga.LOCAL&&(0,ne.hl)(),D,"unsupported-persistence-type"):Ru(y===ga.NONE||Zu(),D,"unsupported-persistence-type")}(O._delegate,T),T){case ga.SESSION:le=Xr;break;case ga.LOCAL:le=(yield Oe(Ji)._isAvailable())?Ji:kr;break;case ga.NONE:le=Ye;break;default:return Ve("argument-error",{appName:O._delegate.name})}return O._delegate.setPersistence(le)})()}signInAndRetrieveDataWithCredential(T){return this.signInWithCredential(T)}signInAnonymously(){return Ja(this._delegate,function sa(D){return Qo.apply(this,arguments)}(this._delegate))}signInWithCredential(T){return Ja(this._delegate,_i(this._delegate,T))}signInWithCustomToken(T){return Ja(this._delegate,function Ks(D,y){return Ns.apply(this,arguments)}(this._delegate,T))}signInWithEmailAndPassword(T,O){return Ja(this._delegate,function Ge(D,y,T){return _i((0,ne.m9)(D),Lo.credential(y,T))}(this._delegate,T,O))}signInWithEmailLink(T,O){return Ja(this._delegate,function Un(D,y,T){return $r.apply(this,arguments)}(this._delegate,T,O))}signInWithPhoneNumber(T,O){return tg(this._delegate,function as(D,y,T){return cu.apply(this,arguments)}(this._delegate,T,O))}signInWithPopup(T){var O=this;return(0,E.Z)(function*(){return Tu(na(),O._delegate,"operation-not-supported-in-this-environment"),Ja(O._delegate,function wn(D,y,T){return lr.apply(this,arguments)}(O._delegate,T,fu))})()}signInWithRedirect(T){var O=this;return(0,E.Z)(function*(){return Tu(na(),O._delegate,"operation-not-supported-in-this-environment"),yield ri(O._delegate),function ac(D,y,T){return function Pu(D,y,T){return q.apply(this,arguments)}(D,y,T)}(O._delegate,T,fu)})()}updateCurrentUser(T){return this._delegate.updateCurrentUser(T)}verifyPasswordResetCode(T){return function k(D,y){return ce.apply(this,arguments)}(this._delegate,T)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=ga,D})();function uh(D,y,T){let O=D;"function"!=typeof D&&({next:O,error:y,complete:T}=D);const le=O;return{next:ht=>le(ht&&$l.getOrCreate(ht)),error:y,complete:T}}function To(D,y){const T=function ah(D,y){const T=Uc();if(!T)return[];const O=at(sh,D,y);switch(T.getItem(O)){case ga.NONE:return[Ye];case ga.LOCAL:return[Ji,Xr];case ga.SESSION:return[Xr];default:return[]}}(D,y);if(typeof self<"u"&&!T.includes(Ji)&&T.push(Ji),typeof window<"u")for(const O of[kr,Xr])T.includes(O)||T.push(O);return T.includes(Ye)||T.push(Ye),T}class Bc{constructor(){this.providerId="phone",this._delegate=new M(md(ie.Z.auth()))}static credential(y,T){return M.credential(y,T)}verifyPhoneNumber(y,T){return this._delegate.verifyPhoneNumber(y,T)}unwrap(){return this._delegate}}Bc.PHONE_SIGN_IN_METHOD=M.PHONE_SIGN_IN_METHOD,Bc.PROVIDER_ID=M.PROVIDER_ID;const Xf=X;class Yu{constructor(y,T,O=ie.Z.app()){var le;Xf(null===(le=O.options)||void 0===le?void 0:le.apiKey,"invalid-api-key",{appName:O.name}),this._delegate=new Ft(y,T,O.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function lh(D){D.INTERNAL.registerComponent(new ae.wA("auth-compat",y=>{const T=y.getProvider("app-compat").getImmediate(),O=y.getProvider("auth");return new yd(T,O)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Lo,FacebookAuthProvider:ya,GithubAuthProvider:qa,GoogleAuthProvider:Oa,OAuthProvider:Ma,SAMLAuthProvider:zs,PhoneAuthProvider:Bc,PhoneMultiFactorGenerator:Da,RecaptchaVerifier:Yu,TwitterAuthProvider:Us,Auth:yd,AuthCredential:Rr,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.3.1")}(ie.Z)},8766:(Wt,et,W)=>{"use strict";W.d(et,{Lj:()=>Ve,X3:()=>Et});var E=W(5861);let ne,F;const ae=new WeakMap,He=new WeakMap,Ae=new WeakMap,De=new WeakMap,Ee=new WeakMap;let rt={get(X,ve,ge){if(X instanceof IDBTransaction){if("done"===ve)return He.get(X);if("objectStoreNames"===ve)return X.objectStoreNames||Ae.get(X);if("store"===ve)return ge.objectStoreNames[1]?void 0:ge.objectStore(ge.objectStoreNames[0])}return ut(X[ve])},set:(X,ve,ge)=>(X[ve]=ge,!0),has:(X,ve)=>X instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in X};function Fe(X){return"function"==typeof X?function St(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...ve){return X.apply(st(this),ve),ut(ae.get(this))}:function(...ve){return ut(X.apply(st(this),ve))}:function(ve,...ge){const Le=X.call(st(this),ve,...ge);return Ae.set(Le,ve.sort?ve.sort():[ve]),ut(Le)}}(X):(X instanceof IDBTransaction&&function $e(X){if(He.has(X))return;const ve=new Promise((ge,Le)=>{const Oe=()=>{X.removeEventListener("complete",qe),X.removeEventListener("error",dt),X.removeEventListener("abort",dt)},qe=()=>{ge(),Oe()},dt=()=>{Le(X.error||new DOMException("AbortError","AbortError")),Oe()};X.addEventListener("complete",qe),X.addEventListener("error",dt),X.addEventListener("abort",dt)});He.set(X,ve)}(X),((X,ve)=>ve.some(ge=>X instanceof ge))(X,function Ne(){return ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,rt):X)}function ut(X){if(X instanceof IDBRequest)return function Me(X){const ve=new Promise((ge,Le)=>{const Oe=()=>{X.removeEventListener("success",qe),X.removeEventListener("error",dt)},qe=()=>{ge(ut(X.result)),Oe()},dt=()=>{Le(X.error),Oe()};X.addEventListener("success",qe),X.addEventListener("error",dt)});return ve.then(ge=>{ge instanceof IDBCursor&&ae.set(ge,X)}).catch(()=>{}),Ee.set(ve,X),ve}(X);if(De.has(X))return De.get(X);const ve=Fe(X);return ve!==X&&(De.set(X,ve),Ee.set(ve,X)),ve}const st=X=>Ee.get(X);function Et(X,ve,{blocked:ge,upgrade:Le,blocking:Oe,terminated:qe}={}){const dt=indexedDB.open(X,ve),wt=ut(dt);return Le&&dt.addEventListener("upgradeneeded",vt=>{Le(ut(dt.result),vt.oldVersion,vt.newVersion,ut(dt.transaction))}),ge&&dt.addEventListener("blocked",()=>ge()),wt.then(vt=>{qe&&vt.addEventListener("close",()=>qe()),Oe&&vt.addEventListener("versionchange",()=>Oe())}).catch(()=>{}),wt}function Ve(X,{blocked:ve}={}){const ge=indexedDB.deleteDatabase(X);return ve&&ge.addEventListener("blocked",()=>ve()),ut(ge).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],kt=new Map;function xt(X,ve){if(!(X instanceof IDBDatabase)||ve in X||"string"!=typeof ve)return;if(kt.get(ve))return kt.get(ve);const ge=ve.replace(/FromIndex$/,""),Le=ve!==ge,Oe=gt.includes(ge);if(!(ge in(Le?IDBIndex:IDBObjectStore).prototype)||!Oe&&!Xe.includes(ge))return;const qe=function(){var dt=(0,E.Z)(function*(wt,...vt){const Mt=this.transaction(wt,Oe?"readwrite":"readonly");let Rt=Mt.store;return Le&&(Rt=Rt.index(vt.shift())),(yield Promise.all([Rt[ge](...vt),Oe&&Mt.done]))[0]});return function(vt){return dt.apply(this,arguments)}}();return kt.set(ve,qe),qe}!function _t(X){rt=X(rt)}(X=>({...X,get:(ve,ge,Le)=>xt(ve,ge)||X.get(ve,ge,Le),has:(ve,ge)=>!!xt(ve,ge)||X.has(ve,ge)}))},5861:(Wt,et,W)=>{"use strict";function E(ne,F,Ne,Be,ae,He,Ae){try{var De=ne[He](Ae),Ee=De.value}catch(Me){return void Ne(Me)}De.done?F(Ee):Promise.resolve(Ee).then(Be,ae)}function ie(ne){return function(){var F=this,Ne=arguments;return new Promise(function(Be,ae){var He=ne.apply(F,Ne);function Ae(Ee){E(He,Be,ae,Ae,De,"next",Ee)}function De(Ee){E(He,Be,ae,Ae,De,"throw",Ee)}Ae(void 0)})}}W.d(et,{Z:()=>ie})}},Wt=>{Wt(Wt.s=1517)}]);